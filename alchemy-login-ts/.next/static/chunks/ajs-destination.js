"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["ajs-destination"],{

/***/ "(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPlanEventEnabled: function() { return /* binding */ isPlanEventEnabled; }\n/* harmony export */ });\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nfunction isPlanEventEnabled(plan, planEvent) {\n    var _a, _b;\n    // Always prioritize the event's `enabled` status\n    if (typeof (planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) === 'boolean') {\n        return planEvent.enabled;\n    }\n    // Assume absence of a tracking plan means events are enabled\n    return (_b = (_a = plan === null || plan === void 0 ? void 0 : plan.__default) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n}\n//# sourceMappingURL=is-plan-event-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvaXMtcGxhbi1ldmVudC1lbmFibGVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZC5qcz9iOTQ2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgdHJhY2sgZXZlbnQgaXMgYWxsb3dlZCB0byBiZSBzZW50IGJhc2VkIG9uIHRoZVxuICogdXNlcidzIHRyYWNraW5nIHBsYW4uXG4gKiBJZiB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgdHJhY2tpbmcgcGxhbiBvciB0aGUgZXZlbnQgaXMgYWxsb3dlZCBiYXNlZFxuICogb24gdGhlIHRyYWNraW5nIHBsYW4gY29uZmlndXJhdGlvbiwgcmV0dXJucyB0cnVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFuRXZlbnRFbmFibGVkKHBsYW4sIHBsYW5FdmVudCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgLy8gQWx3YXlzIHByaW9yaXRpemUgdGhlIGV2ZW50J3MgYGVuYWJsZWRgIHN0YXR1c1xuICAgIGlmICh0eXBlb2YgKHBsYW5FdmVudCA9PT0gbnVsbCB8fCBwbGFuRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYW5FdmVudC5lbmFibGVkKSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBwbGFuRXZlbnQuZW5hYmxlZDtcbiAgICB9XG4gICAgLy8gQXNzdW1lIGFic2VuY2Ugb2YgYSB0cmFja2luZyBwbGFuIG1lYW5zIGV2ZW50cyBhcmUgZW5hYmxlZFxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBwbGFuID09PSBudWxsIHx8IHBsYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYW4uX19kZWZhdWx0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW5hYmxlZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLXBsYW4tZXZlbnQtZW5hYmxlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LegacyDestination: function() { return /* binding */ LegacyDestination; },\n/* harmony export */   ajsDestinations: function() { return /* binding */ ajsDestinations; }\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(app-pages-browser)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(app-pages-browser)/./node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/connection */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/context */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/context */ \"(app-pages-browser)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../core/environment */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(app-pages-browser)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../lib/merged-options */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/p-while */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(app-pages-browser)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../middleware */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loader */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @segment/analytics-core */ \"(app-pages-browser)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(app-pages-browser)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_3__.pWhile)(function () { return queue.length > 0 && (0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOnline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_5__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nvar LegacyDestination = /** @class */ (function () {\n    function LegacyDestination(name, version, writeKey, settings, options, integrationSource) {\n        if (settings === void 0) { settings = {}; }\n        var _this = this;\n        this.options = {};\n        this.type = 'destination';\n        this.middleware = [];\n        this.initializePromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.createDeferred)();\n        this.flushing = false;\n        this.name = name;\n        this.version = version;\n        this.settings = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, settings);\n        this.disableAutoISOConversion = options.disableAutoISOConversion || false;\n        this.integrationSource = integrationSource;\n        // AJS-Renderer sets an extraneous `type` setting that clobbers\n        // existing type defaults. We need to remove it if it's present\n        if (this.settings['type'] && this.settings['type'] === 'browser') {\n            delete this.settings['type'];\n        }\n        this.initializePromise.promise.then(function (isInitialized) { return (_this._initialized = isInitialized); }, function () { });\n        this.options = options;\n        this.buffer = options.disableClientPersistence\n            ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__.PriorityQueue(4, [])\n            : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__.PersistedPriorityQueue(4, \"\".concat(writeKey, \":dest-\").concat(name));\n        this.scheduleFlush();\n    }\n    LegacyDestination.prototype.isLoaded = function () {\n        return !!this._ready;\n    };\n    LegacyDestination.prototype.ready = function () {\n        var _this = this;\n        return this.initializePromise.promise.then(function () { var _a; return (_a = _this.onReady) !== null && _a !== void 0 ? _a : Promise.resolve(); });\n    };\n    LegacyDestination.prototype.load = function (ctx, analyticsInstance) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var integrationSource, _b;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this._ready || this.onReady !== undefined) {\n                            return [2 /*return*/];\n                        }\n                        if (!((_a = this.integrationSource) !== null && _a !== void 0)) return [3 /*break*/, 1];\n                        _b = _a;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, (0,_loader__WEBPACK_IMPORTED_MODULE_9__.loadIntegration)(ctx, this.name, this.version, this.options.obfuscate)];\n                    case 2:\n                        _b = (_c.sent());\n                        _c.label = 3;\n                    case 3:\n                        integrationSource = _b;\n                        this.integration = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.buildIntegration)(integrationSource, this.settings, analyticsInstance);\n                        this.onReady = new Promise(function (resolve) {\n                            var onReadyFn = function () {\n                                _this._ready = true;\n                                resolve(true);\n                            };\n                            _this.integration.once('ready', onReadyFn);\n                        });\n                        this.integration.on('initialize', function () {\n                            _this.initializePromise.resolve(true);\n                        });\n                        try {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                            });\n                            this.integration.initialize();\n                        }\n                        catch (error) {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                                didError: true,\n                            });\n                            this.initializePromise.resolve(false);\n                            throw error;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.unload = function (_ctx, _analyticsInstance) {\n        return (0,_loader__WEBPACK_IMPORTED_MODULE_9__.unloadIntegration)(this.name, this.version, this.options.obfuscate);\n    };\n    LegacyDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        this.middleware = (_a = this.middleware).concat.apply(_a, fn);\n    };\n    LegacyDestination.prototype.shouldBuffer = function (ctx) {\n        return (\n        // page events can't be buffered because of destinations that automatically add page views\n        ctx.event.type !== 'page' &&\n            ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready !== true || this._initialized !== true));\n    };\n    LegacyDestination.prototype.send = function (ctx, clz, eventType) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var plan, ev, planEvent, afterMiddleware, event, err_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.shouldBuffer(ctx)) {\n                            this.buffer.push(ctx);\n                            this.scheduleFlush();\n                            return [2 /*return*/, ctx];\n                        }\n                        plan = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.plan) === null || _b === void 0 ? void 0 : _b.track;\n                        ev = ctx.event.event;\n                        if (plan && ev && this.name !== 'Segment.io') {\n                            planEvent = plan[ev];\n                            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__.isPlanEventEnabled)(plan, planEvent)) {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                            }\n                            else {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations));\n                            }\n                            if ((planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) && (planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations[this.name]) === false) {\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                            }\n                        }\n                        return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_13__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        afterMiddleware = _c.sent();\n                        if (afterMiddleware === null) {\n                            return [2 /*return*/, ctx];\n                        }\n                        event = new clz(afterMiddleware, {\n                            traverse: !this.disableAutoISOConversion,\n                        });\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                        });\n                        _c.label = 2;\n                    case 2:\n                        _c.trys.push([2, 5, , 6]);\n                        if (!this.integration) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.integration.invoke.call(this.integration, eventType, event)];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                            didError: true,\n                        });\n                        throw err_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.track = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track, 'track')];\n            });\n        });\n    };\n    LegacyDestination.prototype.page = function (ctx) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (((_a = this.integration) === null || _a === void 0 ? void 0 : _a._assumesPageview) && !this._initialized) {\n                            this.integration.initialize();\n                        }\n                        return [4 /*yield*/, this.initializePromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page, 'page')];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.identify = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify, 'identify')];\n            });\n        });\n    };\n    LegacyDestination.prototype.alias = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias, 'alias')];\n            });\n        });\n    };\n    LegacyDestination.prototype.group = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group, 'group')];\n            });\n        });\n    };\n    LegacyDestination.prototype.scheduleFlush = function () {\n        var _this = this;\n        if (this.flushing) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready !== true || this._initialized !== true) {\n                            this.scheduleFlush();\n                            return [2 /*return*/];\n                        }\n                        this.flushing = true;\n                        _a = this;\n                        return [4 /*yield*/, flushQueue(this, this.buffer)];\n                    case 1:\n                        _a.buffer = _b.sent();\n                        this.flushing = false;\n                        if (this.buffer.todo > 0) {\n                            this.scheduleFlush();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); }, Math.random() * 5000);\n    };\n    return LegacyDestination;\n}());\n\nfunction ajsDestinations(writeKey, settings, globalIntegrations, options, routingMiddleware, legacyIntegrationSources) {\n    var _a, _b;\n    if (globalIntegrations === void 0) { globalIntegrations = {}; }\n    if (options === void 0) { options = {}; }\n    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_14__.isServer)()) {\n        return [];\n    }\n    if (settings.plan) {\n        options = options !== null && options !== void 0 ? options : {};\n        options.plan = settings.plan;\n    }\n    var routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n    var remoteIntegrationsConfig = settings.integrations;\n    var localIntegrationsConfig = options.integrations;\n    // merged remote CDN settings with user provided options\n    var integrationOptions = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_15__.mergedOptions)(settings, options !== null && options !== void 0 ? options : {});\n    var adhocIntegrationSources = legacyIntegrationSources === null || legacyIntegrationSources === void 0 ? void 0 : legacyIntegrationSources.reduce(function (acc, integrationSource) {\n        var _a;\n        return ((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, acc), (_a = {}, _a[(0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveIntegrationNameFromSource)(integrationSource)] = integrationSource, _a)));\n    }, {});\n    var installableIntegrations = new Set((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)([], Object.keys(remoteIntegrationsConfig).filter(function (name) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_16__.isInstallableIntegration)(name, remoteIntegrationsConfig[name]);\n    }), true), Object.keys(adhocIntegrationSources || {}).filter(function (name) {\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(remoteIntegrationsConfig[name]) ||\n            (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(localIntegrationsConfig === null || localIntegrationsConfig === void 0 ? void 0 : localIntegrationsConfig[name]);\n    }), true));\n    return Array.from(installableIntegrations)\n        .filter(function (name) { return !(0,_utils__WEBPACK_IMPORTED_MODULE_16__.isDisabledIntegration)(name, globalIntegrations); })\n        .map(function (name) {\n        var integrationSettings = remoteIntegrationsConfig[name];\n        var version = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveVersion)(integrationSettings);\n        var destination = new LegacyDestination(name, version, writeKey, integrationOptions[name], options, adhocIntegrationSources === null || adhocIntegrationSources === void 0 ? void 0 : adhocIntegrationSources[name]);\n        var routing = routingRules.filter(function (rule) { return rule.destinationName === name; });\n        if (routing.length > 0 && routingMiddleware) {\n            destination.addMiddleware(routingMiddleware);\n        }\n        return destination;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0U7QUFDRjtBQUNWO0FBQ0s7QUFDZjtBQUNBO0FBQ21CO0FBQ1o7QUFDZDtBQUNjO0FBQ21CO0FBQ2hCO0FBQ3VFO0FBQzNFO0FBQzRDO0FBQzFCO0FBQ1I7QUFDbEU7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBUztBQUNqQztBQUNBO0FBQ0EseUNBQXlDLG9EQUFNLGVBQWUsMkJBQTJCLDBEQUFRLEtBQUssZ0JBQWdCLE9BQU8sZ0RBQVM7QUFDdEk7QUFDQSxtQ0FBbUMsa0RBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGdFQUFPO0FBQ3BFO0FBQ0E7QUFDQSxvRUFBb0Usa0RBQU87QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUIsSUFBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHVDQUF1QztBQUMvRjtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZ0ZBQWM7QUFDL0M7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsOENBQThDLGlCQUFpQjtBQUN0STtBQUNBO0FBQ0Esa0JBQWtCLDhEQUFhO0FBQy9CLGtCQUFrQixpRkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsUUFBUSxpRkFBaUY7QUFDMUo7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsd0RBQWU7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5REFBZ0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSw0QkFBNEIsb0ZBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0ZBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLDBEQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMkRBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLCtFQUFrQjtBQUNuRCxnRUFBZ0UsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLDZCQUE2QixnQ0FBZ0M7QUFDakosK0NBQStDLDhEQUFrQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGdFQUFnRSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDcEY7QUFDQTtBQUNBLCtDQUErQyw4REFBa0I7QUFDakU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSw2Q0FBNkMsd0VBQTBCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHdCQUF3QixvRkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0ZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxrREFBSztBQUMxRCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsaURBQUk7QUFDakU7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQscURBQVE7QUFDN0QsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUIscURBQXFELGtEQUFLO0FBQzFELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxrREFBSztBQUMxRCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLE9BQU8sZ0RBQVM7QUFDakQ7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBLDRCQUE0QiwyREFBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQSxDQUFDO0FBQzRCO0FBQ3RCO0FBQ1A7QUFDQSx5Q0FBeUM7QUFDekMsOEJBQThCO0FBQzlCLFFBQVEsNERBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUVBQWEsZ0VBQWdFO0FBQzFHO0FBQ0E7QUFDQSxnQkFBZ0IsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLGdCQUFnQixLQUFLLHlFQUFnQztBQUN6RixLQUFLLElBQUk7QUFDVCwwQ0FBMEMsb0RBQWEsQ0FBQyxvREFBYTtBQUNyRSxlQUFlLGlFQUF3QjtBQUN2QyxLQUFLLG1EQUFtRDtBQUN4RCxlQUFlLHVFQUFhO0FBQzVCLFlBQVksdUVBQWE7QUFDekIsS0FBSztBQUNMO0FBQ0Esa0NBQWtDLFFBQVEsOERBQXFCLDZCQUE2QjtBQUM1RjtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFjO0FBQ3BDO0FBQ0EsNERBQTRELHVDQUF1QztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi9pbmRleC5qcz8zN2ZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBBbGlhcywgR3JvdXAsIElkZW50aWZ5LCBQYWdlLCBUcmFjayB9IGZyb20gJ0BzZWdtZW50L2ZhY2FkZSc7XG5pbXBvcnQgeyBpc09mZmxpbmUsIGlzT25saW5lIH0gZnJvbSAnLi4vLi4vY29yZS9jb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uLy4uL2NvcmUvY29udGV4dCc7XG5pbXBvcnQgeyBpc1NlcnZlciB9IGZyb20gJy4uLy4uL2NvcmUvZW52aXJvbm1lbnQnO1xuaW1wb3J0IHsgYXR0ZW1wdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IGlzUGxhbkV2ZW50RW5hYmxlZCB9IGZyb20gJy4uLy4uL2xpYi9pcy1wbGFuLWV2ZW50LWVuYWJsZWQnO1xuaW1wb3J0IHsgbWVyZ2VkT3B0aW9ucyB9IGZyb20gJy4uLy4uL2xpYi9tZXJnZWQtb3B0aW9ucyc7XG5pbXBvcnQgeyBwV2hpbGUgfSBmcm9tICcuLi8uLi9saWIvcC13aGlsZSc7XG5pbXBvcnQgeyBQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlJztcbmltcG9ydCB7IFBlcnNpc3RlZFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkJztcbmltcG9ydCB7IGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlLCB9IGZyb20gJy4uL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgYnVpbGRJbnRlZ3JhdGlvbiwgbG9hZEludGVncmF0aW9uLCByZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZSwgcmVzb2x2ZVZlcnNpb24sIHVubG9hZEludGVncmF0aW9uLCB9IGZyb20gJy4vbG9hZGVyJztcbmltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBpc0Rpc2FibGVkSW50ZWdyYXRpb24gYXMgc2hvdWxkU2tpcEludGVncmF0aW9uLCBpc0luc3RhbGxhYmxlSW50ZWdyYXRpb24sIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyB9IGZyb20gJy4uLy4uL2NvcmUvc3RhdHMvbWV0cmljLWhlbHBlcnMnO1xuaW1wb3J0IHsgY3JlYXRlRGVmZXJyZWQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5mdW5jdGlvbiBmbHVzaFF1ZXVlKHh0LCBxdWV1ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZhaWxlZFF1ZXVlO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPZmZsaW5lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBxdWV1ZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcFdoaWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHF1ZXVlLmxlbmd0aCA+IDAgJiYgaXNPbmxpbmUoKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHgsIHJlc3VsdCwgc3VjY2VzcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF0dGVtcHQoY3R4LCB4dCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gcmVzdWx0IGluc3RhbmNlb2YgQ29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUucHVzaChjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIGZhaWxlZCB0YXNrc1xuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZS1hZGQgZmFpbGVkIHRhc2tzXG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlLm1hcChmdW5jdGlvbiAoZmFpbGVkKSB7IHJldHVybiBxdWV1ZS5wdXNoV2l0aEJhY2tvZmYoZmFpbGVkKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBxdWV1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxudmFyIExlZ2FjeURlc3RpbmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExlZ2FjeURlc3RpbmF0aW9uKG5hbWUsIHZlcnNpb24sIHdyaXRlS2V5LCBzZXR0aW5ncywgb3B0aW9ucywgaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzID09PSB2b2lkIDApIHsgc2V0dGluZ3MgPSB7fTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy50eXBlID0gJ2Rlc3RpbmF0aW9uJztcbiAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gW107XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UgPSBjcmVhdGVEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLmZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBfX2Fzc2lnbih7fSwgc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLmRpc2FibGVBdXRvSVNPQ29udmVyc2lvbiA9IG9wdGlvbnMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uIHx8IGZhbHNlO1xuICAgICAgICB0aGlzLmludGVncmF0aW9uU291cmNlID0gaW50ZWdyYXRpb25Tb3VyY2U7XG4gICAgICAgIC8vIEFKUy1SZW5kZXJlciBzZXRzIGFuIGV4dHJhbmVvdXMgYHR5cGVgIHNldHRpbmcgdGhhdCBjbG9iYmVyc1xuICAgICAgICAvLyBleGlzdGluZyB0eXBlIGRlZmF1bHRzLiBXZSBuZWVkIHRvIHJlbW92ZSBpdCBpZiBpdCdzIHByZXNlbnRcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3NbJ3R5cGUnXSAmJiB0aGlzLnNldHRpbmdzWyd0eXBlJ10gPT09ICdicm93c2VyJykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2V0dGluZ3NbJ3R5cGUnXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRpYWxpemVQcm9taXNlLnByb21pc2UudGhlbihmdW5jdGlvbiAoaXNJbml0aWFsaXplZCkgeyByZXR1cm4gKF90aGlzLl9pbml0aWFsaXplZCA9IGlzSW5pdGlhbGl6ZWQpOyB9LCBmdW5jdGlvbiAoKSB7IH0pO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG9wdGlvbnMuZGlzYWJsZUNsaWVudFBlcnNpc3RlbmNlXG4gICAgICAgICAgICA/IG5ldyBQcmlvcml0eVF1ZXVlKDQsIFtdKVxuICAgICAgICAgICAgOiBuZXcgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSg0LCBcIlwiLmNvbmNhdCh3cml0ZUtleSwgXCI6ZGVzdC1cIikuY29uY2F0KG5hbWUpKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5pc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fcmVhZHk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUucmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXRpYWxpemVQcm9taXNlLnByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7IHZhciBfYTsgcmV0dXJuIChfYSA9IF90aGlzLm9uUmVhZHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFByb21pc2UucmVzb2x2ZSgpOyB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzSW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW50ZWdyYXRpb25Tb3VyY2UsIF9iO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZWFkeSB8fCB0aGlzLm9uUmVhZHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKChfYSA9IHRoaXMuaW50ZWdyYXRpb25Tb3VyY2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDApKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkSW50ZWdyYXRpb24oY3R4LCB0aGlzLm5hbWUsIHRoaXMudmVyc2lvbiwgdGhpcy5vcHRpb25zLm9iZnVzY2F0ZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IChfYy5zZW50KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvblNvdXJjZSA9IF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbiA9IGJ1aWxkSW50ZWdyYXRpb24oaW50ZWdyYXRpb25Tb3VyY2UsIHRoaXMuc2V0dGluZ3MsIGFuYWx5dGljc0luc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25SZWFkeSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uUmVhZHlGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmludGVncmF0aW9uLm9uY2UoJ3JlYWR5Jywgb25SZWFkeUZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5vbignaW5pdGlhbGl6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0aWFsaXplUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogJ2luaXRpYWxpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2xhc3NpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlZ3JhdGlvbi5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWU6ICdpbml0aWFsaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS51bmxvYWQgPSBmdW5jdGlvbiAoX2N0eCwgX2FuYWx5dGljc0luc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiB1bmxvYWRJbnRlZ3JhdGlvbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbiwgdGhpcy5vcHRpb25zLm9iZnVzY2F0ZSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuYWRkTWlkZGxld2FyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgZm4gPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGZuW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gKF9hID0gdGhpcy5taWRkbGV3YXJlKS5jb25jYXQuYXBwbHkoX2EsIGZuKTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5zaG91bGRCdWZmZXIgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8vIHBhZ2UgZXZlbnRzIGNhbid0IGJlIGJ1ZmZlcmVkIGJlY2F1c2Ugb2YgZGVzdGluYXRpb25zIHRoYXQgYXV0b21hdGljYWxseSBhZGQgcGFnZSB2aWV3c1xuICAgICAgICBjdHguZXZlbnQudHlwZSAhPT0gJ3BhZ2UnICYmXG4gICAgICAgICAgICAoaXNPZmZsaW5lKCkgfHwgdGhpcy5fcmVhZHkgIT09IHRydWUgfHwgdGhpcy5faW5pdGlhbGl6ZWQgIT09IHRydWUpKTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKGN0eCwgY2x6LCBldmVudFR5cGUpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBsYW4sIGV2LCBwbGFuRXZlbnQsIGFmdGVyTWlkZGxld2FyZSwgZXZlbnQsIGVycl8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkQnVmZmVyKGN0eCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFuID0gKF9iID0gKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGxhbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXYgPSBjdHguZXZlbnQuZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxhbiAmJiBldiAmJiB0aGlzLm5hbWUgIT09ICdTZWdtZW50LmlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW5FdmVudCA9IHBsYW5bZXZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNQbGFuRXZlbnRFbmFibGVkKHBsYW4sIHBsYW5FdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdpbnRlZ3JhdGlvbnMnLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LmV2ZW50LmludGVncmF0aW9ucyksIHsgQWxsOiBmYWxzZSwgJ1NlZ21lbnQuaW8nOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbmNlbChuZXcgQ29udGV4dENhbmNlbGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJFdmVudCBcIi5jb25jYXQoZXYsIFwiIGRpc2FibGVkIGZvciBpbnRlZ3JhdGlvbiBcIikuY29uY2F0KHRoaXMubmFtZSwgXCIgaW4gdHJhY2tpbmcgcGxhblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdEcm9wcGVkIGJ5IHBsYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgudXBkYXRlRXZlbnQoJ2ludGVncmF0aW9ucycsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSwgcGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmludGVncmF0aW9ucykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBsYW5FdmVudCA9PT0gbnVsbCB8fCBwbGFuRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYW5FdmVudC5lbmFibGVkKSAmJiAocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmludGVncmF0aW9uc1t0aGlzLm5hbWVdKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbmNlbChuZXcgQ29udGV4dENhbmNlbGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJFdmVudCBcIi5jb25jYXQoZXYsIFwiIGRpc2FibGVkIGZvciBpbnRlZ3JhdGlvbiBcIikuY29uY2F0KHRoaXMubmFtZSwgXCIgaW4gdHJhY2tpbmcgcGxhblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdEcm9wcGVkIGJ5IHBsYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUodGhpcy5uYW1lLCBjdHguZXZlbnQsIHRoaXMubWlkZGxld2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlck1pZGRsZXdhcmUgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWZ0ZXJNaWRkbGV3YXJlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IG5ldyBjbHooYWZ0ZXJNaWRkbGV3YXJlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2U6ICF0aGlzLmRpc2FibGVBdXRvSVNPQ29udmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogZXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmludGVncmF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW50ZWdyYXRpb24uaW52b2tlLmNhbGwodGhpcy5pbnRlZ3JhdGlvbiwgZXZlbnRUeXBlLCBldmVudCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogZXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIFRyYWNrLCAndHJhY2snKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuaW50ZWdyYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fYXNzdW1lc1BhZ2V2aWV3KSAmJiAhdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBQYWdlLCAncGFnZScpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgSWRlbnRpZnksICdpZGVudGlmeScpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBBbGlhcywgJ2FsaWFzJyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIEdyb3VwLCAnZ3JvdXAnKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuc2NoZWR1bGVGbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNPZmZsaW5lKCkgfHwgdGhpcy5fcmVhZHkgIT09IHRydWUgfHwgdGhpcy5faW5pdGlhbGl6ZWQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZsdXNoUXVldWUodGhpcywgdGhpcy5idWZmZXIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EuYnVmZmVyID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnRvZG8gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9LCBNYXRoLnJhbmRvbSgpICogNTAwMCk7XG4gICAgfTtcbiAgICByZXR1cm4gTGVnYWN5RGVzdGluYXRpb247XG59KCkpO1xuZXhwb3J0IHsgTGVnYWN5RGVzdGluYXRpb24gfTtcbmV4cG9ydCBmdW5jdGlvbiBhanNEZXN0aW5hdGlvbnMod3JpdGVLZXksIHNldHRpbmdzLCBnbG9iYWxJbnRlZ3JhdGlvbnMsIG9wdGlvbnMsIHJvdXRpbmdNaWRkbGV3YXJlLCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmIChnbG9iYWxJbnRlZ3JhdGlvbnMgPT09IHZvaWQgMCkgeyBnbG9iYWxJbnRlZ3JhdGlvbnMgPSB7fTsgfVxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgaWYgKGlzU2VydmVyKCkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3MucGxhbikge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge307XG4gICAgICAgIG9wdGlvbnMucGxhbiA9IHNldHRpbmdzLnBsYW47XG4gICAgfVxuICAgIHZhciByb3V0aW5nUnVsZXMgPSAoX2IgPSAoX2EgPSBzZXR0aW5ncy5taWRkbGV3YXJlU2V0dGluZ3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yb3V0aW5nUnVsZXMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdO1xuICAgIHZhciByZW1vdGVJbnRlZ3JhdGlvbnNDb25maWcgPSBzZXR0aW5ncy5pbnRlZ3JhdGlvbnM7XG4gICAgdmFyIGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID0gb3B0aW9ucy5pbnRlZ3JhdGlvbnM7XG4gICAgLy8gbWVyZ2VkIHJlbW90ZSBDRE4gc2V0dGluZ3Mgd2l0aCB1c2VyIHByb3ZpZGVkIG9wdGlvbnNcbiAgICB2YXIgaW50ZWdyYXRpb25PcHRpb25zID0gbWVyZ2VkT3B0aW9ucyhzZXR0aW5ncywgb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge30pO1xuICAgIHZhciBhZGhvY0ludGVncmF0aW9uU291cmNlcyA9IGxlZ2FjeUludGVncmF0aW9uU291cmNlcyA9PT0gbnVsbCB8fCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxlZ2FjeUludGVncmF0aW9uU291cmNlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBhY2MpLCAoX2EgPSB7fSwgX2FbcmVzb2x2ZUludGVncmF0aW9uTmFtZUZyb21Tb3VyY2UoaW50ZWdyYXRpb25Tb3VyY2UpXSA9IGludGVncmF0aW9uU291cmNlLCBfYSkpKTtcbiAgICB9LCB7fSk7XG4gICAgdmFyIGluc3RhbGxhYmxlSW50ZWdyYXRpb25zID0gbmV3IFNldChfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIE9iamVjdC5rZXlzKHJlbW90ZUludGVncmF0aW9uc0NvbmZpZykuZmlsdGVyKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBpc0luc3RhbGxhYmxlSW50ZWdyYXRpb24obmFtZSwgcmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdKTtcbiAgICB9KSwgdHJ1ZSksIE9iamVjdC5rZXlzKGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzIHx8IHt9KS5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGlzUGxhaW5PYmplY3QocmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdKSB8fFxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdChsb2NhbEludGVncmF0aW9uc0NvbmZpZyA9PT0gbnVsbCB8fCBsb2NhbEludGVncmF0aW9uc0NvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbG9jYWxJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pO1xuICAgIH0pLCB0cnVlKSk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oaW5zdGFsbGFibGVJbnRlZ3JhdGlvbnMpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuICFzaG91bGRTa2lwSW50ZWdyYXRpb24obmFtZSwgZ2xvYmFsSW50ZWdyYXRpb25zKTsgfSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgaW50ZWdyYXRpb25TZXR0aW5ncyA9IHJlbW90ZUludGVncmF0aW9uc0NvbmZpZ1tuYW1lXTtcbiAgICAgICAgdmFyIHZlcnNpb24gPSByZXNvbHZlVmVyc2lvbihpbnRlZ3JhdGlvblNldHRpbmdzKTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IExlZ2FjeURlc3RpbmF0aW9uKG5hbWUsIHZlcnNpb24sIHdyaXRlS2V5LCBpbnRlZ3JhdGlvbk9wdGlvbnNbbmFtZV0sIG9wdGlvbnMsIGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID09PSBudWxsIHx8IGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZGhvY0ludGVncmF0aW9uU291cmNlc1tuYW1lXSk7XG4gICAgICAgIHZhciByb3V0aW5nID0gcm91dGluZ1J1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkgeyByZXR1cm4gcnVsZS5kZXN0aW5hdGlvbk5hbWUgPT09IG5hbWU7IH0pO1xuICAgICAgICBpZiAocm91dGluZy5sZW5ndGggPiAwICYmIHJvdXRpbmdNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5hZGRNaWRkbGV3YXJlKHJvdXRpbmdNaWRkbGV3YXJlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVzdGluYXRpb247XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIntegration: function() { return /* binding */ buildIntegration; },\n/* harmony export */   loadIntegration: function() { return /* binding */ loadIntegration; },\n/* harmony export */   resolveIntegrationNameFromSource: function() { return /* binding */ resolveIntegrationNameFromSource; },\n/* harmony export */   resolveVersion: function() { return /* binding */ resolveVersion; },\n/* harmony export */   unloadIntegration: function() { return /* binding */ unloadIntegration; }\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(app-pages-browser)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/load-script */ \"(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n\n\n\nfunction normalizeName(name) {\n    return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-');\n}\nfunction obfuscatePathName(pathName, obfuscate) {\n    if (obfuscate === void 0) { obfuscate = false; }\n    return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined;\n}\nfunction resolveIntegrationNameFromSource(integrationSource) {\n    return ('Integration' in integrationSource\n        ? integrationSource.Integration\n        : integrationSource).prototype.name;\n}\nfunction recordLoadMetrics(fullPath, ctx, name) {\n    var _a, _b;\n    try {\n        var metric = ((_b = (_a = window === null || window === void 0 ? void 0 : window.performance) === null || _a === void 0 ? void 0 : _a.getEntriesByName(fullPath, 'resource')) !== null && _b !== void 0 ? _b : [])[0];\n        // we assume everything that took under 100ms is cached\n        metric &&\n            ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([\n                name\n            ], (metric.duration < 100 ? ['cached'] : []), true));\n    }\n    catch (_) {\n        // not available\n    }\n}\nfunction buildIntegration(integrationSource, integrationSettings, analyticsInstance) {\n    var integrationCtr;\n    // GA and Appcues use a different interface to instantiating integrations\n    if ('Integration' in integrationSource) {\n        var analyticsStub = {\n            user: function () { return analyticsInstance.user(); },\n            addIntegration: function () { },\n        };\n        integrationSource(analyticsStub);\n        integrationCtr = integrationSource.Integration;\n    }\n    else {\n        integrationCtr = integrationSource;\n    }\n    var integration = new integrationCtr(integrationSettings);\n    integration.analytics = analyticsInstance;\n    return integration;\n}\nfunction loadIntegration(ctx, name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var pathName, obfuscatedPathName, path, fullPath, err_1, deps;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    pathName = normalizeName(name);\n                    obfuscatedPathName = obfuscatePathName(pathName, obfuscate);\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n                    fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(fullPath)];\n                case 2:\n                    _a.sent();\n                    recordLoadMetrics(fullPath, ctx, name);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    ctx.stats.gauge('legacy_destination_time', -1, [\"plugin:\".concat(name), \"failed\"]);\n                    throw err_1;\n                case 4:\n                    deps = window[\"\".concat(pathName, \"Deps\")];\n                    return [4 /*yield*/, Promise.all(deps.map(function (dep) { return (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(path + dep + '.gz'); }))\n                        // @ts-ignore\n                    ];\n                case 5:\n                    _a.sent();\n                    // @ts-ignore\n                    window[\"\".concat(pathName, \"Loader\")]();\n                    return [2 /*return*/, window[\n                        // @ts-ignore\n                        \"\".concat(pathName, \"Integration\")]];\n            }\n        });\n    });\n}\nfunction unloadIntegration(name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, pathName, obfuscatedPathName, fullPath;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n            pathName = normalizeName(name);\n            obfuscatedPathName = obfuscatePathName(name, obfuscate);\n            fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n            return [2 /*return*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.unloadScript)(fullPath)];\n        });\n    });\n}\nfunction resolveVersion(integrationConfig) {\n    var _a, _b, _c, _d;\n    return ((_d = (_b = (_a = integrationConfig === null || integrationConfig === void 0 ? void 0 : integrationConfig.versionSettings) === null || _a === void 0 ? void 0 : _a.override) !== null && _b !== void 0 ? _b : (_c = integrationConfig === null || integrationConfig === void 0 ? void 0 : integrationConfig.versionSettings) === null || _c === void 0 ? void 0 : _c.version) !== null && _d !== void 0 ? _d : 'latest');\n}\n//# sourceMappingURL=loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi9sb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDRDtBQUNJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLG9EQUFhO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrQ0FBa0M7QUFDbEUsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNFQUFzQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw0REFBVTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxPQUFPLDREQUFVLHVCQUF1QjtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCLG1CQUFtQixzRUFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDhEQUFZO0FBQzlDLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi9sb2FkZXIuanM/M2U0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBnZXROZXh0SW50ZWdyYXRpb25zVVJMIH0gZnJvbSAnLi4vLi4vbGliL3BhcnNlLWNkbic7XG5pbXBvcnQgeyBsb2FkU2NyaXB0LCB1bmxvYWRTY3JpcHQgfSBmcm9tICcuLi8uLi9saWIvbG9hZC1zY3JpcHQnO1xuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcuJywgJycpLnJlcGxhY2UoL1xccysvZywgJy0nKTtcbn1cbmZ1bmN0aW9uIG9iZnVzY2F0ZVBhdGhOYW1lKHBhdGhOYW1lLCBvYmZ1c2NhdGUpIHtcbiAgICBpZiAob2JmdXNjYXRlID09PSB2b2lkIDApIHsgb2JmdXNjYXRlID0gZmFsc2U7IH1cbiAgICByZXR1cm4gb2JmdXNjYXRlID8gYnRvYShwYXRoTmFtZSkucmVwbGFjZSgvPS9nLCAnJykgOiB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUludGVncmF0aW9uTmFtZUZyb21Tb3VyY2UoaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICByZXR1cm4gKCdJbnRlZ3JhdGlvbicgaW4gaW50ZWdyYXRpb25Tb3VyY2VcbiAgICAgICAgPyBpbnRlZ3JhdGlvblNvdXJjZS5JbnRlZ3JhdGlvblxuICAgICAgICA6IGludGVncmF0aW9uU291cmNlKS5wcm90b3R5cGUubmFtZTtcbn1cbmZ1bmN0aW9uIHJlY29yZExvYWRNZXRyaWNzKGZ1bGxQYXRoLCBjdHgsIG5hbWUpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBtZXRyaWMgPSAoKF9iID0gKF9hID0gd2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93LnBlcmZvcm1hbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0RW50cmllc0J5TmFtZShmdWxsUGF0aCwgJ3Jlc291cmNlJykpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdKVswXTtcbiAgICAgICAgLy8gd2UgYXNzdW1lIGV2ZXJ5dGhpbmcgdGhhdCB0b29rIHVuZGVyIDEwMG1zIGlzIGNhY2hlZFxuICAgICAgICBtZXRyaWMgJiZcbiAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnbGVnYWN5X2Rlc3RpbmF0aW9uX3RpbWUnLCBNYXRoLnJvdW5kKG1ldHJpYy5kdXJhdGlvbiksIF9fc3ByZWFkQXJyYXkoW1xuICAgICAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIF0sIChtZXRyaWMuZHVyYXRpb24gPCAxMDAgPyBbJ2NhY2hlZCddIDogW10pLCB0cnVlKSk7XG4gICAgfVxuICAgIGNhdGNoIChfKSB7XG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGVcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYnVpbGRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvblNvdXJjZSwgaW50ZWdyYXRpb25TZXR0aW5ncywgYW5hbHl0aWNzSW5zdGFuY2UpIHtcbiAgICB2YXIgaW50ZWdyYXRpb25DdHI7XG4gICAgLy8gR0EgYW5kIEFwcGN1ZXMgdXNlIGEgZGlmZmVyZW50IGludGVyZmFjZSB0byBpbnN0YW50aWF0aW5nIGludGVncmF0aW9uc1xuICAgIGlmICgnSW50ZWdyYXRpb24nIGluIGludGVncmF0aW9uU291cmNlKSB7XG4gICAgICAgIHZhciBhbmFseXRpY3NTdHViID0ge1xuICAgICAgICAgICAgdXNlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2UudXNlcigpOyB9LFxuICAgICAgICAgICAgYWRkSW50ZWdyYXRpb246IGZ1bmN0aW9uICgpIHsgfSxcbiAgICAgICAgfTtcbiAgICAgICAgaW50ZWdyYXRpb25Tb3VyY2UoYW5hbHl0aWNzU3R1Yik7XG4gICAgICAgIGludGVncmF0aW9uQ3RyID0gaW50ZWdyYXRpb25Tb3VyY2UuSW50ZWdyYXRpb247XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpbnRlZ3JhdGlvbkN0ciA9IGludGVncmF0aW9uU291cmNlO1xuICAgIH1cbiAgICB2YXIgaW50ZWdyYXRpb24gPSBuZXcgaW50ZWdyYXRpb25DdHIoaW50ZWdyYXRpb25TZXR0aW5ncyk7XG4gICAgaW50ZWdyYXRpb24uYW5hbHl0aWNzID0gYW5hbHl0aWNzSW5zdGFuY2U7XG4gICAgcmV0dXJuIGludGVncmF0aW9uO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRJbnRlZ3JhdGlvbihjdHgsIG5hbWUsIHZlcnNpb24sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGhOYW1lLCBvYmZ1c2NhdGVkUGF0aE5hbWUsIHBhdGgsIGZ1bGxQYXRoLCBlcnJfMSwgZGVwcztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgcGF0aE5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBvYmZ1c2NhdGVkUGF0aE5hbWUgPSBvYmZ1c2NhdGVQYXRoTmFtZShwYXRoTmFtZSwgb2JmdXNjYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwoKTtcbiAgICAgICAgICAgICAgICAgICAgZnVsbFBhdGggPSBcIlwiLmNvbmNhdChwYXRoLCBcIi9pbnRlZ3JhdGlvbnMvXCIpLmNvbmNhdChvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IG51bGwgJiYgb2JmdXNjYXRlZFBhdGhOYW1lICE9PSB2b2lkIDAgPyBvYmZ1c2NhdGVkUGF0aE5hbWUgOiBwYXRoTmFtZSwgXCIvXCIpLmNvbmNhdCh2ZXJzaW9uLCBcIi9cIikuY29uY2F0KG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gbnVsbCAmJiBvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IHZvaWQgMCA/IG9iZnVzY2F0ZWRQYXRoTmFtZSA6IHBhdGhOYW1lLCBcIi5keW5hbWljLmpzLmd6XCIpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KGZ1bGxQYXRoKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJlY29yZExvYWRNZXRyaWNzKGZ1bGxQYXRoLCBjdHgsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ2xlZ2FjeV9kZXN0aW5hdGlvbl90aW1lJywgLTEsIFtcInBsdWdpbjpcIi5jb25jYXQobmFtZSksIFwiZmFpbGVkXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzE7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBkZXBzID0gd2luZG93W1wiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkRlcHNcIildO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChkZXBzLm1hcChmdW5jdGlvbiAoZGVwKSB7IHJldHVybiBsb2FkU2NyaXB0KHBhdGggKyBkZXAgKyAnLmd6Jyk7IH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd1tcIlwiLmNvbmNhdChwYXRoTmFtZSwgXCJMb2FkZXJcIildKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB3aW5kb3dbXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiLmNvbmNhdChwYXRoTmFtZSwgXCJJbnRlZ3JhdGlvblwiKV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bmxvYWRJbnRlZ3JhdGlvbihuYW1lLCB2ZXJzaW9uLCBvYmZ1c2NhdGUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXRoLCBwYXRoTmFtZSwgb2JmdXNjYXRlZFBhdGhOYW1lLCBmdWxsUGF0aDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgcGF0aCA9IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwoKTtcbiAgICAgICAgICAgIHBhdGhOYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcbiAgICAgICAgICAgIG9iZnVzY2F0ZWRQYXRoTmFtZSA9IG9iZnVzY2F0ZVBhdGhOYW1lKG5hbWUsIG9iZnVzY2F0ZSk7XG4gICAgICAgICAgICBmdWxsUGF0aCA9IFwiXCIuY29uY2F0KHBhdGgsIFwiL2ludGVncmF0aW9ucy9cIikuY29uY2F0KG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gbnVsbCAmJiBvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IHZvaWQgMCA/IG9iZnVzY2F0ZWRQYXRoTmFtZSA6IHBhdGhOYW1lLCBcIi9cIikuY29uY2F0KHZlcnNpb24sIFwiL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiLmR5bmFtaWMuanMuZ3pcIik7XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdW5sb2FkU2NyaXB0KGZ1bGxQYXRoKV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVWZXJzaW9uKGludGVncmF0aW9uQ29uZmlnKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIHJldHVybiAoKF9kID0gKF9iID0gKF9hID0gaW50ZWdyYXRpb25Db25maWcgPT09IG51bGwgfHwgaW50ZWdyYXRpb25Db25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGludGVncmF0aW9uQ29uZmlnLnZlcnNpb25TZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm92ZXJyaWRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoX2MgPSBpbnRlZ3JhdGlvbkNvbmZpZyA9PT0gbnVsbCB8fCBpbnRlZ3JhdGlvbkNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW50ZWdyYXRpb25Db25maWcudmVyc2lvblNldHRpbmdzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudmVyc2lvbikgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogJ2xhdGVzdCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDisabledIntegration: function() { return /* binding */ isDisabledIntegration; },\n/* harmony export */   isInstallableIntegration: function() { return /* binding */ isInstallableIntegration; }\n/* harmony export */ });\nvar isInstallableIntegration = function (name, integrationSettings) {\n    var _a;\n    var type = integrationSettings.type, bundlingStatus = integrationSettings.bundlingStatus, versionSettings = integrationSettings.versionSettings;\n    // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n    // destinations without a defined value for `bundlingStatus`\n    var deviceMode = bundlingStatus !== 'unbundled' &&\n        (type === 'browser' || ((_a = versionSettings === null || versionSettings === void 0 ? void 0 : versionSettings.componentTypes) === null || _a === void 0 ? void 0 : _a.includes('browser')));\n    // checking for iterable is a quick fix we need in place to prevent\n    // errors showing Iterable as a failed destiantion. Ideally, we should\n    // fix the Iterable metadata instead, but that's a longer process.\n    return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode;\n};\nvar isDisabledIntegration = function (integrationName, globalIntegrations) {\n    var allDisableAndNotDefined = globalIntegrations.All === false &&\n        globalIntegrations[integrationName] === undefined;\n    return (globalIntegrations[integrationName] === false || allDisableAndNotDefined);\n};\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vdXRpbHMuanM/MDRkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdmFyIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBpbnRlZ3JhdGlvblNldHRpbmdzKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciB0eXBlID0gaW50ZWdyYXRpb25TZXR0aW5ncy50eXBlLCBidW5kbGluZ1N0YXR1cyA9IGludGVncmF0aW9uU2V0dGluZ3MuYnVuZGxpbmdTdGF0dXMsIHZlcnNpb25TZXR0aW5ncyA9IGludGVncmF0aW9uU2V0dGluZ3MudmVyc2lvblNldHRpbmdzO1xuICAgIC8vIFdlIHVzZSBgIT09ICd1bmJ1bmRsZWQnYCAodmVyc3VzIGA9PT0gJ2J1bmRsZWQnYCkgdG8gYmUgaW5jbHVzaXZlIG9mXG4gICAgLy8gZGVzdGluYXRpb25zIHdpdGhvdXQgYSBkZWZpbmVkIHZhbHVlIGZvciBgYnVuZGxpbmdTdGF0dXNgXG4gICAgdmFyIGRldmljZU1vZGUgPSBidW5kbGluZ1N0YXR1cyAhPT0gJ3VuYnVuZGxlZCcgJiZcbiAgICAgICAgKHR5cGUgPT09ICdicm93c2VyJyB8fCAoKF9hID0gdmVyc2lvblNldHRpbmdzID09PSBudWxsIHx8IHZlcnNpb25TZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmVyc2lvblNldHRpbmdzLmNvbXBvbmVudFR5cGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoJ2Jyb3dzZXInKSkpO1xuICAgIC8vIGNoZWNraW5nIGZvciBpdGVyYWJsZSBpcyBhIHF1aWNrIGZpeCB3ZSBuZWVkIGluIHBsYWNlIHRvIHByZXZlbnRcbiAgICAvLyBlcnJvcnMgc2hvd2luZyBJdGVyYWJsZSBhcyBhIGZhaWxlZCBkZXN0aWFudGlvbi4gSWRlYWxseSwgd2Ugc2hvdWxkXG4gICAgLy8gZml4IHRoZSBJdGVyYWJsZSBtZXRhZGF0YSBpbnN0ZWFkLCBidXQgdGhhdCdzIGEgbG9uZ2VyIHByb2Nlc3MuXG4gICAgcmV0dXJuICFuYW1lLnN0YXJ0c1dpdGgoJ1NlZ21lbnQnKSAmJiBuYW1lICE9PSAnSXRlcmFibGUnICYmIGRldmljZU1vZGU7XG59O1xuZXhwb3J0IHZhciBpc0Rpc2FibGVkSW50ZWdyYXRpb24gPSBmdW5jdGlvbiAoaW50ZWdyYXRpb25OYW1lLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICB2YXIgYWxsRGlzYWJsZUFuZE5vdERlZmluZWQgPSBnbG9iYWxJbnRlZ3JhdGlvbnMuQWxsID09PSBmYWxzZSAmJlxuICAgICAgICBnbG9iYWxJbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25OYW1lXSA9PT0gdW5kZWZpbmVkO1xuICAgIHJldHVybiAoZ2xvYmFsSW50ZWdyYXRpb25zW2ludGVncmF0aW9uTmFtZV0gPT09IGZhbHNlIHx8IGFsbERpc2FibGVBbmROb3REZWZpbmVkKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\n"));

/***/ })

}]);