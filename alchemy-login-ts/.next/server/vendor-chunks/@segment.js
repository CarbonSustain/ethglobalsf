/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@segment";
exports.ids = ["vendor-chunks/@segment"];
exports.modules = {

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatch: () => (/* binding */ dispatch),\n/* harmony export */   getDelay: () => (/* binding */ getDelay)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callback */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n\n/* The amount of time in ms to wait before invoking the callback. */\nvar getDelay = function (startTimeInEpochMS, timeoutInMS) {\n    var elapsedTime = Date.now() - startTimeInEpochMS;\n    // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n    return Math.max((timeoutInMS !== null && timeoutInMS !== void 0 ? timeoutInMS : 300) - elapsedTime, 0);\n};\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nfunction dispatch(ctx, queue, emitter, options) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var startTime, dispatched;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitter.emit('dispatch_start', ctx);\n                    startTime = Date.now();\n                    if (!queue.isEmpty()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, queue.dispatchSingle(ctx)];\n                case 1:\n                    dispatched = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, queue.dispatch(ctx)];\n                case 3:\n                    dispatched = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!(options === null || options === void 0 ? void 0 : options.callback)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, (0,_callback__WEBPACK_IMPORTED_MODULE_1__.invokeCallback)(dispatched, options.callback, getDelay(startTime, options.timeout))];\n                case 5:\n                    dispatched = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (options === null || options === void 0 ? void 0 : options.debug) {\n                        dispatched.flush();\n                    }\n                    return [2 /*return*/, dispatched];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dispatch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDRjtBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzP2ExZWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52b2tlQ2FsbGJhY2sgfSBmcm9tICcuLi9jYWxsYmFjayc7XG4vKiBUaGUgYW1vdW50IG9mIHRpbWUgaW4gbXMgdG8gd2FpdCBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrLiAqL1xuZXhwb3J0IHZhciBnZXREZWxheSA9IGZ1bmN0aW9uIChzdGFydFRpbWVJbkVwb2NoTVMsIHRpbWVvdXRJbk1TKSB7XG4gICAgdmFyIGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZUluRXBvY2hNUztcbiAgICAvLyBpbmNyZWFzaW5nIHRoZSB0aW1lb3V0IGluY3JlYXNlcyB0aGUgZGVsYXkgYnkgYWxtb3N0IHRoZSBzYW1lIGFtb3VudCAtLSB0aGlzIGlzIHdlaXJkIGxlZ2FjeSBiZWhhdmlvci5cbiAgICByZXR1cm4gTWF0aC5tYXgoKHRpbWVvdXRJbk1TICE9PSBudWxsICYmIHRpbWVvdXRJbk1TICE9PSB2b2lkIDAgPyB0aW1lb3V0SW5NUyA6IDMwMCkgLSBlbGFwc2VkVGltZSwgMCk7XG59O1xuLyoqXG4gKiBQdXNoIGFuIGV2ZW50IGludG8gdGhlIGRpc3BhdGNoIHF1ZXVlIGFuZCBpbnZva2UgYW55IGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0gZXZlbnQgLSBTZWdtZW50IGV2ZW50IHRvIGVucXVldWUuXG4gKiBAcGFyYW0gcXVldWUgLSBRdWV1ZSB0byBkaXNwYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIGVtaXR0ZXIgLSBUaGlzIGlzIHR5cGljYWxseSBhbiBpbnN0YW5jZSBvZiBcIkFuYWx5dGljc1wiIC0tIHVzZWQgZm9yIG1ldHJpY3MgLyBwcm9ncmVzcyBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSBvcHRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChjdHgsIHF1ZXVlLCBlbWl0dGVyLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhcnRUaW1lLCBkaXNwYXRjaGVkO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Rpc3BhdGNoX3N0YXJ0JywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWV1ZS5pc0VtcHR5KCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBxdWV1ZS5kaXNwYXRjaFNpbmdsZShjdHgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgcXVldWUuZGlzcGF0Y2goY3R4KV07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FsbGJhY2spKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW52b2tlQ2FsbGJhY2soZGlzcGF0Y2hlZCwgb3B0aW9ucy5jYWxsYmFjaywgZ2V0RGVsYXkoc3RhcnRUaW1lLCBvcHRpb25zLnRpbWVvdXQpKV07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRpc3BhdGNoZWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/callback/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeCallback: () => (/* binding */ invokeCallback),\n/* harmony export */   pTimeout: () => (/* binding */ pTimeout),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction pTimeout(promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var timeoutId = setTimeout(function () {\n            reject(Error('Promise timed out'));\n        }, timeout);\n        promise\n            .then(function (val) {\n            clearTimeout(timeoutId);\n            return resolve(val);\n        })\n            .catch(reject);\n    });\n}\nfunction sleep(timeoutInMs) {\n    return new Promise(function (resolve) { return setTimeout(resolve, timeoutInMs); });\n}\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nfunction invokeCallback(ctx, callback, delay) {\n    var cb = function () {\n        try {\n            return Promise.resolve(callback(ctx));\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    };\n    return (sleep(delay)\n        // pTimeout ensures that the callback can't cause the context to hang\n        .then(function () { return pTimeout(cb(), 1000); })\n        .catch(function (err) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.log('warn', 'Callback Error', { error: err });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stats.increment('callback_error');\n    })\n        .then(function () { return ctx; }));\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQLDRDQUE0QywwQ0FBMEM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQSxzRkFBc0YsWUFBWTtBQUNsRztBQUNBLEtBQUs7QUFDTCw0QkFBNEIsYUFBYTtBQUN6QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanM/YTZkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcFRpbWVvdXQocHJvbWlzZSwgdGltZW91dCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdChFcnJvcignUHJvbWlzZSB0aW1lZCBvdXQnKSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzbGVlcCh0aW1lb3V0SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5Ncyk7IH0pO1xufVxuLyoqXG4gKiBAcGFyYW0gY3R4XG4gKiBAcGFyYW0gY2FsbGJhY2sgLSB0aGUgZnVuY3Rpb24gdG8gaW52b2tlXG4gKiBAcGFyYW0gZGVsYXkgLSBha2EgXCJ0aW1lb3V0XCIuIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtcyB0byB3YWl0IGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhjdHgsIGNhbGxiYWNrLCBkZWxheSkge1xuICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FsbGJhY2soY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoc2xlZXAoZGVsYXkpXG4gICAgICAgIC8vIHBUaW1lb3V0IGVuc3VyZXMgdGhhdCB0aGUgY2FsbGJhY2sgY2FuJ3QgY2F1c2UgdGhlIGNvbnRleHQgdG8gaGFuZ1xuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBwVGltZW91dChjYigpLCAxMDAwKTsgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LmxvZygnd2FybicsICdDYWxsYmFjayBFcnJvcicsIHsgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LnN0YXRzLmluY3JlbWVudCgnY2FsbGJhY2tfZXJyb3InKTtcbiAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBjdHg7IH0pKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/context/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextCancelation: () => (/* binding */ ContextCancelation),\n/* harmony export */   CoreContext: () => (/* binding */ CoreContext)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(ssr)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../logger */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stats */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n\n\n\n\nvar ContextCancelation = /** @class */ (function () {\n    function ContextCancelation(options) {\n        var _a, _b, _c;\n        this.retry = (_a = options.retry) !== null && _a !== void 0 ? _a : true;\n        this.type = (_b = options.type) !== null && _b !== void 0 ? _b : 'plugin Error';\n        this.reason = (_c = options.reason) !== null && _c !== void 0 ? _c : '';\n    }\n    return ContextCancelation;\n}());\n\nvar CoreContext = /** @class */ (function () {\n    function CoreContext(event, id, stats, logger) {\n        if (id === void 0) { id = (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(); }\n        if (stats === void 0) { stats = new _stats__WEBPACK_IMPORTED_MODULE_2__.NullStats(); }\n        if (logger === void 0) { logger = new _logger__WEBPACK_IMPORTED_MODULE_3__.CoreLogger(); }\n        this.attempts = 0;\n        this.event = event;\n        this._id = id;\n        this.logger = logger;\n        this.stats = stats;\n    }\n    CoreContext.system = function () {\n        // This should be overridden by the subclass to return an instance of the subclass.\n    };\n    CoreContext.prototype.isSame = function (other) {\n        return other.id === this.id;\n    };\n    CoreContext.prototype.cancel = function (error) {\n        if (error) {\n            throw error;\n        }\n        throw new ContextCancelation({ reason: 'Context Cancel' });\n    };\n    CoreContext.prototype.log = function (level, message, extras) {\n        this.logger.log(level, message, extras);\n    };\n    Object.defineProperty(CoreContext.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreContext.prototype.updateEvent = function (path, val) {\n        var _a;\n        // Don't allow integrations that are set to false to be overwritten with integration settings.\n        if (path.split('.')[0] === 'integrations') {\n            var integrationName = path.split('.')[1];\n            if (((_a = this.event.integrations) === null || _a === void 0 ? void 0 : _a[integrationName]) === false) {\n                return this.event;\n            }\n        }\n        (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(this.event, path, val);\n        return this.event;\n    };\n    CoreContext.prototype.failedDelivery = function () {\n        return this._failedDelivery;\n    };\n    CoreContext.prototype.setFailedDelivery = function (options) {\n        this._failedDelivery = options;\n    };\n    CoreContext.prototype.logs = function () {\n        return this.logger.logs;\n    };\n    CoreContext.prototype.flush = function () {\n        this.logger.flush();\n        this.stats.flush();\n    };\n    CoreContext.prototype.toJSON = function () {\n        return {\n            id: this._id,\n            event: this.event,\n            logs: this.logger.logs,\n            metrics: this.stats.metrics,\n        };\n    };\n    return CoreContext;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFDZDtBQUNXO0FBQ0Y7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNkI7QUFDOUI7QUFDQTtBQUNBLDZCQUE2QixLQUFLLGdEQUFJO0FBQ3RDLGdDQUFnQyxZQUFZLDZDQUFTO0FBQ3JELGlDQUFpQyxhQUFhLCtDQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBCQUEwQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3NCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcz9kNDViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuaW1wb3J0IHsgZHNldCB9IGZyb20gJ2RzZXQnO1xuaW1wb3J0IHsgQ29yZUxvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBOdWxsU3RhdHMgfSBmcm9tICcuLi9zdGF0cyc7XG52YXIgQ29udGV4dENhbmNlbGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRleHRDYW5jZWxhdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnJldHJ5ID0gKF9hID0gb3B0aW9ucy5yZXRyeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZTtcbiAgICAgICAgdGhpcy50eXBlID0gKF9iID0gb3B0aW9ucy50eXBlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAncGx1Z2luIEVycm9yJztcbiAgICAgICAgdGhpcy5yZWFzb24gPSAoX2MgPSBvcHRpb25zLnJlYXNvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgfVxuICAgIHJldHVybiBDb250ZXh0Q2FuY2VsYXRpb247XG59KCkpO1xuZXhwb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH07XG52YXIgQ29yZUNvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUNvbnRleHQoZXZlbnQsIGlkLCBzdGF0cywgbG9nZ2VyKSB7XG4gICAgICAgIGlmIChpZCA9PT0gdm9pZCAwKSB7IGlkID0gdXVpZCgpOyB9XG4gICAgICAgIGlmIChzdGF0cyA9PT0gdm9pZCAwKSB7IHN0YXRzID0gbmV3IE51bGxTdGF0cygpOyB9XG4gICAgICAgIGlmIChsb2dnZXIgPT09IHZvaWQgMCkgeyBsb2dnZXIgPSBuZXcgQ29yZUxvZ2dlcigpOyB9XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLnN0YXRzID0gc3RhdHM7XG4gICAgfVxuICAgIENvcmVDb250ZXh0LnN5c3RlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSB0aGUgc3ViY2xhc3MgdG8gcmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzdWJjbGFzcy5cbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5pc1NhbWUgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLmlkID09PSB0aGlzLmlkO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oeyByZWFzb246ICdDb250ZXh0IENhbmNlbCcgfSk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvcmVDb250ZXh0LnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnVwZGF0ZUV2ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZhbCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIERvbid0IGFsbG93IGludGVncmF0aW9ucyB0aGF0IGFyZSBzZXQgdG8gZmFsc2UgdG8gYmUgb3ZlcndyaXR0ZW4gd2l0aCBpbnRlZ3JhdGlvbiBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHBhdGguc3BsaXQoJy4nKVswXSA9PT0gJ2ludGVncmF0aW9ucycpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbk5hbWUgPSBwYXRoLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbaW50ZWdyYXRpb25OYW1lXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZHNldCh0aGlzLmV2ZW50LCBwYXRoLCB2YWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudDtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5mYWlsZWREZWxpdmVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhaWxlZERlbGl2ZXJ5O1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnNldEZhaWxlZERlbGl2ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZmFpbGVkRGVsaXZlcnkgPSBvcHRpb25zO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmxvZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dlci5sb2dzO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5mbHVzaCgpO1xuICAgICAgICB0aGlzLnN0YXRzLmZsdXNoKCk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgICAgICBsb2dzOiB0aGlzLmxvZ2dlci5sb2dzLFxuICAgICAgICAgICAgbWV0cmljczogdGhpcy5zdGF0cy5tZXRyaWNzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVDb250ZXh0O1xufSgpKTtcbmV4cG9ydCB7IENvcmVDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/events/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/events/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventFactory: () => (/* binding */ CoreEventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dset */ \"(ssr)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _utils_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/pick */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\");\n/* harmony import */ var _validation_assertions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validation/assertions */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n\n\n\n\n\n/**\n * Internal settings object that is used internally by the factory\n */\nvar InternalEventFactorySettings = /** @class */ (function () {\n    function InternalEventFactorySettings(settings) {\n        var _a, _b;\n        this.settings = settings;\n        this.createMessageId = settings.createMessageId;\n        this.onEventMethodCall = (_a = settings.onEventMethodCall) !== null && _a !== void 0 ? _a : (function () { });\n        this.onFinishedEvent = (_b = settings.onFinishedEvent) !== null && _b !== void 0 ? _b : (function () { });\n    }\n    return InternalEventFactorySettings;\n}());\nvar CoreEventFactory = /** @class */ (function () {\n    function CoreEventFactory(settings) {\n        this.settings = new InternalEventFactorySettings(settings);\n    }\n    CoreEventFactory.prototype.track = function (event, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'track', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { event: event, type: 'track', properties: properties !== null && properties !== void 0 ? properties : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations) }));\n    };\n    CoreEventFactory.prototype.page = function (category, page, properties, options, globalIntegrations) {\n        var _a;\n        this.settings.onEventMethodCall({ type: 'page', options: options });\n        var event = {\n            type: 'page',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n            event.properties = (_a = event.properties) !== null && _a !== void 0 ? _a : {};\n            event.properties.category = category;\n        }\n        if (page !== null) {\n            event.name = page;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'screen', options: options });\n        var event = {\n            type: 'screen',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n        }\n        if (screen !== null) {\n            event.name = screen;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.identify = function (userId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'identify', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'identify', userId: userId, traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: globalIntegrations }));\n    };\n    CoreEventFactory.prototype.group = function (groupId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'group', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'group', traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations), //\n            groupId: groupId }));\n    };\n    CoreEventFactory.prototype.alias = function (to, from, // TODO: can we make this undefined?\n    options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'alias', options: options });\n        var base = {\n            userId: to,\n            type: 'alias',\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (from !== null) {\n            base.previousId = from;\n        }\n        if (to === undefined) {\n            return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, base), this.baseEvent()));\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), base));\n    };\n    CoreEventFactory.prototype.baseEvent = function () {\n        return {\n            integrations: {},\n            options: {},\n        };\n    };\n    /**\n     * Builds the context part of an event based on \"foreign\" keys that\n     * are provided in the `Options` parameter for an Event\n     */\n    CoreEventFactory.prototype.context = function (options) {\n        var _a;\n        /**\n         * If the event options are known keys from this list, we move them to the top level of the event.\n         * Any other options are moved to context.\n         */\n        var eventOverrideKeys = [\n            'userId',\n            'anonymousId',\n            'timestamp',\n            'messageId',\n        ];\n        delete options['integrations'];\n        var providedOptionsKeys = Object.keys(options);\n        var context = (_a = options.context) !== null && _a !== void 0 ? _a : {};\n        var eventOverrides = {};\n        providedOptionsKeys.forEach(function (key) {\n            if (key === 'context') {\n                return;\n            }\n            if (eventOverrideKeys.includes(key)) {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(eventOverrides, key, options[key]);\n            }\n            else {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(context, key, options[key]);\n            }\n        });\n        return [context, eventOverrides];\n    };\n    CoreEventFactory.prototype.normalize = function (event) {\n        var _a, _b;\n        var integrationBooleans = Object.keys((_a = event.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (integrationNames, name) {\n            var _a;\n            var _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationNames), (_a = {}, _a[name] = Boolean((_b = event.integrations) === null || _b === void 0 ? void 0 : _b[name]), _a));\n        }, {});\n        // filter out any undefined options\n        event.options = (0,_utils_pick__WEBPACK_IMPORTED_MODULE_2__.pickBy)(event.options || {}, function (_, value) {\n            return value !== undefined;\n        });\n        // This is pretty trippy, but here's what's going on:\n        // - a) We don't pass initial integration options as part of the event, only if they're true or false\n        // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n        // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n        var allIntegrations = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationBooleans), (_b = event.options) === null || _b === void 0 ? void 0 : _b.integrations);\n        var _c = event.options\n            ? this.context(event.options)\n            : [], context = _c[0], overrides = _c[1];\n        var options = event.options, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__rest)(event, [\"options\"]);\n        var evt = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ timestamp: new Date() }, rest), { context: context, integrations: allIntegrations }), overrides), { messageId: options.messageId || this.settings.createMessageId() });\n        this.settings.onFinishedEvent(evt);\n        (0,_validation_assertions__WEBPACK_IMPORTED_MODULE_3__.validateEvent)(evt);\n        return evt;\n    };\n    return CoreEventFactory;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ1o7QUFDRDtBQUNXO0FBQ2tCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvSEFBb0g7QUFDcEgsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0UsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyx1QkFBdUIsdUdBQXVHLFdBQVcsK0NBQVEsR0FBRywwQkFBMEIsK0NBQVEsR0FBRyx1QkFBdUI7QUFDbFE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdDQUFnQztBQUMxRTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUNsRDtBQUNBO0FBQ0EsMENBQTBDLGtDQUFrQztBQUM1RTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQSwwQ0FBMEMsb0NBQW9DO0FBQzlFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLDRGQUE0RixXQUFXLCtDQUFRLEdBQUcsOENBQThDO0FBQ3pPO0FBQ0E7QUFDQSwwQ0FBMEMsaUNBQWlDO0FBQzNFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLHlFQUF5RSxXQUFXLCtDQUFRLEdBQUcsMEJBQTBCLCtDQUFRLEdBQUc7QUFDN00sOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDdEQ7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qix1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkc7QUFDM0c7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCO0FBQ3BFLFNBQVMsSUFBSTtBQUNiO0FBQ0Esd0JBQXdCLG1EQUFNLG9CQUFvQjtBQUNsRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDZDQUFNO0FBQ2xELGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLHVCQUF1QixXQUFXLGlEQUFpRCxpQkFBaUIsaUVBQWlFO0FBQzdOO0FBQ0EsUUFBUSxxRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzPzg1Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IGRzZXQgfSBmcm9tICdkc2V0JztcbmltcG9ydCB7IHBpY2tCeSB9IGZyb20gJy4uL3V0aWxzL3BpY2snO1xuaW1wb3J0IHsgdmFsaWRhdGVFdmVudCB9IGZyb20gJy4uL3ZhbGlkYXRpb24vYXNzZXJ0aW9ucyc7XG4vKipcbiAqIEludGVybmFsIHNldHRpbmdzIG9iamVjdCB0aGF0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgZmFjdG9yeVxuICovXG52YXIgSW50ZXJuYWxFdmVudEZhY3RvcnlTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlcm5hbEV2ZW50RmFjdG9yeVNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNzYWdlSWQgPSBzZXR0aW5ncy5jcmVhdGVNZXNzYWdlSWQ7XG4gICAgICAgIHRoaXMub25FdmVudE1ldGhvZENhbGwgPSAoX2EgPSBzZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub25GaW5pc2hlZEV2ZW50ID0gKF9iID0gc2V0dGluZ3Mub25GaW5pc2hlZEV2ZW50KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoZnVuY3Rpb24gKCkgeyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3M7XG59KCkpO1xudmFyIENvcmVFdmVudEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50RmFjdG9yeShzZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gbmV3IEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChldmVudCwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAndHJhY2snLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCB7IGV2ZW50OiBldmVudCwgdHlwZTogJ3RyYWNrJywgcHJvcGVydGllczogcHJvcGVydGllcyAhPT0gbnVsbCAmJiBwcm9wZXJ0aWVzICE9PSB2b2lkIDAgPyBwcm9wZXJ0aWVzIDoge30sIG9wdGlvbnM6IF9fYXNzaWduKHt9LCBvcHRpb25zKSwgaW50ZWdyYXRpb25zOiBfX2Fzc2lnbih7fSwgZ2xvYmFsSW50ZWdyYXRpb25zKSB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ3BhZ2UnLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICB2YXIgZXZlbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiAncGFnZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gKF9hID0gZXZlbnQucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50Lm5hbWUgPSBwYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGV2ZW50KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5zY3JlZW4gPSBmdW5jdGlvbiAoY2F0ZWdvcnksIHNjcmVlbiwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAnc2NyZWVuJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NjcmVlbicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjcmVlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXZlbnQubmFtZSA9IHNjcmVlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCBldmVudCkpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAodXNlcklkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2lkZW50aWZ5Jywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnaWRlbnRpZnknLCB1c2VySWQ6IHVzZXJJZCwgdHJhaXRzOiB0cmFpdHMgIT09IG51bGwgJiYgdHJhaXRzICE9PSB2b2lkIDAgPyB0cmFpdHMgOiB7fSwgb3B0aW9uczogX19hc3NpZ24oe30sIG9wdGlvbnMpLCBpbnRlZ3JhdGlvbnM6IGdsb2JhbEludGVncmF0aW9ucyB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uIChncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2dyb3VwJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnZ3JvdXAnLCB0cmFpdHM6IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucyksIC8vXG4gICAgICAgICAgICBncm91cElkOiBncm91cElkIH0pKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKHRvLCBmcm9tLCAvLyBUT0RPOiBjYW4gd2UgbWFrZSB0aGlzIHVuZGVmaW5lZD9cbiAgICBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCh7IHR5cGU6ICdhbGlhcycsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG4gICAgICAgIHZhciBiYXNlID0ge1xuICAgICAgICAgICAgdXNlcklkOiB0byxcbiAgICAgICAgICAgIHR5cGU6ICdhbGlhcycsXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYmFzZS5wcmV2aW91c0lkID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlKSwgdGhpcy5iYXNlRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGJhc2UpKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmJhc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVncmF0aW9uczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgY29udGV4dCBwYXJ0IG9mIGFuIGV2ZW50IGJhc2VkIG9uIFwiZm9yZWlnblwiIGtleXMgdGhhdFxuICAgICAqIGFyZSBwcm92aWRlZCBpbiB0aGUgYE9wdGlvbnNgIHBhcmFtZXRlciBmb3IgYW4gRXZlbnRcbiAgICAgKi9cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5jb250ZXh0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGV2ZW50IG9wdGlvbnMgYXJlIGtub3duIGtleXMgZnJvbSB0aGlzIGxpc3QsIHdlIG1vdmUgdGhlbSB0byB0aGUgdG9wIGxldmVsIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQW55IG90aGVyIG9wdGlvbnMgYXJlIG1vdmVkIHRvIGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZXZlbnRPdmVycmlkZUtleXMgPSBbXG4gICAgICAgICAgICAndXNlcklkJyxcbiAgICAgICAgICAgICdhbm9ueW1vdXNJZCcsXG4gICAgICAgICAgICAndGltZXN0YW1wJyxcbiAgICAgICAgICAgICdtZXNzYWdlSWQnLFxuICAgICAgICBdO1xuICAgICAgICBkZWxldGUgb3B0aW9uc1snaW50ZWdyYXRpb25zJ107XG4gICAgICAgIHZhciBwcm92aWRlZE9wdGlvbnNLZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gKF9hID0gb3B0aW9ucy5jb250ZXh0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgdmFyIGV2ZW50T3ZlcnJpZGVzID0ge307XG4gICAgICAgIHByb3ZpZGVkT3B0aW9uc0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnY29udGV4dCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnRPdmVycmlkZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGRzZXQoZXZlbnRPdmVycmlkZXMsIGtleSwgb3B0aW9uc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzZXQoY29udGV4dCwga2V5LCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtjb250ZXh0LCBldmVudE92ZXJyaWRlc107XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGludGVncmF0aW9uQm9vbGVhbnMgPSBPYmplY3Qua2V5cygoX2EgPSBldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5yZWR1Y2UoZnVuY3Rpb24gKGludGVncmF0aW9uTmFtZXMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25OYW1lcyksIChfYSA9IHt9LCBfYVtuYW1lXSA9IEJvb2xlYW4oKF9iID0gZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbbmFtZV0pLCBfYSkpO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGZpbHRlciBvdXQgYW55IHVuZGVmaW5lZCBvcHRpb25zXG4gICAgICAgIGV2ZW50Lm9wdGlvbnMgPSBwaWNrQnkoZXZlbnQub3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJldHR5IHRyaXBweSwgYnV0IGhlcmUncyB3aGF0J3MgZ29pbmcgb246XG4gICAgICAgIC8vIC0gYSkgV2UgZG9uJ3QgcGFzcyBpbml0aWFsIGludGVncmF0aW9uIG9wdGlvbnMgYXMgcGFydCBvZiB0aGUgZXZlbnQsIG9ubHkgaWYgdGhleSdyZSB0cnVlIG9yIGZhbHNlXG4gICAgICAgIC8vIC0gYikgV2UgZG8gYWNjZXB0IHBlciBpbnRlZ3JhdGlvbiBvdmVycmlkZXMgKGxpa2UgaW50ZWdyYXRpb25zLkFtcGxpdHVkZS5zZXNzaW9uSWQpIGF0IHRoZSBldmVudCBsZXZlbFxuICAgICAgICAvLyBIZW5jZSB0aGUgbmVlZCB0byBjb252ZXJ0IGJhc2UgaW50ZWdyYXRpb24gb3B0aW9ucyB0byBib29sZWFucywgYnV0IG1haW50YWluIHBlciBldmVudCBpbnRlZ3JhdGlvbiBvdmVycmlkZXNcbiAgICAgICAgdmFyIGFsbEludGVncmF0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbkJvb2xlYW5zKSwgKF9iID0gZXZlbnQub3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmludGVncmF0aW9ucyk7XG4gICAgICAgIHZhciBfYyA9IGV2ZW50Lm9wdGlvbnNcbiAgICAgICAgICAgID8gdGhpcy5jb250ZXh0KGV2ZW50Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IFtdLCBjb250ZXh0ID0gX2NbMF0sIG92ZXJyaWRlcyA9IF9jWzFdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGV2ZW50Lm9wdGlvbnMsIHJlc3QgPSBfX3Jlc3QoZXZlbnQsIFtcIm9wdGlvbnNcIl0pO1xuICAgICAgICB2YXIgZXZ0ID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSwgcmVzdCksIHsgY29udGV4dDogY29udGV4dCwgaW50ZWdyYXRpb25zOiBhbGxJbnRlZ3JhdGlvbnMgfSksIG92ZXJyaWRlcyksIHsgbWVzc2FnZUlkOiBvcHRpb25zLm1lc3NhZ2VJZCB8fCB0aGlzLnNldHRpbmdzLmNyZWF0ZU1lc3NhZ2VJZCgpIH0pO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRmluaXNoZWRFdmVudChldnQpO1xuICAgICAgICB2YWxpZGF0ZUV2ZW50KGV2dCk7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUV2ZW50RmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBDb3JlRXZlbnRGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/logger/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreLogger: () => (/* binding */ CoreLogger)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar CoreLogger = /** @class */ (function () {\n    function CoreLogger() {\n        this._logs = [];\n    }\n    CoreLogger.prototype.log = function (level, message, extras) {\n        var time = new Date();\n        this._logs.push({\n            level: level,\n            message: message,\n            time: time,\n            extras: extras,\n        });\n    };\n    Object.defineProperty(CoreLogger.prototype, \"logs\", {\n        get: function () {\n            return this._logs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreLogger.prototype.flush = function () {\n        if (this.logs.length > 1) {\n            var formatted = this._logs.reduce(function (logs, log) {\n                var _a;\n                var _b, _c;\n                var line = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, log), { json: JSON.stringify(log.extras, null, ' '), extras: log.extras });\n                delete line['time'];\n                var key = (_c = (_b = log.time) === null || _b === void 0 ? void 0 : _b.toISOString()) !== null && _c !== void 0 ? _c : '';\n                if (logs[key]) {\n                    key = \"\".concat(key, \"-\").concat(Math.random());\n                }\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, logs), (_a = {}, _a[key] = line, _a));\n            }, {});\n            // ie doesn't like console.table\n            if (console.table) {\n                console.table(formatted);\n            }\n            else {\n                console.log(formatted);\n            }\n        }\n        else {\n            this.logs.forEach(function (logEntry) {\n                var level = logEntry.level, message = logEntry.message, extras = logEntry.extras;\n                if (level === 'info' || level === 'debug') {\n                    console.log(message, extras !== null && extras !== void 0 ? extras : '');\n                }\n                else {\n                    console[level](message, extras !== null && extras !== void 0 ? extras : '');\n                }\n            });\n        }\n        this._logs = [];\n    };\n    return CoreLogger;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxVQUFVLGlFQUFpRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxpQkFBaUI7QUFDNUQsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3FCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzPzM3NjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbnZhciBDb3JlTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVMb2dnZXIoKSB7XG4gICAgICAgIHRoaXMuX2xvZ3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZUxvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLl9sb2dzLnB1c2goe1xuICAgICAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICBleHRyYXM6IGV4dHJhcyxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29yZUxvZ2dlci5wcm90b3R5cGUsIFwibG9nc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb3JlTG9nZ2VyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5fbG9ncy5yZWR1Y2UoZnVuY3Rpb24gKGxvZ3MsIGxvZykge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvZyksIHsganNvbjogSlNPTi5zdHJpbmdpZnkobG9nLmV4dHJhcywgbnVsbCwgJyAnKSwgZXh0cmFzOiBsb2cuZXh0cmFzIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsaW5lWyd0aW1lJ107XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IChfYyA9IChfYiA9IGxvZy50aW1lKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9JU09TdHJpbmcoKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgICAgICAgICAgICAgaWYgKGxvZ3Nba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlwiLmNvbmNhdChrZXksIFwiLVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG9ncyksIChfYSA9IHt9LCBfYVtrZXldID0gbGluZSwgX2EpKTtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIC8vIGllIGRvZXNuJ3QgbGlrZSBjb25zb2xlLnRhYmxlXG4gICAgICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUudGFibGUoZm9ybWF0dGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuZm9yRWFjaChmdW5jdGlvbiAobG9nRW50cnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSBsb2dFbnRyeS5sZXZlbCwgbWVzc2FnZSA9IGxvZ0VudHJ5Lm1lc3NhZ2UsIGV4dHJhcyA9IGxvZ0VudHJ5LmV4dHJhcztcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT09ICdpbmZvJyB8fCBsZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlW2xldmVsXShtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9ncyA9IFtdO1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVMb2dnZXI7XG59KCkpO1xuZXhwb3J0IHsgQ29yZUxvZ2dlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backoff: () => (/* binding */ backoff)\n/* harmony export */ });\nfunction backoff(params) {\n    var random = Math.random() + 1;\n    var _a = params.minTimeout, minTimeout = _a === void 0 ? 500 : _a, _b = params.factor, factor = _b === void 0 ? 2 : _b, attempt = params.attempt, _c = params.maxTimeout, maxTimeout = _c === void 0 ? Infinity : _c;\n    return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout);\n}\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcz82NzI5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBiYWNrb2ZmKHBhcmFtcykge1xuICAgIHZhciByYW5kb20gPSBNYXRoLnJhbmRvbSgpICsgMTtcbiAgICB2YXIgX2EgPSBwYXJhbXMubWluVGltZW91dCwgbWluVGltZW91dCA9IF9hID09PSB2b2lkIDAgPyA1MDAgOiBfYSwgX2IgPSBwYXJhbXMuZmFjdG9yLCBmYWN0b3IgPSBfYiA9PT0gdm9pZCAwID8gMiA6IF9iLCBhdHRlbXB0ID0gcGFyYW1zLmF0dGVtcHQsIF9jID0gcGFyYW1zLm1heFRpbWVvdXQsIG1heFRpbWVvdXQgPSBfYyA9PT0gdm9pZCAwID8gSW5maW5pdHkgOiBfYztcbiAgICByZXR1cm4gTWF0aC5taW4ocmFuZG9tICogbWluVGltZW91dCAqIE1hdGgucG93KGZhY3RvciwgYXR0ZW1wdCksIG1heFRpbWVvdXQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFja29mZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ON_REMOVE_FROM_FUTURE: () => (/* binding */ ON_REMOVE_FROM_FUTURE),\n/* harmony export */   PriorityQueue: () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backoff */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n\n\n\n/**\n * @internal\n */\nvar ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture';\nvar PriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(PriorityQueue, _super);\n    function PriorityQueue(maxAttempts, queue, seen) {\n        var _this = _super.call(this) || this;\n        _this.future = [];\n        _this.maxAttempts = maxAttempts;\n        _this.queue = queue;\n        _this.seen = seen !== null && seen !== void 0 ? seen : {};\n        return _this;\n    }\n    PriorityQueue.prototype.push = function () {\n        var _this = this;\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var accepted = items.map(function (operation) {\n            var attempts = _this.updateAttempts(operation);\n            if (attempts > _this.maxAttempts || _this.includes(operation)) {\n                return false;\n            }\n            _this.queue.push(operation);\n            return true;\n        });\n        this.queue = this.queue.sort(function (a, b) { return _this.getAttempts(a) - _this.getAttempts(b); });\n        return accepted;\n    };\n    PriorityQueue.prototype.pushWithBackoff = function (item, minTimeout) {\n        var _this = this;\n        if (minTimeout === void 0) { minTimeout = 0; }\n        // One immediate retry unless we have a minimum timeout (e.g. for rate limiting)\n        if (minTimeout == 0 && this.getAttempts(item) === 0) {\n            return this.push(item)[0];\n        }\n        var attempt = this.updateAttempts(item);\n        if (attempt > this.maxAttempts || this.includes(item)) {\n            return false;\n        }\n        var timeout = (0,_backoff__WEBPACK_IMPORTED_MODULE_1__.backoff)({ attempt: attempt - 1 });\n        if (minTimeout > 0 && timeout < minTimeout) {\n            timeout = minTimeout;\n        }\n        setTimeout(function () {\n            _this.queue.push(item);\n            // remove from future list\n            _this.future = _this.future.filter(function (f) { return f.id !== item.id; });\n            // Lets listeners know that a 'future' message is now available in the queue\n            _this.emit(ON_REMOVE_FROM_FUTURE);\n        }, timeout);\n        this.future.push(item);\n        return true;\n    };\n    PriorityQueue.prototype.getAttempts = function (item) {\n        var _a;\n        return (_a = this.seen[item.id]) !== null && _a !== void 0 ? _a : 0;\n    };\n    PriorityQueue.prototype.updateAttempts = function (item) {\n        this.seen[item.id] = this.getAttempts(item) + 1;\n        return this.getAttempts(item);\n    };\n    PriorityQueue.prototype.includes = function (item) {\n        return (this.queue.includes(item) ||\n            this.future.includes(item) ||\n            Boolean(this.queue.find(function (i) { return i.id === item.id; })) ||\n            Boolean(this.future.find(function (i) { return i.id === item.id; })));\n    };\n    PriorityQueue.prototype.pop = function () {\n        return this.queue.shift();\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"length\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"todo\", {\n        get: function () {\n            return this.queue.length + this.future.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PriorityQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__.Emitter));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDeUI7QUFDdkI7QUFDcEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdURBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFPLEdBQUcsc0JBQXNCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwwQkFBMEI7QUFDeEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RSxvREFBb0QsMEJBQTBCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDLENBQUMscUVBQU87QUFDZ0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9wcmlvcml0eS1xdWV1ZS9pbmRleC5qcz8wZDQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGJhY2tvZmYgfSBmcm9tICcuL2JhY2tvZmYnO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBPTl9SRU1PVkVfRlJPTV9GVVRVUkUgPSAnb25SZW1vdmVGcm9tRnV0dXJlJztcbnZhciBQcmlvcml0eVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcmlvcml0eVF1ZXVlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIHF1ZXVlLCBzZWVuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZ1dHVyZSA9IFtdO1xuICAgICAgICBfdGhpcy5tYXhBdHRlbXB0cyA9IG1heEF0dGVtcHRzO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBfdGhpcy5zZWVuID0gc2VlbiAhPT0gbnVsbCAmJiBzZWVuICE9PSB2b2lkIDAgPyBzZWVuIDoge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBpdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhY2NlcHRlZCA9IGl0ZW1zLm1hcChmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBfdGhpcy51cGRhdGVBdHRlbXB0cyhvcGVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKGF0dGVtcHRzID4gX3RoaXMubWF4QXR0ZW1wdHMgfHwgX3RoaXMuaW5jbHVkZXMob3BlcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gX3RoaXMuZ2V0QXR0ZW1wdHMoYSkgLSBfdGhpcy5nZXRBdHRlbXB0cyhiKTsgfSk7XG4gICAgICAgIHJldHVybiBhY2NlcHRlZDtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnB1c2hXaXRoQmFja29mZiA9IGZ1bmN0aW9uIChpdGVtLCBtaW5UaW1lb3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChtaW5UaW1lb3V0ID09PSB2b2lkIDApIHsgbWluVGltZW91dCA9IDA7IH1cbiAgICAgICAgLy8gT25lIGltbWVkaWF0ZSByZXRyeSB1bmxlc3Mgd2UgaGF2ZSBhIG1pbmltdW0gdGltZW91dCAoZS5nLiBmb3IgcmF0ZSBsaW1pdGluZylcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPT0gMCAmJiB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGl0ZW0pWzBdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRlbXB0ID0gdGhpcy51cGRhdGVBdHRlbXB0cyhpdGVtKTtcbiAgICAgICAgaWYgKGF0dGVtcHQgPiB0aGlzLm1heEF0dGVtcHRzIHx8IHRoaXMuaW5jbHVkZXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGltZW91dCA9IGJhY2tvZmYoeyBhdHRlbXB0OiBhdHRlbXB0IC0gMSB9KTtcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPiAwICYmIHRpbWVvdXQgPCBtaW5UaW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbWluVGltZW91dDtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBmdXR1cmUgbGlzdFxuICAgICAgICAgICAgX3RoaXMuZnV0dXJlID0gX3RoaXMuZnV0dXJlLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5pZCAhPT0gaXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAvLyBMZXRzIGxpc3RlbmVycyBrbm93IHRoYXQgYSAnZnV0dXJlJyBtZXNzYWdlIGlzIG5vdyBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICBfdGhpcy5lbWl0KE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmZ1dHVyZS5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldEF0dGVtcHRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zZWVuW2l0ZW0uaWRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUudXBkYXRlQXR0ZW1wdHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnNlZW5baXRlbS5pZF0gPSB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoaXRlbSk7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5xdWV1ZS5pbmNsdWRlcyhpdGVtKSB8fFxuICAgICAgICAgICAgdGhpcy5mdXR1cmUuaW5jbHVkZXMoaXRlbSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5xdWV1ZS5maW5kKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlkID09PSBpdGVtLmlkOyB9KSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5mdXR1cmUuZmluZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pZCA9PT0gaXRlbS5pZDsgfSkpKTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJ0b2RvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggKyB0aGlzLmZ1dHVyZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attempt: () => (/* binding */ attempt),\n/* harmony export */   ensure: () => (/* binding */ ensure)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n\n\nfunction tryAsync(fn) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, fn()];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, Promise.reject(err_1)];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction attempt(ctx, plugin) {\n    ctx.log('debug', 'plugin', { plugin: plugin.name });\n    var start = new Date().getTime();\n    var hook = plugin[ctx.event.type];\n    if (hook === undefined) {\n        return Promise.resolve(ctx);\n    }\n    var newCtx = tryAsync(function () { return hook.apply(plugin, [ctx]); })\n        .then(function (ctx) {\n        var done = new Date().getTime() - start;\n        ctx.stats.gauge('plugin_time', done, [\"plugin:\".concat(plugin.name)]);\n        return ctx;\n    })\n        .catch(function (err) {\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation &&\n            err.type === 'middleware_cancellation') {\n            throw err;\n        }\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation) {\n            ctx.log('warn', err.type, {\n                plugin: plugin.name,\n                error: err,\n            });\n            return err;\n        }\n        ctx.log('error', 'plugin Error', {\n            plugin: plugin.name,\n            error: err,\n        });\n        ctx.stats.increment('plugin_error', 1, [\"plugin:\".concat(plugin.name)]);\n        return err;\n    });\n    return newCtx;\n}\nfunction ensure(ctx, plugin) {\n    return attempt(ctx, plugin).then(function (newContext) {\n        if (newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.CoreContext) {\n            return newContext;\n        }\n        ctx.log('debug', 'Context canceled');\n        ctx.stats.increment('context_canceled');\n        ctx.cancel(newContext);\n    });\n}\n//# sourceMappingURL=delivery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNjO0FBQzdEO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxpQ0FBaUMscUJBQXFCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUNBQW1DO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0MsaURBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanM/NDhhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb3JlQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vY29udGV4dCc7XG5mdW5jdGlvbiB0cnlBc3luYyhmbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVycl8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdChlcnJfMSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRlbXB0KGN0eCwgcGx1Z2luKSB7XG4gICAgY3R4LmxvZygnZGVidWcnLCAncGx1Z2luJywgeyBwbHVnaW46IHBsdWdpbi5uYW1lIH0pO1xuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHZhciBob29rID0gcGx1Z2luW2N0eC5ldmVudC50eXBlXTtcbiAgICBpZiAoaG9vayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTtcbiAgICB9XG4gICAgdmFyIG5ld0N0eCA9IHRyeUFzeW5jKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhvb2suYXBwbHkocGx1Z2luLCBbY3R4XSk7IH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0O1xuICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ3BsdWdpbl90aW1lJywgZG9uZSwgW1wicGx1Z2luOlwiLmNvbmNhdChwbHVnaW4ubmFtZSldKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uICYmXG4gICAgICAgICAgICBlcnIudHlwZSA9PT0gJ21pZGRsZXdhcmVfY2FuY2VsbGF0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDb250ZXh0Q2FuY2VsYXRpb24pIHtcbiAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCBlcnIudHlwZSwge1xuICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdlcnJvcicsICdwbHVnaW4gRXJyb3InLCB7XG4gICAgICAgICAgICBwbHVnaW46IHBsdWdpbi5uYW1lLFxuICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ3BsdWdpbl9lcnJvcicsIDEsIFtcInBsdWdpbjpcIi5jb25jYXQocGx1Z2luLm5hbWUpXSk7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld0N0eDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmUoY3R4LCBwbHVnaW4pIHtcbiAgICByZXR1cm4gYXR0ZW1wdChjdHgsIHBsdWdpbikudGhlbihmdW5jdGlvbiAobmV3Q29udGV4dCkge1xuICAgICAgICBpZiAobmV3Q29udGV4dCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3Q29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdDb250ZXh0IGNhbmNlbGVkJyk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2NvbnRleHRfY2FuY2VsZWQnKTtcbiAgICAgICAgY3R4LmNhbmNlbChuZXdDb250ZXh0KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGl2ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventQueue: () => (/* binding */ CoreEventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _utils_group_by__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/group-by */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\");\n/* harmony import */ var _priority_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../priority-queue */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _task_task_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../task/task-group */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\");\n/* harmony import */ var _delivery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delivery */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n\n\n\n\n\n\n\nvar CoreEventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(CoreEventQueue, _super);\n    function CoreEventQueue(priorityQueue) {\n        var _this = _super.call(this) || this;\n        /**\n         * All event deliveries get suspended until all the tasks in this task group are complete.\n         * For example: a middleware that augments the event object should be loaded safely as a\n         * critical task, this way, event queue will wait for it to be ready before sending events.\n         *\n         * This applies to all the events already in the queue, and the upcoming ones\n         */\n        _this.criticalTasks = (0,_task_task_group__WEBPACK_IMPORTED_MODULE_1__.createTaskGroup)();\n        _this.plugins = [];\n        _this.failedInitializations = [];\n        _this.flushing = false;\n        _this.queue = priorityQueue;\n        _this.queue.on(_priority_queue__WEBPACK_IMPORTED_MODULE_2__.ON_REMOVE_FROM_FUTURE, function () {\n            _this.scheduleFlush(0);\n        });\n        return _this;\n    }\n    CoreEventQueue.prototype.register = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var handleLoadError, err_1;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.plugins.push(plugin);\n                        handleLoadError = function (err) {\n                            _this.failedInitializations.push(plugin.name);\n                            _this.emit('initialization_failure', plugin);\n                            console.warn(plugin.name, err);\n                            ctx.log('warn', 'Failed to load destination', {\n                                plugin: plugin.name,\n                                error: err,\n                            });\n                            // Filter out the failed plugin by excluding it from the list\n                            _this.plugins = _this.plugins.filter(function (p) { return p !== plugin; });\n                        };\n                        if (!(plugin.type === 'destination' && plugin.name !== 'Segment.io')) return [3 /*break*/, 1];\n                        plugin.load(ctx, instance).catch(handleLoadError);\n                        return [3 /*break*/, 4];\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, plugin.load(ctx, instance)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        handleLoadError(err_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.deregister = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var e_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        if (!plugin.unload) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.resolve(plugin.unload(ctx, instance))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.plugins = this.plugins.filter(function (p) { return p.name !== plugin.name; });\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        ctx.log('warn', 'Failed to unload destination', {\n                            plugin: plugin.name,\n                            error: e_1,\n                        });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatch = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var willDeliver;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.push(ctx);\n                willDeliver = this.subscribeToDelivery(ctx);\n                this.scheduleFlush(0);\n                return [2 /*return*/, willDeliver];\n            });\n        });\n    };\n    CoreEventQueue.prototype.subscribeToDelivery = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var onDeliver = function (flushed, delivered) {\n                            if (flushed.isSame(ctx)) {\n                                _this.off('flush', onDeliver);\n                                if (delivered) {\n                                    resolve(flushed);\n                                }\n                                else {\n                                    resolve(flushed);\n                                }\n                            }\n                        };\n                        _this.on('flush', onDeliver);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatchSingle = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.updateAttempts(ctx);\n                ctx.attempts = 1;\n                return [2 /*return*/, this.deliver(ctx).catch(function (err) {\n                        var accepted = _this.enqueuRetry(err, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err });\n                            return ctx;\n                        }\n                        return _this.subscribeToDelivery(ctx);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.isEmpty = function () {\n        return this.queue.length === 0;\n    };\n    CoreEventQueue.prototype.scheduleFlush = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 500; }\n        if (this.flushing) {\n            return;\n        }\n        this.flushing = true;\n        setTimeout(function () {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            _this.flush().then(function () {\n                setTimeout(function () {\n                    _this.flushing = false;\n                    if (_this.queue.length) {\n                        _this.scheduleFlush(0);\n                    }\n                }, 0);\n            });\n        }, timeout);\n    };\n    CoreEventQueue.prototype.deliver = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var start, done, err_2, error;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.criticalTasks.done()];\n                    case 1:\n                        _a.sent();\n                        start = Date.now();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.flushOne(ctx)];\n                    case 3:\n                        ctx = _a.sent();\n                        done = Date.now() - start;\n                        this.emit('delivery_success', ctx);\n                        ctx.stats.gauge('delivered', done);\n                        ctx.log('debug', 'Delivered', ctx.event);\n                        return [2 /*return*/, ctx];\n                    case 4:\n                        err_2 = _a.sent();\n                        error = err_2;\n                        ctx.log('error', 'Failed to deliver', error);\n                        this.emit('delivery_failure', ctx, error);\n                        ctx.stats.increment('delivery_failed');\n                        throw err_2;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.enqueuRetry = function (err, ctx) {\n        var retriable = !(err instanceof _context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation) || err.retry;\n        if (!retriable) {\n            return false;\n        }\n        return this.queue.pushWithBackoff(ctx);\n    };\n    CoreEventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, err_3, accepted;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length === 0) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx = this.queue.pop();\n                        if (!ctx) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx.attempts = this.queue.getAttempts(ctx);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.deliver(ctx)];\n                    case 2:\n                        ctx = _a.sent();\n                        this.emit('flush', ctx, true);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        accepted = this.enqueuRetry(err_3, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err_3 });\n                            this.emit('flush', ctx, false);\n                        }\n                        return [2 /*return*/, []];\n                    case 4: return [2 /*return*/, [ctx]];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.isReady = function () {\n        // return this.plugins.every((p) => p.isLoaded())\n        // should we wait for every plugin to load?\n        return true;\n    };\n    CoreEventQueue.prototype.availableExtensions = function (denyList) {\n        var available = this.plugins.filter(function (p) {\n            var _a, _b, _c;\n            // Only filter out destination plugins or the Segment.io plugin\n            if (p.type !== 'destination' && p.name !== 'Segment.io') {\n                return true;\n            }\n            var alternativeNameMatch = undefined;\n            (_a = p.alternativeNames) === null || _a === void 0 ? void 0 : _a.forEach(function (name) {\n                if (denyList[name] !== undefined) {\n                    alternativeNameMatch = denyList[name];\n                }\n            });\n            // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n            return ((_c = (_b = denyList[p.name]) !== null && _b !== void 0 ? _b : alternativeNameMatch) !== null && _c !== void 0 ? _c : (p.name === 'Segment.io' ? true : denyList.All) !== false);\n        });\n        var _a = (0,_utils_group_by__WEBPACK_IMPORTED_MODULE_4__.groupBy)(available, 'type'), _b = _a.before, before = _b === void 0 ? [] : _b, _c = _a.enrichment, enrichment = _c === void 0 ? [] : _c, _d = _a.destination, destination = _d === void 0 ? [] : _d, _e = _a.after, after = _e === void 0 ? [] : _e;\n        return {\n            before: before,\n            enrichment: enrichment,\n            destinations: destination,\n            after: after,\n        };\n    };\n    CoreEventQueue.prototype.flushOne = function (ctx) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _c, before, enrichment, _i, before_1, beforeWare, temp, _d, enrichment_1, enrichmentWare, temp, _e, destinations, after, afterCalls;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!this.isReady()) {\n                            throw new Error('Not ready');\n                        }\n                        if (ctx.attempts > 1) {\n                            this.emit('delivery_retry', ctx);\n                        }\n                        _c = this.availableExtensions((_a = ctx.event.integrations) !== null && _a !== void 0 ? _a : {}), before = _c.before, enrichment = _c.enrichment;\n                        _i = 0, before_1 = before;\n                        _f.label = 1;\n                    case 1:\n                        if (!(_i < before_1.length)) return [3 /*break*/, 4];\n                        beforeWare = before_1[_i];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.ensure)(ctx, beforeWare)];\n                    case 2:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, beforeWare);\n                        _f.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d = 0, enrichment_1 = enrichment;\n                        _f.label = 5;\n                    case 5:\n                        if (!(_d < enrichment_1.length)) return [3 /*break*/, 8];\n                        enrichmentWare = enrichment_1[_d];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, enrichmentWare)];\n                    case 6:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, enrichmentWare);\n                        _f.label = 7;\n                    case 7:\n                        _d++;\n                        return [3 /*break*/, 5];\n                    case 8:\n                        _e = this.availableExtensions((_b = ctx.event.integrations) !== null && _b !== void 0 ? _b : {}), destinations = _e.destinations, after = _e.after;\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    var attempts = destinations.map(function (destination) {\n                                        return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, destination);\n                                    });\n                                    Promise.all(attempts).then(resolve).catch(reject);\n                                }, 0);\n                            })];\n                    case 9:\n                        _f.sent();\n                        ctx.stats.increment('message_delivered');\n                        this.emit('message_delivered', ctx);\n                        afterCalls = after.map(function (after) { return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, after); });\n                        return [4 /*yield*/, Promise.all(afterCalls)];\n                    case 10:\n                        _f.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    return CoreEventQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.Emitter));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZXZlbnQtcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDZDtBQUNjO0FBQ0c7QUFDRjtBQUNOO0FBQ1I7QUFDN0M7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFxQjtBQUM1QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxnRkFBZ0Ysc0JBQXNCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsZ0NBQWdDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxhQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5Qyx3REFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQix3REFBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SEFBdUg7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBTTtBQUNuRDtBQUNBO0FBQ0EsNENBQTRDLGlEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtEQUFPO0FBQ3BEO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SDtBQUN2SDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0RBQU87QUFDdEQscUNBQXFDO0FBQ3JDO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxPQUFPLGtEQUFPLGVBQWU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMsQ0FBQyxxRUFBTztBQUNpQjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzPzIyYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnLi4vdXRpbHMvZ3JvdXAtYnknO1xuaW1wb3J0IHsgT05fUkVNT1ZFX0ZST01fRlVUVVJFIH0gZnJvbSAnLi4vcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgQ29yZUNvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVRhc2tHcm91cCB9IGZyb20gJy4uL3Rhc2svdGFzay1ncm91cCc7XG5pbXBvcnQgeyBhdHRlbXB0LCBlbnN1cmUgfSBmcm9tICcuL2RlbGl2ZXJ5JztcbnZhciBDb3JlRXZlbnRRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29yZUV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGV2ZW50IGRlbGl2ZXJpZXMgZ2V0IHN1c3BlbmRlZCB1bnRpbCBhbGwgdGhlIHRhc2tzIGluIHRoaXMgdGFzayBncm91cCBhcmUgY29tcGxldGUuXG4gICAgICAgICAqIEZvciBleGFtcGxlOiBhIG1pZGRsZXdhcmUgdGhhdCBhdWdtZW50cyB0aGUgZXZlbnQgb2JqZWN0IHNob3VsZCBiZSBsb2FkZWQgc2FmZWx5IGFzIGFcbiAgICAgICAgICogY3JpdGljYWwgdGFzaywgdGhpcyB3YXksIGV2ZW50IHF1ZXVlIHdpbGwgd2FpdCBmb3IgaXQgdG8gYmUgcmVhZHkgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGFwcGxpZXMgdG8gYWxsIHRoZSBldmVudHMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIGFuZCB0aGUgdXBjb21pbmcgb25lc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3JpdGljYWxUYXNrcyA9IGNyZWF0ZVRhc2tHcm91cCgpO1xuICAgICAgICBfdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucyA9IFtdO1xuICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHByaW9yaXR5UXVldWU7XG4gICAgICAgIF90aGlzLnF1ZXVlLm9uKE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGN0eCwgcGx1Z2luLCBpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlTG9hZEVycm9yLCBlcnJfMTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucy5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KCdpbml0aWFsaXphdGlvbl9mYWlsdXJlJywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4ocGx1Z2luLm5hbWUsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnd2FybicsICdGYWlsZWQgdG8gbG9hZCBkZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IHRoZSBmYWlsZWQgcGx1Z2luIGJ5IGV4Y2x1ZGluZyBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGx1Z2lucyA9IF90aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSBwbHVnaW47IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsdWdpbi50eXBlID09PSAnZGVzdGluYXRpb24nICYmIHBsdWdpbi5uYW1lICE9PSAnU2VnbWVudC5pbycpKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpLmNhdGNoKGhhbmRsZUxvYWRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yKGVycl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVyZWdpc3RlciA9IGZ1bmN0aW9uIChjdHgsIHBsdWdpbiwgaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi51bmxvYWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5yZXNvbHZlKHBsdWdpbi51bmxvYWQoY3R4LCBpbnN0YW5jZSkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSB0aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgIT09IHBsdWdpbi5uYW1lOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgJ0ZhaWxlZCB0byB1bmxvYWQgZGVzdGluYXRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lsbERlbGl2ZXI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICB3aWxsRGVsaXZlciA9IHRoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2lsbERlbGl2ZXJdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnN1YnNjcmliZVRvRGVsaXZlcnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25EZWxpdmVyID0gZnVuY3Rpb24gKGZsdXNoZWQsIGRlbGl2ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbHVzaGVkLmlzU2FtZShjdHgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsaXZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZsdXNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbHVzaGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGlzcGF0Y2hTaW5nbGUgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnVwZGF0ZUF0dGVtcHRzKGN0eCk7XG4gICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5kZWxpdmVyKGN0eCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2VwdGVkID0gX3RoaXMuZW5xdWV1UmV0cnkoZXJyLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zZXRGYWlsZWREZWxpdmVyeSh7IHJlYXNvbjogZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoID09PSAwO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7IHRpbWVvdXQgPSA1MDA7IH1cbiAgICAgICAgaWYgKHRoaXMuZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgICAgICBfdGhpcy5mbHVzaCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY2hlZHVsZUZsdXNoKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVsaXZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0LCBkb25lLCBlcnJfMiwgZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY3JpdGljYWxUYXNrcy5kb25lKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZsdXNoT25lKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9zdWNjZXNzJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnZGVsaXZlcmVkJywgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdEZWxpdmVyZWQnLCBjdHguZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ0ZhaWxlZCB0byBkZWxpdmVyJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9mYWlsdXJlJywgY3R4LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdkZWxpdmVyeV9mYWlsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZW5xdWV1UmV0cnkgPSBmdW5jdGlvbiAoZXJyLCBjdHgpIHtcbiAgICAgICAgdmFyIHJldHJpYWJsZSA9ICEoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uKSB8fCBlcnIucmV0cnk7XG4gICAgICAgIGlmICghcmV0cmlhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUucHVzaFdpdGhCYWNrb2ZmKGN0eCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHgsIGVycl8zLCBhY2NlcHRlZDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLnF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gdGhpcy5xdWV1ZS5nZXRBdHRlbXB0cyhjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxpdmVyKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2ZsdXNoJywgY3R4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkID0gdGhpcy5lbnF1ZXVSZXRyeShlcnJfMywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb246IGVycl8zIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmx1c2gnLCBjdHgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtjdHhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMucGx1Z2lucy5ldmVyeSgocCkgPT4gcC5pc0xvYWRlZCgpKVxuICAgICAgICAvLyBzaG91bGQgd2Ugd2FpdCBmb3IgZXZlcnkgcGx1Z2luIHRvIGxvYWQ/XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmF2YWlsYWJsZUV4dGVuc2lvbnMgPSBmdW5jdGlvbiAoZGVueUxpc3QpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgLy8gT25seSBmaWx0ZXIgb3V0IGRlc3RpbmF0aW9uIHBsdWdpbnMgb3IgdGhlIFNlZ21lbnQuaW8gcGx1Z2luXG4gICAgICAgICAgICBpZiAocC50eXBlICE9PSAnZGVzdGluYXRpb24nICYmIHAubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAoX2EgPSBwLmFsdGVybmF0aXZlTmFtZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbnlMaXN0W25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSBkZW55TGlzdFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEV4cGxpY2l0IGludGVncmF0aW9uIG9wdGlvbiB0YWtlcyBwcmVjZWRlbmNlLCBgQWxsOiBmYWxzZWAgZG9lcyBub3QgYXBwbHkgdG8gU2VnbWVudC5pb1xuICAgICAgICAgICAgcmV0dXJuICgoX2MgPSAoX2IgPSBkZW55TGlzdFtwLm5hbWVdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBhbHRlcm5hdGl2ZU5hbWVNYXRjaCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogKHAubmFtZSA9PT0gJ1NlZ21lbnQuaW8nID8gdHJ1ZSA6IGRlbnlMaXN0LkFsbCkgIT09IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfYSA9IGdyb3VwQnkoYXZhaWxhYmxlLCAndHlwZScpLCBfYiA9IF9hLmJlZm9yZSwgYmVmb3JlID0gX2IgPT09IHZvaWQgMCA/IFtdIDogX2IsIF9jID0gX2EuZW5yaWNobWVudCwgZW5yaWNobWVudCA9IF9jID09PSB2b2lkIDAgPyBbXSA6IF9jLCBfZCA9IF9hLmRlc3RpbmF0aW9uLCBkZXN0aW5hdGlvbiA9IF9kID09PSB2b2lkIDAgPyBbXSA6IF9kLCBfZSA9IF9hLmFmdGVyLCBhZnRlciA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiBiZWZvcmUsXG4gICAgICAgICAgICBlbnJpY2htZW50OiBlbnJpY2htZW50LFxuICAgICAgICAgICAgZGVzdGluYXRpb25zOiBkZXN0aW5hdGlvbixcbiAgICAgICAgICAgIGFmdGVyOiBhZnRlcixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5mbHVzaE9uZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9jLCBiZWZvcmUsIGVucmljaG1lbnQsIF9pLCBiZWZvcmVfMSwgYmVmb3JlV2FyZSwgdGVtcCwgX2QsIGVucmljaG1lbnRfMSwgZW5yaWNobWVudFdhcmUsIHRlbXAsIF9lLCBkZXN0aW5hdGlvbnMsIGFmdGVyLCBhZnRlckNhbGxzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2YubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IHJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmF0dGVtcHRzID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVsaXZlcnlfcmV0cnknLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzLmF2YWlsYWJsZUV4dGVuc2lvbnMoKF9hID0gY3R4LmV2ZW50LmludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pLCBiZWZvcmUgPSBfYy5iZWZvcmUsIGVucmljaG1lbnQgPSBfYy5lbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBiZWZvcmVfMSA9IGJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBiZWZvcmVfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVdhcmUgPSBiZWZvcmVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlbnN1cmUoY3R4LCBiZWZvcmVXYXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZV9lbnJpY2hlZCcsIGN0eCwgYmVmb3JlV2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSAwLCBlbnJpY2htZW50XzEgPSBlbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfZCA8IGVucmljaG1lbnRfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVucmljaG1lbnRXYXJlID0gZW5yaWNobWVudF8xW19kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF0dGVtcHQoY3R4LCBlbnJpY2htZW50V2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgaW5zdGFuY2VvZiBDb3JlQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZW5yaWNoZWQnLCBjdHgsIGVucmljaG1lbnRXYXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gNztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZSA9IHRoaXMuYXZhaWxhYmxlRXh0ZW5zaW9ucygoX2IgPSBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSksIGRlc3RpbmF0aW9ucyA9IF9lLmRlc3RpbmF0aW9ucywgYWZ0ZXIgPSBfZS5hZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBkZXN0aW5hdGlvbnMubWFwKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0KGN0eCwgZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChhdHRlbXB0cykudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ21lc3NhZ2VfZGVsaXZlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZGVsaXZlcmVkJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyQ2FsbHMgPSBhZnRlci5tYXAoZnVuY3Rpb24gKGFmdGVyKSB7IHJldHVybiBhdHRlbXB0KGN0eCwgYWZ0ZXIpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGFmdGVyQ2FsbHMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlRXZlbnRRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgQ29yZUV2ZW50UXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/stats/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreStats: () => (/* binding */ CoreStats),\n/* harmony export */   NullStats: () => (/* binding */ NullStats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar compactMetricType = function (type) {\n    var enums = {\n        gauge: 'g',\n        counter: 'c',\n    };\n    return enums[type];\n};\nvar CoreStats = /** @class */ (function () {\n    function CoreStats() {\n        this.metrics = [];\n    }\n    CoreStats.prototype.increment = function (metric, by, tags) {\n        if (by === void 0) { by = 1; }\n        this.metrics.push({\n            metric: metric,\n            value: by,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'counter',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.gauge = function (metric, value, tags) {\n        this.metrics.push({\n            metric: metric,\n            value: value,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'gauge',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.flush = function () {\n        var formatted = this.metrics.map(function (m) { return ((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, m), { tags: m.tags.join(',') })); });\n        // ie doesn't like console.table\n        if (console.table) {\n            console.table(formatted);\n        }\n        else {\n            console.log(formatted);\n        }\n        this.metrics = [];\n    };\n    /**\n     * compact keys for smaller payload\n     */\n    CoreStats.prototype.serialize = function () {\n        return this.metrics.map(function (m) {\n            return {\n                m: m.metric,\n                v: m.value,\n                t: m.tags,\n                k: compactMetricType(m.type),\n                e: m.timestamp,\n            };\n        });\n    };\n    return CoreStats;\n}());\n\nvar NullStats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(NullStats, _super);\n    function NullStats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullStats.prototype.gauge = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.increment = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.flush = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.serialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        return [];\n    };\n    return NullStats;\n}(CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdELFFBQVEsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLFFBQVEsd0JBQXdCLEtBQUs7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanM/ZGJjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgY29tcGFjdE1ldHJpY1R5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBlbnVtcyA9IHtcbiAgICAgICAgZ2F1Z2U6ICdnJyxcbiAgICAgICAgY291bnRlcjogJ2MnLFxuICAgIH07XG4gICAgcmV0dXJuIGVudW1zW3R5cGVdO1xufTtcbnZhciBDb3JlU3RhdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZVN0YXRzKCkge1xuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobWV0cmljLCBieSwgdGFncykge1xuICAgICAgICBpZiAoYnkgPT09IHZvaWQgMCkgeyBieSA9IDE7IH1cbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogYnksXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdjb3VudGVyJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLmdhdWdlID0gZnVuY3Rpb24gKG1ldHJpYywgdmFsdWUsIHRhZ3MpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdnYXVnZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMubWV0cmljcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbSksIHsgdGFnczogbS50YWdzLmpvaW4oJywnKSB9KSk7IH0pO1xuICAgICAgICAvLyBpZSBkb2Vzbid0IGxpa2UgY29uc29sZS50YWJsZVxuICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgY29uc29sZS50YWJsZShmb3JtYXR0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybWF0dGVkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGNvbXBhY3Qga2V5cyBmb3Igc21hbGxlciBwYXlsb2FkXG4gICAgICovXG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5zZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldHJpY3MubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG06IG0ubWV0cmljLFxuICAgICAgICAgICAgICAgIHY6IG0udmFsdWUsXG4gICAgICAgICAgICAgICAgdDogbS50YWdzLFxuICAgICAgICAgICAgICAgIGs6IGNvbXBhY3RNZXRyaWNUeXBlKG0udHlwZSksXG4gICAgICAgICAgICAgICAgZTogbS50aW1lc3RhbXAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlU3RhdHM7XG59KCkpO1xuZXhwb3J0IHsgQ29yZVN0YXRzIH07XG52YXIgTnVsbFN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOdWxsU3RhdHMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTnVsbFN0YXRzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuZ2F1Z2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuICAgIHJldHVybiBOdWxsU3RhdHM7XG59KENvcmVTdGF0cykpO1xuZXhwb3J0IHsgTnVsbFN0YXRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/task/task-group.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTaskGroup: () => (/* binding */ createTaskGroup)\n/* harmony export */ });\n/* harmony import */ var _utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-thenable */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\");\n\nvar createTaskGroup = function () {\n    var taskCompletionPromise;\n    var resolvePromise;\n    var count = 0;\n    return {\n        done: function () { return taskCompletionPromise; },\n        run: function (op) {\n            var returnValue = op();\n            if ((0,_utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__.isThenable)(returnValue)) {\n                if (++count === 1) {\n                    taskCompletionPromise = new Promise(function (res) { return (resolvePromise = res); });\n                }\n                returnValue.finally(function () { return --count === 0 && resolvePromise(); });\n            }\n            return returnValue;\n        },\n    };\n};\n//# sourceMappingURL=task-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdGFzay90YXNrLWdyb3VwLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQVU7QUFDMUI7QUFDQSx5RUFBeUUsZ0NBQWdDO0FBQ3pHO0FBQ0Esa0RBQWtELDJDQUEyQztBQUM3RjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3Rhc2svdGFzay1ncm91cC5qcz9hODg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuLi91dGlscy9pcy10aGVuYWJsZSc7XG5leHBvcnQgdmFyIGNyZWF0ZVRhc2tHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGFza0NvbXBsZXRpb25Qcm9taXNlO1xuICAgIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhc2tDb21wbGV0aW9uUHJvbWlzZTsgfSxcbiAgICAgICAgcnVuOiBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IG9wKCk7XG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZShyZXR1cm5WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKytjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGlvblByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7IHJldHVybiAocmVzb2x2ZVByb21pc2UgPSByZXMpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiAtLWNvdW50ID09PSAwICYmIHJlc29sdmVQcm9taXNlKCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFzay1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: () => (/* binding */ groupBy)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction groupBy(collection, grouper) {\n    var results = {};\n    collection.forEach(function (item) {\n        var _a;\n        var key = undefined;\n        if (typeof grouper === 'string') {\n            var suggestedKey = item[grouper];\n            key =\n                typeof suggestedKey !== 'string'\n                    ? JSON.stringify(suggestedKey)\n                    : suggestedKey;\n        }\n        else if (grouper instanceof Function) {\n            key = grouper(item);\n        }\n        if (key === undefined) {\n            return;\n        }\n        results[key] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], ((_a = results[key]) !== null && _a !== void 0 ? _a : []), true), [item], false);\n    });\n    return results;\n}\n//# sourceMappingURL=group-by.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvZ3JvdXAtYnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDL0I7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFhLENBQUMsb0RBQWE7QUFDbEQsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dyb3VwLWJ5LmpzP2ViMTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnkoY29sbGVjdGlvbiwgZ3JvdXBlcikge1xuICAgIHZhciByZXN1bHRzID0ge307XG4gICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiBncm91cGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIHN1Z2dlc3RlZEtleSA9IGl0ZW1bZ3JvdXBlcl07XG4gICAgICAgICAgICBrZXkgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiBzdWdnZXN0ZWRLZXkgIT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoc3VnZ2VzdGVkS2V5KVxuICAgICAgICAgICAgICAgICAgICA6IHN1Z2dlc3RlZEtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChncm91cGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGtleSA9IGdyb3VwZXIoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0c1trZXldID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCAoKF9hID0gcmVzdWx0c1trZXldKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSksIHRydWUpLCBbaXRlbV0sIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwLWJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvaXMtdGhlbmFibGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9pcy10aGVuYWJsZS5qcz9kNzAxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIENoZWNrIGlmICB0aGVuYWJsZVxuICogIChpbnN0YW5jZW9mIFByb21pc2UgZG9lc24ndCByZXNwZWN0IHJlYWxtcylcbiAqL1xuZXhwb3J0IHZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgJ3RoZW4nIGluIHZhbHVlICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLXRoZW5hYmxlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/pick.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickBy: () => (/* binding */ pickBy)\n/* harmony export */ });\nvar pickBy = function (obj, fn) {\n    return Object.keys(obj)\n        .filter(function (k) { return fn(k, obj[k]); })\n        .reduce(function (acc, key) { return ((acc[key] = obj[key]), acc); }, {});\n};\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvcGljay5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQsc0NBQXNDLHNDQUFzQyxJQUFJO0FBQ2hGO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9waWNrLmpzP2QzNWYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBwaWNrQnkgPSBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGZuKGssIG9ialtrXSk7IH0pXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoKGFjY1trZXldID0gb2JqW2tleV0pLCBhY2MpOyB9LCB7fSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGljay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEventExists: () => (/* binding */ assertEventExists),\n/* harmony export */   assertEventType: () => (/* binding */ assertEventType),\n/* harmony export */   assertMessageId: () => (/* binding */ assertMessageId),\n/* harmony export */   assertTrackEventName: () => (/* binding */ assertTrackEventName),\n/* harmony export */   assertTrackEventProperties: () => (/* binding */ assertTrackEventProperties),\n/* harmony export */   assertTraits: () => (/* binding */ assertTraits),\n/* harmony export */   assertUserIdentity: () => (/* binding */ assertUserIdentity),\n/* harmony export */   validateEvent: () => (/* binding */ validateEvent)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\nvar stringError = 'is not a string';\nvar objError = 'is not an object';\nvar nilError = 'is nil';\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nfunction assertUserIdentity(event) {\n    var USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId';\n    var getAnyUserId = function (event) { var _a, _b, _c; return (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId; };\n    var id = getAnyUserId(event);\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, nilError);\n    }\n    else if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, stringError);\n    }\n}\nfunction assertEventExists(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', nilError);\n    }\n    if (typeof event !== 'object') {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', objError);\n    }\n}\nfunction assertEventType(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.type)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.type', stringError);\n    }\n}\nfunction assertTrackEventName(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.event', stringError);\n    }\n}\nfunction assertTrackEventProperties(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.properties)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.properties', objError);\n    }\n}\nfunction assertTraits(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.traits)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.traits', objError);\n    }\n}\nfunction assertMessageId(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.messageId)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.messageId', stringError);\n    }\n}\nfunction validateEvent(event) {\n    assertEventExists(event);\n    assertEventType(event);\n    assertMessageId(event);\n    if (event.type === 'track') {\n        assertTrackEventName(event);\n        assertTrackEventProperties(event);\n    }\n    if (['group', 'identify'].includes(event.type)) {\n        assertTraits(event);\n    }\n}\n//# sourceMappingURL=assertions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBLFNBQVMsZ0RBQU07QUFDZixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQSxjQUFjLGtEQUFRO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGdEQUFNO0FBQ2Ysa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzP2I3ODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzUGxhaW5PYmplY3QsIGV4aXN0cyB9IGZyb20gJy4vaGVscGVycyc7XG52YXIgc3RyaW5nRXJyb3IgPSAnaXMgbm90IGEgc3RyaW5nJztcbnZhciBvYmpFcnJvciA9ICdpcyBub3QgYW4gb2JqZWN0JztcbnZhciBuaWxFcnJvciA9ICdpcyBuaWwnO1xuLy8gdXNlciBpZGVudGl0eSBjaGVjayBjb3VsZCBoeXBvdGhldGljYWxseSBjb3VsZCBiZSB1c2VkIGluIHRoZSBicm93c2VyIGV2ZW50IGZhY3RvcnksIGJ1dCBub3QgMTAwJSBzdXJlIC0tIHNvIHRoaXMgaXMgbm9kZSBvbmx5IGZvciBub3dcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpIHtcbiAgICB2YXIgVVNFUl9GSUVMRF9OQU1FID0gJy51c2VySWQvYW5vbnltb3VzSWQvcHJldmlvdXNJZC9ncm91cElkJztcbiAgICB2YXIgZ2V0QW55VXNlcklkID0gZnVuY3Rpb24gKGV2ZW50KSB7IHZhciBfYSwgX2IsIF9jOyByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gZXZlbnQudXNlcklkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBldmVudC5hbm9ueW1vdXNJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZXZlbnQuZ3JvdXBJZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZXZlbnQucHJldmlvdXNJZDsgfTtcbiAgICB2YXIgaWQgPSBnZXRBbnlVc2VySWQoZXZlbnQpO1xuICAgIGlmICghZXhpc3RzKGlkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFVTRVJfRklFTERfTkFNRSwgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIGlmICghaXNTdHJpbmcoaWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoVVNFUl9GSUVMRF9OQU1FLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KSB7XG4gICAgaWYgKCFleGlzdHMoZXZlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0V2ZW50JywgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFdmVudCcsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC50eXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHlwZScsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50LmV2ZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcuZXZlbnQnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRyYWNrRXZlbnRQcm9wZXJ0aWVzKGV2ZW50KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGV2ZW50LnByb3BlcnRpZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJy5wcm9wZXJ0aWVzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUcmFpdHMoZXZlbnQpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZXZlbnQudHJhaXRzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHJhaXRzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRNZXNzYWdlSWQoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50Lm1lc3NhZ2VJZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLm1lc3NhZ2VJZCcsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFdmVudChldmVudCkge1xuICAgIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KTtcbiAgICBhc3NlcnRFdmVudFR5cGUoZXZlbnQpO1xuICAgIGFzc2VydE1lc3NhZ2VJZChldmVudCk7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpO1xuICAgICAgICBhc3NlcnRUcmFja0V2ZW50UHJvcGVydGllcyhldmVudCk7XG4gICAgfVxuICAgIGlmIChbJ2dyb3VwJywgJ2lkZW50aWZ5J10uaW5jbHVkZXMoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgYXNzZXJ0VHJhaXRzKGV2ZW50KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/errors.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar ValidationError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(ValidationError, _super);\n    function ValidationError(field, message) {\n        var _this = _super.call(this, \"\".concat(field, \" \").concat(message)) || this;\n        _this.field = field;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUMwQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vZXJyb3JzLmpzP2JkYmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgVmFsaWRhdGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWYWxpZGF0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKGZpZWxkLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiXCIuY29uY2F0KGZpZWxkLCBcIiBcIikuY29uY2F0KG1lc3NhZ2UpKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWYWxpZGF0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\nfunction exists(val) {\n    return val !== undefined && val !== null;\n}\nfunction isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS92YWxpZGF0aW9uL2hlbHBlcnMuanM/MWI4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4aXN0cyh2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\n/**\n * Return a promise that can be externally resolved\n */\nvar createDeferred = function () {\n    var resolve;\n    var reject;\n    var settled = false;\n    var promise = new Promise(function (_resolve, _reject) {\n        resolve = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _resolve.apply(void 0, args);\n        };\n        reject = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _reject.apply(void 0, args);\n        };\n    });\n    return {\n        resolve: resolve,\n        reject: reject,\n        promise: promise,\n        isSettled: function () { return settled; },\n    };\n};\n//# sourceMappingURL=create-deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vY3JlYXRlLWRlZmVycmVkL2NyZWF0ZS1kZWZlcnJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9jcmVhdGUtZGVmZXJyZWQvY3JlYXRlLWRlZmVycmVkLmpzP2Q0YWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgY2FuIGJlIGV4dGVybmFsbHkgcmVzb2x2ZWRcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVEZWZlcnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzb2x2ZTtcbiAgICB2YXIgcmVqZWN0O1xuICAgIHZhciBzZXR0bGVkID0gZmFsc2U7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoX3Jlc29sdmUsIF9yZWplY3QpIHtcbiAgICAgICAgcmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgX3Jlc29sdmUuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICBfcmVqZWN0LmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0OiByZWplY3QsXG4gICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgIGlzU2V0dGxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0dGxlZDsgfSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1kZWZlcnJlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emitter: () => (/* binding */ Emitter)\n/* harmony export */ });\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nvar Emitter = /** @class */ (function () {\n    function Emitter(options) {\n        var _a;\n        this.callbacks = {};\n        this.warned = false;\n        this.maxListeners = (_a = options === null || options === void 0 ? void 0 : options.maxListeners) !== null && _a !== void 0 ? _a : 10;\n    }\n    Emitter.prototype.warnIfPossibleMemoryLeak = function (event) {\n        if (this.warned) {\n            return;\n        }\n        if (this.maxListeners &&\n            this.callbacks[event].length > this.maxListeners) {\n            console.warn(\"Event Emitter: Possible memory leak detected; \".concat(String(event), \" has exceeded \").concat(this.maxListeners, \" listeners.\"));\n            this.warned = true;\n        }\n    };\n    Emitter.prototype.on = function (event, callback) {\n        if (!this.callbacks[event]) {\n            this.callbacks[event] = [callback];\n        }\n        else {\n            this.callbacks[event].push(callback);\n            this.warnIfPossibleMemoryLeak(event);\n        }\n        return this;\n    };\n    Emitter.prototype.once = function (event, callback) {\n        var _this = this;\n        var on = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.off(event, on);\n            callback.apply(_this, args);\n        };\n        this.on(event, on);\n        return this;\n    };\n    Emitter.prototype.off = function (event, callback) {\n        var _a;\n        var fns = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        var without = fns.filter(function (fn) { return fn !== callback; });\n        this.callbacks[event] = without;\n        return this;\n    };\n    Emitter.prototype.emit = function (event) {\n        var _this = this;\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var callbacks = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        callbacks.forEach(function (callback) {\n            callback.apply(_this, args);\n        });\n        return this;\n    };\n    return Emitter;\n}());\n\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vZW1pdHRlci9lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseUJBQXlCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDa0I7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9lbWl0dGVyL2VtaXR0ZXIuanM/YWQwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEV2ZW50IEVtaXR0ZXIgdGhhdCB0YWtlcyB0aGUgZXhwZWN0ZWQgY29udHJhY3QgYXMgYSBnZW5lcmljXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqICB0eXBlIENvbnRyYWN0ID0ge1xuICogICAgZGVsaXZlcnlfc3VjY2VzczogW0RlbGl2ZXJ5U3VjY2Vzc1Jlc3BvbnNlLCBNZXRyaWNzXSxcbiAqICAgIGRlbGl2ZXJ5X2ZhaWx1cmU6IFtEZWxpdmVyeUVycm9yXVxuICogfVxuICogIG5ldyBFbWl0dGVyPENvbnRyYWN0PigpXG4gKiAgLm9uKCdkZWxpdmVyeV9zdWNjZXNzJywgKHJlcywgbWV0cmljcykgPT4gLi4uKVxuICogIC5vbignZGVsaXZlcnlfZmFpbHVyZScsIChlcnIpID0+IC4uLilcbiAqIGBgYFxuICovXG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbWl0dGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLndhcm5lZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1heExpc3RlbmVycyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhMaXN0ZW5lcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEwO1xuICAgIH1cbiAgICBFbWl0dGVyLnByb3RvdHlwZS53YXJuSWZQb3NzaWJsZU1lbW9yeUxlYWsgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMud2FybmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4TGlzdGVuZXJzICYmXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ubGVuZ3RoID4gdGhpcy5tYXhMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkV2ZW50IEVtaXR0ZXI6IFBvc3NpYmxlIG1lbW9yeSBsZWFrIGRldGVjdGVkOyBcIi5jb25jYXQoU3RyaW5nKGV2ZW50KSwgXCIgaGFzIGV4Y2VlZGVkIFwiKS5jb25jYXQodGhpcy5tYXhMaXN0ZW5lcnMsIFwiIGxpc3RlbmVycy5cIikpO1xuICAgICAgICAgICAgdGhpcy53YXJuZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbGxiYWNrc1tldmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XSA9IFtjYWxsYmFja107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLndhcm5JZlBvc3NpYmxlTWVtb3J5TGVhayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5vZmYoZXZlbnQsIG9uKTtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbihldmVudCwgb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgZm5zID0gKF9hID0gdGhpcy5jYWxsYmFja3NbZXZlbnRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgdmFyIHdpdGhvdXQgPSBmbnMuZmlsdGVyKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4gIT09IGNhbGxiYWNrOyB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdID0gd2l0aG91dDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IChfYSA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gRW1pdHRlcjtcbn0oKSk7XG5leHBvcnQgeyBFbWl0dGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/browser/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/browser/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsBrowser: () => (/* binding */ AnalyticsBrowser),\n/* harmony export */   loadCDNSettings: () => (/* binding */ loadCDNSettings)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_get_process_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/get-process-env */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../lib/parse-cdn */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/fetch */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _core_analytics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/analytics */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/merged-options */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n/* harmony import */ var _plugins_env_enrichment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../plugins/env-enrichment */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js\");\n/* harmony import */ var _plugins_remote_loader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../plugins/remote-loader */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../plugins/segmentio */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\");\n/* harmony import */ var _core_buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/buffer */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\");\n/* harmony import */ var _core_inspector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/inspector */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js\");\n/* harmony import */ var _core_stats__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../core/stats */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../lib/global-analytics-helper */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction loadCDNSettings(writeKey, baseUrl) {\n    return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetch)(\"\".concat(baseUrl, \"/v1/projects/\").concat(writeKey, \"/settings\"))\n        .then(function (res) {\n        if (!res.ok) {\n            return res.text().then(function (errorResponseMessage) {\n                throw new Error(errorResponseMessage);\n            });\n        }\n        return res.json();\n    })\n        .catch(function (err) {\n        console.error(err.message);\n        throw err;\n    });\n}\nfunction hasLegacyDestinations(settings) {\n    return ((0,_lib_get_process_env__WEBPACK_IMPORTED_MODULE_1__.getProcessEnv)().NODE_ENV !== 'test' &&\n        // just one integration means segmentio\n        Object.keys(settings.integrations).length > 1);\n}\nfunction hasTsubMiddleware(settings) {\n    var _a, _b, _c;\n    return ((0,_lib_get_process_env__WEBPACK_IMPORTED_MODULE_1__.getProcessEnv)().NODE_ENV !== 'test' &&\n        ((_c = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 0);\n}\n/**\n * With AJS classic, we allow users to call setAnonymousId before the library initialization.\n * This is important because some of the destinations will use the anonymousId during the initialization,\n * and if we set anonId afterwards, that wouldn’t impact the destination.\n *\n * Also Ensures events can be registered before library initialization.\n * This is important so users can register to 'initialize' and any events that may fire early during setup.\n */\nfunction flushPreBuffer(analytics, buffer) {\n    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushSetAnonymousID)(analytics, buffer);\n    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushOn)(analytics, buffer);\n}\n/**\n * Finish flushing buffer and cleanup.\n */\nfunction flushFinalBuffer(analytics, buffer) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0: \n                // Call popSnippetWindowBuffer before each flush task since there may be\n                // analytics calls during async function calls.\n                return [4 /*yield*/, (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushAddSourceMiddleware)(analytics, buffer)];\n                case 1:\n                    // Call popSnippetWindowBuffer before each flush task since there may be\n                    // analytics calls during async function calls.\n                    _a.sent();\n                    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushAnalyticsCallsInNewTask)(analytics, buffer);\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction registerPlugins(writeKey, cdnSettings, analytics, options, pluginLikes, legacyIntegrationSources, preInitBuffer) {\n    var _a, _b, _c;\n    if (pluginLikes === void 0) { pluginLikes = []; }\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {\n        var pluginsFromSettings, pluginSources, tsubMiddleware, _d, legacyDestinations, _e, schemaFilter, _f, mergedSettings, remotePlugins, basePlugins, shouldIgnoreSegmentio, _g, _h, ctx;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_j) {\n            switch (_j.label) {\n                case 0:\n                    flushPreBuffer(analytics, preInitBuffer);\n                    pluginsFromSettings = pluginLikes === null || pluginLikes === void 0 ? void 0 : pluginLikes.filter(function (pluginLike) { return typeof pluginLike === 'object'; });\n                    pluginSources = pluginLikes === null || pluginLikes === void 0 ? void 0 : pluginLikes.filter(function (pluginLike) {\n                        return typeof pluginLike === 'function' &&\n                            typeof pluginLike.pluginName === 'string';\n                    });\n                    if (!hasTsubMiddleware(cdnSettings)) return [3 /*break*/, 2];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | tsub-middleware */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/routing-middleware */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js\")).then(function (mod) {\n                            return mod.tsubMiddleware(cdnSettings.middlewareSettings.routingRules);\n                        })];\n                case 1:\n                    _d = _j.sent();\n                    return [3 /*break*/, 3];\n                case 2:\n                    _d = undefined;\n                    _j.label = 3;\n                case 3:\n                    tsubMiddleware = _d;\n                    if (!(hasLegacyDestinations(cdnSettings) || legacyIntegrationSources.length > 0)) return [3 /*break*/, 5];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | ajs-destination */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/ajs-destination */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\")).then(function (mod) {\n                            return mod.ajsDestinations(writeKey, cdnSettings, analytics.integrations, options, tsubMiddleware, legacyIntegrationSources);\n                        })];\n                case 4:\n                    _e = _j.sent();\n                    return [3 /*break*/, 6];\n                case 5:\n                    _e = [];\n                    _j.label = 6;\n                case 6:\n                    legacyDestinations = _e;\n                    if (!cdnSettings.legacyVideoPluginsEnabled) return [3 /*break*/, 8];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | legacyVideos */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/legacy-video-plugins */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js\")).then(function (mod) {\n                            return mod.loadLegacyVideoPlugins(analytics);\n                        })];\n                case 7:\n                    _j.sent();\n                    _j.label = 8;\n                case 8:\n                    if (!((_a = options.plan) === null || _a === void 0 ? void 0 : _a.track)) return [3 /*break*/, 10];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | schemaFilter */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/schema-filter */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js\")).then(function (mod) {\n                            var _a;\n                            return mod.schemaFilter((_a = options.plan) === null || _a === void 0 ? void 0 : _a.track, cdnSettings);\n                        })];\n                case 9:\n                    _f = _j.sent();\n                    return [3 /*break*/, 11];\n                case 10:\n                    _f = undefined;\n                    _j.label = 11;\n                case 11:\n                    schemaFilter = _f;\n                    mergedSettings = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_4__.mergedOptions)(cdnSettings, options);\n                    return [4 /*yield*/, (0,_plugins_remote_loader__WEBPACK_IMPORTED_MODULE_5__.remoteLoader)(cdnSettings, analytics.integrations, mergedSettings, options, tsubMiddleware, pluginSources).catch(function () { return []; })];\n                case 12:\n                    remotePlugins = _j.sent();\n                    basePlugins = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)([_plugins_env_enrichment__WEBPACK_IMPORTED_MODULE_6__.envEnrichment], legacyDestinations, true), remotePlugins, true);\n                    if (schemaFilter) {\n                        basePlugins.push(schemaFilter);\n                    }\n                    shouldIgnoreSegmentio = (((_b = options.integrations) === null || _b === void 0 ? void 0 : _b.All) === false &&\n                        !options.integrations['Segment.io']) ||\n                        (options.integrations && options.integrations['Segment.io'] === false);\n                    if (!!shouldIgnoreSegmentio) return [3 /*break*/, 14];\n                    _h = (_g = basePlugins).push;\n                    return [4 /*yield*/, (0,_plugins_segmentio__WEBPACK_IMPORTED_MODULE_7__.segmentio)(analytics, mergedSettings['Segment.io'], cdnSettings.integrations)];\n                case 13:\n                    _h.apply(_g, [_j.sent()]);\n                    _j.label = 14;\n                case 14: return [4 /*yield*/, analytics.register.apply(analytics, (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)([], basePlugins, false), pluginsFromSettings, false))];\n                case 15:\n                    ctx = _j.sent();\n                    // register user-defined plugins registered via analytics.register()\n                    return [4 /*yield*/, (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushRegister)(analytics, preInitBuffer)];\n                case 16:\n                    // register user-defined plugins registered via analytics.register()\n                    _j.sent();\n                    if (!Object.entries((_c = cdnSettings.enabledMiddleware) !== null && _c !== void 0 ? _c : {}).some(function (_a) {\n                        var enabled = _a[1];\n                        return enabled;\n                    })) return [3 /*break*/, 18];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | remoteMiddleware */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/remote-middleware */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js\")).then(function (_a) {\n                            var remoteMiddlewares = _a.remoteMiddlewares;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(_this, void 0, void 0, function () {\n                                var middleware, promises;\n                                return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0: return [4 /*yield*/, remoteMiddlewares(ctx, cdnSettings, options.obfuscate)];\n                                        case 1:\n                                            middleware = _b.sent();\n                                            promises = middleware.map(function (mdw) {\n                                                return analytics.addSourceMiddleware(mdw);\n                                            });\n                                            return [2 /*return*/, Promise.all(promises)];\n                                    }\n                                });\n                            });\n                        })];\n                case 17:\n                    _j.sent();\n                    _j.label = 18;\n                case 18: return [2 /*return*/, ctx];\n            }\n        });\n    });\n}\nfunction loadAnalytics(settings, options, preInitBuffer) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    if (options === void 0) { options = {}; }\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {\n        var cdnURL, cdnSettings, _m, disabled, retryQueue, analytics, plugins, classicIntegrations, segmentLoadOptions, ctx, search, hash, term;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_o) {\n            switch (_o.label) {\n                case 0:\n                    // return no-op analytics instance if disabled\n                    if (options.disable === true) {\n                        return [2 /*return*/, [new _core_analytics__WEBPACK_IMPORTED_MODULE_8__.NullAnalytics(), _core_context__WEBPACK_IMPORTED_MODULE_9__.Context.system()]];\n                    }\n                    if (options.globalAnalyticsKey)\n                        (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_10__.setGlobalAnalyticsKey)(options.globalAnalyticsKey);\n                    // this is an ugly side-effect, but it's for the benefits of the plugins that get their cdn via getCDN()\n                    if (settings.cdnURL)\n                        (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_11__.setGlobalCDNUrl)(settings.cdnURL);\n                    if (options.initialPageview) {\n                        // capture the page context early, so it's always up-to-date\n                        preInitBuffer.add(new _core_buffer__WEBPACK_IMPORTED_MODULE_2__.PreInitMethodCall('page', []));\n                    }\n                    cdnURL = (_a = settings.cdnURL) !== null && _a !== void 0 ? _a : (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_11__.getCDN)();\n                    if (!((_b = settings.cdnSettings) !== null && _b !== void 0)) return [3 /*break*/, 1];\n                    _m = _b;\n                    return [3 /*break*/, 3];\n                case 1: return [4 /*yield*/, loadCDNSettings(settings.writeKey, cdnURL)];\n                case 2:\n                    _m = (_o.sent());\n                    _o.label = 3;\n                case 3:\n                    cdnSettings = _m;\n                    if (options.updateCDNSettings) {\n                        cdnSettings = options.updateCDNSettings(cdnSettings);\n                    }\n                    if (!(typeof options.disable === 'function')) return [3 /*break*/, 5];\n                    return [4 /*yield*/, options.disable(cdnSettings)];\n                case 4:\n                    disabled = _o.sent();\n                    if (disabled) {\n                        return [2 /*return*/, [new _core_analytics__WEBPACK_IMPORTED_MODULE_8__.NullAnalytics(), _core_context__WEBPACK_IMPORTED_MODULE_9__.Context.system()]];\n                    }\n                    _o.label = 5;\n                case 5:\n                    retryQueue = (_d = (_c = cdnSettings.integrations['Segment.io']) === null || _c === void 0 ? void 0 : _c.retryQueue) !== null && _d !== void 0 ? _d : true;\n                    options = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({ retryQueue: retryQueue }, options);\n                    analytics = new _core_analytics__WEBPACK_IMPORTED_MODULE_8__.Analytics((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, settings), { cdnSettings: cdnSettings, cdnURL: cdnURL }), options);\n                    (0,_core_inspector__WEBPACK_IMPORTED_MODULE_12__.attachInspector)(analytics);\n                    plugins = (_e = settings.plugins) !== null && _e !== void 0 ? _e : [];\n                    classicIntegrations = (_f = settings.classicIntegrations) !== null && _f !== void 0 ? _f : [];\n                    segmentLoadOptions = (_g = options.integrations) === null || _g === void 0 ? void 0 : _g['Segment.io'];\n                    _core_stats__WEBPACK_IMPORTED_MODULE_13__.Stats.initRemoteMetrics((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, cdnSettings.metrics), { host: (_h = segmentLoadOptions === null || segmentLoadOptions === void 0 ? void 0 : segmentLoadOptions.apiHost) !== null && _h !== void 0 ? _h : (_j = cdnSettings.metrics) === null || _j === void 0 ? void 0 : _j.host, protocol: segmentLoadOptions === null || segmentLoadOptions === void 0 ? void 0 : segmentLoadOptions.protocol }));\n                    return [4 /*yield*/, registerPlugins(settings.writeKey, cdnSettings, analytics, options, plugins, classicIntegrations, preInitBuffer)];\n                case 6:\n                    ctx = _o.sent();\n                    search = (_k = window.location.search) !== null && _k !== void 0 ? _k : '';\n                    hash = (_l = window.location.hash) !== null && _l !== void 0 ? _l : '';\n                    term = search.length ? search : hash.replace(/(?=#).*(?=\\?)/, '');\n                    if (!term.includes('ajs_')) return [3 /*break*/, 8];\n                    return [4 /*yield*/, analytics.queryString(term).catch(console.error)];\n                case 7:\n                    _o.sent();\n                    _o.label = 8;\n                case 8:\n                    analytics.initialized = true;\n                    analytics.emit('initialize', settings, options);\n                    return [4 /*yield*/, flushFinalBuffer(analytics, preInitBuffer)];\n                case 9:\n                    _o.sent();\n                    return [2 /*return*/, [analytics, ctx]];\n            }\n        });\n    });\n}\n/**\n * The public browser interface for Segment Analytics\n *\n * @example\n * ```ts\n *  export const analytics = new AnalyticsBrowser()\n *  analytics.load({ writeKey: 'foo' })\n * ```\n * @link https://github.com/segmentio/analytics-next/#readme\n */\nvar AnalyticsBrowser = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(AnalyticsBrowser, _super);\n    function AnalyticsBrowser() {\n        var _this = this;\n        var _a = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_14__.createDeferred)(), loadStart = _a.promise, resolveLoadStart = _a.resolve;\n        _this = _super.call(this, function (buffer) {\n            return loadStart.then(function (_a) {\n                var settings = _a[0], options = _a[1];\n                return loadAnalytics(settings, options, buffer);\n            });\n        }) || this;\n        _this._resolveLoadStart = function (settings, options) {\n            return resolveLoadStart([settings, options]);\n        };\n        return _this;\n    }\n    /**\n     * Fully initialize an analytics instance, including:\n     *\n     * * Fetching settings from the segment CDN (by default).\n     * * Fetching all remote destinations configured by the user (if applicable).\n     * * Flushing buffered analytics events.\n     * * Loading all middleware.\n     *\n     * Note:️  This method should only be called *once* in your application.\n     *\n     * @example\n     * ```ts\n     * export const analytics = new AnalyticsBrowser()\n     * analytics.load({ writeKey: 'foo' })\n     * ```\n     */\n    AnalyticsBrowser.prototype.load = function (settings, options) {\n        if (options === void 0) { options = {}; }\n        this._resolveLoadStart(settings, options);\n        return this;\n    };\n    /**\n     * Instantiates an object exposing Analytics methods.\n     *\n     * @example\n     * ```ts\n     * const ajs = AnalyticsBrowser.load({ writeKey: '<YOUR_WRITE_KEY>' })\n     *\n     * ajs.track(\"foo\")\n     * ...\n     * ```\n     */\n    AnalyticsBrowser.load = function (settings, options) {\n        if (options === void 0) { options = {}; }\n        return new AnalyticsBrowser().load(settings, options);\n    };\n    AnalyticsBrowser.standalone = function (writeKey, options) {\n        return AnalyticsBrowser.load({ writeKey: writeKey }, options).then(function (res) { return res[0]; });\n    };\n    return AnalyticsBrowser;\n}(_core_buffer__WEBPACK_IMPORTED_MODULE_2__.AnalyticsBuffered));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvYnJvd3Nlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRjtBQUM1QjtBQUNJO0FBQ3RCO0FBQ3dCO0FBQ25CO0FBQ1k7QUFDWTtBQUNSO0FBQ0Q7QUFDUjtBQUMySDtBQUN4SDtBQUNkO0FBQ2lDO0FBQ2hFO0FBQ1AsV0FBVyxpREFBSztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSxtRUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtRUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpRUFBbUI7QUFDdkIsSUFBSSxxREFBTztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0VBQXdCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBFQUE0QjtBQUNoRDtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSwrSUFBK0ksd0NBQXdDO0FBQ3ZMO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHlDQUF5Qyx1UUFDeUQ7QUFDbEc7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGlRQUNzRDtBQUMvRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsd1FBQ3dEO0FBQ2pHO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMFBBQ2lEO0FBQzFGO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxrRUFBYTtBQUNsRCx5Q0FBeUMsb0VBQVksa0hBQWtILFlBQVk7QUFDbkw7QUFDQTtBQUNBLGtDQUFrQyxvREFBYSxDQUFDLG9EQUFhLEVBQUUsa0VBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw2REFBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxrRkFBa0Ysb0RBQWEsQ0FBQyxvREFBYTtBQUM3RztBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMkRBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIseUNBQXlDLHNRQUN5RDtBQUNsRztBQUNBLG1DQUFtQyxnREFBUztBQUM1QztBQUNBLHVDQUF1QyxrREFBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QixXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwREFBYSxJQUFJLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQSx3QkFBd0Isb0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSx3QkFBd0IsZ0VBQWU7QUFDdkM7QUFDQTtBQUNBLDhDQUE4QywyREFBaUI7QUFDL0Q7QUFDQSxxRkFBcUYsdURBQU07QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwREFBYSxJQUFJLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLEdBQUcsd0JBQXdCO0FBQ2pFLG9DQUFvQyxzREFBUyxDQUFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxlQUFlLDBDQUEwQztBQUMzSCxvQkFBb0IsaUVBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUFLLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsMEJBQTBCLHlVQUF5VTtBQUNuYTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsaUZBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsOEJBQThCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsb0JBQW9CLGlDQUFpQyxnQkFBZ0I7QUFDNUc7QUFDQTtBQUNBLENBQUMsQ0FBQywyREFBaUI7QUFDUztBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2Jyb3dzZXIvaW5kZXguanM/MzZlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBnZXRQcm9jZXNzRW52IH0gZnJvbSAnLi4vbGliL2dldC1wcm9jZXNzLWVudic7XG5pbXBvcnQgeyBnZXRDRE4sIHNldEdsb2JhbENETlVybCB9IGZyb20gJy4uL2xpYi9wYXJzZS1jZG4nO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgQW5hbHl0aWNzLCBOdWxsQW5hbHl0aWNzIH0gZnJvbSAnLi4vY29yZS9hbmFseXRpY3MnO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uL2NvcmUvY29udGV4dCc7XG5pbXBvcnQgeyBtZXJnZWRPcHRpb25zIH0gZnJvbSAnLi4vbGliL21lcmdlZC1vcHRpb25zJztcbmltcG9ydCB7IGNyZWF0ZURlZmVycmVkIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuaW1wb3J0IHsgZW52RW5yaWNobWVudCB9IGZyb20gJy4uL3BsdWdpbnMvZW52LWVucmljaG1lbnQnO1xuaW1wb3J0IHsgcmVtb3RlTG9hZGVyLCB9IGZyb20gJy4uL3BsdWdpbnMvcmVtb3RlLWxvYWRlcic7XG5pbXBvcnQgeyBzZWdtZW50aW8gfSBmcm9tICcuLi9wbHVnaW5zL3NlZ21lbnRpbyc7XG5pbXBvcnQgeyBBbmFseXRpY3NCdWZmZXJlZCwgZmx1c2hBbmFseXRpY3NDYWxsc0luTmV3VGFzaywgZmx1c2hBZGRTb3VyY2VNaWRkbGV3YXJlLCBmbHVzaFNldEFub255bW91c0lELCBmbHVzaE9uLCBQcmVJbml0TWV0aG9kQ2FsbCwgZmx1c2hSZWdpc3RlciwgfSBmcm9tICcuLi9jb3JlL2J1ZmZlcic7XG5pbXBvcnQgeyBhdHRhY2hJbnNwZWN0b3IgfSBmcm9tICcuLi9jb3JlL2luc3BlY3Rvcic7XG5pbXBvcnQgeyBTdGF0cyB9IGZyb20gJy4uL2NvcmUvc3RhdHMnO1xuaW1wb3J0IHsgc2V0R2xvYmFsQW5hbHl0aWNzS2V5IH0gZnJvbSAnLi4vbGliL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyJztcbmV4cG9ydCBmdW5jdGlvbiBsb2FkQ0ROU2V0dGluZ3Mod3JpdGVLZXksIGJhc2VVcmwpIHtcbiAgICByZXR1cm4gZmV0Y2goXCJcIi5jb25jYXQoYmFzZVVybCwgXCIvdjEvcHJvamVjdHMvXCIpLmNvbmNhdCh3cml0ZUtleSwgXCIvc2V0dGluZ3NcIikpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMudGV4dCgpLnRoZW4oZnVuY3Rpb24gKGVycm9yUmVzcG9uc2VNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUmVzcG9uc2VNZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYXNMZWdhY3lEZXN0aW5hdGlvbnMoc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gKGdldFByb2Nlc3NFbnYoKS5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIC8vIGp1c3Qgb25lIGludGVncmF0aW9uIG1lYW5zIHNlZ21lbnRpb1xuICAgICAgICBPYmplY3Qua2V5cyhzZXR0aW5ncy5pbnRlZ3JhdGlvbnMpLmxlbmd0aCA+IDEpO1xufVxuZnVuY3Rpb24gaGFzVHN1Yk1pZGRsZXdhcmUoc2V0dGluZ3MpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKGdldFByb2Nlc3NFbnYoKS5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgICgoX2MgPSAoX2IgPSAoX2EgPSBzZXR0aW5ncy5taWRkbGV3YXJlU2V0dGluZ3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yb3V0aW5nUnVsZXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDApID4gMCk7XG59XG4vKipcbiAqIFdpdGggQUpTIGNsYXNzaWMsIHdlIGFsbG93IHVzZXJzIHRvIGNhbGwgc2V0QW5vbnltb3VzSWQgYmVmb3JlIHRoZSBsaWJyYXJ5IGluaXRpYWxpemF0aW9uLlxuICogVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSBzb21lIG9mIHRoZSBkZXN0aW5hdGlvbnMgd2lsbCB1c2UgdGhlIGFub255bW91c0lkIGR1cmluZyB0aGUgaW5pdGlhbGl6YXRpb24sXG4gKiBhbmQgaWYgd2Ugc2V0IGFub25JZCBhZnRlcndhcmRzLCB0aGF0IHdvdWxkbuKAmXQgaW1wYWN0IHRoZSBkZXN0aW5hdGlvbi5cbiAqXG4gKiBBbHNvIEVuc3VyZXMgZXZlbnRzIGNhbiBiZSByZWdpc3RlcmVkIGJlZm9yZSBsaWJyYXJ5IGluaXRpYWxpemF0aW9uLlxuICogVGhpcyBpcyBpbXBvcnRhbnQgc28gdXNlcnMgY2FuIHJlZ2lzdGVyIHRvICdpbml0aWFsaXplJyBhbmQgYW55IGV2ZW50cyB0aGF0IG1heSBmaXJlIGVhcmx5IGR1cmluZyBzZXR1cC5cbiAqL1xuZnVuY3Rpb24gZmx1c2hQcmVCdWZmZXIoYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICBmbHVzaFNldEFub255bW91c0lEKGFuYWx5dGljcywgYnVmZmVyKTtcbiAgICBmbHVzaE9uKGFuYWx5dGljcywgYnVmZmVyKTtcbn1cbi8qKlxuICogRmluaXNoIGZsdXNoaW5nIGJ1ZmZlciBhbmQgY2xlYW51cC5cbiAqL1xuZnVuY3Rpb24gZmx1c2hGaW5hbEJ1ZmZlcihhbmFseXRpY3MsIGJ1ZmZlcikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBwb3BTbmlwcGV0V2luZG93QnVmZmVyIGJlZm9yZSBlYWNoIGZsdXNoIHRhc2sgc2luY2UgdGhlcmUgbWF5IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5hbHl0aWNzIGNhbGxzIGR1cmluZyBhc3luYyBmdW5jdGlvbiBjYWxscy5cbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbHVzaEFkZFNvdXJjZU1pZGRsZXdhcmUoYW5hbHl0aWNzLCBidWZmZXIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGwgcG9wU25pcHBldFdpbmRvd0J1ZmZlciBiZWZvcmUgZWFjaCBmbHVzaCB0YXNrIHNpbmNlIHRoZXJlIG1heSBiZVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmFseXRpY3MgY2FsbHMgZHVyaW5nIGFzeW5jIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGZsdXNoQW5hbHl0aWNzQ2FsbHNJbk5ld1Rhc2soYW5hbHl0aWNzLCBidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVnaXN0ZXJQbHVnaW5zKHdyaXRlS2V5LCBjZG5TZXR0aW5ncywgYW5hbHl0aWNzLCBvcHRpb25zLCBwbHVnaW5MaWtlcywgbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzLCBwcmVJbml0QnVmZmVyKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgaWYgKHBsdWdpbkxpa2VzID09PSB2b2lkIDApIHsgcGx1Z2luTGlrZXMgPSBbXTsgfVxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBsdWdpbnNGcm9tU2V0dGluZ3MsIHBsdWdpblNvdXJjZXMsIHRzdWJNaWRkbGV3YXJlLCBfZCwgbGVnYWN5RGVzdGluYXRpb25zLCBfZSwgc2NoZW1hRmlsdGVyLCBfZiwgbWVyZ2VkU2V0dGluZ3MsIHJlbW90ZVBsdWdpbnMsIGJhc2VQbHVnaW5zLCBzaG91bGRJZ25vcmVTZWdtZW50aW8sIF9nLCBfaCwgY3R4O1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9qKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9qLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBmbHVzaFByZUJ1ZmZlcihhbmFseXRpY3MsIHByZUluaXRCdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zRnJvbVNldHRpbmdzID0gcGx1Z2luTGlrZXMgPT09IG51bGwgfHwgcGx1Z2luTGlrZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbkxpa2VzLmZpbHRlcihmdW5jdGlvbiAocGx1Z2luTGlrZSkgeyByZXR1cm4gdHlwZW9mIHBsdWdpbkxpa2UgPT09ICdvYmplY3QnOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luU291cmNlcyA9IHBsdWdpbkxpa2VzID09PSBudWxsIHx8IHBsdWdpbkxpa2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5MaWtlcy5maWx0ZXIoZnVuY3Rpb24gKHBsdWdpbkxpa2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGx1Z2luTGlrZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBwbHVnaW5MaWtlLnBsdWdpbk5hbWUgPT09ICdzdHJpbmcnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNUc3ViTWlkZGxld2FyZShjZG5TZXR0aW5ncykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcInRzdWItbWlkZGxld2FyZVwiICovICcuLi9wbHVnaW5zL3JvdXRpbmctbWlkZGxld2FyZScpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QudHN1Yk1pZGRsZXdhcmUoY2RuU2V0dGluZ3MubWlkZGxld2FyZVNldHRpbmdzLnJvdXRpbmdSdWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfZCA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgX2oubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdHN1Yk1pZGRsZXdhcmUgPSBfZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaGFzTGVnYWN5RGVzdGluYXRpb25zKGNkblNldHRpbmdzKSB8fCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImFqcy1kZXN0aW5hdGlvblwiICovICcuLi9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbicpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QuYWpzRGVzdGluYXRpb25zKHdyaXRlS2V5LCBjZG5TZXR0aW5ncywgYW5hbHl0aWNzLmludGVncmF0aW9ucywgb3B0aW9ucywgdHN1Yk1pZGRsZXdhcmUsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBfZSA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBfZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBsZWdhY3lEZXN0aW5hdGlvbnMgPSBfZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZG5TZXR0aW5ncy5sZWdhY3lWaWRlb1BsdWdpbnNFbmFibGVkKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJsZWdhY3lWaWRlb3NcIiAqLyAnLi4vcGx1Z2lucy9sZWdhY3ktdmlkZW8tcGx1Z2lucycpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QubG9hZExlZ2FjeVZpZGVvUGx1Z2lucyhhbmFseXRpY3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISgoX2EgPSBvcHRpb25zLnBsYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmFjaykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJzY2hlbWFGaWx0ZXJcIiAqLyAnLi4vcGx1Z2lucy9zY2hlbWEtZmlsdGVyJykudGhlbihmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2Quc2NoZW1hRmlsdGVyKChfYSA9IG9wdGlvbnMucGxhbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRyYWNrLCBjZG5TZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBfZiA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMTFdO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIF9mID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDExO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYUZpbHRlciA9IF9mO1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRTZXR0aW5ncyA9IG1lcmdlZE9wdGlvbnMoY2RuU2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdGVMb2FkZXIoY2RuU2V0dGluZ3MsIGFuYWx5dGljcy5pbnRlZ3JhdGlvbnMsIG1lcmdlZFNldHRpbmdzLCBvcHRpb25zLCB0c3ViTWlkZGxld2FyZSwgcGx1Z2luU291cmNlcykuY2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICByZW1vdGVQbHVnaW5zID0gX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlUGx1Z2lucyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbZW52RW5yaWNobWVudF0sIGxlZ2FjeURlc3RpbmF0aW9ucywgdHJ1ZSksIHJlbW90ZVBsdWdpbnMsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlUGx1Z2lucy5wdXNoKHNjaGVtYUZpbHRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkSWdub3JlU2VnbWVudGlvID0gKCgoX2IgPSBvcHRpb25zLmludGVncmF0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLkFsbCkgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhb3B0aW9ucy5pbnRlZ3JhdGlvbnNbJ1NlZ21lbnQuaW8nXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChvcHRpb25zLmludGVncmF0aW9ucyAmJiBvcHRpb25zLmludGVncmF0aW9uc1snU2VnbWVudC5pbyddID09PSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXNob3VsZElnbm9yZVNlZ21lbnRpbykgcmV0dXJuIFszIC8qYnJlYWsqLywgMTRdO1xuICAgICAgICAgICAgICAgICAgICBfaCA9IChfZyA9IGJhc2VQbHVnaW5zKS5wdXNoO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZWdtZW50aW8oYW5hbHl0aWNzLCBtZXJnZWRTZXR0aW5nc1snU2VnbWVudC5pbyddLCBjZG5TZXR0aW5ncy5pbnRlZ3JhdGlvbnMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBfaC5hcHBseShfZywgW19qLnNlbnQoKV0pO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDE0O1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIGFuYWx5dGljcy5yZWdpc3Rlci5hcHBseShhbmFseXRpY3MsIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgYmFzZVBsdWdpbnMsIGZhbHNlKSwgcGx1Z2luc0Zyb21TZXR0aW5ncywgZmFsc2UpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciB1c2VyLWRlZmluZWQgcGx1Z2lucyByZWdpc3RlcmVkIHZpYSBhbmFseXRpY3MucmVnaXN0ZXIoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbHVzaFJlZ2lzdGVyKGFuYWx5dGljcywgcHJlSW5pdEJ1ZmZlcildO1xuICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHVzZXItZGVmaW5lZCBwbHVnaW5zIHJlZ2lzdGVyZWQgdmlhIGFuYWx5dGljcy5yZWdpc3RlcigpXG4gICAgICAgICAgICAgICAgICAgIF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPYmplY3QuZW50cmllcygoX2MgPSBjZG5TZXR0aW5ncy5lbmFibGVkTWlkZGxld2FyZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30pLnNvbWUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZCA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pKSByZXR1cm4gWzMgLypicmVhayovLCAxOF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwicmVtb3RlTWlkZGxld2FyZVwiICovICcuLi9wbHVnaW5zL3JlbW90ZS1taWRkbGV3YXJlJykudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlTWlkZGxld2FyZXMgPSBfYS5yZW1vdGVNaWRkbGV3YXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWlkZGxld2FyZSwgcHJvbWlzZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW90ZU1pZGRsZXdhcmVzKGN0eCwgY2RuU2V0dGluZ3MsIG9wdGlvbnMub2JmdXNjYXRlKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRkbGV3YXJlID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcyA9IG1pZGRsZXdhcmUubWFwKGZ1bmN0aW9uIChtZHcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmFseXRpY3MuYWRkU291cmNlTWlkZGxld2FyZShtZHcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKHByb21pc2VzKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgIF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2oubGFiZWwgPSAxODtcbiAgICAgICAgICAgICAgICBjYXNlIDE4OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBsb2FkQW5hbHl0aWNzKHNldHRpbmdzLCBvcHRpb25zLCBwcmVJbml0QnVmZmVyKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbDtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNkblVSTCwgY2RuU2V0dGluZ3MsIF9tLCBkaXNhYmxlZCwgcmV0cnlRdWV1ZSwgYW5hbHl0aWNzLCBwbHVnaW5zLCBjbGFzc2ljSW50ZWdyYXRpb25zLCBzZWdtZW50TG9hZE9wdGlvbnMsIGN0eCwgc2VhcmNoLCBoYXNoLCB0ZXJtO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9vKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9vLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gbm8tb3AgYW5hbHl0aWNzIGluc3RhbmNlIGlmIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbbmV3IE51bGxBbmFseXRpY3MoKSwgQ29udGV4dC5zeXN0ZW0oKV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmdsb2JhbEFuYWx5dGljc0tleSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEdsb2JhbEFuYWx5dGljc0tleShvcHRpb25zLmdsb2JhbEFuYWx5dGljc0tleSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYW4gdWdseSBzaWRlLWVmZmVjdCwgYnV0IGl0J3MgZm9yIHRoZSBiZW5lZml0cyBvZiB0aGUgcGx1Z2lucyB0aGF0IGdldCB0aGVpciBjZG4gdmlhIGdldENETigpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5jZG5VUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRHbG9iYWxDRE5Vcmwoc2V0dGluZ3MuY2RuVVJMKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5pdGlhbFBhZ2V2aWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXB0dXJlIHRoZSBwYWdlIGNvbnRleHQgZWFybHksIHNvIGl0J3MgYWx3YXlzIHVwLXRvLWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZUluaXRCdWZmZXIuYWRkKG5ldyBQcmVJbml0TWV0aG9kQ2FsbCgncGFnZScsIFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2RuVVJMID0gKF9hID0gc2V0dGluZ3MuY2RuVVJMKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBnZXRDRE4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9iID0gc2V0dGluZ3MuY2RuU2V0dGluZ3MpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDApKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgX20gPSBfYjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkQ0ROU2V0dGluZ3Moc2V0dGluZ3Mud3JpdGVLZXksIGNkblVSTCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX20gPSAoX28uc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgX28ubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgY2RuU2V0dGluZ3MgPSBfbTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlQ0ROU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNkblNldHRpbmdzID0gb3B0aW9ucy51cGRhdGVDRE5TZXR0aW5ncyhjZG5TZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIG9wdGlvbnMuZGlzYWJsZSA9PT0gJ2Z1bmN0aW9uJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvcHRpb25zLmRpc2FibGUoY2RuU2V0dGluZ3MpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkID0gX28uc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbbmV3IE51bGxBbmFseXRpY3MoKSwgQ29udGV4dC5zeXN0ZW0oKV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9vLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHJldHJ5UXVldWUgPSAoX2QgPSAoX2MgPSBjZG5TZXR0aW5ncy5pbnRlZ3JhdGlvbnNbJ1NlZ21lbnQuaW8nXSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnJldHJ5UXVldWUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBfX2Fzc2lnbih7IHJldHJ5UXVldWU6IHJldHJ5UXVldWUgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3MoX19hc3NpZ24oX19hc3NpZ24oe30sIHNldHRpbmdzKSwgeyBjZG5TZXR0aW5nczogY2RuU2V0dGluZ3MsIGNkblVSTDogY2RuVVJMIH0pLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoSW5zcGVjdG9yKGFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnMgPSAoX2UgPSBzZXR0aW5ncy5wbHVnaW5zKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NpY0ludGVncmF0aW9ucyA9IChfZiA9IHNldHRpbmdzLmNsYXNzaWNJbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBzZWdtZW50TG9hZE9wdGlvbnMgPSAoX2cgPSBvcHRpb25zLmludGVncmF0aW9ucykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nWydTZWdtZW50LmlvJ107XG4gICAgICAgICAgICAgICAgICAgIFN0YXRzLmluaXRSZW1vdGVNZXRyaWNzKF9fYXNzaWduKF9fYXNzaWduKHt9LCBjZG5TZXR0aW5ncy5tZXRyaWNzKSwgeyBob3N0OiAoX2ggPSBzZWdtZW50TG9hZE9wdGlvbnMgPT09IG51bGwgfHwgc2VnbWVudExvYWRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWdtZW50TG9hZE9wdGlvbnMuYXBpSG9zdCkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogKF9qID0gY2RuU2V0dGluZ3MubWV0cmljcykgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLmhvc3QsIHByb3RvY29sOiBzZWdtZW50TG9hZE9wdGlvbnMgPT09IG51bGwgfHwgc2VnbWVudExvYWRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWdtZW50TG9hZE9wdGlvbnMucHJvdG9jb2wgfSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RlclBsdWdpbnMoc2V0dGluZ3Mud3JpdGVLZXksIGNkblNldHRpbmdzLCBhbmFseXRpY3MsIG9wdGlvbnMsIHBsdWdpbnMsIGNsYXNzaWNJbnRlZ3JhdGlvbnMsIHByZUluaXRCdWZmZXIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IF9vLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoID0gKF9rID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaCkgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoX2wgPSB3aW5kb3cubG9jYXRpb24uaGFzaCkgIT09IG51bGwgJiYgX2wgIT09IHZvaWQgMCA/IF9sIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIHRlcm0gPSBzZWFyY2gubGVuZ3RoID8gc2VhcmNoIDogaGFzaC5yZXBsYWNlKC8oPz0jKS4qKD89XFw/KS8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtLmluY2x1ZGVzKCdhanNfJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhbmFseXRpY3MucXVlcnlTdHJpbmcodGVybSkuY2F0Y2goY29uc29sZS5lcnJvcildO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX28uc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfby5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MuZW1pdCgnaW5pdGlhbGl6ZScsIHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmx1c2hGaW5hbEJ1ZmZlcihhbmFseXRpY3MsIHByZUluaXRCdWZmZXIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIF9vLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFthbmFseXRpY3MsIGN0eF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8qKlxuICogVGhlIHB1YmxpYyBicm93c2VyIGludGVyZmFjZSBmb3IgU2VnbWVudCBBbmFseXRpY3NcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqICBleHBvcnQgY29uc3QgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljc0Jyb3dzZXIoKVxuICogIGFuYWx5dGljcy5sb2FkKHsgd3JpdGVLZXk6ICdmb28nIH0pXG4gKiBgYGBcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWdtZW50aW8vYW5hbHl0aWNzLW5leHQvI3JlYWRtZVxuICovXG52YXIgQW5hbHl0aWNzQnJvd3NlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQW5hbHl0aWNzQnJvd3NlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmFseXRpY3NCcm93c2VyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSBjcmVhdGVEZWZlcnJlZCgpLCBsb2FkU3RhcnQgPSBfYS5wcm9taXNlLCByZXNvbHZlTG9hZFN0YXJ0ID0gX2EucmVzb2x2ZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZFN0YXJ0LnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gX2FbMF0sIG9wdGlvbnMgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZEFuYWx5dGljcyhzZXR0aW5ncywgb3B0aW9ucywgYnVmZmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fcmVzb2x2ZUxvYWRTdGFydCA9IGZ1bmN0aW9uIChzZXR0aW5ncywgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVMb2FkU3RhcnQoW3NldHRpbmdzLCBvcHRpb25zXSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVsbHkgaW5pdGlhbGl6ZSBhbiBhbmFseXRpY3MgaW5zdGFuY2UsIGluY2x1ZGluZzpcbiAgICAgKlxuICAgICAqICogRmV0Y2hpbmcgc2V0dGluZ3MgZnJvbSB0aGUgc2VnbWVudCBDRE4gKGJ5IGRlZmF1bHQpLlxuICAgICAqICogRmV0Y2hpbmcgYWxsIHJlbW90ZSBkZXN0aW5hdGlvbnMgY29uZmlndXJlZCBieSB0aGUgdXNlciAoaWYgYXBwbGljYWJsZSkuXG4gICAgICogKiBGbHVzaGluZyBidWZmZXJlZCBhbmFseXRpY3MgZXZlbnRzLlxuICAgICAqICogTG9hZGluZyBhbGwgbWlkZGxld2FyZS5cbiAgICAgKlxuICAgICAqIE5vdGU677iPICBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgKm9uY2UqIGluIHlvdXIgYXBwbGljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogZXhwb3J0IGNvbnN0IGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3NCcm93c2VyKClcbiAgICAgKiBhbmFseXRpY3MubG9hZCh7IHdyaXRlS2V5OiAnZm9vJyB9KVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIEFuYWx5dGljc0Jyb3dzZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoc2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy5fcmVzb2x2ZUxvYWRTdGFydChzZXR0aW5ncywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGVzIGFuIG9iamVjdCBleHBvc2luZyBBbmFseXRpY3MgbWV0aG9kcy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBhanMgPSBBbmFseXRpY3NCcm93c2VyLmxvYWQoeyB3cml0ZUtleTogJzxZT1VSX1dSSVRFX0tFWT4nIH0pXG4gICAgICpcbiAgICAgKiBhanMudHJhY2soXCJmb29cIilcbiAgICAgKiAuLi5cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBBbmFseXRpY3NCcm93c2VyLmxvYWQgPSBmdW5jdGlvbiAoc2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgcmV0dXJuIG5ldyBBbmFseXRpY3NCcm93c2VyKCkubG9hZChzZXR0aW5ncywgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCcm93c2VyLnN0YW5kYWxvbmUgPSBmdW5jdGlvbiAod3JpdGVLZXksIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIEFuYWx5dGljc0Jyb3dzZXIubG9hZCh7IHdyaXRlS2V5OiB3cml0ZUtleSB9LCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlc1swXTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQW5hbHl0aWNzQnJvd3Nlcjtcbn0oQW5hbHl0aWNzQnVmZmVyZWQpKTtcbmV4cG9ydCB7IEFuYWx5dGljc0Jyb3dzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/browser/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* binding */ Analytics),\n/* harmony export */   AnalyticsInstanceSettings: () => (/* binding */ AnalyticsInstanceSettings),\n/* harmony export */   NullAnalytics: () => (/* binding */ NullAnalytics)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../arguments-resolver */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js\");\n/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../connection */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../events */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js\");\n/* harmony import */ var _plugin__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../plugin */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js\");\n/* harmony import */ var _queue_event_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queue/event-queue */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../user */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js\");\n/* harmony import */ var _lib_bind_all__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/bind-all */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_get_global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/get-global */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../lib/global-analytics-helper */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _buffer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../buffer */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../plugins/segmentio */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar deprecationWarning = 'This is being deprecated and will be not be available in future releases of Analytics JS';\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nvar global = (0,_lib_get_global__WEBPACK_IMPORTED_MODULE_0__.getGlobal)();\nvar _analytics = global === null || global === void 0 ? void 0 : global.analytics;\nfunction createDefaultQueue(name, retryQueue, disablePersistance) {\n    if (retryQueue === void 0) { retryQueue = false; }\n    if (disablePersistance === void 0) { disablePersistance = false; }\n    var maxAttempts = retryQueue ? 10 : 1;\n    var priorityQueue = disablePersistance\n        ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_1__.PriorityQueue(maxAttempts, [])\n        : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_2__.PersistedPriorityQueue(maxAttempts, name);\n    return new _queue_event_queue__WEBPACK_IMPORTED_MODULE_3__.EventQueue(priorityQueue);\n}\n/**\n * The public settings that are set on the analytics instance\n */\nvar AnalyticsInstanceSettings = /** @class */ (function () {\n    function AnalyticsInstanceSettings(settings, queue) {\n        var _a;\n        /**\n         * Auto-track specific timeout setting for legacy purposes.\n         */\n        this.timeout = 300;\n        this._getSegmentPluginMetadata = function () { var _a; return (_a = queue.plugins.find(_plugins_segmentio__WEBPACK_IMPORTED_MODULE_4__.isSegmentPlugin)) === null || _a === void 0 ? void 0 : _a.metadata; };\n        this.writeKey = settings.writeKey;\n        this.cdnSettings = (_a = settings.cdnSettings) !== null && _a !== void 0 ? _a : {\n            integrations: {},\n            edgeFunction: {},\n        };\n        this.cdnURL = settings.cdnURL;\n    }\n    Object.defineProperty(AnalyticsInstanceSettings.prototype, \"apiHost\", {\n        get: function () {\n            var _a, _b;\n            return (_b = (_a = this._getSegmentPluginMetadata) === null || _a === void 0 ? void 0 : _a.call(this)) === null || _b === void 0 ? void 0 : _b.apiHost;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AnalyticsInstanceSettings;\n}());\n\n/* analytics-classic stubs */\nfunction _stub() {\n    console.warn(deprecationWarning);\n}\nvar Analytics = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__extends)(Analytics, _super);\n    function Analytics(settings, options, queue, user, group) {\n        var _this = this;\n        var _a, _b;\n        _this = _super.call(this) || this;\n        _this._debug = false;\n        _this.initialized = false;\n        _this.user = function () {\n            return _this._user;\n        };\n        _this.init = _this.initialize.bind(_this);\n        _this.log = _stub;\n        _this.addIntegrationMiddleware = _stub;\n        _this.listeners = _stub;\n        _this.addEventListener = _stub;\n        _this.removeAllListeners = _stub;\n        _this.removeListener = _stub;\n        _this.removeEventListener = _stub;\n        _this.hasListeners = _stub;\n        _this.add = _stub;\n        _this.addIntegration = _stub;\n        var cookieOptions = options === null || options === void 0 ? void 0 : options.cookie;\n        var disablePersistance = (_a = options === null || options === void 0 ? void 0 : options.disableClientPersistence) !== null && _a !== void 0 ? _a : false;\n        _this.queue =\n            queue !== null && queue !== void 0 ? queue : createDefaultQueue(\"\".concat(settings.writeKey, \":event-queue\"), options === null || options === void 0 ? void 0 : options.retryQueue, disablePersistance);\n        _this.settings = new AnalyticsInstanceSettings(settings, _this.queue);\n        var storageSetting = options === null || options === void 0 ? void 0 : options.storage;\n        _this._universalStorage = _this.createStore(disablePersistance, storageSetting, cookieOptions);\n        _this._user =\n            user !== null && user !== void 0 ? user : new _user__WEBPACK_IMPORTED_MODULE_6__.User((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({ persist: !disablePersistance, storage: options === null || options === void 0 ? void 0 : options.storage }, options === null || options === void 0 ? void 0 : options.user), cookieOptions).load();\n        _this._group =\n            group !== null && group !== void 0 ? group : new _user__WEBPACK_IMPORTED_MODULE_6__.Group((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({ persist: !disablePersistance, storage: options === null || options === void 0 ? void 0 : options.storage }, options === null || options === void 0 ? void 0 : options.group), cookieOptions).load();\n        _this.eventFactory = new _events__WEBPACK_IMPORTED_MODULE_7__.EventFactory(_this._user);\n        _this.integrations = (_b = options === null || options === void 0 ? void 0 : options.integrations) !== null && _b !== void 0 ? _b : {};\n        _this.options = options !== null && options !== void 0 ? options : {};\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_this);\n        return _this;\n    }\n    /**\n     * Creates the storage system based on the settings received\n     * @returns Storage\n     */\n    Analytics.prototype.createStore = function (disablePersistance, storageSetting, cookieOptions) {\n        // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n        if (disablePersistance) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_9__.UniversalStorage([new _storage__WEBPACK_IMPORTED_MODULE_10__.MemoryStorage()]);\n        }\n        else {\n            if (storageSetting) {\n                if ((0,_storage__WEBPACK_IMPORTED_MODULE_11__.isArrayOfStoreType)(storageSetting)) {\n                    // We will create the store with the priority for customer settings\n                    return new _storage__WEBPACK_IMPORTED_MODULE_9__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_12__.initializeStorages)((0,_storage__WEBPACK_IMPORTED_MODULE_12__.applyCookieOptions)(storageSetting.stores, cookieOptions)));\n                }\n            }\n        }\n        // We default to our multi storage with priority\n        return new _storage__WEBPACK_IMPORTED_MODULE_9__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_12__.initializeStorages)([\n            _storage__WEBPACK_IMPORTED_MODULE_13__.StoreType.LocalStorage,\n            {\n                name: _storage__WEBPACK_IMPORTED_MODULE_13__.StoreType.Cookie,\n                settings: cookieOptions,\n            },\n            _storage__WEBPACK_IMPORTED_MODULE_13__.StoreType.Memory,\n        ]));\n    };\n    Object.defineProperty(Analytics.prototype, \"storage\", {\n        get: function () {\n            return this._universalStorage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Analytics.prototype.track = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, name, data, opts, cb, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveArguments.apply(void 0, args), name = _a[0], data = _a[1], opts = _a[2], cb = _a[3];\n                segmentEvent = this.eventFactory.track(name, data, opts, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, cb).then(function (ctx) {\n                        _this.emit('track', name, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.page = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, category, page, properties, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolvePageArguments.apply(void 0, args), category = _a[0], page = _a[1], properties = _a[2], options = _a[3], callback = _a[4];\n                segmentEvent = this.eventFactory.page(category, page, properties, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('page', category, page, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.identify = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, id, _traits, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = (0,_arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveUserArguments)(this._user).apply(void 0, args), id = _a[0], _traits = _a[1], options = _a[2], callback = _a[3];\n                this._user.identify(id, _traits);\n                segmentEvent = this.eventFactory.identify(this._user.id(), this._user.traits(), options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('identify', ctx.event.userId, ctx.event.traits, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.group = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n        if (args.length === 0) {\n            return this._group;\n        }\n        var _a = (0,_arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveUserArguments)(this._group).apply(void 0, args), id = _a[0], _traits = _a[1], options = _a[2], callback = _a[3];\n        this._group.identify(id, _traits);\n        var groupId = this._group.id();\n        var groupTraits = this._group.traits();\n        var segmentEvent = this.eventFactory.group(groupId, groupTraits, options, this.integrations, pageCtx);\n        return this._dispatch(segmentEvent, callback).then(function (ctx) {\n            _this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options);\n            return ctx;\n        });\n    };\n    Analytics.prototype.alias = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, to, from, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveAliasArguments.apply(void 0, args), to = _a[0], from = _a[1], options = _a[2], callback = _a[3];\n                segmentEvent = this.eventFactory.alias(to, from, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('alias', to, from, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.screen = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, category, page, properties, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolvePageArguments.apply(void 0, args), category = _a[0], page = _a[1], properties = _a[2], options = _a[3], callback = _a[4];\n                segmentEvent = this.eventFactory.screen(category, page, properties, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('screen', category, page, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.trackClick = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.link).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackLink = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.link).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackSubmit = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.form).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackForm = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.form).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.register = function () {\n        var plugins = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            plugins[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, registrations;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = _context__WEBPACK_IMPORTED_MODULE_16__.Context.system();\n                        registrations = plugins.map(function (xt) {\n                            return _this.queue.register(ctx, xt, _this);\n                        });\n                        return [4 /*yield*/, Promise.all(registrations)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    Analytics.prototype.deregister = function () {\n        var plugins = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            plugins[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, deregistrations;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = _context__WEBPACK_IMPORTED_MODULE_16__.Context.system();\n                        deregistrations = plugins.map(function (pl) {\n                            var plugin = _this.queue.plugins.find(function (p) { return p.name === pl; });\n                            if (plugin) {\n                                return _this.queue.deregister(ctx, plugin, _this);\n                            }\n                            else {\n                                ctx.log('warn', \"plugin \".concat(pl, \" not found\"));\n                            }\n                        });\n                        return [4 /*yield*/, Promise.all(deregistrations)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    Analytics.prototype.debug = function (toggle) {\n        // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n        if (toggle === false && localStorage.getItem('debug')) {\n            localStorage.removeItem('debug');\n        }\n        this._debug = toggle;\n        return this;\n    };\n    Analytics.prototype.reset = function () {\n        this._user.reset();\n        this._group.reset();\n        this.emit('reset');\n    };\n    Analytics.prototype.timeout = function (timeout) {\n        this.settings.timeout = timeout;\n    };\n    Analytics.prototype._dispatch = function (event, callback) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var ctx;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                ctx = new _context__WEBPACK_IMPORTED_MODULE_16__.Context(event);\n                if ((0,_connection__WEBPACK_IMPORTED_MODULE_17__.isOffline)() && !this.options.retryQueue) {\n                    return [2 /*return*/, ctx];\n                }\n                return [2 /*return*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_18__.dispatch)(ctx, this.queue, this, {\n                        callback: callback,\n                        debug: this._debug,\n                        timeout: this.settings.timeout,\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.addSourceMiddleware = function (fn) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.queue.criticalTasks.run(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(_this, void 0, void 0, function () {\n                            var sourceMiddlewarePlugin, integrations, plugin;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../plugins/middleware */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\"))];\n                                    case 1:\n                                        sourceMiddlewarePlugin = (_a.sent()).sourceMiddlewarePlugin;\n                                        integrations = {};\n                                        this.queue.plugins.forEach(function (plugin) {\n                                            if (plugin.type === 'destination') {\n                                                return (integrations[plugin.name] = true);\n                                            }\n                                        });\n                                        plugin = sourceMiddlewarePlugin(fn, integrations);\n                                        return [4 /*yield*/, this.register(plugin)];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    /* TODO: This does not have to return a promise? */\n    Analytics.prototype.addDestinationMiddleware = function (integrationName) {\n        var middlewares = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            middlewares[_i - 1] = arguments[_i];\n        }\n        this.queue.plugins\n            .filter(_plugin__WEBPACK_IMPORTED_MODULE_19__.isDestinationPluginWithAddMiddleware)\n            .forEach(function (p) {\n            if (integrationName === '*' ||\n                p.name.toLowerCase() === integrationName.toLowerCase()) {\n                p.addMiddleware.apply(p, middlewares);\n            }\n        });\n        return Promise.resolve(this);\n    };\n    Analytics.prototype.setAnonymousId = function (id) {\n        return this._user.anonymousId(id);\n    };\n    Analytics.prototype.queryString = function (query) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var queryString;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.options.useQueryString === false) {\n                            return [2 /*return*/, []];\n                        }\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | queryString */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../query-string */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js\"))];\n                    case 1:\n                        queryString = (_a.sent()).queryString;\n                        return [2 /*return*/, queryString(this, query)];\n                }\n            });\n        });\n    };\n    /**\n     * @deprecated This function does not register a destination plugin.\n     *\n     * Instantiates a legacy Analytics.js destination.\n     *\n     * This function does not register the destination as an Analytics.JS plugin,\n     * all the it does it to invoke the factory function back.\n     */\n    Analytics.prototype.use = function (legacyPluginFactory) {\n        legacyPluginFactory(this);\n        return this;\n    };\n    Analytics.prototype.ready = function (callback) {\n        if (callback === void 0) { callback = function (res) { return res; }; }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                return [2 /*return*/, Promise.all(this.queue.plugins.map(function (i) { return (i.ready ? i.ready() : Promise.resolve()); })).then(function (res) {\n                        callback(res);\n                        return res;\n                    })];\n            });\n        });\n    };\n    // analytics-classic api\n    Analytics.prototype.noConflict = function () {\n        console.warn(deprecationWarning);\n        (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_20__.setGlobalAnalytics)(_analytics !== null && _analytics !== void 0 ? _analytics : this);\n        return this;\n    };\n    Analytics.prototype.normalize = function (msg) {\n        console.warn(deprecationWarning);\n        return this.eventFactory['normalize'](msg);\n    };\n    Object.defineProperty(Analytics.prototype, \"failedInitializations\", {\n        get: function () {\n            console.warn(deprecationWarning);\n            return this.queue.failedInitializations;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Analytics.prototype, \"VERSION\", {\n        get: function () {\n            return _generated_version__WEBPACK_IMPORTED_MODULE_21__.version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /* @deprecated - noop */\n    Analytics.prototype.initialize = function (_settings, _options) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                console.warn(deprecationWarning);\n                return [2 /*return*/, Promise.resolve(this)];\n            });\n        });\n    };\n    Analytics.prototype.pageview = function (url) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.warn(deprecationWarning);\n                        return [4 /*yield*/, this.page({ path: url })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    Object.defineProperty(Analytics.prototype, \"plugins\", {\n        get: function () {\n            var _a;\n            console.warn(deprecationWarning);\n            // @ts-expect-error\n            return (_a = this._plugins) !== null && _a !== void 0 ? _a : {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Analytics.prototype, \"Integrations\", {\n        get: function () {\n            console.warn(deprecationWarning);\n            var integrations = this.queue.plugins\n                .filter(function (plugin) { return plugin.type === 'destination'; })\n                .reduce(function (acc, plugin) {\n                var name = \"\".concat(plugin.name\n                    .toLowerCase()\n                    .replace('.', '')\n                    .split(' ')\n                    .join('-'), \"Integration\");\n                // @ts-expect-error\n                var integration = window[name];\n                if (!integration) {\n                    return acc;\n                }\n                var nested = integration.Integration; // hack - Google Analytics function resides in the \"Integration\" field\n                if (nested) {\n                    acc[plugin.name] = nested;\n                    return acc;\n                }\n                acc[plugin.name] = integration;\n                return acc;\n            }, {});\n            return integrations;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // snippet function\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Analytics.prototype.push = function (args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var an = this;\n        var method = args.shift();\n        if (method) {\n            if (!an[method])\n                return;\n        }\n        an[method].apply(this, args);\n    };\n    return Analytics;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_22__.Emitter));\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nvar NullAnalytics = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__extends)(NullAnalytics, _super);\n    function NullAnalytics() {\n        var _this = _super.call(this, { writeKey: '' }, { disableClientPersistence: true }) || this;\n        _this.initialized = true;\n        return _this;\n    }\n    return NullAnalytics;\n}(Analytics));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hbmFseXRpY3MvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUY7QUFDMEM7QUFDbkY7QUFDTDtBQUNjO0FBQ1E7QUFDakI7QUFDdUI7QUFDZjtBQUNaO0FBQ0k7QUFDa0M7QUFDMUI7QUFDTztBQUNSO0FBQ29GO0FBQzlEO0FBQzVCO0FBQ2dCO0FBQzNEO0FBQ0E7QUFDQSxhQUFhLDBEQUFTO0FBQ3RCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxjQUFjLDhEQUFhO0FBQzNCLGNBQWMsaUZBQXNCO0FBQ3BDLGVBQWUsMERBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxRQUFRLGdDQUFnQywrREFBZTtBQUM5RztBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNvQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHVDQUFJLENBQUMsK0NBQVEsR0FBRywwR0FBMEc7QUFDcEw7QUFDQSw2REFBNkQsd0NBQUssQ0FBQywrQ0FBUSxHQUFHLDBHQUEwRztBQUN4TCxpQ0FBaUMsaURBQVk7QUFDN0M7QUFDQTtBQUNBLFFBQVEseURBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFnQixNQUFNLG9EQUFhO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBa0I7QUFDdEM7QUFDQSwrQkFBK0Isc0RBQWdCLENBQUMsNkRBQWtCLENBQUMsNkRBQWtCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFnQixDQUFDLDZEQUFrQjtBQUN0RCxZQUFZLGdEQUFTO0FBQ3JCO0FBQ0Esc0JBQXNCLGdEQUFTO0FBQy9CO0FBQ0EsYUFBYTtBQUNiLFlBQVksZ0RBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQixrRUFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQixzRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQiwwRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwRUFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLDBCQUEwQix3REFBYztBQUN4QyxxQkFBcUIsdUVBQXFCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLDBCQUEwQix3REFBYztBQUN4QyxxQkFBcUIsc0VBQW9CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELGlPQUM0QjtBQUM3RTtBQUNBO0FBQ0EsbUZBQW1GLG9EQUFhO0FBQ2hHO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQSxpREFBaUQsaU9BQzRCO0FBQzdFO0FBQ0E7QUFDQSxtRkFBbUYsb0RBQWE7QUFDaEc7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBLGlEQUFpRCxpT0FDNEI7QUFDN0U7QUFDQTtBQUNBLG1GQUFtRixvREFBYTtBQUNoRztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELGlPQUM0QjtBQUM3RTtBQUNBO0FBQ0EsbUZBQW1GLG9EQUFhO0FBQ2hHO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBLDhCQUE4Qiw4Q0FBTztBQUNyQztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0EsOEJBQThCLDhDQUFPO0FBQ3JDO0FBQ0EsaUZBQWlGLHVCQUF1QjtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QiwwQkFBMEIsOENBQU87QUFDakMsb0JBQW9CLHVEQUFTO0FBQzdCO0FBQ0E7QUFDQSxzQ0FBc0Msa0VBQVE7QUFDOUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQSw0RkFBNEYsT0FBTyxnREFBUztBQUM1RztBQUNBLG1DQUFtQyxrREFBVztBQUM5QztBQUNBLGlFQUFpRSx5TUFDdUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBFQUFvQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw0T0FDdUM7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNEJBQTRCO0FBQy9ELGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHdGQUF3RixtREFBbUQ7QUFDM0k7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRkFBa0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUJBQW1CLHdEQUFPO0FBQzFCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EseURBQXlELFdBQVc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsdUNBQXVDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMsc0VBQU87QUFDWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBLHdDQUF3QyxjQUFjLElBQUksZ0NBQWdDO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN3QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYW5hbHl0aWNzL2luZGV4LmpzP2M3YWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19leHRlbmRzLCBfX2dlbmVyYXRvciwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgcmVzb2x2ZUFsaWFzQXJndW1lbnRzLCByZXNvbHZlQXJndW1lbnRzLCByZXNvbHZlUGFnZUFyZ3VtZW50cywgcmVzb2x2ZVVzZXJBcmd1bWVudHMsIH0gZnJvbSAnLi4vYXJndW1lbnRzLXJlc29sdmVyJztcbmltcG9ydCB7IGlzT2ZmbGluZSB9IGZyb20gJy4uL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgZGlzcGF0Y2ggfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuaW1wb3J0IHsgRXZlbnRGYWN0b3J5LCB9IGZyb20gJy4uL2V2ZW50cyc7XG5pbXBvcnQgeyBpc0Rlc3RpbmF0aW9uUGx1Z2luV2l0aEFkZE1pZGRsZXdhcmUgfSBmcm9tICcuLi9wbHVnaW4nO1xuaW1wb3J0IHsgRXZlbnRRdWV1ZSB9IGZyb20gJy4uL3F1ZXVlL2V2ZW50LXF1ZXVlJztcbmltcG9ydCB7IEdyb3VwLCBVc2VyIH0gZnJvbSAnLi4vdXNlcic7XG5pbXBvcnQgYXV0b0JpbmQgZnJvbSAnLi4vLi4vbGliL2JpbmQtYWxsJztcbmltcG9ydCB7IFBlcnNpc3RlZFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvdmVyc2lvbic7XG5pbXBvcnQgeyBQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4uLy4uL2xpYi9nZXQtZ2xvYmFsJztcbmltcG9ydCB7IE1lbW9yeVN0b3JhZ2UsIFVuaXZlcnNhbFN0b3JhZ2UsIFN0b3JlVHlwZSwgYXBwbHlDb29raWVPcHRpb25zLCBpbml0aWFsaXplU3RvcmFnZXMsIGlzQXJyYXlPZlN0b3JlVHlwZSwgfSBmcm9tICcuLi9zdG9yYWdlJztcbmltcG9ydCB7IHNldEdsb2JhbEFuYWx5dGljcyB9IGZyb20gJy4uLy4uL2xpYi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5pbXBvcnQgeyBwb3BQYWdlQ29udGV4dCB9IGZyb20gJy4uL2J1ZmZlcic7XG5pbXBvcnQgeyBpc1NlZ21lbnRQbHVnaW4sIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9zZWdtZW50aW8nO1xudmFyIGRlcHJlY2F0aW9uV2FybmluZyA9ICdUaGlzIGlzIGJlaW5nIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgbm90IGJlIGF2YWlsYWJsZSBpbiBmdXR1cmUgcmVsZWFzZXMgb2YgQW5hbHl0aWNzIEpTJztcbi8vIHJlZmVyZW5jZSBhbnkgcHJlLWV4aXN0aW5nIFwiYW5hbHl0aWNzXCIgb2JqZWN0IHNvIGEgdXNlciBjYW4gcmVzdG9yZSB0aGUgcmVmZXJlbmNlXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG52YXIgX2FuYWx5dGljcyA9IGdsb2JhbCA9PT0gbnVsbCB8fCBnbG9iYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdsb2JhbC5hbmFseXRpY3M7XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0UXVldWUobmFtZSwgcmV0cnlRdWV1ZSwgZGlzYWJsZVBlcnNpc3RhbmNlKSB7XG4gICAgaWYgKHJldHJ5UXVldWUgPT09IHZvaWQgMCkgeyByZXRyeVF1ZXVlID0gZmFsc2U7IH1cbiAgICBpZiAoZGlzYWJsZVBlcnNpc3RhbmNlID09PSB2b2lkIDApIHsgZGlzYWJsZVBlcnNpc3RhbmNlID0gZmFsc2U7IH1cbiAgICB2YXIgbWF4QXR0ZW1wdHMgPSByZXRyeVF1ZXVlID8gMTAgOiAxO1xuICAgIHZhciBwcmlvcml0eVF1ZXVlID0gZGlzYWJsZVBlcnNpc3RhbmNlXG4gICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIFtdKVxuICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKG1heEF0dGVtcHRzLCBuYW1lKTtcbiAgICByZXR1cm4gbmV3IEV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSk7XG59XG4vKipcbiAqIFRoZSBwdWJsaWMgc2V0dGluZ3MgdGhhdCBhcmUgc2V0IG9uIHRoZSBhbmFseXRpY3MgaW5zdGFuY2VcbiAqL1xudmFyIEFuYWx5dGljc0luc3RhbmNlU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQW5hbHl0aWNzSW5zdGFuY2VTZXR0aW5ncyhzZXR0aW5ncywgcXVldWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXV0by10cmFjayBzcGVjaWZpYyB0aW1lb3V0IHNldHRpbmcgZm9yIGxlZ2FjeSBwdXJwb3Nlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGltZW91dCA9IDMwMDtcbiAgICAgICAgdGhpcy5fZ2V0U2VnbWVudFBsdWdpbk1ldGFkYXRhID0gZnVuY3Rpb24gKCkgeyB2YXIgX2E7IHJldHVybiAoX2EgPSBxdWV1ZS5wbHVnaW5zLmZpbmQoaXNTZWdtZW50UGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1ldGFkYXRhOyB9O1xuICAgICAgICB0aGlzLndyaXRlS2V5ID0gc2V0dGluZ3Mud3JpdGVLZXk7XG4gICAgICAgIHRoaXMuY2RuU2V0dGluZ3MgPSAoX2EgPSBzZXR0aW5ncy5jZG5TZXR0aW5ncykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge1xuICAgICAgICAgICAgaW50ZWdyYXRpb25zOiB7fSxcbiAgICAgICAgICAgIGVkZ2VGdW5jdGlvbjoge30sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2RuVVJMID0gc2V0dGluZ3MuY2RuVVJMO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5hbHl0aWNzSW5zdGFuY2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiYXBpSG9zdFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLl9nZXRTZWdtZW50UGx1Z2luTWV0YWRhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRoaXMpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYXBpSG9zdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBbmFseXRpY3NJbnN0YW5jZVNldHRpbmdzO1xufSgpKTtcbmV4cG9ydCB7IEFuYWx5dGljc0luc3RhbmNlU2V0dGluZ3MgfTtcbi8qIGFuYWx5dGljcy1jbGFzc2ljIHN0dWJzICovXG5mdW5jdGlvbiBfc3R1YigpIHtcbiAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbn1cbnZhciBBbmFseXRpY3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFuYWx5dGljcywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmFseXRpY3Moc2V0dGluZ3MsIG9wdGlvbnMsIHF1ZXVlLCB1c2VyLCBncm91cCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy51c2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl91c2VyO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5pbml0ID0gX3RoaXMuaW5pdGlhbGl6ZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMubG9nID0gX3N0dWI7XG4gICAgICAgIF90aGlzLmFkZEludGVncmF0aW9uTWlkZGxld2FyZSA9IF9zdHViO1xuICAgICAgICBfdGhpcy5saXN0ZW5lcnMgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IF9zdHViO1xuICAgICAgICBfdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMucmVtb3ZlTGlzdGVuZXIgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IF9zdHViO1xuICAgICAgICBfdGhpcy5oYXNMaXN0ZW5lcnMgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMuYWRkID0gX3N0dWI7XG4gICAgICAgIF90aGlzLmFkZEludGVncmF0aW9uID0gX3N0dWI7XG4gICAgICAgIHZhciBjb29raWVPcHRpb25zID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNvb2tpZTtcbiAgICAgICAgdmFyIGRpc2FibGVQZXJzaXN0YW5jZSA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9XG4gICAgICAgICAgICBxdWV1ZSAhPT0gbnVsbCAmJiBxdWV1ZSAhPT0gdm9pZCAwID8gcXVldWUgOiBjcmVhdGVEZWZhdWx0UXVldWUoXCJcIi5jb25jYXQoc2V0dGluZ3Mud3JpdGVLZXksIFwiOmV2ZW50LXF1ZXVlXCIpLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucmV0cnlRdWV1ZSwgZGlzYWJsZVBlcnNpc3RhbmNlKTtcbiAgICAgICAgX3RoaXMuc2V0dGluZ3MgPSBuZXcgQW5hbHl0aWNzSW5zdGFuY2VTZXR0aW5ncyhzZXR0aW5ncywgX3RoaXMucXVldWUpO1xuICAgICAgICB2YXIgc3RvcmFnZVNldHRpbmcgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmFnZTtcbiAgICAgICAgX3RoaXMuX3VuaXZlcnNhbFN0b3JhZ2UgPSBfdGhpcy5jcmVhdGVTdG9yZShkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2VTZXR0aW5nLCBjb29raWVPcHRpb25zKTtcbiAgICAgICAgX3RoaXMuX3VzZXIgPVxuICAgICAgICAgICAgdXNlciAhPT0gbnVsbCAmJiB1c2VyICE9PSB2b2lkIDAgPyB1c2VyIDogbmV3IFVzZXIoX19hc3NpZ24oeyBwZXJzaXN0OiAhZGlzYWJsZVBlcnNpc3RhbmNlLCBzdG9yYWdlOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmFnZSB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudXNlciksIGNvb2tpZU9wdGlvbnMpLmxvYWQoKTtcbiAgICAgICAgX3RoaXMuX2dyb3VwID1cbiAgICAgICAgICAgIGdyb3VwICE9PSBudWxsICYmIGdyb3VwICE9PSB2b2lkIDAgPyBncm91cCA6IG5ldyBHcm91cChfX2Fzc2lnbih7IHBlcnNpc3Q6ICFkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2U6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zdG9yYWdlIH0sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ncm91cCksIGNvb2tpZU9wdGlvbnMpLmxvYWQoKTtcbiAgICAgICAgX3RoaXMuZXZlbnRGYWN0b3J5ID0gbmV3IEV2ZW50RmFjdG9yeShfdGhpcy5fdXNlcik7XG4gICAgICAgIF90aGlzLmludGVncmF0aW9ucyA9IChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9O1xuICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge307XG4gICAgICAgIGF1dG9CaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBzdG9yYWdlIHN5c3RlbSBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgcmVjZWl2ZWRcbiAgICAgKiBAcmV0dXJucyBTdG9yYWdlXG4gICAgICovXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5jcmVhdGVTdG9yZSA9IGZ1bmN0aW9uIChkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2VTZXR0aW5nLCBjb29raWVPcHRpb25zKSB7XG4gICAgICAgIC8vIERpc2FibGVQZXJzaXN0YW5jZSBvcHRpb24gb3ZlcnJpZGVzIGFsbCwgbm8gc3RvcmFnZSB3aWxsIGJlIHVzZWQgb3V0c2lkZSBvZiBtZW1vcnkgZXZlbiBpZiBzcGVjaWZpZWRcbiAgICAgICAgaWYgKGRpc2FibGVQZXJzaXN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxTdG9yYWdlKFtuZXcgTWVtb3J5U3RvcmFnZSgpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3RvcmFnZVNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheU9mU3RvcmVUeXBlKHN0b3JhZ2VTZXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB3aWxsIGNyZWF0ZSB0aGUgc3RvcmUgd2l0aCB0aGUgcHJpb3JpdHkgZm9yIGN1c3RvbWVyIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShpbml0aWFsaXplU3RvcmFnZXMoYXBwbHlDb29raWVPcHRpb25zKHN0b3JhZ2VTZXR0aW5nLnN0b3JlcywgY29va2llT3B0aW9ucykpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgZGVmYXVsdCB0byBvdXIgbXVsdGkgc3RvcmFnZSB3aXRoIHByaW9yaXR5XG4gICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShpbml0aWFsaXplU3RvcmFnZXMoW1xuICAgICAgICAgICAgU3RvcmVUeXBlLkxvY2FsU3RvcmFnZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBTdG9yZVR5cGUuQ29va2llLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiBjb29raWVPcHRpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFN0b3JlVHlwZS5NZW1vcnksXG4gICAgICAgIF0pKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcInN0b3JhZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bml2ZXJzYWxTdG9yYWdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZUN0eCwgX2EsIG5hbWUsIGRhdGEsIG9wdHMsIGNiLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVBcmd1bWVudHMuYXBwbHkodm9pZCAwLCBhcmdzKSwgbmFtZSA9IF9hWzBdLCBkYXRhID0gX2FbMV0sIG9wdHMgPSBfYVsyXSwgY2IgPSBfYVszXTtcbiAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQgPSB0aGlzLmV2ZW50RmFjdG9yeS50cmFjayhuYW1lLCBkYXRhLCBvcHRzLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2IpLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgndHJhY2snLCBuYW1lLCBjdHguZXZlbnQucHJvcGVydGllcywgY3R4LmV2ZW50Lm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgY2F0ZWdvcnksIHBhZ2UsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVQYWdlQXJndW1lbnRzLmFwcGx5KHZvaWQgMCwgYXJncyksIGNhdGVnb3J5ID0gX2FbMF0sIHBhZ2UgPSBfYVsxXSwgcHJvcGVydGllcyA9IF9hWzJdLCBvcHRpb25zID0gX2FbM10sIGNhbGxiYWNrID0gX2FbNF07XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkucGFnZShjYXRlZ29yeSwgcGFnZSwgcHJvcGVydGllcywgb3B0aW9ucywgdGhpcy5pbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKS50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ3BhZ2UnLCBjYXRlZ29yeSwgcGFnZSwgY3R4LmV2ZW50LnByb3BlcnRpZXMsIGN0eC5ldmVudC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VDdHgsIF9hLCBpZCwgX3RyYWl0cywgb3B0aW9ucywgY2FsbGJhY2ssIHNlZ21lbnRFdmVudDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgcGFnZUN0eCA9IHBvcFBhZ2VDb250ZXh0KGFyZ3MpO1xuICAgICAgICAgICAgICAgIF9hID0gcmVzb2x2ZVVzZXJBcmd1bWVudHModGhpcy5fdXNlcikuYXBwbHkodm9pZCAwLCBhcmdzKSwgaWQgPSBfYVswXSwgX3RyYWl0cyA9IF9hWzFdLCBvcHRpb25zID0gX2FbMl0sIGNhbGxiYWNrID0gX2FbM107XG4gICAgICAgICAgICAgICAgdGhpcy5fdXNlci5pZGVudGlmeShpZCwgX3RyYWl0cyk7XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkuaWRlbnRpZnkodGhpcy5fdXNlci5pZCgpLCB0aGlzLl91c2VyLnRyYWl0cygpLCBvcHRpb25zLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnaWRlbnRpZnknLCBjdHguZXZlbnQudXNlcklkLCBjdHguZXZlbnQudHJhaXRzLCBjdHguZXZlbnQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWdlQ3R4ID0gcG9wUGFnZUNvbnRleHQoYXJncyk7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHJlc29sdmVVc2VyQXJndW1lbnRzKHRoaXMuX2dyb3VwKS5hcHBseSh2b2lkIDAsIGFyZ3MpLCBpZCA9IF9hWzBdLCBfdHJhaXRzID0gX2FbMV0sIG9wdGlvbnMgPSBfYVsyXSwgY2FsbGJhY2sgPSBfYVszXTtcbiAgICAgICAgdGhpcy5fZ3JvdXAuaWRlbnRpZnkoaWQsIF90cmFpdHMpO1xuICAgICAgICB2YXIgZ3JvdXBJZCA9IHRoaXMuX2dyb3VwLmlkKCk7XG4gICAgICAgIHZhciBncm91cFRyYWl0cyA9IHRoaXMuX2dyb3VwLnRyYWl0cygpO1xuICAgICAgICB2YXIgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkuZ3JvdXAoZ3JvdXBJZCwgZ3JvdXBUcmFpdHMsIG9wdGlvbnMsIHRoaXMuaW50ZWdyYXRpb25zLCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdCgnZ3JvdXAnLCBjdHguZXZlbnQuZ3JvdXBJZCwgY3R4LmV2ZW50LnRyYWl0cywgY3R4LmV2ZW50Lm9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgdG8sIGZyb20sIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVBbGlhc0FyZ3VtZW50cy5hcHBseSh2b2lkIDAsIGFyZ3MpLCB0byA9IF9hWzBdLCBmcm9tID0gX2FbMV0sIG9wdGlvbnMgPSBfYVsyXSwgY2FsbGJhY2sgPSBfYVszXTtcbiAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQgPSB0aGlzLmV2ZW50RmFjdG9yeS5hbGlhcyh0bywgZnJvbSwgb3B0aW9ucywgdGhpcy5pbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKS50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ2FsaWFzJywgdG8sIGZyb20sIGN0eC5ldmVudC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuc2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgY2F0ZWdvcnksIHBhZ2UsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVQYWdlQXJndW1lbnRzLmFwcGx5KHZvaWQgMCwgYXJncyksIGNhdGVnb3J5ID0gX2FbMF0sIHBhZ2UgPSBfYVsxXSwgcHJvcGVydGllcyA9IF9hWzJdLCBvcHRpb25zID0gX2FbM10sIGNhbGxiYWNrID0gX2FbNF07XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3Rvcnkuc2NyZWVuKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnc2NyZWVuJywgY2F0ZWdvcnksIHBhZ2UsIGN0eC5ldmVudC5wcm9wZXJ0aWVzLCBjdHguZXZlbnQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGF1dG90cmFjaztcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJhdXRvLXRyYWNrXCIgKi8gJy4uL2F1dG8tdHJhY2snKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG90cmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCAoX2EgPSBhdXRvdHJhY2subGluaykuY2FsbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbdGhpc10sIGFyZ3MsIGZhbHNlKSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUudHJhY2tMaW5rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvdHJhY2s7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYXV0by10cmFja1wiICovICcuLi9hdXRvLXRyYWNrJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvdHJhY2sgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gYXV0b3RyYWNrLmxpbmspLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW3RoaXNdLCBhcmdzLCBmYWxzZSkpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrU3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvdHJhY2s7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYXV0by10cmFja1wiICovICcuLi9hdXRvLXRyYWNrJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvdHJhY2sgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gYXV0b3RyYWNrLmZvcm0pLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW3RoaXNdLCBhcmdzLCBmYWxzZSkpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXV0b3RyYWNrO1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImF1dG8tdHJhY2tcIiAqLyAnLi4vYXV0by10cmFjaycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b3RyYWNrID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIChfYSA9IGF1dG90cmFjay5mb3JtKS5jYWxsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFt0aGlzXSwgYXJncywgZmFsc2UpKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBsdWdpbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHBsdWdpbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4LCByZWdpc3RyYXRpb25zO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IENvbnRleHQuc3lzdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25zID0gcGx1Z2lucy5tYXAoZnVuY3Rpb24gKHh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXVlLnJlZ2lzdGVyKGN0eCwgeHQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwocmVnaXN0cmF0aW9ucyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmRlcmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwbHVnaW5zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBwbHVnaW5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCwgZGVyZWdpc3RyYXRpb25zO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IENvbnRleHQuc3lzdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdHJhdGlvbnMgPSBwbHVnaW5zLm1hcChmdW5jdGlvbiAocGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gX3RoaXMucXVldWUucGx1Z2lucy5maW5kKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgPT09IHBsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5xdWV1ZS5kZXJlZ2lzdGVyKGN0eCwgcGx1Z2luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgXCJwbHVnaW4gXCIuY29uY2F0KHBsLCBcIiBub3QgZm91bmRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoZGVyZWdpc3RyYXRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAodG9nZ2xlKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBsZWdhY3kgYWpzIGRlYnVnIGdldHMgdHVybmVkIG9mZiBpZiBpdCB3YXMgZW5hYmxlZCBiZWZvcmUgdXBncmFkaW5nLlxuICAgICAgICBpZiAodG9nZ2xlID09PSBmYWxzZSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVidWcnKSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGVidWcgPSB0b2dnbGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdXNlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9ncm91cC5yZXNldCgpO1xuICAgICAgICB0aGlzLmVtaXQoJ3Jlc2V0Jyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzLnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5fZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4ID0gbmV3IENvbnRleHQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSAmJiAhdGhpcy5vcHRpb25zLnJldHJ5UXVldWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkaXNwYXRjaChjdHgsIHRoaXMucXVldWUsIHRoaXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnOiB0aGlzLl9kZWJ1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuc2V0dGluZ3MudGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5hZGRTb3VyY2VNaWRkbGV3YXJlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVldWUuY3JpdGljYWxUYXNrcy5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNaWRkbGV3YXJlUGx1Z2luLCBpbnRlZ3JhdGlvbnMsIHBsdWdpbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibWlkZGxld2FyZVwiICovICcuLi8uLi9wbHVnaW5zL21pZGRsZXdhcmUnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlTWlkZGxld2FyZVBsdWdpbiA9IChfYS5zZW50KCkpLnNvdXJjZU1pZGRsZXdhcmVQbHVnaW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaW50ZWdyYXRpb25zW3BsdWdpbi5uYW1lXSA9IHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luID0gc291cmNlTWlkZGxld2FyZVBsdWdpbihmbiwgaW50ZWdyYXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZ2lzdGVyKHBsdWdpbildO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKiBUT0RPOiBUaGlzIGRvZXMgbm90IGhhdmUgdG8gcmV0dXJuIGEgcHJvbWlzZT8gKi9cbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmFkZERlc3RpbmF0aW9uTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbk5hbWUpIHtcbiAgICAgICAgdmFyIG1pZGRsZXdhcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBtaWRkbGV3YXJlc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXVlLnBsdWdpbnNcbiAgICAgICAgICAgIC5maWx0ZXIoaXNEZXN0aW5hdGlvblBsdWdpbldpdGhBZGRNaWRkbGV3YXJlKVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIGlmIChpbnRlZ3JhdGlvbk5hbWUgPT09ICcqJyB8fFxuICAgICAgICAgICAgICAgIHAubmFtZS50b0xvd2VyQ2FzZSgpID09PSBpbnRlZ3JhdGlvbk5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIHAuYWRkTWlkZGxld2FyZS5hcHBseShwLCBtaWRkbGV3YXJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5zZXRBbm9ueW1vdXNJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlci5hbm9ueW1vdXNJZChpZCk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUXVlcnlTdHJpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcInF1ZXJ5U3RyaW5nXCIgKi8gJy4uL3F1ZXJ5LXN0cmluZycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSAoX2Euc2VudCgpKS5xdWVyeVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBxdWVyeVN0cmluZyh0aGlzLCBxdWVyeSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmVnaXN0ZXIgYSBkZXN0aW5hdGlvbiBwbHVnaW4uXG4gICAgICpcbiAgICAgKiBJbnN0YW50aWF0ZXMgYSBsZWdhY3kgQW5hbHl0aWNzLmpzIGRlc3RpbmF0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWdpc3RlciB0aGUgZGVzdGluYXRpb24gYXMgYW4gQW5hbHl0aWNzLkpTIHBsdWdpbixcbiAgICAgKiBhbGwgdGhlIGl0IGRvZXMgaXQgdG8gaW52b2tlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIGJhY2suXG4gICAgICovXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAobGVnYWN5UGx1Z2luRmFjdG9yeSkge1xuICAgICAgICBsZWdhY3lQbHVnaW5GYWN0b3J5KHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUucmVhZHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrID09PSB2b2lkIDApIHsgY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXM7IH07IH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLmFsbCh0aGlzLnF1ZXVlLnBsdWdpbnMubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiAoaS5yZWFkeSA/IGkucmVhZHkoKSA6IFByb21pc2UucmVzb2x2ZSgpKTsgfSkpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIGFuYWx5dGljcy1jbGFzc2ljIGFwaVxuICAgIEFuYWx5dGljcy5wcm90b3R5cGUubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgIHNldEdsb2JhbEFuYWx5dGljcyhfYW5hbHl0aWNzICE9PSBudWxsICYmIF9hbmFseXRpY3MgIT09IHZvaWQgMCA/IF9hbmFseXRpY3MgOiB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RmFjdG9yeVsnbm9ybWFsaXplJ10obXNnKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcImZhaWxlZEluaXRpYWxpemF0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5mYWlsZWRJbml0aWFsaXphdGlvbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5hbHl0aWNzLnByb3RvdHlwZSwgXCJWRVJTSU9OXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qIEBkZXByZWNhdGVkIC0gbm9vcCAqL1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChfc2V0dGluZ3MsIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKHRoaXMpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUucGFnZXZpZXcgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXByZWNhdGlvbldhcm5pbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wYWdlKHsgcGF0aDogdXJsIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcInBsdWdpbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXByZWNhdGlvbldhcm5pbmcpO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuX3BsdWdpbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFuYWx5dGljcy5wcm90b3R5cGUsIFwiSW50ZWdyYXRpb25zXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbnMgPSB0aGlzLnF1ZXVlLnBsdWdpbnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwbHVnaW4pIHsgcmV0dXJuIHBsdWdpbi50eXBlID09PSAnZGVzdGluYXRpb24nOyB9KVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBcIlwiLmNvbmNhdChwbHVnaW4ubmFtZVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnLicsICcnKVxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAgICAgICAgICAgICAuam9pbignLScpLCBcIkludGVncmF0aW9uXCIpO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICB2YXIgaW50ZWdyYXRpb24gPSB3aW5kb3dbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlZ3JhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbmVzdGVkID0gaW50ZWdyYXRpb24uSW50ZWdyYXRpb247IC8vIGhhY2sgLSBHb29nbGUgQW5hbHl0aWNzIGZ1bmN0aW9uIHJlc2lkZXMgaW4gdGhlIFwiSW50ZWdyYXRpb25cIiBmaWVsZFxuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW3BsdWdpbi5uYW1lXSA9IG5lc3RlZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWNjW3BsdWdpbi5uYW1lXSA9IGludGVncmF0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdyYXRpb25zO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLy8gc25pcHBldCBmdW5jdGlvblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdmFyIGFuID0gdGhpcztcbiAgICAgICAgdmFyIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcbiAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgaWYgKCFhblttZXRob2RdKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhblttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIEFuYWx5dGljcztcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgQW5hbHl0aWNzIH07XG4vKipcbiAqIEByZXR1cm5zIGEgbm8tb3AgYW5hbHl0aWNzIGluc3RhbmNlIHRoYXQgZG9lcyBub3QgY3JlYXRlIGNvb2tpZXMgb3IgbG9jYWxzdG9yYWdlLCBvciBzZW5kIGFueSBldmVudHMgdG8gc2VnbWVudC5cbiAqL1xudmFyIE51bGxBbmFseXRpY3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE51bGxBbmFseXRpY3MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTnVsbEFuYWx5dGljcygpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgeyB3cml0ZUtleTogJycgfSwgeyBkaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2U6IHRydWUgfSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBOdWxsQW5hbHl0aWNzO1xufShBbmFseXRpY3MpKTtcbmV4cG9ydCB7IE51bGxBbmFseXRpY3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resolveAliasArguments: () => (/* binding */ resolveAliasArguments),\n/* harmony export */   resolveArguments: () => (/* binding */ resolveArguments),\n/* harmony export */   resolvePageArguments: () => (/* binding */ resolvePageArguments),\n/* harmony export */   resolveUserArguments: () => (/* binding */ resolveUserArguments)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n/**\n * Helper for the track method\n */\nfunction resolveArguments(eventName, properties, options, callback) {\n    var _a;\n    var args = [eventName, properties, options, callback];\n    var name = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName) ? eventName.event : eventName;\n    if (!name || !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString)(name)) {\n        throw new Error('Event missing');\n    }\n    var data = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName)\n        ? (_a = eventName.properties) !== null && _a !== void 0 ? _a : {}\n        : (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(properties)\n            ? properties\n            : {};\n    var opts = {};\n    if (!(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(options)) {\n        opts = options !== null && options !== void 0 ? options : {};\n    }\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName) && !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(properties)) {\n        opts = properties !== null && properties !== void 0 ? properties : {};\n    }\n    var cb = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    return [name, data, opts, cb];\n}\n/**\n * Helper for page, screen methods\n */\nfunction resolvePageArguments(category, name, properties, options, callback) {\n    var _a, _b;\n    var resolvedCategory = null;\n    var resolvedName = null;\n    var args = [category, name, properties, options, callback];\n    var strings = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString);\n    if (strings[0] !== undefined && strings[1] !== undefined) {\n        resolvedCategory = strings[0];\n        resolvedName = strings[1];\n    }\n    if (strings.length === 1) {\n        resolvedCategory = null;\n        resolvedName = strings[0];\n    }\n    var resolvedCallback = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    var objects = args.filter(function (obj) {\n        if (resolvedName === null) {\n            return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(obj);\n        }\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(obj) || obj === null;\n    });\n    var resolvedProperties = ((_a = objects[0]) !== null && _a !== void 0 ? _a : {});\n    var resolvedOptions = ((_b = objects[1]) !== null && _b !== void 0 ? _b : {});\n    return [\n        resolvedCategory,\n        resolvedName,\n        resolvedProperties,\n        resolvedOptions,\n        resolvedCallback,\n    ];\n}\n/**\n * Helper for group, identify methods\n */\nvar resolveUserArguments = function (user) {\n    return function () {\n        var _a, _b, _c;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values = {};\n        // It's a stack so it's reversed so that we go through each of the expected arguments\n        var orderStack = [\n            'callback',\n            'options',\n            'traits',\n            'id',\n        ];\n        // Read each argument and eval the possible values here\n        for (var _d = 0, args_1 = args; _d < args_1.length; _d++) {\n            var arg = args_1[_d];\n            var current = orderStack.pop();\n            if (current === 'id') {\n                if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString)(arg) || (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(arg)) {\n                    values.id = arg.toString();\n                    continue;\n                }\n                if (arg === null || arg === undefined) {\n                    continue;\n                }\n                // First argument should always be the id, if it is not a valid value we can skip it\n                current = orderStack.pop();\n            }\n            // Traits and Options\n            if ((current === 'traits' || current === 'options') &&\n                (arg === null || arg === undefined || (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(arg))) {\n                values[current] = arg;\n            }\n            // Callback\n            if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(arg)) {\n                values.callback = arg;\n                break; // This is always the last argument\n            }\n        }\n        return [\n            (_a = values.id) !== null && _a !== void 0 ? _a : user.id(),\n            ((_b = values.traits) !== null && _b !== void 0 ? _b : {}),\n            (_c = values.options) !== null && _c !== void 0 ? _c : {},\n            values.callback,\n        ];\n    };\n};\n/**\n * Helper for alias method\n */\nfunction resolveAliasArguments(to, from, options, callback) {\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(to))\n        to = to.toString(); // Legacy behaviour - allow integers for alias calls\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(from))\n        from = from.toString();\n    var args = [to, from, options, callback];\n    var _a = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString), _b = _a[0], aliasTo = _b === void 0 ? to : _b, _c = _a[1], aliasFrom = _c === void 0 ? null : _c;\n    var _d = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)[0], opts = _d === void 0 ? {} : _d;\n    var resolvedCallback = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    return [aliasTo, aliasFrom, opts, resolvedCallback];\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hcmd1bWVudHMtcmVzb2x2ZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUY7QUFDekY7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsZUFBZSxzRUFBYTtBQUM1QixrQkFBa0IsaUVBQVE7QUFDMUI7QUFDQTtBQUNBLGVBQWUsc0VBQWE7QUFDNUI7QUFDQSxVQUFVLHNFQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUVBQVU7QUFDbkI7QUFDQTtBQUNBLFFBQVEsc0VBQWEsZ0JBQWdCLG1FQUFVO0FBQy9DO0FBQ0E7QUFDQSx1QkFBdUIsK0RBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNkRBQVE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywrREFBVTtBQUMvQztBQUNBO0FBQ0EsbUJBQW1CLHNFQUFhO0FBQ2hDO0FBQ0EsZUFBZSxzRUFBYTtBQUM1QixLQUFLO0FBQ0wsbUZBQW1GO0FBQ25GLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msb0JBQW9CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBUSxTQUFTLGlFQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0VBQWE7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFVO0FBQzFCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSxpRUFBUTtBQUNoQiw0QkFBNEI7QUFDNUIsUUFBUSxpRUFBUTtBQUNoQjtBQUNBO0FBQ0EseUJBQXlCLDZEQUFRO0FBQ2pDLHlCQUF5QixrRUFBYSxnQ0FBZ0M7QUFDdEUscUNBQXFDLCtEQUFVO0FBQy9DO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYXJndW1lbnRzLXJlc29sdmVyL2luZGV4LmpzPzVhMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNGdW5jdGlvbiwgaXNQbGFpbk9iamVjdCwgaXNTdHJpbmcsIGlzTnVtYmVyLCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbi8qKlxuICogSGVscGVyIGZvciB0aGUgdHJhY2sgbWV0aG9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQXJndW1lbnRzKGV2ZW50TmFtZSwgcHJvcGVydGllcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGFyZ3MgPSBbZXZlbnROYW1lLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBjYWxsYmFja107XG4gICAgdmFyIG5hbWUgPSBpc1BsYWluT2JqZWN0KGV2ZW50TmFtZSkgPyBldmVudE5hbWUuZXZlbnQgOiBldmVudE5hbWU7XG4gICAgaWYgKCFuYW1lIHx8ICFpc1N0cmluZyhuYW1lKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IG1pc3NpbmcnKTtcbiAgICB9XG4gICAgdmFyIGRhdGEgPSBpc1BsYWluT2JqZWN0KGV2ZW50TmFtZSlcbiAgICAgICAgPyAoX2EgPSBldmVudE5hbWUucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge31cbiAgICAgICAgOiBpc1BsYWluT2JqZWN0KHByb3BlcnRpZXMpXG4gICAgICAgICAgICA/IHByb3BlcnRpZXNcbiAgICAgICAgICAgIDoge307XG4gICAgdmFyIG9wdHMgPSB7fTtcbiAgICBpZiAoIWlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgb3B0cyA9IG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9O1xuICAgIH1cbiAgICBpZiAoaXNQbGFpbk9iamVjdChldmVudE5hbWUpICYmICFpc0Z1bmN0aW9uKHByb3BlcnRpZXMpKSB7XG4gICAgICAgIG9wdHMgPSBwcm9wZXJ0aWVzICE9PSBudWxsICYmIHByb3BlcnRpZXMgIT09IHZvaWQgMCA/IHByb3BlcnRpZXMgOiB7fTtcbiAgICB9XG4gICAgdmFyIGNiID0gYXJncy5maW5kKGlzRnVuY3Rpb24pO1xuICAgIHJldHVybiBbbmFtZSwgZGF0YSwgb3B0cywgY2JdO1xufVxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhZ2UsIHNjcmVlbiBtZXRob2RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGFnZUFyZ3VtZW50cyhjYXRlZ29yeSwgbmFtZSwgcHJvcGVydGllcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHZhciByZXNvbHZlZENhdGVnb3J5ID0gbnVsbDtcbiAgICB2YXIgcmVzb2x2ZWROYW1lID0gbnVsbDtcbiAgICB2YXIgYXJncyA9IFtjYXRlZ29yeSwgbmFtZSwgcHJvcGVydGllcywgb3B0aW9ucywgY2FsbGJhY2tdO1xuICAgIHZhciBzdHJpbmdzID0gYXJncy5maWx0ZXIoaXNTdHJpbmcpO1xuICAgIGlmIChzdHJpbmdzWzBdICE9PSB1bmRlZmluZWQgJiYgc3RyaW5nc1sxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlc29sdmVkQ2F0ZWdvcnkgPSBzdHJpbmdzWzBdO1xuICAgICAgICByZXNvbHZlZE5hbWUgPSBzdHJpbmdzWzFdO1xuICAgIH1cbiAgICBpZiAoc3RyaW5ncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmVzb2x2ZWRDYXRlZ29yeSA9IG51bGw7XG4gICAgICAgIHJlc29sdmVkTmFtZSA9IHN0cmluZ3NbMF07XG4gICAgfVxuICAgIHZhciByZXNvbHZlZENhbGxiYWNrID0gYXJncy5maW5kKGlzRnVuY3Rpb24pO1xuICAgIHZhciBvYmplY3RzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAocmVzb2x2ZWROYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNQbGFpbk9iamVjdChvYmopO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc1BsYWluT2JqZWN0KG9iaikgfHwgb2JqID09PSBudWxsO1xuICAgIH0pO1xuICAgIHZhciByZXNvbHZlZFByb3BlcnRpZXMgPSAoKF9hID0gb2JqZWN0c1swXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pO1xuICAgIHZhciByZXNvbHZlZE9wdGlvbnMgPSAoKF9iID0gb2JqZWN0c1sxXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pO1xuICAgIHJldHVybiBbXG4gICAgICAgIHJlc29sdmVkQ2F0ZWdvcnksXG4gICAgICAgIHJlc29sdmVkTmFtZSxcbiAgICAgICAgcmVzb2x2ZWRQcm9wZXJ0aWVzLFxuICAgICAgICByZXNvbHZlZE9wdGlvbnMsXG4gICAgICAgIHJlc29sdmVkQ2FsbGJhY2ssXG4gICAgXTtcbn1cbi8qKlxuICogSGVscGVyIGZvciBncm91cCwgaWRlbnRpZnkgbWV0aG9kc1xuICovXG5leHBvcnQgdmFyIHJlc29sdmVVc2VyQXJndW1lbnRzID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmFsdWVzID0ge307XG4gICAgICAgIC8vIEl0J3MgYSBzdGFjayBzbyBpdCdzIHJldmVyc2VkIHNvIHRoYXQgd2UgZ28gdGhyb3VnaCBlYWNoIG9mIHRoZSBleHBlY3RlZCBhcmd1bWVudHNcbiAgICAgICAgdmFyIG9yZGVyU3RhY2sgPSBbXG4gICAgICAgICAgICAnY2FsbGJhY2snLFxuICAgICAgICAgICAgJ29wdGlvbnMnLFxuICAgICAgICAgICAgJ3RyYWl0cycsXG4gICAgICAgICAgICAnaWQnLFxuICAgICAgICBdO1xuICAgICAgICAvLyBSZWFkIGVhY2ggYXJndW1lbnQgYW5kIGV2YWwgdGhlIHBvc3NpYmxlIHZhbHVlcyBoZXJlXG4gICAgICAgIGZvciAodmFyIF9kID0gMCwgYXJnc18xID0gYXJnczsgX2QgPCBhcmdzXzEubGVuZ3RoOyBfZCsrKSB7XG4gICAgICAgICAgICB2YXIgYXJnID0gYXJnc18xW19kXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gb3JkZXJTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSAnaWQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGFyZykgfHwgaXNOdW1iZXIoYXJnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuaWQgPSBhcmcudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcmcgPT09IG51bGwgfHwgYXJnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IGFyZ3VtZW50IHNob3VsZCBhbHdheXMgYmUgdGhlIGlkLCBpZiBpdCBpcyBub3QgYSB2YWxpZCB2YWx1ZSB3ZSBjYW4gc2tpcCBpdFxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBvcmRlclN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJhaXRzIGFuZCBPcHRpb25zXG4gICAgICAgICAgICBpZiAoKGN1cnJlbnQgPT09ICd0cmFpdHMnIHx8IGN1cnJlbnQgPT09ICdvcHRpb25zJykgJiZcbiAgICAgICAgICAgICAgICAoYXJnID09PSBudWxsIHx8IGFyZyA9PT0gdW5kZWZpbmVkIHx8IGlzUGxhaW5PYmplY3QoYXJnKSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbY3VycmVudF0gPSBhcmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDYWxsYmFja1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYXJnKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5jYWxsYmFjayA9IGFyZztcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gVGhpcyBpcyBhbHdheXMgdGhlIGxhc3QgYXJndW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgKF9hID0gdmFsdWVzLmlkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1c2VyLmlkKCksXG4gICAgICAgICAgICAoKF9iID0gdmFsdWVzLnRyYWl0cykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pLFxuICAgICAgICAgICAgKF9jID0gdmFsdWVzLm9wdGlvbnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHt9LFxuICAgICAgICAgICAgdmFsdWVzLmNhbGxiYWNrLFxuICAgICAgICBdO1xuICAgIH07XG59O1xuLyoqXG4gKiBIZWxwZXIgZm9yIGFsaWFzIG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUFsaWFzQXJndW1lbnRzKHRvLCBmcm9tLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGlmIChpc051bWJlcih0bykpXG4gICAgICAgIHRvID0gdG8udG9TdHJpbmcoKTsgLy8gTGVnYWN5IGJlaGF2aW91ciAtIGFsbG93IGludGVnZXJzIGZvciBhbGlhcyBjYWxsc1xuICAgIGlmIChpc051bWJlcihmcm9tKSlcbiAgICAgICAgZnJvbSA9IGZyb20udG9TdHJpbmcoKTtcbiAgICB2YXIgYXJncyA9IFt0bywgZnJvbSwgb3B0aW9ucywgY2FsbGJhY2tdO1xuICAgIHZhciBfYSA9IGFyZ3MuZmlsdGVyKGlzU3RyaW5nKSwgX2IgPSBfYVswXSwgYWxpYXNUbyA9IF9iID09PSB2b2lkIDAgPyB0byA6IF9iLCBfYyA9IF9hWzFdLCBhbGlhc0Zyb20gPSBfYyA9PT0gdm9pZCAwID8gbnVsbCA6IF9jO1xuICAgIHZhciBfZCA9IGFyZ3MuZmlsdGVyKGlzUGxhaW5PYmplY3QpWzBdLCBvcHRzID0gX2QgPT09IHZvaWQgMCA/IHt9IDogX2Q7XG4gICAgdmFyIHJlc29sdmVkQ2FsbGJhY2sgPSBhcmdzLmZpbmQoaXNGdW5jdGlvbik7XG4gICAgcmV0dXJuIFthbGlhc1RvLCBhbGlhc0Zyb20sIG9wdHMsIHJlc29sdmVkQ2FsbGJhY2tdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   form: () => (/* binding */ form),\n/* harmony export */   link: () => (/* binding */ link)\n/* harmony export */ });\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callback */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n// Check if a user is opening the link in a new tab\nfunction userNewTab(event) {\n    var typedEvent = event;\n    if (typedEvent.ctrlKey ||\n        typedEvent.shiftKey ||\n        typedEvent.metaKey ||\n        (typedEvent.button && typedEvent.button == 1)) {\n        return true;\n    }\n    return false;\n}\n// Check if the link opens in new tab\nfunction linkNewTab(element, href) {\n    if (element.target === '_blank' && href) {\n        return true;\n    }\n    return false;\n}\nfunction link(links, event, properties, options) {\n    var _this = this;\n    var elements = [];\n    // always arrays, handles jquery\n    if (!links) {\n        return this;\n    }\n    if (links instanceof Element) {\n        elements = [links];\n    }\n    else if ('toArray' in links) {\n        elements = links.toArray();\n    }\n    else {\n        elements = links;\n    }\n    elements.forEach(function (el) {\n        el.addEventListener('click', function (elementEvent) {\n            var _a, _b;\n            var ev = event instanceof Function ? event(el) : event;\n            var props = properties instanceof Function ? properties(el) : properties;\n            var href = el.getAttribute('href') ||\n                el.getAttributeNS('http://www.w3.org/1999/xlink', 'href') ||\n                el.getAttribute('xlink:href') ||\n                ((_a = el.getElementsByTagName('a')[0]) === null || _a === void 0 ? void 0 : _a.getAttribute('href'));\n            var trackEvent = (0,_callback__WEBPACK_IMPORTED_MODULE_0__.pTimeout)(_this.track(ev, props, options !== null && options !== void 0 ? options : {}), (_b = _this.settings.timeout) !== null && _b !== void 0 ? _b : 500);\n            if (!linkNewTab(el, href) &&\n                !userNewTab(elementEvent)) {\n                if (href) {\n                    elementEvent.preventDefault\n                        ? elementEvent.preventDefault()\n                        : (elementEvent.returnValue = false);\n                    trackEvent\n                        .catch(console.error)\n                        .then(function () {\n                        window.location.href = href;\n                    })\n                        .catch(console.error);\n                }\n            }\n        }, false);\n    });\n    return this;\n}\nfunction form(forms, event, properties, options) {\n    var _this = this;\n    // always arrays, handles jquery\n    if (!forms)\n        return this;\n    if (forms instanceof HTMLFormElement)\n        forms = [forms];\n    var elements = forms;\n    elements.forEach(function (el) {\n        if (!(el instanceof Element))\n            throw new TypeError('Must pass HTMLElement to trackForm/trackSubmit.');\n        var handler = function (elementEvent) {\n            var _a;\n            elementEvent.preventDefault\n                ? elementEvent.preventDefault()\n                : (elementEvent.returnValue = false);\n            var ev = event instanceof Function ? event(el) : event;\n            var props = properties instanceof Function ? properties(el) : properties;\n            var trackEvent = (0,_callback__WEBPACK_IMPORTED_MODULE_0__.pTimeout)(_this.track(ev, props, options !== null && options !== void 0 ? options : {}), (_a = _this.settings.timeout) !== null && _a !== void 0 ? _a : 500);\n            trackEvent\n                .catch(console.error)\n                .then(function () {\n                el.submit();\n            })\n                .catch(console.error);\n        };\n        // Support the events happening through jQuery or Zepto instead of through\n        // the normal DOM API, because `el.submit` doesn't bubble up events...\n        var $ = window.jQuery || window.Zepto;\n        if ($) {\n            $(el).submit(handler);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-misused-promises\n            el.addEventListener('submit', handler, false);\n        }\n    });\n    return this;\n}\n//# sourceMappingURL=auto-track.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hdXRvLXRyYWNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtREFBUSw2RUFBNkU7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFRLDZFQUE2RTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hdXRvLXRyYWNrLmpzPzMxMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcFRpbWVvdXQgfSBmcm9tICcuL2NhbGxiYWNrJztcbi8vIENoZWNrIGlmIGEgdXNlciBpcyBvcGVuaW5nIHRoZSBsaW5rIGluIGEgbmV3IHRhYlxuZnVuY3Rpb24gdXNlck5ld1RhYihldmVudCkge1xuICAgIHZhciB0eXBlZEV2ZW50ID0gZXZlbnQ7XG4gICAgaWYgKHR5cGVkRXZlbnQuY3RybEtleSB8fFxuICAgICAgICB0eXBlZEV2ZW50LnNoaWZ0S2V5IHx8XG4gICAgICAgIHR5cGVkRXZlbnQubWV0YUtleSB8fFxuICAgICAgICAodHlwZWRFdmVudC5idXR0b24gJiYgdHlwZWRFdmVudC5idXR0b24gPT0gMSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIENoZWNrIGlmIHRoZSBsaW5rIG9wZW5zIGluIG5ldyB0YWJcbmZ1bmN0aW9uIGxpbmtOZXdUYWIoZWxlbWVudCwgaHJlZikge1xuICAgIGlmIChlbGVtZW50LnRhcmdldCA9PT0gJ19ibGFuaycgJiYgaHJlZikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxpbmsobGlua3MsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICAvLyBhbHdheXMgYXJyYXlzLCBoYW5kbGVzIGpxdWVyeVxuICAgIGlmICghbGlua3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmIChsaW5rcyBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudHMgPSBbbGlua3NdO1xuICAgIH1cbiAgICBlbHNlIGlmICgndG9BcnJheScgaW4gbGlua3MpIHtcbiAgICAgICAgZWxlbWVudHMgPSBsaW5rcy50b0FycmF5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50cyA9IGxpbmtzO1xuICAgIH1cbiAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlbGVtZW50RXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICB2YXIgZXYgPSBldmVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gZXZlbnQoZWwpIDogZXZlbnQ7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBwcm9wZXJ0aWVzIGluc3RhbmNlb2YgRnVuY3Rpb24gPyBwcm9wZXJ0aWVzKGVsKSA6IHByb3BlcnRpZXM7XG4gICAgICAgICAgICB2YXIgaHJlZiA9IGVsLmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8XG4gICAgICAgICAgICAgICAgZWwuZ2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCAnaHJlZicpIHx8XG4gICAgICAgICAgICAgICAgZWwuZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykgfHxcbiAgICAgICAgICAgICAgICAoKF9hID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKVswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEF0dHJpYnV0ZSgnaHJlZicpKTtcbiAgICAgICAgICAgIHZhciB0cmFja0V2ZW50ID0gcFRpbWVvdXQoX3RoaXMudHJhY2soZXYsIHByb3BzLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSksIChfYiA9IF90aGlzLnNldHRpbmdzLnRpbWVvdXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDUwMCk7XG4gICAgICAgICAgICBpZiAoIWxpbmtOZXdUYWIoZWwsIGhyZWYpICYmXG4gICAgICAgICAgICAgICAgIXVzZXJOZXdUYWIoZWxlbWVudEV2ZW50KSkge1xuICAgICAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRFdmVudC5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBlbGVtZW50RXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoZWxlbWVudEV2ZW50LnJldHVyblZhbHVlID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0cmFja0V2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtKGZvcm1zLCBldmVudCwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgLy8gYWx3YXlzIGFycmF5cywgaGFuZGxlcyBqcXVlcnlcbiAgICBpZiAoIWZvcm1zKVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoZm9ybXMgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpXG4gICAgICAgIGZvcm1zID0gW2Zvcm1zXTtcbiAgICB2YXIgZWxlbWVudHMgPSBmb3JtcztcbiAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBpZiAoIShlbCBpbnN0YW5jZW9mIEVsZW1lbnQpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwYXNzIEhUTUxFbGVtZW50IHRvIHRyYWNrRm9ybS90cmFja1N1Ym1pdC4nKTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZWxlbWVudEV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBlbGVtZW50RXZlbnQucHJldmVudERlZmF1bHRcbiAgICAgICAgICAgICAgICA/IGVsZW1lbnRFdmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgOiAoZWxlbWVudEV2ZW50LnJldHVyblZhbHVlID0gZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGV2ID0gZXZlbnQgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IGV2ZW50KGVsKSA6IGV2ZW50O1xuICAgICAgICAgICAgdmFyIHByb3BzID0gcHJvcGVydGllcyBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gcHJvcGVydGllcyhlbCkgOiBwcm9wZXJ0aWVzO1xuICAgICAgICAgICAgdmFyIHRyYWNrRXZlbnQgPSBwVGltZW91dChfdGhpcy50cmFjayhldiwgcHJvcHMsIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KSwgKF9hID0gX3RoaXMuc2V0dGluZ3MudGltZW91dCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogNTAwKTtcbiAgICAgICAgICAgIHRyYWNrRXZlbnRcbiAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWwuc3VibWl0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gU3VwcG9ydCB0aGUgZXZlbnRzIGhhcHBlbmluZyB0aHJvdWdoIGpRdWVyeSBvciBaZXB0byBpbnN0ZWFkIG9mIHRocm91Z2hcbiAgICAgICAgLy8gdGhlIG5vcm1hbCBET00gQVBJLCBiZWNhdXNlIGBlbC5zdWJtaXRgIGRvZXNuJ3QgYnViYmxlIHVwIGV2ZW50cy4uLlxuICAgICAgICB2YXIgJCA9IHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvO1xuICAgICAgICBpZiAoJCkge1xuICAgICAgICAgICAgJChlbCkuc3VibWl0KGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dG8tdHJhY2suanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsBuffered: () => (/* binding */ AnalyticsBuffered),\n/* harmony export */   PreInitMethodCall: () => (/* binding */ PreInitMethodCall),\n/* harmony export */   PreInitMethodCallBuffer: () => (/* binding */ PreInitMethodCallBuffer),\n/* harmony export */   callAnalyticsMethod: () => (/* binding */ callAnalyticsMethod),\n/* harmony export */   flushAddSourceMiddleware: () => (/* binding */ flushAddSourceMiddleware),\n/* harmony export */   flushAnalyticsCallsInNewTask: () => (/* binding */ flushAnalyticsCallsInNewTask),\n/* harmony export */   flushOn: () => (/* binding */ flushOn),\n/* harmony export */   flushRegister: () => (/* binding */ flushRegister),\n/* harmony export */   flushSetAnonymousID: () => (/* binding */ flushSetAnonymousID),\n/* harmony export */   hasBufferedPageContextAsLastArg: () => (/* binding */ hasBufferedPageContextAsLastArg),\n/* harmony export */   popPageContext: () => (/* binding */ popPageContext)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_is_thenable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/is-thenable */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/global-analytics-helper */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../page */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/version-type */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n\n\n\n\n\n\nvar flushSyncAnalyticsCalls = function (name, analytics, buffer) {\n    buffer.getAndRemove(name).forEach(function (c) {\n        // While the underlying methods are synchronous, the callAnalyticsMethod returns a promise,\n        // which normalizes success and error states between async and non-async methods, with no perf penalty.\n        callAnalyticsMethod(analytics, c).catch(console.error);\n    });\n};\nvar flushAddSourceMiddleware = function (analytics, buffer) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var _i, _a, c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _i = 0, _a = buffer.getAndRemove('addSourceMiddleware');\n                _b.label = 1;\n            case 1:\n                if (!(_i < _a.length)) return [3 /*break*/, 4];\n                c = _a[_i];\n                return [4 /*yield*/, callAnalyticsMethod(analytics, c).catch(console.error)];\n            case 2:\n                _b.sent();\n                _b.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\n/**\n *  Flush register plugin\n */\nvar flushRegister = function (analytics, buffer) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var _i, _a, c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _i = 0, _a = buffer.getAndRemove('register');\n                _b.label = 1;\n            case 1:\n                if (!(_i < _a.length)) return [3 /*break*/, 4];\n                c = _a[_i];\n                return [4 /*yield*/, callAnalyticsMethod(analytics, c).catch(console.error)];\n            case 2:\n                _b.sent();\n                _b.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\nvar flushOn = flushSyncAnalyticsCalls.bind(undefined, 'on');\nvar flushSetAnonymousID = flushSyncAnalyticsCalls.bind(undefined, 'setAnonymousId');\nvar flushAnalyticsCallsInNewTask = function (analytics, buffer) {\n    ;\n    Object.keys(buffer.calls).forEach(function (m) {\n        buffer.getAndRemove(m).forEach(function (c) {\n            // No one remembers why this event loop optimization is/was neccessary. Lost to history.\n            setTimeout(function () {\n                callAnalyticsMethod(analytics, c).catch(console.error);\n            }, 0);\n        });\n    });\n};\nvar popPageContext = function (args) {\n    if (hasBufferedPageContextAsLastArg(args)) {\n        var ctx = args.pop();\n        return (0,_page__WEBPACK_IMPORTED_MODULE_1__.createPageContext)(ctx);\n    }\n};\nvar hasBufferedPageContextAsLastArg = function (args) {\n    var lastArg = args[args.length - 1];\n    return (0,_page__WEBPACK_IMPORTED_MODULE_1__.isBufferedPageContext)(lastArg);\n};\n/**\n *  Represents a buffered method call that occurred before initialization.\n */\nvar PreInitMethodCall = /** @class */ (function () {\n    function PreInitMethodCall(method, args, resolve, reject) {\n        if (resolve === void 0) { resolve = function () { }; }\n        if (reject === void 0) { reject = console.error; }\n        this.method = method;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.called = false;\n        this.args = args;\n    }\n    return PreInitMethodCall;\n}());\n\n/**\n *  Represents any and all the buffered method calls that occurred before initialization.\n */\nvar PreInitMethodCallBuffer = /** @class */ (function () {\n    function PreInitMethodCallBuffer() {\n        var calls = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            calls[_i] = arguments[_i];\n        }\n        this._callMap = {};\n        this.add.apply(this, calls);\n    }\n    Object.defineProperty(PreInitMethodCallBuffer.prototype, \"calls\", {\n        /**\n         * Pull any buffered method calls from the window object, and use them to hydrate the instance buffer.\n         */\n        get: function () {\n            this._pushSnippetWindowBuffer();\n            return this._callMap;\n        },\n        set: function (calls) {\n            this._callMap = calls;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PreInitMethodCallBuffer.prototype.get = function (methodName) {\n        var _a;\n        return ((_a = this.calls[methodName]) !== null && _a !== void 0 ? _a : []);\n    };\n    /**\n     * Get all buffered method calls for a given method name, and clear them from the buffer.\n     */\n    PreInitMethodCallBuffer.prototype.getAndRemove = function (methodName) {\n        var calls = this.get(methodName);\n        this.calls[methodName] = [];\n        return calls;\n    };\n    PreInitMethodCallBuffer.prototype.add = function () {\n        var _this = this;\n        var calls = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            calls[_i] = arguments[_i];\n        }\n        calls.forEach(function (call) {\n            var eventsExpectingPageContext = [\n                'track',\n                'screen',\n                'alias',\n                'group',\n                'page',\n                'identify',\n            ];\n            if (eventsExpectingPageContext.includes(call.method) &&\n                !hasBufferedPageContextAsLastArg(call.args)) {\n                call.args = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], call.args, true), [(0,_page__WEBPACK_IMPORTED_MODULE_1__.getDefaultBufferedPageContext)()], false);\n            }\n            if (_this.calls[call.method]) {\n                _this.calls[call.method].push(call);\n            }\n            else {\n                _this.calls[call.method] = [call];\n            }\n        });\n    };\n    PreInitMethodCallBuffer.prototype.clear = function () {\n        // clear calls in the global snippet buffered array.\n        this._pushSnippetWindowBuffer();\n        // clear calls in this instance\n        this.calls = {};\n    };\n    PreInitMethodCallBuffer.prototype.toArray = function () {\n        var _a;\n        return (_a = []).concat.apply(_a, Object.values(this.calls));\n    };\n    /**\n     * Fetch the buffered method calls from the window object,\n     * normalize them, and use them to hydrate the buffer.\n     * This removes existing buffered calls from the window object.\n     */\n    PreInitMethodCallBuffer.prototype._pushSnippetWindowBuffer = function () {\n        // if this is the npm version, we don't want to read from the window object.\n        // This avoids namespace conflicts if there is a seperate analytics library on the page.\n        if ((0,_lib_version_type__WEBPACK_IMPORTED_MODULE_2__.getVersionType)() === 'npm') {\n            return undefined;\n        }\n        var wa = (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_3__.getGlobalAnalytics)();\n        if (!Array.isArray(wa))\n            return undefined;\n        var buffered = wa.splice(0, wa.length);\n        var calls = buffered.map(function (_a) {\n            var methodName = _a[0], args = _a.slice(1);\n            return new PreInitMethodCall(methodName, args);\n        });\n        this.add.apply(this, calls);\n    };\n    return PreInitMethodCallBuffer;\n}());\n\n/**\n *  Call method and mark as \"called\"\n *  This function should never throw an error\n */\nfunction callAnalyticsMethod(analytics, call) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var result, err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 3, , 4]);\n                    if (call.called) {\n                        return [2 /*return*/, undefined];\n                    }\n                    call.called = true;\n                    result = analytics[call.method].apply(analytics, call.args);\n                    if (!(0,_lib_is_thenable__WEBPACK_IMPORTED_MODULE_4__.isThenable)(result)) return [3 /*break*/, 2];\n                    // do not defer for non-async methods\n                    return [4 /*yield*/, result];\n                case 1:\n                    // do not defer for non-async methods\n                    _a.sent();\n                    _a.label = 2;\n                case 2:\n                    call.resolve(result);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    call.reject(err_1);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nvar AnalyticsBuffered = /** @class */ (function () {\n    function AnalyticsBuffered(loader) {\n        var _this = this;\n        this.trackSubmit = this._createMethod('trackSubmit');\n        this.trackClick = this._createMethod('trackClick');\n        this.trackLink = this._createMethod('trackLink');\n        this.pageView = this._createMethod('pageview');\n        this.identify = this._createMethod('identify');\n        this.reset = this._createMethod('reset');\n        this.group = this._createMethod('group');\n        this.track = this._createMethod('track');\n        this.ready = this._createMethod('ready');\n        this.alias = this._createMethod('alias');\n        this.debug = this._createChainableMethod('debug');\n        this.page = this._createMethod('page');\n        this.once = this._createChainableMethod('once');\n        this.off = this._createChainableMethod('off');\n        this.on = this._createChainableMethod('on');\n        this.addSourceMiddleware = this._createMethod('addSourceMiddleware');\n        this.setAnonymousId = this._createMethod('setAnonymousId');\n        this.addDestinationMiddleware = this._createMethod('addDestinationMiddleware');\n        this.screen = this._createMethod('screen');\n        this.register = this._createMethod('register');\n        this.deregister = this._createMethod('deregister');\n        this.user = this._createMethod('user');\n        this.VERSION = _generated_version__WEBPACK_IMPORTED_MODULE_5__.version;\n        this._preInitBuffer = new PreInitMethodCallBuffer();\n        this._promise = loader(this._preInitBuffer);\n        this._promise\n            .then(function (_a) {\n            var ajs = _a[0], ctx = _a[1];\n            _this.instance = ajs;\n            _this.ctx = ctx;\n        })\n            .catch(function () {\n            // intentionally do nothing...\n            // this result of this promise will be caught by the 'catch' block on this class.\n        });\n    }\n    AnalyticsBuffered.prototype.then = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).then.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype.catch = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).catch.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype.finally = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).finally.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype._createMethod = function (methodName) {\n        var _this = this;\n        return function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.instance) {\n                var result = (_a = _this.instance)[methodName].apply(_a, args);\n                return Promise.resolve(result);\n            }\n            return new Promise(function (resolve, reject) {\n                _this._preInitBuffer.add(new PreInitMethodCall(methodName, args, resolve, reject));\n            });\n        };\n    };\n    /**\n     *  These are for methods that where determining when the method gets \"flushed\" is not important.\n     *  These methods will resolve when analytics is fully initialized, and return type (other than Analytics)will not be available.\n     */\n    AnalyticsBuffered.prototype._createChainableMethod = function (methodName) {\n        var _this = this;\n        return function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.instance) {\n                void (_a = _this.instance)[methodName].apply(_a, args);\n                return _this;\n            }\n            else {\n                _this._preInitBuffer.add(new PreInitMethodCall(methodName, args));\n            }\n            return _this;\n        };\n    };\n    return AnalyticsBuffered;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9idWZmZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDWDtBQUNEO0FBQ3FCO0FBQzRCO0FBQzNDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTyw4REFBOEQsT0FBTyxnREFBUztBQUNyRjtBQUNBLFdBQVcsa0RBQVc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNPLG1EQUFtRCxPQUFPLGdEQUFTO0FBQzFFO0FBQ0EsV0FBVyxrREFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ00sMkNBQTJDLFNBQUk7QUFDL0MsdURBQXVELFNBQUk7QUFDM0Q7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsd0RBQWlCO0FBQ2hDO0FBQ0E7QUFDTztBQUNQO0FBQ0EsV0FBVyw0REFBcUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0RBQWEsQ0FBQyxvREFBYSx3QkFBd0Isb0VBQTZCO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBYztBQUMxQjtBQUNBO0FBQ0EsaUJBQWlCLGdGQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNrQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw0REFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2J1ZmZlci9pbmRleC5qcz83NGI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuLi8uLi9saWIvaXMtdGhlbmFibGUnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGdldEdsb2JhbEFuYWx5dGljcyB9IGZyb20gJy4uLy4uL2xpYi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5pbXBvcnQgeyBpc0J1ZmZlcmVkUGFnZUNvbnRleHQsIGdldERlZmF1bHRCdWZmZXJlZFBhZ2VDb250ZXh0LCBjcmVhdGVQYWdlQ29udGV4dCwgfSBmcm9tICcuLi9wYWdlJztcbmltcG9ydCB7IGdldFZlcnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vbGliL3ZlcnNpb24tdHlwZSc7XG52YXIgZmx1c2hTeW5jQW5hbHl0aWNzQ2FsbHMgPSBmdW5jdGlvbiAobmFtZSwgYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICBidWZmZXIuZ2V0QW5kUmVtb3ZlKG5hbWUpLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgLy8gV2hpbGUgdGhlIHVuZGVybHlpbmcgbWV0aG9kcyBhcmUgc3luY2hyb25vdXMsIHRoZSBjYWxsQW5hbHl0aWNzTWV0aG9kIHJldHVybnMgYSBwcm9taXNlLFxuICAgICAgICAvLyB3aGljaCBub3JtYWxpemVzIHN1Y2Nlc3MgYW5kIGVycm9yIHN0YXRlcyBiZXR3ZWVuIGFzeW5jIGFuZCBub24tYXN5bmMgbWV0aG9kcywgd2l0aCBubyBwZXJmIHBlbmFsdHkuXG4gICAgICAgIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBjKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9KTtcbn07XG5leHBvcnQgdmFyIGZsdXNoQWRkU291cmNlTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChhbmFseXRpY3MsIGJ1ZmZlcikgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2ksIF9hLCBjO1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF9pID0gMCwgX2EgPSBidWZmZXIuZ2V0QW5kUmVtb3ZlKCdhZGRTb3VyY2VNaWRkbGV3YXJlJyk7XG4gICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICghKF9pIDwgX2EubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgYyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjYWxsQW5hbHl0aWNzTWV0aG9kKGFuYWx5dGljcywgYykuY2F0Y2goY29uc29sZS5lcnJvcildO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDM7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgX2krKztcbiAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICB9XG4gICAgfSk7XG59KTsgfTtcbi8qKlxuICogIEZsdXNoIHJlZ2lzdGVyIHBsdWdpblxuICovXG5leHBvcnQgdmFyIGZsdXNoUmVnaXN0ZXIgPSBmdW5jdGlvbiAoYW5hbHl0aWNzLCBidWZmZXIpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9pLCBfYSwgYztcbiAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfaSA9IDAsIF9hID0gYnVmZmVyLmdldEFuZFJlbW92ZSgncmVnaXN0ZXInKTtcbiAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBfYS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBjKS5jYXRjaChjb25zb2xlLmVycm9yKV07XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBfaSsrO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICB9KTtcbn0pOyB9O1xuZXhwb3J0IHZhciBmbHVzaE9uID0gZmx1c2hTeW5jQW5hbHl0aWNzQ2FsbHMuYmluZCh0aGlzLCAnb24nKTtcbmV4cG9ydCB2YXIgZmx1c2hTZXRBbm9ueW1vdXNJRCA9IGZsdXNoU3luY0FuYWx5dGljc0NhbGxzLmJpbmQodGhpcywgJ3NldEFub255bW91c0lkJyk7XG5leHBvcnQgdmFyIGZsdXNoQW5hbHl0aWNzQ2FsbHNJbk5ld1Rhc2sgPSBmdW5jdGlvbiAoYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICA7XG4gICAgT2JqZWN0LmtleXMoYnVmZmVyLmNhbGxzKS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIGJ1ZmZlci5nZXRBbmRSZW1vdmUobSkuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgLy8gTm8gb25lIHJlbWVtYmVycyB3aHkgdGhpcyBldmVudCBsb29wIG9wdGltaXphdGlvbiBpcy93YXMgbmVjY2Vzc2FyeS4gTG9zdCB0byBoaXN0b3J5LlxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2FsbEFuYWx5dGljc01ldGhvZChhbmFseXRpY3MsIGMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydCB2YXIgcG9wUGFnZUNvbnRleHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIGlmIChoYXNCdWZmZXJlZFBhZ2VDb250ZXh0QXNMYXN0QXJnKGFyZ3MpKSB7XG4gICAgICAgIHZhciBjdHggPSBhcmdzLnBvcCgpO1xuICAgICAgICByZXR1cm4gY3JlYXRlUGFnZUNvbnRleHQoY3R4KTtcbiAgICB9XG59O1xuZXhwb3J0IHZhciBoYXNCdWZmZXJlZFBhZ2VDb250ZXh0QXNMYXN0QXJnID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICB2YXIgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gaXNCdWZmZXJlZFBhZ2VDb250ZXh0KGxhc3RBcmcpO1xufTtcbi8qKlxuICogIFJlcHJlc2VudHMgYSBidWZmZXJlZCBtZXRob2QgY2FsbCB0aGF0IG9jY3VycmVkIGJlZm9yZSBpbml0aWFsaXphdGlvbi5cbiAqL1xudmFyIFByZUluaXRNZXRob2RDYWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByZUluaXRNZXRob2RDYWxsKG1ldGhvZCwgYXJncywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChyZXNvbHZlID09PSB2b2lkIDApIHsgcmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHsgfTsgfVxuICAgICAgICBpZiAocmVqZWN0ID09PSB2b2lkIDApIHsgcmVqZWN0ID0gY29uc29sZS5lcnJvcjsgfVxuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIHRoaXMuY2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgfVxuICAgIHJldHVybiBQcmVJbml0TWV0aG9kQ2FsbDtcbn0oKSk7XG5leHBvcnQgeyBQcmVJbml0TWV0aG9kQ2FsbCB9O1xuLyoqXG4gKiAgUmVwcmVzZW50cyBhbnkgYW5kIGFsbCB0aGUgYnVmZmVyZWQgbWV0aG9kIGNhbGxzIHRoYXQgb2NjdXJyZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uLlxuICovXG52YXIgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIoKSB7XG4gICAgICAgIHZhciBjYWxscyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY2FsbHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWxsTWFwID0ge307XG4gICAgICAgIHRoaXMuYWRkLmFwcGx5KHRoaXMsIGNhbGxzKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByZUluaXRNZXRob2RDYWxsQnVmZmVyLnByb3RvdHlwZSwgXCJjYWxsc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQdWxsIGFueSBidWZmZXJlZCBtZXRob2QgY2FsbHMgZnJvbSB0aGUgd2luZG93IG9iamVjdCwgYW5kIHVzZSB0aGVtIHRvIGh5ZHJhdGUgdGhlIGluc3RhbmNlIGJ1ZmZlci5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fcHVzaFNuaXBwZXRXaW5kb3dCdWZmZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsTWFwO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYWxscykge1xuICAgICAgICAgICAgdGhpcy5fY2FsbE1hcCA9IGNhbGxzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmNhbGxzW21ldGhvZE5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGJ1ZmZlcmVkIG1ldGhvZCBjYWxscyBmb3IgYSBnaXZlbiBtZXRob2QgbmFtZSwgYW5kIGNsZWFyIHRoZW0gZnJvbSB0aGUgYnVmZmVyLlxuICAgICAqL1xuICAgIFByZUluaXRNZXRob2RDYWxsQnVmZmVyLnByb3RvdHlwZS5nZXRBbmRSZW1vdmUgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgY2FsbHMgPSB0aGlzLmdldChtZXRob2ROYW1lKTtcbiAgICAgICAgdGhpcy5jYWxsc1ttZXRob2ROYW1lXSA9IFtdO1xuICAgICAgICByZXR1cm4gY2FsbHM7XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2FsbHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGNhbGxzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgY2FsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50c0V4cGVjdGluZ1BhZ2VDb250ZXh0ID0gW1xuICAgICAgICAgICAgICAgICd0cmFjaycsXG4gICAgICAgICAgICAgICAgJ3NjcmVlbicsXG4gICAgICAgICAgICAgICAgJ2FsaWFzJyxcbiAgICAgICAgICAgICAgICAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICdwYWdlJyxcbiAgICAgICAgICAgICAgICAnaWRlbnRpZnknLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChldmVudHNFeHBlY3RpbmdQYWdlQ29udGV4dC5pbmNsdWRlcyhjYWxsLm1ldGhvZCkgJiZcbiAgICAgICAgICAgICAgICAhaGFzQnVmZmVyZWRQYWdlQ29udGV4dEFzTGFzdEFyZyhjYWxsLmFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgY2FsbC5hcmdzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBjYWxsLmFyZ3MsIHRydWUpLCBbZ2V0RGVmYXVsdEJ1ZmZlcmVkUGFnZUNvbnRleHQoKV0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5jYWxsc1tjYWxsLm1ldGhvZF0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYWxsc1tjYWxsLm1ldGhvZF0ucHVzaChjYWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbGxzW2NhbGwubWV0aG9kXSA9IFtjYWxsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNsZWFyIGNhbGxzIGluIHRoZSBnbG9iYWwgc25pcHBldCBidWZmZXJlZCBhcnJheS5cbiAgICAgICAgdGhpcy5fcHVzaFNuaXBwZXRXaW5kb3dCdWZmZXIoKTtcbiAgICAgICAgLy8gY2xlYXIgY2FsbHMgaW4gdGhpcyBpbnN0YW5jZVxuICAgICAgICB0aGlzLmNhbGxzID0ge307XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gW10pLmNvbmNhdC5hcHBseShfYSwgT2JqZWN0LnZhbHVlcyh0aGlzLmNhbGxzKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgYnVmZmVyZWQgbWV0aG9kIGNhbGxzIGZyb20gdGhlIHdpbmRvdyBvYmplY3QsXG4gICAgICogbm9ybWFsaXplIHRoZW0sIGFuZCB1c2UgdGhlbSB0byBoeWRyYXRlIHRoZSBidWZmZXIuXG4gICAgICogVGhpcyByZW1vdmVzIGV4aXN0aW5nIGJ1ZmZlcmVkIGNhbGxzIGZyb20gdGhlIHdpbmRvdyBvYmplY3QuXG4gICAgICovXG4gICAgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIucHJvdG90eXBlLl9wdXNoU25pcHBldFdpbmRvd0J1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgbnBtIHZlcnNpb24sIHdlIGRvbid0IHdhbnQgdG8gcmVhZCBmcm9tIHRoZSB3aW5kb3cgb2JqZWN0LlxuICAgICAgICAvLyBUaGlzIGF2b2lkcyBuYW1lc3BhY2UgY29uZmxpY3RzIGlmIHRoZXJlIGlzIGEgc2VwZXJhdGUgYW5hbHl0aWNzIGxpYnJhcnkgb24gdGhlIHBhZ2UuXG4gICAgICAgIGlmIChnZXRWZXJzaW9uVHlwZSgpID09PSAnbnBtJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2EgPSBnZXRHbG9iYWxBbmFseXRpY3MoKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHdhKSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBidWZmZXJlZCA9IHdhLnNwbGljZSgwLCB3YS5sZW5ndGgpO1xuICAgICAgICB2YXIgY2FsbHMgPSBidWZmZXJlZC5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IF9hWzBdLCBhcmdzID0gX2Euc2xpY2UoMSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByZUluaXRNZXRob2RDYWxsKG1ldGhvZE5hbWUsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGQuYXBwbHkodGhpcywgY2FsbHMpO1xuICAgIH07XG4gICAgcmV0dXJuIFByZUluaXRNZXRob2RDYWxsQnVmZmVyO1xufSgpKTtcbmV4cG9ydCB7IFByZUluaXRNZXRob2RDYWxsQnVmZmVyIH07XG4vKipcbiAqICBDYWxsIG1ldGhvZCBhbmQgbWFyayBhcyBcImNhbGxlZFwiXG4gKiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbmV2ZXIgdGhyb3cgYW4gZXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBjYWxsKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0LCBlcnJfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGwuY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdW5kZWZpbmVkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsLmNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFuYWx5dGljc1tjYWxsLm1ldGhvZF0uYXBwbHkoYW5hbHl0aWNzLCBjYWxsLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGhlbmFibGUocmVzdWx0KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkZWZlciBmb3Igbm9uLWFzeW5jIG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzdWx0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkZWZlciBmb3Igbm9uLWFzeW5jIG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBjYWxsLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbC5yZWplY3QoZXJyXzEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG52YXIgQW5hbHl0aWNzQnVmZmVyZWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQW5hbHl0aWNzQnVmZmVyZWQobG9hZGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJhY2tTdWJtaXQgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3RyYWNrU3VibWl0Jyk7XG4gICAgICAgIHRoaXMudHJhY2tDbGljayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2tDbGljaycpO1xuICAgICAgICB0aGlzLnRyYWNrTGluayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2tMaW5rJyk7XG4gICAgICAgIHRoaXMucGFnZVZpZXcgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3BhZ2V2aWV3Jyk7XG4gICAgICAgIHRoaXMuaWRlbnRpZnkgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2lkZW50aWZ5Jyk7XG4gICAgICAgIHRoaXMucmVzZXQgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3Jlc2V0Jyk7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2dyb3VwJyk7XG4gICAgICAgIHRoaXMudHJhY2sgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3RyYWNrJyk7XG4gICAgICAgIHRoaXMucmVhZHkgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3JlYWR5Jyk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2FsaWFzJyk7XG4gICAgICAgIHRoaXMuZGVidWcgPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ2RlYnVnJyk7XG4gICAgICAgIHRoaXMucGFnZSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgncGFnZScpO1xuICAgICAgICB0aGlzLm9uY2UgPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ29uY2UnKTtcbiAgICAgICAgdGhpcy5vZmYgPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ29mZicpO1xuICAgICAgICB0aGlzLm9uID0gdGhpcy5fY3JlYXRlQ2hhaW5hYmxlTWV0aG9kKCdvbicpO1xuICAgICAgICB0aGlzLmFkZFNvdXJjZU1pZGRsZXdhcmUgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2FkZFNvdXJjZU1pZGRsZXdhcmUnKTtcbiAgICAgICAgdGhpcy5zZXRBbm9ueW1vdXNJZCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnc2V0QW5vbnltb3VzSWQnKTtcbiAgICAgICAgdGhpcy5hZGREZXN0aW5hdGlvbk1pZGRsZXdhcmUgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2FkZERlc3RpbmF0aW9uTWlkZGxld2FyZScpO1xuICAgICAgICB0aGlzLnNjcmVlbiA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnc2NyZWVuJyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3JlZ2lzdGVyJyk7XG4gICAgICAgIHRoaXMuZGVyZWdpc3RlciA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnZGVyZWdpc3RlcicpO1xuICAgICAgICB0aGlzLnVzZXIgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3VzZXInKTtcbiAgICAgICAgdGhpcy5WRVJTSU9OID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5fcHJlSW5pdEJ1ZmZlciA9IG5ldyBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gbG9hZGVyKHRoaXMuX3ByZUluaXRCdWZmZXIpO1xuICAgICAgICB0aGlzLl9wcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBhanMgPSBfYVswXSwgY3R4ID0gX2FbMV07XG4gICAgICAgICAgICBfdGhpcy5pbnN0YW5jZSA9IGFqcztcbiAgICAgICAgICAgIF90aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGRvIG5vdGhpbmcuLi5cbiAgICAgICAgICAgIC8vIHRoaXMgcmVzdWx0IG9mIHRoaXMgcHJvbWlzZSB3aWxsIGJlIGNhdWdodCBieSB0aGUgJ2NhdGNoJyBibG9jayBvbiB0aGlzIGNsYXNzLlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcHJvbWlzZSkudGhlbi5hcHBseShfYSwgYXJncyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCdWZmZXJlZC5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcHJvbWlzZSkuY2F0Y2guYXBwbHkoX2EsIGFyZ3MpO1xuICAgIH07XG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcHJvbWlzZSkuZmluYWxseS5hcHBseShfYSwgYXJncyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCdWZmZXJlZC5wcm90b3R5cGUuX2NyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKF9hID0gX3RoaXMuaW5zdGFuY2UpW21ldGhvZE5hbWVdLmFwcGx5KF9hLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wcmVJbml0QnVmZmVyLmFkZChuZXcgUHJlSW5pdE1ldGhvZENhbGwobWV0aG9kTmFtZSwgYXJncywgcmVzb2x2ZSwgcmVqZWN0KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqICBUaGVzZSBhcmUgZm9yIG1ldGhvZHMgdGhhdCB3aGVyZSBkZXRlcm1pbmluZyB3aGVuIHRoZSBtZXRob2QgZ2V0cyBcImZsdXNoZWRcIiBpcyBub3QgaW1wb3J0YW50LlxuICAgICAqICBUaGVzZSBtZXRob2RzIHdpbGwgcmVzb2x2ZSB3aGVuIGFuYWx5dGljcyBpcyBmdWxseSBpbml0aWFsaXplZCwgYW5kIHJldHVybiB0eXBlIChvdGhlciB0aGFuIEFuYWx5dGljcyl3aWxsIG5vdCBiZSBhdmFpbGFibGUuXG4gICAgICovXG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLl9jcmVhdGVDaGFpbmFibGVNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdm9pZCAoX2EgPSBfdGhpcy5pbnN0YW5jZSlbbWV0aG9kTmFtZV0uYXBwbHkoX2EsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wcmVJbml0QnVmZmVyLmFkZChuZXcgUHJlSW5pdE1ldGhvZENhbGwobWV0aG9kTmFtZSwgYXJncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIEFuYWx5dGljc0J1ZmZlcmVkO1xufSgpKTtcbmV4cG9ydCB7IEFuYWx5dGljc0J1ZmZlcmVkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isOffline: () => (/* binding */ isOffline),\n/* harmony export */   isOnline: () => (/* binding */ isOnline)\n/* harmony export */ });\n/* harmony import */ var _environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../environment */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n\nfunction isOnline() {\n    if ((0,_environment__WEBPACK_IMPORTED_MODULE_0__.isBrowser)()) {\n        return window.navigator.onLine;\n    }\n    return true;\n}\nfunction isOffline() {\n    return !isOnline();\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb25uZWN0aW9uL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNwQztBQUNQLFFBQVEsdURBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvY29ubmVjdGlvbi9pbmRleC5qcz8xNGU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQnJvd3NlciB9IGZyb20gJy4uL2Vudmlyb25tZW50JztcbmV4cG9ydCBmdW5jdGlvbiBpc09ubGluZSgpIHtcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09mZmxpbmUoKSB7XG4gICAgcmV0dXJuICFpc09ubGluZSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SEGMENT_API_HOST: () => (/* binding */ SEGMENT_API_HOST)\n/* harmony export */ });\nvar SEGMENT_API_HOST = 'api.segment.io/v1';\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb25zdGFudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2NvbnN0YW50cy9pbmRleC5qcz83NTcwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgU0VHTUVOVF9BUElfSE9TVCA9ICdhcGkuc2VnbWVudC5pby92MSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context),\n/* harmony export */   ContextCancelation: () => (/* reexport safe */ _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.ContextCancelation)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stats */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\");\n\n\n\nvar Context = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Context, _super);\n    function Context(event, id) {\n        return _super.call(this, event, id, new _stats__WEBPACK_IMPORTED_MODULE_1__.Stats()) || this;\n    }\n    Context.system = function () {\n        return new this({ type: 'track', event: 'system' });\n    };\n    return Context;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.CoreContext));\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb250ZXh0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtDO0FBQ3lDO0FBQzFDO0FBQ2pDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0EsZ0RBQWdELHlDQUFLO0FBQ3JEO0FBQ0E7QUFDQSwwQkFBMEIsZ0NBQWdDO0FBQzFEO0FBQ0E7QUFDQSxDQUFDLENBQUMsZ0VBQVc7QUFDTTtBQUNXO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb250ZXh0L2luZGV4LmpzPzhkMGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb3JlQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uLCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IFN0YXRzIH0gZnJvbSAnLi4vc3RhdHMnO1xudmFyIENvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbnRleHQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29udGV4dChldmVudCwgaWQpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGV2ZW50LCBpZCwgbmV3IFN0YXRzKCkpIHx8IHRoaXM7XG4gICAgfVxuICAgIENvbnRleHQuc3lzdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoeyB0eXBlOiAndHJhY2snLCBldmVudDogJ3N5c3RlbScgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udGV4dDtcbn0oQ29yZUNvbnRleHQpKTtcbmV4cG9ydCB7IENvbnRleHQgfTtcbmV4cG9ydCB7IENvbnRleHRDYW5jZWxhdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isServer: () => (/* binding */ isServer)\n/* harmony export */ });\nfunction isBrowser() {\n    return typeof window !== 'undefined';\n}\nfunction isServer() {\n    return !isBrowser();\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9lbnZpcm9ubWVudC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9lbnZpcm9ubWVudC9pbmRleC5qcz82ZDJjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2VydmVyKCkge1xuICAgIHJldHVybiAhaXNCcm93c2VyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventFactory: () => (/* binding */ EventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../page */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\");\n\n\n\n\n\nvar EventFactory = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(EventFactory, _super);\n    function EventFactory(user) {\n        var _this = _super.call(this, {\n            createMessageId: function () { return \"ajs-next-\".concat(Date.now(), \"-\").concat((0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)()); },\n            onEventMethodCall: function (_a) {\n                var options = _a.options;\n                _this.maybeUpdateAnonId(options);\n            },\n            onFinishedEvent: function (event) {\n                _this.addIdentity(event);\n                return event;\n            },\n        }) || this;\n        _this.user = user;\n        return _this;\n    }\n    /**\n     * Updates the anonymousId *globally* if it's provided in the options.\n     * This should generally be done in the identify method, but some customers rely on this.\n     */\n    EventFactory.prototype.maybeUpdateAnonId = function (options) {\n        (options === null || options === void 0 ? void 0 : options.anonymousId) && this.user.anonymousId(options.anonymousId);\n    };\n    /**\n     * add user id / anonymous id to the event\n     */\n    EventFactory.prototype.addIdentity = function (event) {\n        if (this.user.id()) {\n            event.userId = this.user.id();\n        }\n        if (this.user.anonymousId()) {\n            event.anonymousId = this.user.anonymousId();\n        }\n    };\n    EventFactory.prototype.track = function (event, properties, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.track.call(this, event, properties, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.page = function (category, page, properties, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.page.call(this, category, page, properties, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.screen.call(this, category, screen, properties, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.identify = function (userId, traits, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.identify.call(this, userId, traits, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.group = function (groupId, traits, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.group.call(this, groupId, traits, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.alias = function (to, from, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.alias.call(this, to, from, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    return EventFactory;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.CoreEventFactory));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9ldmVudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDUTtBQUNEO0FBQ2tCO0FBQzlCO0FBQzdCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSwyQ0FBMkMsa0RBQWtELGdEQUFJLE1BQU07QUFDdkc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMscUVBQWdCO0FBQ007QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2V2ZW50cy9pbmRleC5qcz8yNjQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ0BsdWtlZWQvdXVpZCc7XG5pbXBvcnQgeyBhZGRQYWdlQ29udGV4dCB9IGZyb20gJy4uL3BhZ2UnO1xuaW1wb3J0IHsgQ29yZUV2ZW50RmFjdG9yeSB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlcyc7XG52YXIgRXZlbnRGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFdmVudEZhY3RvcnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXZlbnRGYWN0b3J5KHVzZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY3JlYXRlTWVzc2FnZUlkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImFqcy1uZXh0LVwiLmNvbmNhdChEYXRlLm5vdygpLCBcIi1cIikuY29uY2F0KHV1aWQoKSk7IH0sXG4gICAgICAgICAgICBvbkV2ZW50TWV0aG9kQ2FsbDogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBfYS5vcHRpb25zO1xuICAgICAgICAgICAgICAgIF90aGlzLm1heWJlVXBkYXRlQW5vbklkKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRmluaXNoZWRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWRkSWRlbnRpdHkoZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBldmVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnVzZXIgPSB1c2VyO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGFub255bW91c0lkICpnbG9iYWxseSogaWYgaXQncyBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucy5cbiAgICAgKiBUaGlzIHNob3VsZCBnZW5lcmFsbHkgYmUgZG9uZSBpbiB0aGUgaWRlbnRpZnkgbWV0aG9kLCBidXQgc29tZSBjdXN0b21lcnMgcmVseSBvbiB0aGlzLlxuICAgICAqL1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUubWF5YmVVcGRhdGVBbm9uSWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmFub255bW91c0lkKSAmJiB0aGlzLnVzZXIuYW5vbnltb3VzSWQob3B0aW9ucy5hbm9ueW1vdXNJZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBhZGQgdXNlciBpZCAvIGFub255bW91cyBpZCB0byB0aGUgZXZlbnRcbiAgICAgKi9cbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLmFkZElkZW50aXR5ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnVzZXIuaWQoKSkge1xuICAgICAgICAgICAgZXZlbnQudXNlcklkID0gdGhpcy51c2VyLmlkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXNlci5hbm9ueW1vdXNJZCgpKSB7XG4gICAgICAgICAgICBldmVudC5hbm9ueW1vdXNJZCA9IHRoaXMudXNlci5hbm9ueW1vdXNJZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpIHtcbiAgICAgICAgdmFyIGV2ID0gX3N1cGVyLnByb3RvdHlwZS50cmFjay5jYWxsKHRoaXMsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpO1xuICAgICAgICBhZGRQYWdlQ29udGV4dChldiwgcGFnZUN0eCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9O1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSwgcGFnZSwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUucGFnZS5jYWxsKHRoaXMsIGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpO1xuICAgICAgICBhZGRQYWdlQ29udGV4dChldiwgcGFnZUN0eCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9O1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUuc2NyZWVuID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBzY3JlZW4sIHByb3BlcnRpZXMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucywgcGFnZUN0eCkge1xuICAgICAgICB2YXIgZXYgPSBfc3VwZXIucHJvdG90eXBlLnNjcmVlbi5jYWxsKHRoaXMsIGNhdGVnb3J5LCBzY3JlZW4sIHByb3BlcnRpZXMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucyk7XG4gICAgICAgIGFkZFBhZ2VDb250ZXh0KGV2LCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIGV2O1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uICh1c2VySWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUuaWRlbnRpZnkuY2FsbCh0aGlzLCB1c2VySWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKTtcbiAgICAgICAgYWRkUGFnZUNvbnRleHQoZXYsIHBhZ2VDdHgpO1xuICAgICAgICByZXR1cm4gZXY7XG4gICAgfTtcbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKGdyb3VwSWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUuZ3JvdXAuY2FsbCh0aGlzLCBncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucyk7XG4gICAgICAgIGFkZFBhZ2VDb250ZXh0KGV2LCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIGV2O1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uICh0bywgZnJvbSwgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUuYWxpYXMuY2FsbCh0aGlzLCB0bywgZnJvbSwgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKTtcbiAgICAgICAgYWRkUGFnZUNvbnRleHQoZXYsIHBhZ2VDdHgpO1xuICAgICAgICByZXR1cm4gZXY7XG4gICAgfTtcbiAgICByZXR1cm4gRXZlbnRGYWN0b3J5O1xufShDb3JlRXZlbnRGYWN0b3J5KSk7XG5leHBvcnQgeyBFdmVudEZhY3RvcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attachInspector: () => (/* binding */ attachInspector)\n/* harmony export */ });\n/* harmony import */ var _lib_get_global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/get-global */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\nvar _a;\nvar _b;\n\nvar env = (0,_lib_get_global__WEBPACK_IMPORTED_MODULE_0__.getGlobal)();\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nvar inspectorHost = ((_a = (_b = env)['__SEGMENT_INSPECTOR__']) !== null && _a !== void 0 ? _a : (_b['__SEGMENT_INSPECTOR__'] = {}));\nvar attachInspector = function (analytics) { var _a; return (_a = inspectorHost.attach) === null || _a === void 0 ? void 0 : _a.call(inspectorHost, analytics); };\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9pbnNwZWN0b3IvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ2lEO0FBQ2pELFVBQVUsMERBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0Esa0lBQWtJO0FBQzNILDZDQUE2QyxRQUFRO0FBQzVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9pbnNwZWN0b3IvaW5kZXguanM/YzJjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2E7XG52YXIgX2I7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuLi8uLi9saWIvZ2V0LWdsb2JhbCc7XG52YXIgZW52ID0gZ2V0R2xvYmFsKCk7XG4vLyBUaGUgY29kZSBiZWxvdyBhc3N1bWVzIHRoZSBpbnNwZWN0b3IgZXh0ZW5zaW9uIHdpbGwgdXNlIE9iamVjdC5hc3NpZ25cbi8vIHRvIGFkZCB0aGUgaW5zcGVjdCBpbnRlcmZhY2Ugb24gdG8gdGhpcyBvYmplY3QgcmVmZXJlbmNlICh1bmxlc3MgdGhlXG4vLyBleHRlbnNpb24gY29kZSByYW4gZmlyc3QgYW5kIGhhcyBhbHJlYWR5IHNldCB1cCB0aGUgdmFyaWFibGUpXG52YXIgaW5zcGVjdG9ySG9zdCA9ICgoX2EgPSAoX2IgPSBlbnYpWydfX1NFR01FTlRfSU5TUEVDVE9SX18nXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iWydfX1NFR01FTlRfSU5TUEVDVE9SX18nXSA9IHt9KSk7XG5leHBvcnQgdmFyIGF0dGFjaEluc3BlY3RvciA9IGZ1bmN0aW9uIChhbmFseXRpY3MpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gaW5zcGVjdG9ySG9zdC5hdHRhY2gpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKGluc3BlY3Rvckhvc3QsIGFuYWx5dGljcyk7IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPageContext: () => (/* binding */ addPageContext)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_pick__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/pick */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js\");\n/* harmony import */ var _get_page_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./get-page-context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\");\n\n\n\n/**\n * Augments a segment event with information about the current page.\n * Page information like URL changes frequently, so this is meant to be captured as close to the event call as possible.\n * Things like `userAgent` do not change, so they can be added later in the flow.\n * We prefer not to add this information to this function, as it increases the main bundle size.\n */\nvar addPageContext = function (event, pageCtx) {\n    if (pageCtx === void 0) { pageCtx = (0,_get_page_context__WEBPACK_IMPORTED_MODULE_0__.getDefaultPageContext)(); }\n    var evtCtx = event.context; // Context should be set earlier in the flow\n    var pageContextFromEventProps;\n    if (event.type === 'page') {\n        pageContextFromEventProps =\n            event.properties && (0,_lib_pick__WEBPACK_IMPORTED_MODULE_1__.pick)(event.properties, Object.keys(pageCtx));\n        event.properties = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, pageCtx), event.properties), (event.name ? { name: event.name } : {}));\n    }\n    evtCtx.page = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, pageCtx), pageContextFromEventProps), evtCtx.page);\n};\n//# sourceMappingURL=add-page-context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2FkZC1wYWdlLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNLO0FBQ3FCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsOEJBQThCLFVBQVUsd0VBQXFCO0FBQzdELGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0NBQUk7QUFDcEMsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLCtDQUErQyxtQkFBbUIsSUFBSTtBQUM5SDtBQUNBLGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMvQztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2FkZC1wYWdlLWNvbnRleHQuanM/YjY2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgcGljayB9IGZyb20gJy4uLy4uL2xpYi9waWNrJztcbmltcG9ydCB7IGdldERlZmF1bHRQYWdlQ29udGV4dCB9IGZyb20gJy4vZ2V0LXBhZ2UtY29udGV4dCc7XG4vKipcbiAqIEF1Z21lbnRzIGEgc2VnbWVudCBldmVudCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IHBhZ2UuXG4gKiBQYWdlIGluZm9ybWF0aW9uIGxpa2UgVVJMIGNoYW5nZXMgZnJlcXVlbnRseSwgc28gdGhpcyBpcyBtZWFudCB0byBiZSBjYXB0dXJlZCBhcyBjbG9zZSB0byB0aGUgZXZlbnQgY2FsbCBhcyBwb3NzaWJsZS5cbiAqIFRoaW5ncyBsaWtlIGB1c2VyQWdlbnRgIGRvIG5vdCBjaGFuZ2UsIHNvIHRoZXkgY2FuIGJlIGFkZGVkIGxhdGVyIGluIHRoZSBmbG93LlxuICogV2UgcHJlZmVyIG5vdCB0byBhZGQgdGhpcyBpbmZvcm1hdGlvbiB0byB0aGlzIGZ1bmN0aW9uLCBhcyBpdCBpbmNyZWFzZXMgdGhlIG1haW4gYnVuZGxlIHNpemUuXG4gKi9cbmV4cG9ydCB2YXIgYWRkUGFnZUNvbnRleHQgPSBmdW5jdGlvbiAoZXZlbnQsIHBhZ2VDdHgpIHtcbiAgICBpZiAocGFnZUN0eCA9PT0gdm9pZCAwKSB7IHBhZ2VDdHggPSBnZXREZWZhdWx0UGFnZUNvbnRleHQoKTsgfVxuICAgIHZhciBldnRDdHggPSBldmVudC5jb250ZXh0OyAvLyBDb250ZXh0IHNob3VsZCBiZSBzZXQgZWFybGllciBpbiB0aGUgZmxvd1xuICAgIHZhciBwYWdlQ29udGV4dEZyb21FdmVudFByb3BzO1xuICAgIGlmIChldmVudC50eXBlID09PSAncGFnZScpIHtcbiAgICAgICAgcGFnZUNvbnRleHRGcm9tRXZlbnRQcm9wcyA9XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzICYmIHBpY2soZXZlbnQucHJvcGVydGllcywgT2JqZWN0LmtleXMocGFnZUN0eCkpO1xuICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIHBhZ2VDdHgpLCBldmVudC5wcm9wZXJ0aWVzKSwgKGV2ZW50Lm5hbWUgPyB7IG5hbWU6IGV2ZW50Lm5hbWUgfSA6IHt9KSk7XG4gICAgfVxuICAgIGV2dEN0eC5wYWdlID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIHBhZ2VDdHgpLCBwYWdlQ29udGV4dEZyb21FdmVudFByb3BzKSwgZXZ0Q3R4LnBhZ2UpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZC1wYWdlLWNvbnRleHQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BufferedPageContextDiscriminant: () => (/* binding */ BufferedPageContextDiscriminant),\n/* harmony export */   createBufferedPageContext: () => (/* binding */ createBufferedPageContext),\n/* harmony export */   createPageContext: () => (/* binding */ createPageContext),\n/* harmony export */   getDefaultBufferedPageContext: () => (/* binding */ getDefaultBufferedPageContext),\n/* harmony export */   getDefaultPageContext: () => (/* binding */ getDefaultPageContext),\n/* harmony export */   isBufferedPageContext: () => (/* binding */ isBufferedPageContext)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\nvar BufferedPageContextDiscriminant = 'bpc';\n/**\n * `BufferedPageContext` object builder\n */\nvar createBufferedPageContext = function (url, canonicalUrl, search, path, title, referrer) { return ({\n    __t: BufferedPageContextDiscriminant,\n    c: canonicalUrl,\n    p: path,\n    u: url,\n    s: search,\n    t: title,\n    r: referrer,\n}); };\n// my clever/dubious way of making sure this type guard does not get out sync with the type definition\nvar BUFFERED_PAGE_CONTEXT_KEYS = Object.keys(createBufferedPageContext('', '', '', '', '', ''));\nfunction isBufferedPageContext(bufferedPageCtx) {\n    if (!(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(bufferedPageCtx))\n        return false;\n    if (bufferedPageCtx.__t !== BufferedPageContextDiscriminant)\n        return false;\n    // ensure obj has all the keys we expect, and none we don't.\n    for (var k in bufferedPageCtx) {\n        if (!BUFFERED_PAGE_CONTEXT_KEYS.includes(k)) {\n            return false;\n        }\n    }\n    return true;\n}\n//  Legacy logic: we are we appending search parameters to the canonical URL -- I guess the canonical URL is  \"not canonical enough\" (lol)\nvar createCanonicalURL = function (canonicalUrl, searchParams) {\n    return canonicalUrl.indexOf('?') > -1\n        ? canonicalUrl\n        : canonicalUrl + searchParams;\n};\n/**\n * Strips hash from URL.\n * http://www.segment.local#test -> http://www.segment.local\n */\nvar removeHash = function (href) {\n    var hashIdx = href.indexOf('#');\n    return hashIdx === -1 ? href : href.slice(0, hashIdx);\n};\nvar parseCanonicalPath = function (canonicalUrl) {\n    try {\n        return new URL(canonicalUrl).pathname;\n    }\n    catch (_e) {\n        // this is classic behavior -- we assume that if the canonical URL is invalid, it's a raw path.\n        return canonicalUrl[0] === '/' ? canonicalUrl : '/' + canonicalUrl;\n    }\n};\n/**\n * Create a `PageContext` from a `BufferedPageContext`.\n * `BufferedPageContext` keys are minified to save bytes in the snippet.\n */\nvar createPageContext = function (_a) {\n    var canonicalUrl = _a.c, pathname = _a.p, search = _a.s, url = _a.u, referrer = _a.r, title = _a.t;\n    var newPath = canonicalUrl ? parseCanonicalPath(canonicalUrl) : pathname;\n    var newUrl = canonicalUrl\n        ? createCanonicalURL(canonicalUrl, search)\n        : removeHash(url);\n    return {\n        path: newPath,\n        referrer: referrer,\n        search: search,\n        title: title,\n        url: newUrl,\n    };\n};\n/**\n * Get page properties from the browser window/document.\n */\nvar getDefaultBufferedPageContext = function () {\n    var c = document.querySelector(\"link[rel='canonical']\");\n    return createBufferedPageContext(location.href, (c && c.getAttribute('href')) || undefined, location.search, location.pathname, document.title, document.referrer);\n};\n/**\n * Get page properties from the browser window/document.\n */\nvar getDefaultPageContext = function () {\n    return createPageContext(getDefaultBufferedPageContext());\n};\n//# sourceMappingURL=get-page-context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2dldC1wYWdlLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3RDtBQUNqRDtBQUNQO0FBQ0E7QUFDQTtBQUNPLDhGQUE4RjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ087QUFDUCxTQUFTLHNFQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcGFnZS9nZXQtcGFnZS1jb250ZXh0LmpzPzcxZGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCB2YXIgQnVmZmVyZWRQYWdlQ29udGV4dERpc2NyaW1pbmFudCA9ICdicGMnO1xuLyoqXG4gKiBgQnVmZmVyZWRQYWdlQ29udGV4dGAgb2JqZWN0IGJ1aWxkZXJcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVCdWZmZXJlZFBhZ2VDb250ZXh0ID0gZnVuY3Rpb24gKHVybCwgY2Fub25pY2FsVXJsLCBzZWFyY2gsIHBhdGgsIHRpdGxlLCByZWZlcnJlcikgeyByZXR1cm4gKHtcbiAgICBfX3Q6IEJ1ZmZlcmVkUGFnZUNvbnRleHREaXNjcmltaW5hbnQsXG4gICAgYzogY2Fub25pY2FsVXJsLFxuICAgIHA6IHBhdGgsXG4gICAgdTogdXJsLFxuICAgIHM6IHNlYXJjaCxcbiAgICB0OiB0aXRsZSxcbiAgICByOiByZWZlcnJlcixcbn0pOyB9O1xuLy8gbXkgY2xldmVyL2R1YmlvdXMgd2F5IG9mIG1ha2luZyBzdXJlIHRoaXMgdHlwZSBndWFyZCBkb2VzIG5vdCBnZXQgb3V0IHN5bmMgd2l0aCB0aGUgdHlwZSBkZWZpbml0aW9uXG52YXIgQlVGRkVSRURfUEFHRV9DT05URVhUX0tFWVMgPSBPYmplY3Qua2V5cyhjcmVhdGVCdWZmZXJlZFBhZ2VDb250ZXh0KCcnLCAnJywgJycsICcnLCAnJywgJycpKTtcbmV4cG9ydCBmdW5jdGlvbiBpc0J1ZmZlcmVkUGFnZUNvbnRleHQoYnVmZmVyZWRQYWdlQ3R4KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGJ1ZmZlcmVkUGFnZUN0eCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYnVmZmVyZWRQYWdlQ3R4Ll9fdCAhPT0gQnVmZmVyZWRQYWdlQ29udGV4dERpc2NyaW1pbmFudClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGVuc3VyZSBvYmogaGFzIGFsbCB0aGUga2V5cyB3ZSBleHBlY3QsIGFuZCBub25lIHdlIGRvbid0LlxuICAgIGZvciAodmFyIGsgaW4gYnVmZmVyZWRQYWdlQ3R4KSB7XG4gICAgICAgIGlmICghQlVGRkVSRURfUEFHRV9DT05URVhUX0tFWVMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vICBMZWdhY3kgbG9naWM6IHdlIGFyZSB3ZSBhcHBlbmRpbmcgc2VhcmNoIHBhcmFtZXRlcnMgdG8gdGhlIGNhbm9uaWNhbCBVUkwgLS0gSSBndWVzcyB0aGUgY2Fub25pY2FsIFVSTCBpcyAgXCJub3QgY2Fub25pY2FsIGVub3VnaFwiIChsb2wpXG52YXIgY3JlYXRlQ2Fub25pY2FsVVJMID0gZnVuY3Rpb24gKGNhbm9uaWNhbFVybCwgc2VhcmNoUGFyYW1zKSB7XG4gICAgcmV0dXJuIGNhbm9uaWNhbFVybC5pbmRleE9mKCc/JykgPiAtMVxuICAgICAgICA/IGNhbm9uaWNhbFVybFxuICAgICAgICA6IGNhbm9uaWNhbFVybCArIHNlYXJjaFBhcmFtcztcbn07XG4vKipcbiAqIFN0cmlwcyBoYXNoIGZyb20gVVJMLlxuICogaHR0cDovL3d3dy5zZWdtZW50LmxvY2FsI3Rlc3QgLT4gaHR0cDovL3d3dy5zZWdtZW50LmxvY2FsXG4gKi9cbnZhciByZW1vdmVIYXNoID0gZnVuY3Rpb24gKGhyZWYpIHtcbiAgICB2YXIgaGFzaElkeCA9IGhyZWYuaW5kZXhPZignIycpO1xuICAgIHJldHVybiBoYXNoSWR4ID09PSAtMSA/IGhyZWYgOiBocmVmLnNsaWNlKDAsIGhhc2hJZHgpO1xufTtcbnZhciBwYXJzZUNhbm9uaWNhbFBhdGggPSBmdW5jdGlvbiAoY2Fub25pY2FsVXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBVUkwoY2Fub25pY2FsVXJsKS5wYXRobmFtZTtcbiAgICB9XG4gICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgY2xhc3NpYyBiZWhhdmlvciAtLSB3ZSBhc3N1bWUgdGhhdCBpZiB0aGUgY2Fub25pY2FsIFVSTCBpcyBpbnZhbGlkLCBpdCdzIGEgcmF3IHBhdGguXG4gICAgICAgIHJldHVybiBjYW5vbmljYWxVcmxbMF0gPT09ICcvJyA/IGNhbm9uaWNhbFVybCA6ICcvJyArIGNhbm9uaWNhbFVybDtcbiAgICB9XG59O1xuLyoqXG4gKiBDcmVhdGUgYSBgUGFnZUNvbnRleHRgIGZyb20gYSBgQnVmZmVyZWRQYWdlQ29udGV4dGAuXG4gKiBgQnVmZmVyZWRQYWdlQ29udGV4dGAga2V5cyBhcmUgbWluaWZpZWQgdG8gc2F2ZSBieXRlcyBpbiB0aGUgc25pcHBldC5cbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVQYWdlQ29udGV4dCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjYW5vbmljYWxVcmwgPSBfYS5jLCBwYXRobmFtZSA9IF9hLnAsIHNlYXJjaCA9IF9hLnMsIHVybCA9IF9hLnUsIHJlZmVycmVyID0gX2EuciwgdGl0bGUgPSBfYS50O1xuICAgIHZhciBuZXdQYXRoID0gY2Fub25pY2FsVXJsID8gcGFyc2VDYW5vbmljYWxQYXRoKGNhbm9uaWNhbFVybCkgOiBwYXRobmFtZTtcbiAgICB2YXIgbmV3VXJsID0gY2Fub25pY2FsVXJsXG4gICAgICAgID8gY3JlYXRlQ2Fub25pY2FsVVJMKGNhbm9uaWNhbFVybCwgc2VhcmNoKVxuICAgICAgICA6IHJlbW92ZUhhc2godXJsKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiBuZXdQYXRoLFxuICAgICAgICByZWZlcnJlcjogcmVmZXJyZXIsXG4gICAgICAgIHNlYXJjaDogc2VhcmNoLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHVybDogbmV3VXJsLFxuICAgIH07XG59O1xuLyoqXG4gKiBHZXQgcGFnZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGJyb3dzZXIgd2luZG93L2RvY3VtZW50LlxuICovXG5leHBvcnQgdmFyIGdldERlZmF1bHRCdWZmZXJlZFBhZ2VDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImxpbmtbcmVsPSdjYW5vbmljYWwnXVwiKTtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyZWRQYWdlQ29udGV4dChsb2NhdGlvbi5ocmVmLCAoYyAmJiBjLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB8fCB1bmRlZmluZWQsIGxvY2F0aW9uLnNlYXJjaCwgbG9jYXRpb24ucGF0aG5hbWUsIGRvY3VtZW50LnRpdGxlLCBkb2N1bWVudC5yZWZlcnJlcik7XG59O1xuLyoqXG4gKiBHZXQgcGFnZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGJyb3dzZXIgd2luZG93L2RvY3VtZW50LlxuICovXG5leHBvcnQgdmFyIGdldERlZmF1bHRQYWdlQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY3JlYXRlUGFnZUNvbnRleHQoZ2V0RGVmYXVsdEJ1ZmZlcmVkUGFnZUNvbnRleHQoKSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LXBhZ2UtY29udGV4dC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDestinationPluginWithAddMiddleware: () => (/* binding */ isDestinationPluginWithAddMiddleware)\n/* harmony export */ });\nvar isDestinationPluginWithAddMiddleware = function (plugin) {\n    // FYI: segment's plugin does not currently have an 'addMiddleware' method\n    return 'addMiddleware' in plugin && plugin.type === 'destination';\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wbHVnaW4vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3BsdWdpbi9pbmRleC5qcz9jMTFkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgaXNEZXN0aW5hdGlvblBsdWdpbldpdGhBZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgIC8vIEZZSTogc2VnbWVudCdzIHBsdWdpbiBkb2VzIG5vdCBjdXJyZW50bHkgaGF2ZSBhbiAnYWRkTWlkZGxld2FyZScgbWV0aG9kXG4gICAgcmV0dXJuICdhZGRNaWRkbGV3YXJlJyBpbiBwbHVnaW4gJiYgcGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbic7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gracefulDecodeURIComponent: () => (/* binding */ gracefulDecodeURIComponent)\n/* harmony export */ });\n/**\n * Tries to gets the unencoded version of an encoded component of a\n * Uniform Resource Identifier (URI). If input string is malformed,\n * returns it back as-is.\n *\n * Note: All occurences of the `+` character become ` ` (spaces).\n **/\nfunction gracefulDecodeURIComponent(encodedURIComponent) {\n    try {\n        return decodeURIComponent(encodedURIComponent.replace(/\\+/g, ' '));\n    }\n    catch (_a) {\n        return encodedURIComponent;\n    }\n}\n//# sourceMappingURL=gracefulDecodeURIComponent.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQuanM/ZmNhOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRyaWVzIHRvIGdldHMgdGhlIHVuZW5jb2RlZCB2ZXJzaW9uIG9mIGFuIGVuY29kZWQgY29tcG9uZW50IG9mIGFcbiAqIFVuaWZvcm0gUmVzb3VyY2UgSWRlbnRpZmllciAoVVJJKS4gSWYgaW5wdXQgc3RyaW5nIGlzIG1hbGZvcm1lZCxcbiAqIHJldHVybnMgaXQgYmFjayBhcy1pcy5cbiAqXG4gKiBOb3RlOiBBbGwgb2NjdXJlbmNlcyBvZiB0aGUgYCtgIGNoYXJhY3RlciBiZWNvbWUgYCBgIChzcGFjZXMpLlxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRVUklDb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRVUklDb21wb25lbnQucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZWRVUklDb21wb25lbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryString: () => (/* binding */ queryString)\n/* harmony export */ });\n/* harmony import */ var _pickPrefix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pickPrefix */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js\");\n/* harmony import */ var _gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gracefulDecodeURIComponent */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\n\nfunction queryString(analytics, query) {\n    var a = document.createElement('a');\n    a.href = query;\n    var parsed = a.search.slice(1);\n    var params = parsed.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], v = _a[1];\n        acc[k] = (0,_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_0__.gracefulDecodeURIComponent)(v);\n        return acc;\n    }, {});\n    var calls = [];\n    var ajs_uid = params.ajs_uid, ajs_event = params.ajs_event, ajs_aid = params.ajs_aid;\n    var _a = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(analytics.options.useQueryString)\n        ? analytics.options.useQueryString\n        : {}, _b = _a.aid, aidPattern = _b === void 0 ? /.+/ : _b, _c = _a.uid, uidPattern = _c === void 0 ? /.+/ : _c;\n    if (ajs_aid) {\n        var anonId = Array.isArray(params.ajs_aid)\n            ? params.ajs_aid[0]\n            : params.ajs_aid;\n        if (aidPattern.test(anonId)) {\n            analytics.setAnonymousId(anonId);\n        }\n    }\n    if (ajs_uid) {\n        var uid = Array.isArray(params.ajs_uid)\n            ? params.ajs_uid[0]\n            : params.ajs_uid;\n        if (uidPattern.test(uid)) {\n            var traits = (0,_pickPrefix__WEBPACK_IMPORTED_MODULE_2__.pickPrefix)('ajs_trait_', params);\n            calls.push(analytics.identify(uid, traits));\n        }\n    }\n    if (ajs_event) {\n        var event_1 = Array.isArray(params.ajs_event)\n            ? params.ajs_event[0]\n            : params.ajs_event;\n        var props = (0,_pickPrefix__WEBPACK_IMPORTED_MODULE_2__.pickPrefix)('ajs_prop_', params);\n        calls.push(analytics.track(event_1, props));\n    }\n    return Promise.all(calls);\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQztBQUNnQztBQUNsQjtBQUNqRDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUZBQTBCO0FBQzNDO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBLGFBQWEsc0VBQWE7QUFDMUI7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdURBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVlcnktc3RyaW5nL2luZGV4LmpzP2MyMTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGlja1ByZWZpeCB9IGZyb20gJy4vcGlja1ByZWZpeCc7XG5pbXBvcnQgeyBncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudCB9IGZyb20gJy4vZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQnO1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCBmdW5jdGlvbiBxdWVyeVN0cmluZyhhbmFseXRpY3MsIHF1ZXJ5KSB7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gcXVlcnk7XG4gICAgdmFyIHBhcnNlZCA9IGEuc2VhcmNoLnNsaWNlKDEpO1xuICAgIHZhciBwYXJhbXMgPSBwYXJzZWQuc3BsaXQoJyYnKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgc3RyKSB7XG4gICAgICAgIHZhciBfYSA9IHN0ci5zcGxpdCgnPScpLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgYWNjW2tdID0gZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQodik7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIHZhciBjYWxscyA9IFtdO1xuICAgIHZhciBhanNfdWlkID0gcGFyYW1zLmFqc191aWQsIGFqc19ldmVudCA9IHBhcmFtcy5hanNfZXZlbnQsIGFqc19haWQgPSBwYXJhbXMuYWpzX2FpZDtcbiAgICB2YXIgX2EgPSBpc1BsYWluT2JqZWN0KGFuYWx5dGljcy5vcHRpb25zLnVzZVF1ZXJ5U3RyaW5nKVxuICAgICAgICA/IGFuYWx5dGljcy5vcHRpb25zLnVzZVF1ZXJ5U3RyaW5nXG4gICAgICAgIDoge30sIF9iID0gX2EuYWlkLCBhaWRQYXR0ZXJuID0gX2IgPT09IHZvaWQgMCA/IC8uKy8gOiBfYiwgX2MgPSBfYS51aWQsIHVpZFBhdHRlcm4gPSBfYyA9PT0gdm9pZCAwID8gLy4rLyA6IF9jO1xuICAgIGlmIChhanNfYWlkKSB7XG4gICAgICAgIHZhciBhbm9uSWQgPSBBcnJheS5pc0FycmF5KHBhcmFtcy5hanNfYWlkKVxuICAgICAgICAgICAgPyBwYXJhbXMuYWpzX2FpZFswXVxuICAgICAgICAgICAgOiBwYXJhbXMuYWpzX2FpZDtcbiAgICAgICAgaWYgKGFpZFBhdHRlcm4udGVzdChhbm9uSWQpKSB7XG4gICAgICAgICAgICBhbmFseXRpY3Muc2V0QW5vbnltb3VzSWQoYW5vbklkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWpzX3VpZCkge1xuICAgICAgICB2YXIgdWlkID0gQXJyYXkuaXNBcnJheShwYXJhbXMuYWpzX3VpZClcbiAgICAgICAgICAgID8gcGFyYW1zLmFqc191aWRbMF1cbiAgICAgICAgICAgIDogcGFyYW1zLmFqc191aWQ7XG4gICAgICAgIGlmICh1aWRQYXR0ZXJuLnRlc3QodWlkKSkge1xuICAgICAgICAgICAgdmFyIHRyYWl0cyA9IHBpY2tQcmVmaXgoJ2Fqc190cmFpdF8nLCBwYXJhbXMpO1xuICAgICAgICAgICAgY2FsbHMucHVzaChhbmFseXRpY3MuaWRlbnRpZnkodWlkLCB0cmFpdHMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWpzX2V2ZW50KSB7XG4gICAgICAgIHZhciBldmVudF8xID0gQXJyYXkuaXNBcnJheShwYXJhbXMuYWpzX2V2ZW50KVxuICAgICAgICAgICAgPyBwYXJhbXMuYWpzX2V2ZW50WzBdXG4gICAgICAgICAgICA6IHBhcmFtcy5hanNfZXZlbnQ7XG4gICAgICAgIHZhciBwcm9wcyA9IHBpY2tQcmVmaXgoJ2Fqc19wcm9wXycsIHBhcmFtcyk7XG4gICAgICAgIGNhbGxzLnB1c2goYW5hbHl0aWNzLnRyYWNrKGV2ZW50XzEsIHByb3BzKSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChjYWxscyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickPrefix: () => (/* binding */ pickPrefix)\n/* harmony export */ });\n/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nfunction pickPrefix(prefix, object) {\n    return Object.keys(object).reduce(function (acc, key) {\n        if (key.startsWith(prefix)) {\n            var field = key.substr(prefix.length);\n            acc[field] = object[key];\n        }\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=pickPrefix.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvcGlja1ByZWZpeC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDhCQUE4QjtBQUM3RCxpQkFBaUI7QUFDakI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3F1ZXJ5LXN0cmluZy9waWNrUHJlZml4LmpzP2U1ZjciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIG9ubHkgdGhlIHByb3BlcnRpZXMgcHJlZml4ZWQgYnkgdGhlIGlucHV0XG4gKiBzdHJpbmcuXG4gKiBFeDogcHJlZml4KCdhanNfdHJhaXRzXycsIHsgYWpzX3RyYWl0c19hZGRyZXNzOiAnMTIzIFN0JyB9KVxuICogd2lsbCByZXR1cm4geyBhZGRyZXNzOiAnMTIzIFN0JyB9XG4gKiovXG5leHBvcnQgZnVuY3Rpb24gcGlja1ByZWZpeChwcmVmaXgsIG9iamVjdCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmplY3QpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGtleS5zdWJzdHIocHJlZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICBhY2NbZmllbGRdID0gb2JqZWN0W2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waWNrUHJlZml4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventQueue: () => (/* binding */ EventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\");\n/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../connection */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n\n\n\n\nvar EventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(EventQueue, _super);\n    function EventQueue(nameOrQueue) {\n        return _super.call(this, typeof nameOrQueue === 'string'\n            ? new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__.PersistedPriorityQueue(4, nameOrQueue)\n            : nameOrQueue) || this;\n    }\n    EventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                if ((0,_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)())\n                    return [2 /*return*/, []];\n                return [2 /*return*/, _super.prototype.flush.call(this)];\n            });\n        });\n    };\n    return EventQueue;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.CoreEventQueue));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWV1ZS9ldmVudC1xdWV1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwRDtBQUNrQjtBQUNuQjtBQUNmO0FBQzFDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSxrQkFBa0IsaUZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLG9CQUFvQixzREFBUztBQUM3QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQyxDQUFDLG1FQUFjO0FBQ007QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzPzIwZjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZCc7XG5pbXBvcnQgeyBDb3JlRXZlbnRRdWV1ZSB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IGlzT2ZmbGluZSB9IGZyb20gJy4uL2Nvbm5lY3Rpb24nO1xudmFyIEV2ZW50UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXZlbnRRdWV1ZShuYW1lT3JRdWV1ZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgdHlwZW9mIG5hbWVPclF1ZXVlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBuZXcgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSg0LCBuYW1lT3JRdWV1ZSlcbiAgICAgICAgICAgIDogbmFtZU9yUXVldWUpIHx8IHRoaXM7XG4gICAgfVxuICAgIEV2ZW50UXVldWUucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzT2ZmbGluZSgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBfc3VwZXIucHJvdG90eXBlLmZsdXNoLmNhbGwodGhpcyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50UXVldWU7XG59KENvcmVFdmVudFF1ZXVlKSk7XG5leHBvcnQgeyBFdmVudFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC1xdWV1ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Stats: () => (/* binding */ Stats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n/* harmony import */ var _remote_metrics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./remote-metrics */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js\");\n\n\n\nvar remoteMetrics;\nvar Stats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Stats, _super);\n    function Stats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Stats.initRemoteMetrics = function (options) {\n        remoteMetrics = new _remote_metrics__WEBPACK_IMPORTED_MODULE_1__.RemoteMetrics(options);\n    };\n    Stats.prototype.increment = function (metric, by, tags) {\n        _super.prototype.increment.call(this, metric, by, tags);\n        remoteMetrics === null || remoteMetrics === void 0 ? void 0 : remoteMetrics.increment(metric, tags !== null && tags !== void 0 ? tags : []);\n    };\n    return Stats;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtDO0FBQ2tCO0FBQ0g7QUFDakQ7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwREFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMsOERBQVM7QUFDTTtBQUNqQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RhdHMvaW5kZXguanM/ZjMwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IENvcmVTdGF0cyB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IFJlbW90ZU1ldHJpY3MgfSBmcm9tICcuL3JlbW90ZS1tZXRyaWNzJztcbnZhciByZW1vdGVNZXRyaWNzO1xudmFyIFN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdGF0cywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTdGF0cy5pbml0UmVtb3RlTWV0cmljcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJlbW90ZU1ldHJpY3MgPSBuZXcgUmVtb3RlTWV0cmljcyhvcHRpb25zKTtcbiAgICB9O1xuICAgIFN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobWV0cmljLCBieSwgdGFncykge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluY3JlbWVudC5jYWxsKHRoaXMsIG1ldHJpYywgYnksIHRhZ3MpO1xuICAgICAgICByZW1vdGVNZXRyaWNzID09PSBudWxsIHx8IHJlbW90ZU1ldHJpY3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlbW90ZU1ldHJpY3MuaW5jcmVtZW50KG1ldHJpYywgdGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB2b2lkIDAgPyB0YWdzIDogW10pO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRzO1xufShDb3JlU3RhdHMpKTtcbmV4cG9ydCB7IFN0YXRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   recordIntegrationMetric: () => (/* binding */ recordIntegrationMetric)\n/* harmony export */ });\nfunction recordIntegrationMetric(ctx, _a) {\n    var methodName = _a.methodName, integrationName = _a.integrationName, type = _a.type, _b = _a.didError, didError = _b === void 0 ? false : _b;\n    ctx.stats.increment(\"analytics_js.integration.invoke\".concat(didError ? '.error' : ''), 1, [\n        \"method:\".concat(methodName),\n        \"integration_name:\".concat(integrationName),\n        \"type:\".concat(type),\n    ]);\n}\n//# sourceMappingURL=metric-helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycy5qcz80MjQxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIF9hKSB7XG4gICAgdmFyIG1ldGhvZE5hbWUgPSBfYS5tZXRob2ROYW1lLCBpbnRlZ3JhdGlvbk5hbWUgPSBfYS5pbnRlZ3JhdGlvbk5hbWUsIHR5cGUgPSBfYS50eXBlLCBfYiA9IF9hLmRpZEVycm9yLCBkaWRFcnJvciA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iO1xuICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoXCJhbmFseXRpY3NfanMuaW50ZWdyYXRpb24uaW52b2tlXCIuY29uY2F0KGRpZEVycm9yID8gJy5lcnJvcicgOiAnJyksIDEsIFtcbiAgICAgICAgXCJtZXRob2Q6XCIuY29uY2F0KG1ldGhvZE5hbWUpLFxuICAgICAgICBcImludGVncmF0aW9uX25hbWU6XCIuY29uY2F0KGludGVncmF0aW9uTmFtZSksXG4gICAgICAgIFwidHlwZTpcIi5jb25jYXQodHlwZSksXG4gICAgXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRyaWMtaGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoteMetrics: () => (/* binding */ RemoteMetrics)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/fetch */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/version-type */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\");\n\n\n\n\n\nvar createRemoteMetric = function (metric, tags, versionType) {\n    var formattedTags = tags.reduce(function (acc, t) {\n        var _a = t.split(':'), k = _a[0], v = _a[1];\n        acc[k] = v;\n        return acc;\n    }, {});\n    return {\n        type: 'Counter',\n        metric: metric,\n        value: 1,\n        tags: (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, formattedTags), { library: 'analytics.js', library_version: versionType === 'web' ? \"next-\".concat(_generated_version__WEBPACK_IMPORTED_MODULE_1__.version) : \"npm:next-\".concat(_generated_version__WEBPACK_IMPORTED_MODULE_1__.version) }),\n    };\n};\nfunction logError(err) {\n    console.error('Error sending segment performance metrics', err);\n}\nvar RemoteMetrics = /** @class */ (function () {\n    function RemoteMetrics(options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        this.host = (_a = options === null || options === void 0 ? void 0 : options.host) !== null && _a !== void 0 ? _a : _constants__WEBPACK_IMPORTED_MODULE_2__.SEGMENT_API_HOST;\n        this.sampleRate = (_b = options === null || options === void 0 ? void 0 : options.sampleRate) !== null && _b !== void 0 ? _b : 1;\n        this.flushTimer = (_c = options === null || options === void 0 ? void 0 : options.flushTimer) !== null && _c !== void 0 ? _c : 30 * 1000; /* 30s */\n        this.maxQueueSize = (_d = options === null || options === void 0 ? void 0 : options.maxQueueSize) !== null && _d !== void 0 ? _d : 20;\n        this.protocol = (_e = options === null || options === void 0 ? void 0 : options.protocol) !== null && _e !== void 0 ? _e : 'https';\n        this.queue = [];\n        if (this.sampleRate > 0) {\n            var flushing_1 = false;\n            var run_1 = function () {\n                if (flushing_1) {\n                    return;\n                }\n                flushing_1 = true;\n                _this.flush().catch(logError);\n                flushing_1 = false;\n                setTimeout(run_1, _this.flushTimer);\n            };\n            run_1();\n        }\n    }\n    RemoteMetrics.prototype.increment = function (metric, tags) {\n        // All metrics are part of an allow list in Tracking API\n        if (!metric.includes('analytics_js.')) {\n            return;\n        }\n        // /m doesn't like empty tags\n        if (tags.length === 0) {\n            return;\n        }\n        if (Math.random() > this.sampleRate) {\n            return;\n        }\n        if (this.queue.length >= this.maxQueueSize) {\n            return;\n        }\n        var remoteMetric = createRemoteMetric(metric, tags, (0,_lib_version_type__WEBPACK_IMPORTED_MODULE_3__.getVersionType)());\n        this.queue.push(remoteMetric);\n        if (metric.includes('error')) {\n            this.flush().catch(logError);\n        }\n    };\n    RemoteMetrics.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length <= 0) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.send().catch(function (error) {\n                                logError(error);\n                                _this.sampleRate = 0;\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    RemoteMetrics.prototype.send = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var payload, headers, url;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                payload = { series: this.queue };\n                this.queue = [];\n                headers = { 'Content-Type': 'text/plain' };\n                url = \"\".concat(this.protocol, \"://\").concat(this.host, \"/m\");\n                return [2 /*return*/, (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_4__.fetch)(url, {\n                        headers: headers,\n                        body: JSON.stringify(payload),\n                        method: 'POST',\n                    })];\n            });\n        });\n    };\n    return RemoteMetrics;\n}());\n\n//# sourceMappingURL=remote-metrics.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9yZW1vdGUtbWV0cmljcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUQ7QUFDakI7QUFDVTtBQUNNO0FBQ1I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsb0JBQW9CLGlGQUFpRix1REFBTyx1QkFBdUIsdURBQU8sR0FBRztBQUMvSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwySEFBMkgsd0RBQWdCO0FBQzNJO0FBQ0Esa0pBQWtKO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUVBQWM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5Qiw0QkFBNEI7QUFDNUI7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQSxzQ0FBc0MsaURBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0YXRzL3JlbW90ZS1tZXRyaWNzLmpzPzRjNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnLi4vLi4vbGliL2ZldGNoJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvdmVyc2lvbic7XG5pbXBvcnQgeyBnZXRWZXJzaW9uVHlwZSB9IGZyb20gJy4uLy4uL2xpYi92ZXJzaW9uLXR5cGUnO1xuaW1wb3J0IHsgU0VHTUVOVF9BUElfSE9TVCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG52YXIgY3JlYXRlUmVtb3RlTWV0cmljID0gZnVuY3Rpb24gKG1ldHJpYywgdGFncywgdmVyc2lvblR5cGUpIHtcbiAgICB2YXIgZm9ybWF0dGVkVGFncyA9IHRhZ3MucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHQpIHtcbiAgICAgICAgdmFyIF9hID0gdC5zcGxpdCgnOicpLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgYWNjW2tdID0gdjtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ0NvdW50ZXInLFxuICAgICAgICBtZXRyaWM6IG1ldHJpYyxcbiAgICAgICAgdmFsdWU6IDEsXG4gICAgICAgIHRhZ3M6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBmb3JtYXR0ZWRUYWdzKSwgeyBsaWJyYXJ5OiAnYW5hbHl0aWNzLmpzJywgbGlicmFyeV92ZXJzaW9uOiB2ZXJzaW9uVHlwZSA9PT0gJ3dlYicgPyBcIm5leHQtXCIuY29uY2F0KHZlcnNpb24pIDogXCJucG06bmV4dC1cIi5jb25jYXQodmVyc2lvbikgfSksXG4gICAgfTtcbn07XG5mdW5jdGlvbiBsb2dFcnJvcihlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHNlZ21lbnQgcGVyZm9ybWFuY2UgbWV0cmljcycsIGVycik7XG59XG52YXIgUmVtb3RlTWV0cmljcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZW1vdGVNZXRyaWNzKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgdGhpcy5ob3N0ID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhvc3QpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFNFR01FTlRfQVBJX0hPU1Q7XG4gICAgICAgIHRoaXMuc2FtcGxlUmF0ZSA9IChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zYW1wbGVSYXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAxO1xuICAgICAgICB0aGlzLmZsdXNoVGltZXIgPSAoX2MgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZmx1c2hUaW1lcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMzAgKiAxMDAwOyAvKiAzMHMgKi9cbiAgICAgICAgdGhpcy5tYXhRdWV1ZVNpemUgPSAoX2QgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWF4UXVldWVTaXplKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAyMDtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IChfZSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wcm90b2NvbCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogJ2h0dHBzJztcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICBpZiAodGhpcy5zYW1wbGVSYXRlID4gMCkge1xuICAgICAgICAgICAgdmFyIGZsdXNoaW5nXzEgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBydW5fMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmx1c2hpbmdfMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZsdXNoaW5nXzEgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmZsdXNoKCkuY2F0Y2gobG9nRXJyb3IpO1xuICAgICAgICAgICAgICAgIGZsdXNoaW5nXzEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bl8xLCBfdGhpcy5mbHVzaFRpbWVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5fMSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJlbW90ZU1ldHJpY3MucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uIChtZXRyaWMsIHRhZ3MpIHtcbiAgICAgICAgLy8gQWxsIG1ldHJpY3MgYXJlIHBhcnQgb2YgYW4gYWxsb3cgbGlzdCBpbiBUcmFja2luZyBBUElcbiAgICAgICAgaWYgKCFtZXRyaWMuaW5jbHVkZXMoJ2FuYWx5dGljc19qcy4nKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIC9tIGRvZXNuJ3QgbGlrZSBlbXB0eSB0YWdzXG4gICAgICAgIGlmICh0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gdGhpcy5zYW1wbGVSYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID49IHRoaXMubWF4UXVldWVTaXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbW90ZU1ldHJpYyA9IGNyZWF0ZVJlbW90ZU1ldHJpYyhtZXRyaWMsIHRhZ3MsIGdldFZlcnNpb25UeXBlKCkpO1xuICAgICAgICB0aGlzLnF1ZXVlLnB1c2gocmVtb3RlTWV0cmljKTtcbiAgICAgICAgaWYgKG1ldHJpYy5pbmNsdWRlcygnZXJyb3InKSkge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpLmNhdGNoKGxvZ0Vycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVtb3RlTWV0cmljcy5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2VuZCgpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNhbXBsZVJhdGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlbW90ZU1ldHJpY3MucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkLCBoZWFkZXJzLCB1cmw7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZCA9IHsgc2VyaWVzOiB0aGlzLnF1ZXVlIH07XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbicgfTtcbiAgICAgICAgICAgICAgICB1cmwgPSBcIlwiLmNvbmNhdCh0aGlzLnByb3RvY29sLCBcIjovL1wiKS5jb25jYXQodGhpcy5ob3N0LCBcIi9tXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVtb3RlTWV0cmljcztcbn0oKSk7XG5leHBvcnQgeyBSZW1vdGVNZXRyaWNzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW1vdGUtbWV0cmljcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CookieStorage: () => (/* binding */ CookieStorage)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(ssr)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _user_tld__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user/tld */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\");\n\n\n\nvar ONE_YEAR = 365;\n/**\n * Data storage using browser cookies\n */\nvar CookieStorage = /** @class */ (function () {\n    function CookieStorage(options) {\n        if (options === void 0) { options = CookieStorage.defaults; }\n        this.options = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, CookieStorage.defaults), options);\n    }\n    Object.defineProperty(CookieStorage, \"defaults\", {\n        get: function () {\n            return {\n                maxage: ONE_YEAR,\n                domain: (0,_user_tld__WEBPACK_IMPORTED_MODULE_2__.tld)(window.location.href),\n                path: '/',\n                sameSite: 'Lax',\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CookieStorage.prototype.opts = function () {\n        return {\n            sameSite: this.options.sameSite,\n            expires: this.options.maxage,\n            domain: this.options.domain,\n            path: this.options.path,\n            secure: this.options.secure,\n        };\n    };\n    CookieStorage.prototype.get = function (key) {\n        var _a;\n        try {\n            var value = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(key);\n            if (value === undefined || value === null) {\n                return null;\n            }\n            try {\n                return (_a = JSON.parse(value)) !== null && _a !== void 0 ? _a : null;\n            }\n            catch (e) {\n                return (value !== null && value !== void 0 ? value : null);\n            }\n        }\n        catch (e) {\n            return null;\n        }\n    };\n    CookieStorage.prototype.set = function (key, value) {\n        if (typeof value === 'string') {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(key, value, this.opts());\n        }\n        else if (value === null) {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(key, this.opts());\n        }\n        else {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(key, JSON.stringify(value), this.opts());\n        }\n    };\n    CookieStorage.prototype.remove = function (key) {\n        return js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(key, this.opts());\n    };\n    return CookieStorage;\n}());\n\n//# sourceMappingURL=cookieStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2Nvb2tpZVN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNMO0FBQ007QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLHVCQUF1QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaURBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFHO0FBQ2Y7QUFDQTtBQUNBLFlBQVksaURBQUc7QUFDZjtBQUNBO0FBQ0EsWUFBWSxpREFBRztBQUNmO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaURBQUc7QUFDbEI7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvY29va2llU3RvcmFnZS5qcz8yNTY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgamFyIGZyb20gJ2pzLWNvb2tpZSc7XG5pbXBvcnQgeyB0bGQgfSBmcm9tICcuLi91c2VyL3RsZCc7XG52YXIgT05FX1lFQVIgPSAzNjU7XG4vKipcbiAqIERhdGEgc3RvcmFnZSB1c2luZyBicm93c2VyIGNvb2tpZXNcbiAqL1xudmFyIENvb2tpZVN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29va2llU3RvcmFnZShvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IENvb2tpZVN0b3JhZ2UuZGVmYXVsdHM7IH1cbiAgICAgICAgdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIENvb2tpZVN0b3JhZ2UuZGVmYXVsdHMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvb2tpZVN0b3JhZ2UsIFwiZGVmYXVsdHNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWF4YWdlOiBPTkVfWUVBUixcbiAgICAgICAgICAgICAgICBkb21haW46IHRsZCh3aW5kb3cubG9jYXRpb24uaHJlZiksXG4gICAgICAgICAgICAgICAgcGF0aDogJy8nLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiAnTGF4JyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb29raWVTdG9yYWdlLnByb3RvdHlwZS5vcHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2FtZVNpdGU6IHRoaXMub3B0aW9ucy5zYW1lU2l0ZSxcbiAgICAgICAgICAgIGV4cGlyZXM6IHRoaXMub3B0aW9ucy5tYXhhZ2UsXG4gICAgICAgICAgICBkb21haW46IHRoaXMub3B0aW9ucy5kb21haW4sXG4gICAgICAgICAgICBwYXRoOiB0aGlzLm9wdGlvbnMucGF0aCxcbiAgICAgICAgICAgIHNlY3VyZTogdGhpcy5vcHRpb25zLnNlY3VyZSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvb2tpZVN0b3JhZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gamFyLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IEpTT04ucGFyc2UodmFsdWUpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDAgPyB2YWx1ZSA6IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29va2llU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGphci5zZXQoa2V5LCB2YWx1ZSwgdGhpcy5vcHRzKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBqYXIucmVtb3ZlKGtleSwgdGhpcy5vcHRzKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgamFyLnNldChrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgdGhpcy5vcHRzKCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb29raWVTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBqYXIucmVtb3ZlKGtleSwgdGhpcy5vcHRzKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIENvb2tpZVN0b3JhZ2U7XG59KCkpO1xuZXhwb3J0IHsgQ29va2llU3RvcmFnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29va2llU3RvcmFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CookieStorage: () => (/* reexport safe */ _cookieStorage__WEBPACK_IMPORTED_MODULE_2__.CookieStorage),\n/* harmony export */   LocalStorage: () => (/* reexport safe */ _localStorage__WEBPACK_IMPORTED_MODULE_1__.LocalStorage),\n/* harmony export */   MemoryStorage: () => (/* reexport safe */ _memoryStorage__WEBPACK_IMPORTED_MODULE_3__.MemoryStorage),\n/* harmony export */   StoreType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_0__.StoreType),\n/* harmony export */   UniversalStorage: () => (/* reexport safe */ _universalStorage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage),\n/* harmony export */   applyCookieOptions: () => (/* binding */ applyCookieOptions),\n/* harmony export */   initializeStorages: () => (/* binding */ initializeStorages),\n/* harmony export */   isArrayOfStoreType: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_5__.isArrayOfStoreType),\n/* harmony export */   isStoreTypeWithSettings: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_5__.isStoreTypeWithSettings)\n/* harmony export */ });\n/* harmony import */ var _cookieStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cookieStorage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\");\n/* harmony import */ var _localStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localStorage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js\");\n/* harmony import */ var _memoryStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./memoryStorage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _universalStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./universalStorage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nfunction initializeStorages(args) {\n    var storages = args.map(function (s) {\n        var type;\n        var settings;\n        if ((0,_settings__WEBPACK_IMPORTED_MODULE_5__.isStoreTypeWithSettings)(s)) {\n            type = s.name;\n            settings = s.settings;\n        }\n        else {\n            type = s;\n        }\n        switch (type) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Cookie:\n                return new _cookieStorage__WEBPACK_IMPORTED_MODULE_2__.CookieStorage(settings);\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.LocalStorage:\n                return new _localStorage__WEBPACK_IMPORTED_MODULE_1__.LocalStorage();\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Memory:\n                return new _memoryStorage__WEBPACK_IMPORTED_MODULE_3__.MemoryStorage();\n            default:\n                throw new Error(\"Unknown Store Type: \".concat(s));\n        }\n    });\n    return storages;\n}\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nfunction applyCookieOptions(storeTypes, cookieOptions) {\n    return storeTypes.map(function (s) {\n        if (cookieOptions && s === _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Cookie) {\n            return {\n                name: s,\n                settings: cookieOptions,\n            };\n        }\n        return s;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNGO0FBQ0U7QUFDSztBQUNqQjtBQUNaO0FBQ087QUFDQztBQUNBO0FBQ0c7QUFDUjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtFQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2Q0FBUztBQUMxQiwyQkFBMkIseURBQWE7QUFDeEMsaUJBQWlCLDZDQUFTO0FBQzFCLDJCQUEyQix1REFBWTtBQUN2QyxpQkFBaUIsNkNBQVM7QUFDMUIsMkJBQTJCLHlEQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLG1DQUFtQyw2Q0FBUztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9pbmRleC5qcz82ZmQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvb2tpZVN0b3JhZ2UgfSBmcm9tICcuL2Nvb2tpZVN0b3JhZ2UnO1xuaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSAnLi9sb2NhbFN0b3JhZ2UnO1xuaW1wb3J0IHsgTWVtb3J5U3RvcmFnZSB9IGZyb20gJy4vbWVtb3J5U3RvcmFnZSc7XG5pbXBvcnQgeyBpc1N0b3JlVHlwZVdpdGhTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgU3RvcmVUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCAqIGZyb20gJy4vbG9jYWxTdG9yYWdlJztcbmV4cG9ydCAqIGZyb20gJy4vY29va2llU3RvcmFnZSc7XG5leHBvcnQgKiBmcm9tICcuL21lbW9yeVN0b3JhZ2UnO1xuZXhwb3J0ICogZnJvbSAnLi91bml2ZXJzYWxTdG9yYWdlJztcbmV4cG9ydCAqIGZyb20gJy4vc2V0dGluZ3MnO1xuLyoqXG4gKiBDcmVhdGVzIG11bHRpcGxlIHN0b3JhZ2Ugc3lzdGVtcyBmcm9tIGFuIGFycmF5IG9mIFN0b3JlVHlwZSBhbmQgb3B0aW9uc1xuICogQHBhcmFtIGFyZ3MgU3RvcmVUeXBlIGFuZCBvcHRpb25zXG4gKiBAcmV0dXJucyBTdG9yYWdlIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplU3RvcmFnZXMoYXJncykge1xuICAgIHZhciBzdG9yYWdlcyA9IGFyZ3MubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciB0eXBlO1xuICAgICAgICB2YXIgc2V0dGluZ3M7XG4gICAgICAgIGlmIChpc1N0b3JlVHlwZVdpdGhTZXR0aW5ncyhzKSkge1xuICAgICAgICAgICAgdHlwZSA9IHMubmFtZTtcbiAgICAgICAgICAgIHNldHRpbmdzID0gcy5zZXR0aW5ncztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHR5cGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdG9yZVR5cGUuQ29va2llOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29va2llU3RvcmFnZShzZXR0aW5ncyk7XG4gICAgICAgICAgICBjYXNlIFN0b3JlVHlwZS5Mb2NhbFN0b3JhZ2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgICAgIGNhc2UgU3RvcmVUeXBlLk1lbW9yeTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVN0b3JhZ2UoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBTdG9yZSBUeXBlOiBcIi5jb25jYXQocykpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0b3JhZ2VzO1xufVxuLyoqXG4gKiBJbmplY3RzIHRoZSBDb29raWVPcHRpb25zIGludG8gYSB0aGUgYXJndW1lbnRzIGZvciBpbml0aWFsaXplU3RvcmFnZVxuICogQHBhcmFtIHN0b3JlVHlwZXMgbGlzdCBvZiBzdG9yZVR5cGVcbiAqIEBwYXJhbSBjb29raWVPcHRpb25zIGNvb2tpZSBPcHRpb25zXG4gKiBAcmV0dXJucyBhcmd1bWVudHMgZm9yIGluaXRpYWxpemVTdG9yYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUNvb2tpZU9wdGlvbnMoc3RvcmVUeXBlcywgY29va2llT3B0aW9ucykge1xuICAgIHJldHVybiBzdG9yZVR5cGVzLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICBpZiAoY29va2llT3B0aW9ucyAmJiBzID09PSBTdG9yZVR5cGUuQ29va2llKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHMsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IGNvb2tpZU9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalStorage: () => (/* binding */ LocalStorage)\n/* harmony export */ });\n/**\n * Data storage using browser's localStorage\n */\nvar LocalStorage = /** @class */ (function () {\n    function LocalStorage() {\n    }\n    LocalStorage.prototype.localStorageWarning = function (key, state) {\n        console.warn(\"Unable to access \".concat(key, \", localStorage may be \").concat(state));\n    };\n    LocalStorage.prototype.get = function (key) {\n        var _a;\n        try {\n            var val = localStorage.getItem(key);\n            if (val === null) {\n                return null;\n            }\n            try {\n                return (_a = JSON.parse(val)) !== null && _a !== void 0 ? _a : null;\n            }\n            catch (e) {\n                return (val !== null && val !== void 0 ? val : null);\n            }\n        }\n        catch (err) {\n            this.localStorageWarning(key, 'unavailable');\n            return null;\n        }\n    };\n    LocalStorage.prototype.set = function (key, value) {\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n        }\n        catch (_a) {\n            this.localStorageWarning(key, 'full');\n        }\n    };\n    LocalStorage.prototype.remove = function (key) {\n        try {\n            return localStorage.removeItem(key);\n        }\n        catch (err) {\n            this.localStorageWarning(key, 'unavailable');\n        }\n    };\n    return LocalStorage;\n}());\n\n//# sourceMappingURL=localStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2xvY2FsU3RvcmFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN1QjtBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9sb2NhbFN0b3JhZ2UuanM/Y2IyMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhdGEgc3RvcmFnZSB1c2luZyBicm93c2VyJ3MgbG9jYWxTdG9yYWdlXG4gKi9cbnZhciBMb2NhbFN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9jYWxTdG9yYWdlKCkge1xuICAgIH1cbiAgICBMb2NhbFN0b3JhZ2UucHJvdG90eXBlLmxvY2FsU3RvcmFnZVdhcm5pbmcgPSBmdW5jdGlvbiAoa2V5LCBzdGF0ZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gYWNjZXNzIFwiLmNvbmNhdChrZXksIFwiLCBsb2NhbFN0b3JhZ2UgbWF5IGJlIFwiKS5jb25jYXQoc3RhdGUpKTtcbiAgICB9O1xuICAgIExvY2FsU3RvcmFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IEpTT04ucGFyc2UodmFsKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWwgIT09IG51bGwgJiYgdmFsICE9PSB2b2lkIDAgPyB2YWwgOiBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmFnZVdhcm5pbmcoa2V5LCAndW5hdmFpbGFibGUnKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMb2NhbFN0b3JhZ2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmFnZVdhcm5pbmcoa2V5LCAnZnVsbCcpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMb2NhbFN0b3JhZ2UucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yYWdlV2FybmluZyhrZXksICd1bmF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTG9jYWxTdG9yYWdlO1xufSgpKTtcbmV4cG9ydCB7IExvY2FsU3RvcmFnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9jYWxTdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MemoryStorage: () => (/* binding */ MemoryStorage)\n/* harmony export */ });\n/**\n * Data Storage using in memory object\n */\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n        this.cache = {};\n    }\n    MemoryStorage.prototype.get = function (key) {\n        var _a;\n        return ((_a = this.cache[key]) !== null && _a !== void 0 ? _a : null);\n    };\n    MemoryStorage.prototype.set = function (key, value) {\n        this.cache[key] = value;\n    };\n    MemoryStorage.prototype.remove = function (key) {\n        delete this.cache[key];\n    };\n    return MemoryStorage;\n}());\n\n//# sourceMappingURL=memoryStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL21lbW9yeVN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvbWVtb3J5U3RvcmFnZS5qcz8zOTFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YSBTdG9yYWdlIHVzaW5nIGluIG1lbW9yeSBvYmplY3RcbiAqL1xudmFyIE1lbW9yeVN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVtb3J5U3RvcmFnZSgpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgIH1cbiAgICBNZW1vcnlTdG9yYWdlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmNhY2hlW2tleV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGwpO1xuICAgIH07XG4gICAgTWVtb3J5U3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgICBNZW1vcnlTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlW2tleV07XG4gICAgfTtcbiAgICByZXR1cm4gTWVtb3J5U3RvcmFnZTtcbn0oKSk7XG5leHBvcnQgeyBNZW1vcnlTdG9yYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZW1vcnlTdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isArrayOfStoreType: () => (/* binding */ isArrayOfStoreType),\n/* harmony export */   isStoreTypeWithSettings: () => (/* binding */ isStoreTypeWithSettings)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n\nfunction isArrayOfStoreType(s) {\n    return (s &&\n        s.stores &&\n        Array.isArray(s.stores) &&\n        s.stores.every(function (e) { return Object.values(_types__WEBPACK_IMPORTED_MODULE_0__.StoreType).includes(e); }));\n}\nfunction isStoreTypeWithSettings(s) {\n    return typeof s === 'object' && s.name !== undefined;\n}\n//# sourceMappingURL=settings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3NldHRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvQztBQUM3QjtBQUNQO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQkFBcUIsNkNBQVMsZ0JBQWdCO0FBQ3BGO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2Uvc2V0dGluZ3MuanM/YTdjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9yZVR5cGUgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5T2ZTdG9yZVR5cGUocykge1xuICAgIHJldHVybiAocyAmJlxuICAgICAgICBzLnN0b3JlcyAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHMuc3RvcmVzKSAmJlxuICAgICAgICBzLnN0b3Jlcy5ldmVyeShmdW5jdGlvbiAoZSkgeyByZXR1cm4gT2JqZWN0LnZhbHVlcyhTdG9yZVR5cGUpLmluY2x1ZGVzKGUpOyB9KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTdG9yZVR5cGVXaXRoU2V0dGluZ3Mocykge1xuICAgIHJldHVybiB0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5uYW1lICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXR0aW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreType: () => (/* binding */ StoreType)\n/* harmony export */ });\nvar StoreType = {\n    Cookie: 'cookie',\n    LocalStorage: 'localStorage',\n    Memory: 'memory',\n};\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3R5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvdHlwZXMuanM/MDI0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdmFyIFN0b3JlVHlwZSA9IHtcbiAgICBDb29raWU6ICdjb29raWUnLFxuICAgIExvY2FsU3RvcmFnZTogJ2xvY2FsU3RvcmFnZScsXG4gICAgTWVtb3J5OiAnbWVtb3J5Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UniversalStorage: () => (/* binding */ UniversalStorage)\n/* harmony export */ });\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nvar _logStoreKeyError = function (store, action, key, err) {\n    console.warn(\"\".concat(store.constructor.name, \": Can't \").concat(action, \" key \\\"\").concat(key, \"\\\" | Err: \").concat(err));\n};\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nvar UniversalStorage = /** @class */ (function () {\n    function UniversalStorage(stores) {\n        this.stores = stores;\n    }\n    UniversalStorage.prototype.get = function (key) {\n        var val = null;\n        for (var _i = 0, _a = this.stores; _i < _a.length; _i++) {\n            var store = _a[_i];\n            try {\n                val = store.get(key);\n                if (val !== undefined && val !== null) {\n                    return val;\n                }\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'get', key, e);\n            }\n        }\n        return null;\n    };\n    UniversalStorage.prototype.set = function (key, value) {\n        this.stores.forEach(function (store) {\n            try {\n                store.set(key, value);\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'set', key, e);\n            }\n        });\n    };\n    UniversalStorage.prototype.clear = function (key) {\n        this.stores.forEach(function (store) {\n            try {\n                store.remove(key);\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'remove', key, e);\n            }\n        });\n    };\n    /*\n      This is to support few scenarios where:\n      - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n      - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n    */\n    UniversalStorage.prototype.getAndSync = function (key) {\n        var val = this.get(key);\n        // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n        var coercedValue = (typeof val === 'number' ? val.toString() : val);\n        this.set(key, coercedValue);\n        return coercedValue;\n    };\n    return UniversalStorage;\n}());\n\n//# sourceMappingURL=universalStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3VuaXZlcnNhbFN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdCQUFnQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3VuaXZlcnNhbFN0b3JhZ2UuanM/YTY0NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBub3QgYWRkaW5nIHRvIHByaXZhdGUgbWV0aG9kIGJlY2F1c2UgdGhvc2UgbWV0aG9kIG5hbWVzIGRvIG5vdCBnZXQgbWluaWZpZWQgYXRtLCBhbmQgZG9lcyBub3QgdXNlICd0aGlzJ1xudmFyIF9sb2dTdG9yZUtleUVycm9yID0gZnVuY3Rpb24gKHN0b3JlLCBhY3Rpb24sIGtleSwgZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFwiXCIuY29uY2F0KHN0b3JlLmNvbnN0cnVjdG9yLm5hbWUsIFwiOiBDYW4ndCBcIikuY29uY2F0KGFjdGlvbiwgXCIga2V5IFxcXCJcIikuY29uY2F0KGtleSwgXCJcXFwiIHwgRXJyOiBcIikuY29uY2F0KGVycikpO1xufTtcbi8qKlxuICogVXNlcyBtdWx0aXBsZSBzdG9yYWdlcyBpbiBhIHByaW9yaXR5IGxpc3QgdG8gZ2V0L3NldCB2YWx1ZXMgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIHNwZWNpZmllZC5cbiAqL1xudmFyIFVuaXZlcnNhbFN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVW5pdmVyc2FsU3RvcmFnZShzdG9yZXMpIHtcbiAgICAgICAgdGhpcy5zdG9yZXMgPSBzdG9yZXM7XG4gICAgfVxuICAgIFVuaXZlcnNhbFN0b3JhZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN0b3JlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IF9hW19pXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsID0gc3RvcmUuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgX2xvZ1N0b3JlS2V5RXJyb3Ioc3RvcmUsICdnZXQnLCBrZXksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgVW5pdmVyc2FsU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdG9yZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RvcmUuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfbG9nU3RvcmVLZXlFcnJvcihzdG9yZSwgJ3NldCcsIGtleSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVW5pdmVyc2FsU3RvcmFnZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRoaXMuc3RvcmVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0b3JlLnJlbW92ZShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfbG9nU3RvcmVLZXlFcnJvcihzdG9yZSwgJ3JlbW92ZScsIGtleSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLypcbiAgICAgIFRoaXMgaXMgdG8gc3VwcG9ydCBmZXcgc2NlbmFyaW9zIHdoZXJlOlxuICAgICAgLSB2YWx1ZSBleGlzdCBpbiBvbmUgb2YgdGhlIHN0b3JlcyAoIGFzIGEgcmVzdWx0IG9mIG90aGVyIHN0b3JlcyBiZWluZyBjbGVhcmVkIGZyb20gYnJvd3NlciApIGFuZCB3ZSB3YW50IHRvIHJlc3luYyB0aGVtXG4gICAgICAtIHJlYWQgdmFsdWVzIGluIEFKUyAxLjAgZm9ybWF0ICggZm9yIGN1c3RvbWVycyBhZnRlciAxLjAgLS0+IDIuMCBtaWdyYXRpb24gKSBhbmQgdGhlbiByZS13cml0ZSB0aGVtIGluIEFKUyAyLjAgZm9ybWF0XG4gICAgKi9cbiAgICBVbml2ZXJzYWxTdG9yYWdlLnByb3RvdHlwZS5nZXRBbmRTeW5jID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5nZXQoa2V5KTtcbiAgICAgICAgLy8gbGVnYWN5IGJlaGF2aW9yLCBnZXRBbmRTeW5jIGNhbiBjaGFuZ2UgdGhlIHR5cGUgb2YgYSB2YWx1ZSBmcm9tIG51bWJlciB0byBzdHJpbmcgKEFKUyAxLjAgc3RvcmVzIG51bWVyaWNhbCB2YWx1ZXMgYXMgYSBudW1iZXIpXG4gICAgICAgIHZhciBjb2VyY2VkVmFsdWUgPSAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicgPyB2YWwudG9TdHJpbmcoKSA6IHZhbCk7XG4gICAgICAgIHRoaXMuc2V0KGtleSwgY29lcmNlZFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvZXJjZWRWYWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiBVbml2ZXJzYWxTdG9yYWdlO1xufSgpKTtcbmV4cG9ydCB7IFVuaXZlcnNhbFN0b3JhZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaXZlcnNhbFN0b3JhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group: () => (/* binding */ Group),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var _lib_bind_all__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/bind-all */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\");\n\n\n\n\nvar defaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_user_id',\n        oldKey: 'ajs_user',\n    },\n    localStorage: {\n        key: 'ajs_user_traits',\n    },\n};\nvar User = /** @class */ (function () {\n    function User(options, cookieOptions) {\n        if (options === void 0) { options = defaults; }\n        var _this = this;\n        var _a, _b, _c, _d;\n        this.options = {};\n        this.id = function (id) {\n            if (_this.options.disable) {\n                return null;\n            }\n            var prevId = _this.identityStore.getAndSync(_this.idKey);\n            if (id !== undefined) {\n                _this.identityStore.set(_this.idKey, id);\n                var changingIdentity = id !== prevId && prevId !== null && id !== null;\n                if (changingIdentity) {\n                    _this.anonymousId(null);\n                }\n            }\n            var retId = _this.identityStore.getAndSync(_this.idKey);\n            if (retId)\n                return retId;\n            var retLeg = _this.legacyUserStore.get(defaults.cookie.oldKey);\n            return retLeg ? (typeof retLeg === 'object' ? retLeg.id : retLeg) : null;\n        };\n        this.anonymousId = function (id) {\n            var _a, _b;\n            if (_this.options.disable) {\n                return null;\n            }\n            if (id === undefined) {\n                var val = (_a = _this.identityStore.getAndSync(_this.anonKey)) !== null && _a !== void 0 ? _a : (_b = _this.legacySIO()) === null || _b === void 0 ? void 0 : _b[0];\n                if (val) {\n                    return val;\n                }\n            }\n            if (id === null) {\n                _this.identityStore.set(_this.anonKey, null);\n                return _this.identityStore.getAndSync(_this.anonKey);\n            }\n            _this.identityStore.set(_this.anonKey, id !== null && id !== void 0 ? id : (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)());\n            return _this.identityStore.getAndSync(_this.anonKey);\n        };\n        this.traits = function (traits) {\n            var _a;\n            if (_this.options.disable) {\n                return;\n            }\n            if (traits === null) {\n                traits = {};\n            }\n            if (traits) {\n                _this.traitsStore.set(_this.traitsKey, traits !== null && traits !== void 0 ? traits : {});\n            }\n            return (_a = _this.traitsStore.get(_this.traitsKey)) !== null && _a !== void 0 ? _a : {};\n        };\n        this.options = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, defaults), options);\n        this.cookieOptions = cookieOptions;\n        this.idKey = (_b = (_a = options.cookie) === null || _a === void 0 ? void 0 : _a.key) !== null && _b !== void 0 ? _b : defaults.cookie.key;\n        this.traitsKey = (_d = (_c = options.localStorage) === null || _c === void 0 ? void 0 : _c.key) !== null && _d !== void 0 ? _d : defaults.localStorage.key;\n        this.anonKey = 'ajs_anonymous_id';\n        this.identityStore = this.createStorage(this.options, cookieOptions);\n        // using only cookies for legacy user store\n        this.legacyUserStore = this.createStorage(this.options, cookieOptions, function (s) { return s === _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie; });\n        // using only localStorage / memory for traits store\n        this.traitsStore = this.createStorage(this.options, cookieOptions, function (s) { return s !== _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie; });\n        var legacyUser = this.legacyUserStore.get(defaults.cookie.oldKey);\n        if (legacyUser && typeof legacyUser === 'object') {\n            legacyUser.id && this.id(legacyUser.id);\n            legacyUser.traits && this.traits(legacyUser.traits);\n        }\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this);\n    }\n    User.prototype.legacySIO = function () {\n        var val = this.legacyUserStore.get('_sio');\n        if (!val) {\n            return null;\n        }\n        var _a = val.split('----'), anon = _a[0], user = _a[1];\n        return [anon, user];\n    };\n    User.prototype.identify = function (id, traits) {\n        if (this.options.disable) {\n            return;\n        }\n        traits = traits !== null && traits !== void 0 ? traits : {};\n        var currentId = this.id();\n        if (currentId === null || currentId === id) {\n            traits = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.traits()), traits);\n        }\n        if (id) {\n            this.id(id);\n        }\n        this.traits(traits);\n    };\n    User.prototype.logout = function () {\n        this.anonymousId(null);\n        this.id(null);\n        this.traits({});\n    };\n    User.prototype.reset = function () {\n        this.logout();\n        this.identityStore.clear(this.idKey);\n        this.identityStore.clear(this.anonKey);\n        this.traitsStore.clear(this.traitsKey);\n    };\n    User.prototype.load = function () {\n        return new User(this.options, this.cookieOptions);\n    };\n    User.prototype.save = function () {\n        return true;\n    };\n    /**\n     * Creates the right storage system applying all the user options, cookie options and particular filters\n     * @param options UserOptions\n     * @param cookieOpts CookieOptions\n     * @param filterStores filter function to apply to any StoreTypes (skipped if options specify using a custom storage)\n     * @returns a Storage object\n     */\n    User.prototype.createStorage = function (options, cookieOpts, filterStores) {\n        var stores = [\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.LocalStorage,\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie,\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Memory,\n        ];\n        // If disabled we won't have any storage functionality\n        if (options.disable) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage([]);\n        }\n        // If persistance is disabled we will always fallback to Memory Storage\n        if (!options.persist) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage([new _storage__WEBPACK_IMPORTED_MODULE_5__.MemoryStorage()]);\n        }\n        if (options.storage !== undefined && options.storage !== null) {\n            if ((0,_storage__WEBPACK_IMPORTED_MODULE_6__.isArrayOfStoreType)(options.storage)) {\n                // If the user only specified order of stores we will still apply filters and transformations e.g. not using localStorage if localStorageFallbackDisabled\n                stores = options.storage.stores;\n            }\n        }\n        // Disable LocalStorage\n        if (options.localStorageFallbackDisabled) {\n            stores = stores.filter(function (s) { return s !== _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.LocalStorage; });\n        }\n        // Apply Additional filters\n        if (filterStores) {\n            stores = stores.filter(filterStores);\n        }\n        return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_7__.initializeStorages)((0,_storage__WEBPACK_IMPORTED_MODULE_7__.applyCookieOptions)(stores, cookieOpts)));\n    };\n    User.defaults = defaults;\n    return User;\n}());\n\nvar groupDefaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_group_id',\n    },\n    localStorage: {\n        key: 'ajs_group_properties',\n    },\n};\nvar Group = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(Group, _super);\n    function Group(options, cookie) {\n        if (options === void 0) { options = groupDefaults; }\n        var _this = _super.call(this, (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, groupDefaults), options), cookie) || this;\n        _this.anonymousId = function (_id) {\n            return undefined;\n        };\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this);\n        return _this;\n    }\n    return Group;\n}(User));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS91c2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDRjtBQUNBO0FBQzJGO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLGdEQUFJO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5R0FBeUc7QUFDekc7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsYUFBYSwrQ0FBUyxVQUFVO0FBQzlIO0FBQ0EsMEZBQTBGLGFBQWEsK0NBQVMsVUFBVTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQ0FBUztBQUNyQixZQUFZLCtDQUFTO0FBQ3JCLFlBQVksK0NBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQWdCLE1BQU0sbURBQWE7QUFDMUQ7QUFDQTtBQUNBLGdCQUFnQiw0REFBa0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGFBQWEsK0NBQVMsZ0JBQWdCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQWdCLENBQUMsNERBQWtCLENBQUMsNERBQWtCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDZTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQSxrQ0FBa0M7QUFDbEMsc0NBQXNDLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMxRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDZ0I7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3VzZXIvaW5kZXguanM/M2Y1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAnQGx1a2VlZC91dWlkJztcbmltcG9ydCBhdXRvQmluZCBmcm9tICcuLi8uLi9saWIvYmluZC1hbGwnO1xuaW1wb3J0IHsgVW5pdmVyc2FsU3RvcmFnZSwgTWVtb3J5U3RvcmFnZSwgU3RvcmVUeXBlLCBhcHBseUNvb2tpZU9wdGlvbnMsIGluaXRpYWxpemVTdG9yYWdlcywgaXNBcnJheU9mU3RvcmVUeXBlLCB9IGZyb20gJy4uL3N0b3JhZ2UnO1xudmFyIGRlZmF1bHRzID0ge1xuICAgIHBlcnNpc3Q6IHRydWUsXG4gICAgY29va2llOiB7XG4gICAgICAgIGtleTogJ2Fqc191c2VyX2lkJyxcbiAgICAgICAgb2xkS2V5OiAnYWpzX3VzZXInLFxuICAgIH0sXG4gICAgbG9jYWxTdG9yYWdlOiB7XG4gICAgICAgIGtleTogJ2Fqc191c2VyX3RyYWl0cycsXG4gICAgfSxcbn07XG52YXIgVXNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVc2VyKG9wdGlvbnMsIGNvb2tpZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gZGVmYXVsdHM7IH1cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5pZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZJZCA9IF90aGlzLmlkZW50aXR5U3RvcmUuZ2V0QW5kU3luYyhfdGhpcy5pZEtleSk7XG4gICAgICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmlkZW50aXR5U3RvcmUuc2V0KF90aGlzLmlkS2V5LCBpZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5naW5nSWRlbnRpdHkgPSBpZCAhPT0gcHJldklkICYmIHByZXZJZCAhPT0gbnVsbCAmJiBpZCAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdpbmdJZGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbm9ueW1vdXNJZChudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmV0SWQgPSBfdGhpcy5pZGVudGl0eVN0b3JlLmdldEFuZFN5bmMoX3RoaXMuaWRLZXkpO1xuICAgICAgICAgICAgaWYgKHJldElkKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRJZDtcbiAgICAgICAgICAgIHZhciByZXRMZWcgPSBfdGhpcy5sZWdhY3lVc2VyU3RvcmUuZ2V0KGRlZmF1bHRzLmNvb2tpZS5vbGRLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHJldExlZyA/ICh0eXBlb2YgcmV0TGVnID09PSAnb2JqZWN0JyA/IHJldExlZy5pZCA6IHJldExlZykgOiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFub255bW91c0lkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gKF9hID0gX3RoaXMuaWRlbnRpdHlTdG9yZS5nZXRBbmRTeW5jKF90aGlzLmFub25LZXkpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSBfdGhpcy5sZWdhY3lTSU8oKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iWzBdO1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pZGVudGl0eVN0b3JlLnNldChfdGhpcy5hbm9uS2V5LCBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaWRlbnRpdHlTdG9yZS5nZXRBbmRTeW5jKF90aGlzLmFub25LZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuaWRlbnRpdHlTdG9yZS5zZXQoX3RoaXMuYW5vbktleSwgaWQgIT09IG51bGwgJiYgaWQgIT09IHZvaWQgMCA/IGlkIDogdXVpZCgpKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pZGVudGl0eVN0b3JlLmdldEFuZFN5bmMoX3RoaXMuYW5vbktleSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhaXRzID0gZnVuY3Rpb24gKHRyYWl0cykge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFpdHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0cmFpdHMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFpdHMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy50cmFpdHNTdG9yZS5zZXQoX3RoaXMudHJhaXRzS2V5LCB0cmFpdHMgIT09IG51bGwgJiYgdHJhaXRzICE9PSB2b2lkIDAgPyB0cmFpdHMgOiB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKF9hID0gX3RoaXMudHJhaXRzU3RvcmUuZ2V0KF90aGlzLnRyYWl0c0tleSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGVmYXVsdHMpLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb29raWVPcHRpb25zID0gY29va2llT3B0aW9ucztcbiAgICAgICAgdGhpcy5pZEtleSA9IChfYiA9IChfYSA9IG9wdGlvbnMuY29va2llKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eua2V5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBkZWZhdWx0cy5jb29raWUua2V5O1xuICAgICAgICB0aGlzLnRyYWl0c0tleSA9IChfZCA9IChfYyA9IG9wdGlvbnMubG9jYWxTdG9yYWdlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Mua2V5KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBkZWZhdWx0cy5sb2NhbFN0b3JhZ2Uua2V5O1xuICAgICAgICB0aGlzLmFub25LZXkgPSAnYWpzX2Fub255bW91c19pZCc7XG4gICAgICAgIHRoaXMuaWRlbnRpdHlTdG9yZSA9IHRoaXMuY3JlYXRlU3RvcmFnZSh0aGlzLm9wdGlvbnMsIGNvb2tpZU9wdGlvbnMpO1xuICAgICAgICAvLyB1c2luZyBvbmx5IGNvb2tpZXMgZm9yIGxlZ2FjeSB1c2VyIHN0b3JlXG4gICAgICAgIHRoaXMubGVnYWN5VXNlclN0b3JlID0gdGhpcy5jcmVhdGVTdG9yYWdlKHRoaXMub3B0aW9ucywgY29va2llT3B0aW9ucywgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgPT09IFN0b3JlVHlwZS5Db29raWU7IH0pO1xuICAgICAgICAvLyB1c2luZyBvbmx5IGxvY2FsU3RvcmFnZSAvIG1lbW9yeSBmb3IgdHJhaXRzIHN0b3JlXG4gICAgICAgIHRoaXMudHJhaXRzU3RvcmUgPSB0aGlzLmNyZWF0ZVN0b3JhZ2UodGhpcy5vcHRpb25zLCBjb29raWVPcHRpb25zLCBmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gU3RvcmVUeXBlLkNvb2tpZTsgfSk7XG4gICAgICAgIHZhciBsZWdhY3lVc2VyID0gdGhpcy5sZWdhY3lVc2VyU3RvcmUuZ2V0KGRlZmF1bHRzLmNvb2tpZS5vbGRLZXkpO1xuICAgICAgICBpZiAobGVnYWN5VXNlciAmJiB0eXBlb2YgbGVnYWN5VXNlciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGxlZ2FjeVVzZXIuaWQgJiYgdGhpcy5pZChsZWdhY3lVc2VyLmlkKTtcbiAgICAgICAgICAgIGxlZ2FjeVVzZXIudHJhaXRzICYmIHRoaXMudHJhaXRzKGxlZ2FjeVVzZXIudHJhaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBhdXRvQmluZCh0aGlzKTtcbiAgICB9XG4gICAgVXNlci5wcm90b3R5cGUubGVnYWN5U0lPID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5sZWdhY3lVc2VyU3RvcmUuZ2V0KCdfc2lvJyk7XG4gICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB2YWwuc3BsaXQoJy0tLS0nKSwgYW5vbiA9IF9hWzBdLCB1c2VyID0gX2FbMV07XG4gICAgICAgIHJldHVybiBbYW5vbiwgdXNlcl07XG4gICAgfTtcbiAgICBVc2VyLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChpZCwgdHJhaXRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyYWl0cyA9IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9O1xuICAgICAgICB2YXIgY3VycmVudElkID0gdGhpcy5pZCgpO1xuICAgICAgICBpZiAoY3VycmVudElkID09PSBudWxsIHx8IGN1cnJlbnRJZCA9PT0gaWQpIHtcbiAgICAgICAgICAgIHRyYWl0cyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnRyYWl0cygpKSwgdHJhaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIHRoaXMuaWQoaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhaXRzKHRyYWl0cyk7XG4gICAgfTtcbiAgICBVc2VyLnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYW5vbnltb3VzSWQobnVsbCk7XG4gICAgICAgIHRoaXMuaWQobnVsbCk7XG4gICAgICAgIHRoaXMudHJhaXRzKHt9KTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICB0aGlzLmlkZW50aXR5U3RvcmUuY2xlYXIodGhpcy5pZEtleSk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHlTdG9yZS5jbGVhcih0aGlzLmFub25LZXkpO1xuICAgICAgICB0aGlzLnRyYWl0c1N0b3JlLmNsZWFyKHRoaXMudHJhaXRzS2V5KTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlcih0aGlzLm9wdGlvbnMsIHRoaXMuY29va2llT3B0aW9ucyk7XG4gICAgfTtcbiAgICBVc2VyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIHJpZ2h0IHN0b3JhZ2Ugc3lzdGVtIGFwcGx5aW5nIGFsbCB0aGUgdXNlciBvcHRpb25zLCBjb29raWUgb3B0aW9ucyBhbmQgcGFydGljdWxhciBmaWx0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVXNlck9wdGlvbnNcbiAgICAgKiBAcGFyYW0gY29va2llT3B0cyBDb29raWVPcHRpb25zXG4gICAgICogQHBhcmFtIGZpbHRlclN0b3JlcyBmaWx0ZXIgZnVuY3Rpb24gdG8gYXBwbHkgdG8gYW55IFN0b3JlVHlwZXMgKHNraXBwZWQgaWYgb3B0aW9ucyBzcGVjaWZ5IHVzaW5nIGEgY3VzdG9tIHN0b3JhZ2UpXG4gICAgICogQHJldHVybnMgYSBTdG9yYWdlIG9iamVjdFxuICAgICAqL1xuICAgIFVzZXIucHJvdG90eXBlLmNyZWF0ZVN0b3JhZ2UgPSBmdW5jdGlvbiAob3B0aW9ucywgY29va2llT3B0cywgZmlsdGVyU3RvcmVzKSB7XG4gICAgICAgIHZhciBzdG9yZXMgPSBbXG4gICAgICAgICAgICBTdG9yZVR5cGUuTG9jYWxTdG9yYWdlLFxuICAgICAgICAgICAgU3RvcmVUeXBlLkNvb2tpZSxcbiAgICAgICAgICAgIFN0b3JlVHlwZS5NZW1vcnksXG4gICAgICAgIF07XG4gICAgICAgIC8vIElmIGRpc2FibGVkIHdlIHdvbid0IGhhdmUgYW55IHN0b3JhZ2UgZnVuY3Rpb25hbGl0eVxuICAgICAgICBpZiAob3B0aW9ucy5kaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuaXZlcnNhbFN0b3JhZ2UoW10pO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHBlcnNpc3RhbmNlIGlzIGRpc2FibGVkIHdlIHdpbGwgYWx3YXlzIGZhbGxiYWNrIHRvIE1lbW9yeSBTdG9yYWdlXG4gICAgICAgIGlmICghb3B0aW9ucy5wZXJzaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuaXZlcnNhbFN0b3JhZ2UoW25ldyBNZW1vcnlTdG9yYWdlKCldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdG9yYWdlICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5zdG9yYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheU9mU3RvcmVUeXBlKG9wdGlvbnMuc3RvcmFnZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBvbmx5IHNwZWNpZmllZCBvcmRlciBvZiBzdG9yZXMgd2Ugd2lsbCBzdGlsbCBhcHBseSBmaWx0ZXJzIGFuZCB0cmFuc2Zvcm1hdGlvbnMgZS5nLiBub3QgdXNpbmcgbG9jYWxTdG9yYWdlIGlmIGxvY2FsU3RvcmFnZUZhbGxiYWNrRGlzYWJsZWRcbiAgICAgICAgICAgICAgICBzdG9yZXMgPSBvcHRpb25zLnN0b3JhZ2Uuc3RvcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIERpc2FibGUgTG9jYWxTdG9yYWdlXG4gICAgICAgIGlmIChvcHRpb25zLmxvY2FsU3RvcmFnZUZhbGxiYWNrRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHN0b3JlcyA9IHN0b3Jlcy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgIT09IFN0b3JlVHlwZS5Mb2NhbFN0b3JhZ2U7IH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGx5IEFkZGl0aW9uYWwgZmlsdGVyc1xuICAgICAgICBpZiAoZmlsdGVyU3RvcmVzKSB7XG4gICAgICAgICAgICBzdG9yZXMgPSBzdG9yZXMuZmlsdGVyKGZpbHRlclN0b3Jlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxTdG9yYWdlKGluaXRpYWxpemVTdG9yYWdlcyhhcHBseUNvb2tpZU9wdGlvbnMoc3RvcmVzLCBjb29raWVPcHRzKSkpO1xuICAgIH07XG4gICAgVXNlci5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgIHJldHVybiBVc2VyO1xufSgpKTtcbmV4cG9ydCB7IFVzZXIgfTtcbnZhciBncm91cERlZmF1bHRzID0ge1xuICAgIHBlcnNpc3Q6IHRydWUsXG4gICAgY29va2llOiB7XG4gICAgICAgIGtleTogJ2Fqc19ncm91cF9pZCcsXG4gICAgfSxcbiAgICBsb2NhbFN0b3JhZ2U6IHtcbiAgICAgICAga2V5OiAnYWpzX2dyb3VwX3Byb3BlcnRpZXMnLFxuICAgIH0sXG59O1xudmFyIEdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cChvcHRpb25zLCBjb29raWUpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gZ3JvdXBEZWZhdWx0czsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZ3JvdXBEZWZhdWx0cyksIG9wdGlvbnMpLCBjb29raWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmFub255bW91c0lkID0gZnVuY3Rpb24gKF9pZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgYXV0b0JpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBHcm91cDtcbn0oVXNlcikpO1xuZXhwb3J0IHsgR3JvdXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tld: () => (/* binding */ tld)\n/* harmony export */ });\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(ssr)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\");\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url) {\n    var host = url.hostname;\n    var parts = host.split('.');\n    var last = parts[parts.length - 1];\n    var levels = [];\n    // Ip address.\n    if (parts.length === 4 && parseInt(last, 10) > 0) {\n        return levels;\n    }\n    // Localhost.\n    if (parts.length <= 1) {\n        return levels;\n    }\n    // Create levels.\n    for (var i = parts.length - 2; i >= 0; --i) {\n        levels.push(parts.slice(i).join('.'));\n    }\n    return levels;\n}\nfunction parseUrl(url) {\n    try {\n        return new URL(url);\n    }\n    catch (_a) {\n        return;\n    }\n}\nfunction tld(url) {\n    var parsedUrl = parseUrl(url);\n    if (!parsedUrl)\n        return;\n    var lvls = levels(parsedUrl);\n    // Lookup the real top level one.\n    for (var i = 0; i < lvls.length; ++i) {\n        var cname = '__tld__';\n        var domain = lvls[i];\n        var opts = { domain: '.' + domain };\n        try {\n            // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(cname, '1', opts);\n            if (js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(cname)) {\n                js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(cname, opts);\n                return domain;\n            }\n        }\n        catch (_) {\n            return;\n        }\n    }\n}\n//# sourceMappingURL=tld.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS91c2VyL3RsZC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxZQUFZLGlEQUFNO0FBQ2xCLGdCQUFnQixpREFBTTtBQUN0QixnQkFBZ0IsaURBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS91c2VyL3RsZC5qcz8zMTE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb29raWUgZnJvbSAnanMtY29va2llJztcbi8qKlxuICogTGV2ZWxzIHJldHVybnMgYWxsIGxldmVscyBvZiB0aGUgZ2l2ZW4gdXJsLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gbGV2ZWxzKHVybCkge1xuICAgIHZhciBob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgIHZhciBwYXJ0cyA9IGhvc3Quc3BsaXQoJy4nKTtcbiAgICB2YXIgbGFzdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBsZXZlbHMgPSBbXTtcbiAgICAvLyBJcCBhZGRyZXNzLlxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDQgJiYgcGFyc2VJbnQobGFzdCwgMTApID4gMCkge1xuICAgICAgICByZXR1cm4gbGV2ZWxzO1xuICAgIH1cbiAgICAvLyBMb2NhbGhvc3QuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHJldHVybiBsZXZlbHM7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBsZXZlbHMuXG4gICAgZm9yICh2YXIgaSA9IHBhcnRzLmxlbmd0aCAtIDI7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGxldmVscy5wdXNoKHBhcnRzLnNsaWNlKGkpLmpvaW4oJy4nKSk7XG4gICAgfVxuICAgIHJldHVybiBsZXZlbHM7XG59XG5mdW5jdGlvbiBwYXJzZVVybCh1cmwpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IFVSTCh1cmwpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0bGQodXJsKSB7XG4gICAgdmFyIHBhcnNlZFVybCA9IHBhcnNlVXJsKHVybCk7XG4gICAgaWYgKCFwYXJzZWRVcmwpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbHZscyA9IGxldmVscyhwYXJzZWRVcmwpO1xuICAgIC8vIExvb2t1cCB0aGUgcmVhbCB0b3AgbGV2ZWwgb25lLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbHZscy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY25hbWUgPSAnX190bGRfXyc7XG4gICAgICAgIHZhciBkb21haW4gPSBsdmxzW2ldO1xuICAgICAgICB2YXIgb3B0cyA9IHsgZG9tYWluOiAnLicgKyBkb21haW4gfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGNvb2tpZSBhY2Nlc3MgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGxpYnJhcnkgaXMgcmFuIGluc2lkZSBhIHNhbmRib3hlZCBlbnZpcm9ubWVudCAoZS5nLiBzYW5kYm94ZWQgaWZyYW1lKVxuICAgICAgICAgICAgY29va2llLnNldChjbmFtZSwgJzEnLCBvcHRzKTtcbiAgICAgICAgICAgIGlmIChjb29raWUuZ2V0KGNuYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvb2tpZS5yZW1vdmUoY25hbWUsIG9wdHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkb21haW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRsZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/generated/version.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n// This file is generated.\nvar version = '1.75.0';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvZ2VuZXJhdGVkL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2dlbmVyYXRlZC92ZXJzaW9uLmpzPzUzZTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGdlbmVyYXRlZC5cbmV4cG9ydCB2YXIgdmVyc2lvbiA9ICcxLjc1LjAnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ bindAll)\n/* harmony export */ });\nfunction bindAll(obj) {\n    var proto = obj.constructor.prototype;\n    for (var _i = 0, _a = Object.getOwnPropertyNames(proto); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key !== 'constructor') {\n            var desc = Object.getOwnPropertyDescriptor(obj.constructor.prototype, key);\n            if (!!desc && typeof desc.value === 'function') {\n                obj[key] = obj[key].bind(obj);\n            }\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=bind-all.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2JpbmQtYWxsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZTtBQUNmO0FBQ0EsNkRBQTZELGdCQUFnQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2JpbmQtYWxsLmpzPzBlOTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZEFsbChvYmopIHtcbiAgICB2YXIgcHJvdG8gPSBvYmouY29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90byk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgIGlmIChrZXkgIT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBrZXkpO1xuICAgICAgICAgICAgaWYgKCEhZGVzYyAmJiB0eXBlb2YgZGVzYy52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9ialtrZXldID0gb2JqW2tleV0uYmluZChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kLWFsbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientHints: () => (/* binding */ clientHints)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction clientHints(hints) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var userAgentData;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            userAgentData = navigator.userAgentData;\n            if (!userAgentData)\n                return [2 /*return*/, undefined];\n            if (!hints)\n                return [2 /*return*/, userAgentData.toJSON()];\n            return [2 /*return*/, userAgentData\n                    .getHighEntropyValues(hints)\n                    .catch(function () { return userAgentData.toJSON(); })];\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2NsaWVudC1oaW50cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUN4QztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGdDQUFnQztBQUN6RSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvY2xpZW50LWhpbnRzL2luZGV4LmpzPzU2NzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGNsaWVudEhpbnRzKGhpbnRzKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXNlckFnZW50RGF0YTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdXNlckFnZW50RGF0YSA9IG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xuICAgICAgICAgICAgaWYgKCF1c2VyQWdlbnREYXRhKVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1bmRlZmluZWRdO1xuICAgICAgICAgICAgaWYgKCFoaW50cylcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXNlckFnZW50RGF0YS50b0pTT04oKV07XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXNlckFnZW50RGF0YVxuICAgICAgICAgICAgICAgICAgICAuZ2V0SGlnaEVudHJvcHlWYWx1ZXMoaGludHMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB1c2VyQWdlbnREYXRhLnRvSlNPTigpOyB9KV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embeddedWriteKey: () => (/* binding */ embeddedWriteKey)\n/* harmony export */ });\n// This variable is used as an optional fallback for when customers\n// host or proxy their own analytics.js.\ntry {\n    window.analyticsWriteKey = '__WRITE_KEY__';\n}\ncatch (_) {\n    // @ eslint-disable-next-line\n}\nfunction embeddedWriteKey() {\n    if (window.analyticsWriteKey === undefined) {\n        return undefined;\n    }\n    // this is done so that we don't accidentally override every reference to __write_key__\n    return window.analyticsWriteKey !== ['__', 'WRITE', '_', 'KEY', '__'].join('')\n        ? window.analyticsWriteKey\n        : undefined;\n}\n//# sourceMappingURL=embedded-write-key.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2VtYmVkZGVkLXdyaXRlLWtleS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2VtYmVkZGVkLXdyaXRlLWtleS5qcz8yOTgwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgdmFyaWFibGUgaXMgdXNlZCBhcyBhbiBvcHRpb25hbCBmYWxsYmFjayBmb3Igd2hlbiBjdXN0b21lcnNcbi8vIGhvc3Qgb3IgcHJveHkgdGhlaXIgb3duIGFuYWx5dGljcy5qcy5cbnRyeSB7XG4gICAgd2luZG93LmFuYWx5dGljc1dyaXRlS2V5ID0gJ19fV1JJVEVfS0VZX18nO1xufVxuY2F0Y2ggKF8pIHtcbiAgICAvLyBAIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxufVxuZXhwb3J0IGZ1bmN0aW9uIGVtYmVkZGVkV3JpdGVLZXkoKSB7XG4gICAgaWYgKHdpbmRvdy5hbmFseXRpY3NXcml0ZUtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIHRoaXMgaXMgZG9uZSBzbyB0aGF0IHdlIGRvbid0IGFjY2lkZW50YWxseSBvdmVycmlkZSBldmVyeSByZWZlcmVuY2UgdG8gX193cml0ZV9rZXlfX1xuICAgIHJldHVybiB3aW5kb3cuYW5hbHl0aWNzV3JpdGVLZXkgIT09IFsnX18nLCAnV1JJVEUnLCAnXycsICdLRVknLCAnX18nXS5qb2luKCcnKVxuICAgICAgICA/IHdpbmRvdy5hbmFseXRpY3NXcml0ZUtleVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtYmVkZGVkLXdyaXRlLWtleS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\n/* harmony import */ var unfetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! unfetch */ \"(ssr)/./node_modules/unfetch/dist/unfetch.module.js\");\n/* harmony import */ var _get_global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-global */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\n\n\n/**\n * Wrapper around native `fetch` containing `unfetch` fallback.\n */\nvar fetch = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var global = (0,_get_global__WEBPACK_IMPORTED_MODULE_1__.getGlobal)();\n    return ((global && global.fetch) || unfetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"]).apply(void 0, args);\n};\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUNXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVM7QUFDMUIsd0NBQXdDLCtDQUFPO0FBQy9DO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvZmV0Y2guanM/ZjJmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdW5mZXRjaCBmcm9tICd1bmZldGNoJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4vZ2V0LWdsb2JhbCc7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIG5hdGl2ZSBgZmV0Y2hgIGNvbnRhaW5pbmcgYHVuZmV0Y2hgIGZhbGxiYWNrLlxuICovXG5leHBvcnQgdmFyIGZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG4gICAgcmV0dXJuICgoZ2xvYmFsICYmIGdsb2JhbC5mZXRjaCkgfHwgdW5mZXRjaCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobal: () => (/* binding */ getGlobal)\n/* harmony export */ });\n// This an imperfect polyfill for globalThis\nvar getGlobal = function () {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return null;\n};\n//# sourceMappingURL=get-global.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dldC1nbG9iYWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvZ2V0LWdsb2JhbC5qcz9lZGI3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgYW4gaW1wZXJmZWN0IHBvbHlmaWxsIGZvciBnbG9iYWxUaGlzXG5leHBvcnQgdmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1nbG9iYWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProcessEnv: () => (/* binding */ getProcessEnv)\n/* harmony export */ });\n/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nfunction getProcessEnv() {\n    if (typeof process === 'undefined' || !process.env) {\n        return {};\n    }\n    return process.env;\n}\n//# sourceMappingURL=get-process-env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dldC1wcm9jZXNzLWVudi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9nZXQtcHJvY2Vzcy1lbnYuanM/YWVjZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJldHVybnMgYHByb2Nlc3MuZW52YCBpZiBpdCBpcyBhdmFpbGFibGUgaW4gdGhlIGVudmlyb25tZW50LlxuICogQWx3YXlzIHJldHVybnMgYW4gb2JqZWN0IG1ha2UgaXQgc2ltaWxhcmx5IGVhc3kgdG8gdXNlIGFzIGBwcm9jZXNzLmVudmAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9jZXNzRW52KCkge1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXByb2Nlc3MuZW52KSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LXByb2Nlc3MtZW52LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalAnalytics: () => (/* binding */ getGlobalAnalytics),\n/* harmony export */   setGlobalAnalytics: () => (/* binding */ setGlobalAnalytics),\n/* harmony export */   setGlobalAnalyticsKey: () => (/* binding */ setGlobalAnalyticsKey)\n/* harmony export */ });\n/**\n * Stores the global window analytics key\n */\nvar _globalAnalyticsKey = 'analytics';\n/**\n * Gets the global analytics/buffer\n * @param key name of the window property where the buffer is stored (default: analytics)\n * @returns AnalyticsSnippet\n */\nfunction getGlobalAnalytics() {\n    return window[_globalAnalyticsKey];\n}\n/**\n * Replaces the global window key for the analytics/buffer object\n * @param key key name\n */\nfunction setGlobalAnalyticsKey(key) {\n    _globalAnalyticsKey = key;\n}\n/**\n * Sets the global analytics object\n * @param analytics analytics snippet\n */\nfunction setGlobalAnalytics(analytics) {\n    ;\n    window[_globalAnalyticsKey] = analytics;\n}\n//# sourceMappingURL=global-analytics-helper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyLmpzPzRjYTQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdG9yZXMgdGhlIGdsb2JhbCB3aW5kb3cgYW5hbHl0aWNzIGtleVxuICovXG52YXIgX2dsb2JhbEFuYWx5dGljc0tleSA9ICdhbmFseXRpY3MnO1xuLyoqXG4gKiBHZXRzIHRoZSBnbG9iYWwgYW5hbHl0aWNzL2J1ZmZlclxuICogQHBhcmFtIGtleSBuYW1lIG9mIHRoZSB3aW5kb3cgcHJvcGVydHkgd2hlcmUgdGhlIGJ1ZmZlciBpcyBzdG9yZWQgKGRlZmF1bHQ6IGFuYWx5dGljcylcbiAqIEByZXR1cm5zIEFuYWx5dGljc1NuaXBwZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbEFuYWx5dGljcygpIHtcbiAgICByZXR1cm4gd2luZG93W19nbG9iYWxBbmFseXRpY3NLZXldO1xufVxuLyoqXG4gKiBSZXBsYWNlcyB0aGUgZ2xvYmFsIHdpbmRvdyBrZXkgZm9yIHRoZSBhbmFseXRpY3MvYnVmZmVyIG9iamVjdFxuICogQHBhcmFtIGtleSBrZXkgbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0R2xvYmFsQW5hbHl0aWNzS2V5KGtleSkge1xuICAgIF9nbG9iYWxBbmFseXRpY3NLZXkgPSBrZXk7XG59XG4vKipcbiAqIFNldHMgdGhlIGdsb2JhbCBhbmFseXRpY3Mgb2JqZWN0XG4gKiBAcGFyYW0gYW5hbHl0aWNzIGFuYWx5dGljcyBzbmlwcGV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRHbG9iYWxBbmFseXRpY3MoYW5hbHl0aWNzKSB7XG4gICAgO1xuICAgIHdpbmRvd1tfZ2xvYmFsQW5hbHl0aWNzS2V5XSA9IGFuYWx5dGljcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbC1hbmFseXRpY3MtaGVscGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPlanEventEnabled: () => (/* binding */ isPlanEventEnabled)\n/* harmony export */ });\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nfunction isPlanEventEnabled(plan, planEvent) {\n    var _a, _b;\n    // Always prioritize the event's `enabled` status\n    if (typeof (planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) === 'boolean') {\n        return planEvent.enabled;\n    }\n    // Assume absence of a tracking plan means events are enabled\n    return (_b = (_a = plan === null || plan === void 0 ? void 0 : plan.__default) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n}\n//# sourceMappingURL=is-plan-event-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvaXMtcGxhbi1ldmVudC1lbmFibGVkLmpzPzI5MzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSB0cmFjayBldmVudCBpcyBhbGxvd2VkIHRvIGJlIHNlbnQgYmFzZWQgb24gdGhlXG4gKiB1c2VyJ3MgdHJhY2tpbmcgcGxhbi5cbiAqIElmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSB0cmFja2luZyBwbGFuIG9yIHRoZSBldmVudCBpcyBhbGxvd2VkIGJhc2VkXG4gKiBvbiB0aGUgdHJhY2tpbmcgcGxhbiBjb25maWd1cmF0aW9uLCByZXR1cm5zIHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYW5FdmVudEVuYWJsZWQocGxhbiwgcGxhbkV2ZW50KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAvLyBBbHdheXMgcHJpb3JpdGl6ZSB0aGUgZXZlbnQncyBgZW5hYmxlZGAgc3RhdHVzXG4gICAgaWYgKHR5cGVvZiAocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmVuYWJsZWQpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIHBsYW5FdmVudC5lbmFibGVkO1xuICAgIH1cbiAgICAvLyBBc3N1bWUgYWJzZW5jZSBvZiBhIHRyYWNraW5nIHBsYW4gbWVhbnMgZXZlbnRzIGFyZSBlbmFibGVkXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IHBsYW4gPT09IG51bGwgfHwgcGxhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbi5fX2RlZmF1bHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbmFibGVkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtcGxhbi1ldmVudC1lbmFibGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXRoZW5hYmxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXRoZW5hYmxlLmpzPzIwOTMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQ2hlY2sgaWYgIHRoZW5hYmxlXG4gKiAgKGluc3RhbmNlb2YgUHJvbWlzZSBkb2Vzbid0IHJlc3BlY3QgcmVhbG1zKVxuICovXG5leHBvcnQgdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAndGhlbicgaW4gdmFsdWUgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtdGhlbmFibGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadScript: () => (/* binding */ loadScript),\n/* harmony export */   unloadScript: () => (/* binding */ unloadScript)\n/* harmony export */ });\nfunction findScript(src) {\n    var scripts = Array.prototype.slice.call(window.document.querySelectorAll('script'));\n    return scripts.find(function (s) { return s.src === src; });\n}\n/**\n * Load a script from a URL and append it to the document.\n */\nfunction loadScript(src, attributes) {\n    var found = findScript(src);\n    if (found !== undefined) {\n        var status_1 = found === null || found === void 0 ? void 0 : found.getAttribute('status');\n        if (status_1 === 'loaded') {\n            return Promise.resolve(found);\n        }\n        if (status_1 === 'loading') {\n            return new Promise(function (resolve, reject) {\n                found.addEventListener('load', function () { return resolve(found); });\n                found.addEventListener('error', function (err) { return reject(err); });\n            });\n        }\n    }\n    return new Promise(function (resolve, reject) {\n        var _a;\n        var script = window.document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = src;\n        script.async = true;\n        script.setAttribute('status', 'loading');\n        for (var _i = 0, _b = Object.entries(attributes !== null && attributes !== void 0 ? attributes : {}); _i < _b.length; _i++) {\n            var _c = _b[_i], k = _c[0], v = _c[1];\n            script.setAttribute(k, v);\n        }\n        script.onload = function () {\n            script.onerror = script.onload = null;\n            script.setAttribute('status', 'loaded');\n            resolve(script);\n        };\n        script.onerror = function () {\n            script.onerror = script.onload = null;\n            script.setAttribute('status', 'error');\n            reject(new Error(\"Failed to load \".concat(src)));\n        };\n        var firstExistingScript = window.document.querySelector('script');\n        if (!firstExistingScript) {\n            window.document.head.appendChild(script);\n        }\n        else {\n            (_a = firstExistingScript.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(script, firstExistingScript);\n        }\n    });\n}\nfunction unloadScript(src) {\n    var found = findScript(src);\n    if (found !== undefined) {\n        found.remove();\n    }\n    return Promise.resolve();\n}\n//# sourceMappingURL=load-script.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2xvYWQtc2NyaXB0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBLHVDQUF1Qyx1QkFBdUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsd0JBQXdCO0FBQ3JGLGlFQUFpRSxxQkFBcUI7QUFDdEYsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJHQUEyRyxHQUFHLGdCQUFnQjtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9sb2FkLXNjcmlwdC5qcz81MTFlIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZpbmRTY3JpcHQoc3JjKSB7XG4gICAgdmFyIHNjcmlwdHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykpO1xuICAgIHJldHVybiBzY3JpcHRzLmZpbmQoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc3JjID09PSBzcmM7IH0pO1xufVxuLyoqXG4gKiBMb2FkIGEgc2NyaXB0IGZyb20gYSBVUkwgYW5kIGFwcGVuZCBpdCB0byB0aGUgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU2NyaXB0KHNyYywgYXR0cmlidXRlcykge1xuICAgIHZhciBmb3VuZCA9IGZpbmRTY3JpcHQoc3JjKTtcbiAgICBpZiAoZm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgc3RhdHVzXzEgPSBmb3VuZCA9PT0gbnVsbCB8fCBmb3VuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZm91bmQuZ2V0QXR0cmlidXRlKCdzdGF0dXMnKTtcbiAgICAgICAgaWYgKHN0YXR1c18xID09PSAnbG9hZGVkJykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1c18xID09PSAnbG9hZGluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgZm91bmQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoZm91bmQpOyB9KTtcbiAgICAgICAgICAgICAgICBmb3VuZC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHNjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3RhdHVzJywgJ2xvYWRpbmcnKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMgIT09IG51bGwgJiYgYXR0cmlidXRlcyAhPT0gdm9pZCAwID8gYXR0cmlidXRlcyA6IHt9KTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBfYyA9IF9iW19pXSwgayA9IF9jWzBdLCB2ID0gX2NbMV07XG4gICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKGssIHYpO1xuICAgICAgICB9XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3RhdHVzJywgJ2xvYWRlZCcpO1xuICAgICAgICAgICAgcmVzb2x2ZShzY3JpcHQpO1xuICAgICAgICB9O1xuICAgICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG4gICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzdGF0dXMnLCAnZXJyb3InKTtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBcIi5jb25jYXQoc3JjKSkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmlyc3RFeGlzdGluZ1NjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHQnKTtcbiAgICAgICAgaWYgKCFmaXJzdEV4aXN0aW5nU2NyaXB0KSB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgKF9hID0gZmlyc3RFeGlzdGluZ1NjcmlwdC5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RFeGlzdGluZ1NjcmlwdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bmxvYWRTY3JpcHQoc3JjKSB7XG4gICAgdmFyIGZvdW5kID0gZmluZFNjcmlwdChzcmMpO1xuICAgIGlmIChmb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvdW5kLnJlbW92ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkLXNjcmlwdC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergedOptions: () => (/* binding */ mergedOptions)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\n/**\n * Merge legacy settings and initialized Integration option overrides.\n *\n * This will merge any options that were passed from initialization into\n * overrides for settings that are returned by the Segment CDN.\n *\n * i.e. this allows for passing options directly into destinations from\n * the Analytics constructor.\n */\nfunction mergedOptions(cdnSettings, options) {\n    var _a;\n    var optionOverrides = Object.entries((_a = options.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (overrides, _a) {\n        var _b, _c;\n        var integration = _a[0], options = _a[1];\n        if (typeof options === 'object') {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, overrides), (_b = {}, _b[integration] = options, _b));\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, overrides), (_c = {}, _c[integration] = {}, _c));\n    }, {});\n    return Object.entries(cdnSettings.integrations).reduce(function (integrationSettings, _a) {\n        var _b;\n        var integration = _a[0], settings = _a[1];\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, integrationSettings), (_b = {}, _b[integration] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, settings), optionOverrides[integration]), _b));\n    }, {});\n}\n//# sourceMappingURL=merged-options.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL21lcmdlZC1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx3R0FBd0c7QUFDeEc7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxzQkFBc0I7QUFDN0Q7QUFDQSxlQUFlLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxzQkFBc0Isc0JBQXNCO0FBQy9FLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLGdDQUFnQyxvQkFBb0IsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQzNHLEtBQUssSUFBSTtBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvbWVyZ2VkLW9wdGlvbnMuanM/MDhjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuLyoqXG4gKiBNZXJnZSBsZWdhY3kgc2V0dGluZ3MgYW5kIGluaXRpYWxpemVkIEludGVncmF0aW9uIG9wdGlvbiBvdmVycmlkZXMuXG4gKlxuICogVGhpcyB3aWxsIG1lcmdlIGFueSBvcHRpb25zIHRoYXQgd2VyZSBwYXNzZWQgZnJvbSBpbml0aWFsaXphdGlvbiBpbnRvXG4gKiBvdmVycmlkZXMgZm9yIHNldHRpbmdzIHRoYXQgYXJlIHJldHVybmVkIGJ5IHRoZSBTZWdtZW50IENETi5cbiAqXG4gKiBpLmUuIHRoaXMgYWxsb3dzIGZvciBwYXNzaW5nIG9wdGlvbnMgZGlyZWN0bHkgaW50byBkZXN0aW5hdGlvbnMgZnJvbVxuICogdGhlIEFuYWx5dGljcyBjb25zdHJ1Y3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlZE9wdGlvbnMoY2RuU2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIG9wdGlvbk92ZXJyaWRlcyA9IE9iamVjdC5lbnRyaWVzKChfYSA9IG9wdGlvbnMuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkucmVkdWNlKGZ1bmN0aW9uIChvdmVycmlkZXMsIF9hKSB7XG4gICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgIHZhciBpbnRlZ3JhdGlvbiA9IF9hWzBdLCBvcHRpb25zID0gX2FbMV07XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3ZlcnJpZGVzKSwgKF9iID0ge30sIF9iW2ludGVncmF0aW9uXSA9IG9wdGlvbnMsIF9iKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvdmVycmlkZXMpLCAoX2MgPSB7fSwgX2NbaW50ZWdyYXRpb25dID0ge30sIF9jKSk7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhjZG5TZXR0aW5ncy5pbnRlZ3JhdGlvbnMpLnJlZHVjZShmdW5jdGlvbiAoaW50ZWdyYXRpb25TZXR0aW5ncywgX2EpIHtcbiAgICAgICAgdmFyIF9iO1xuICAgICAgICB2YXIgaW50ZWdyYXRpb24gPSBfYVswXSwgc2V0dGluZ3MgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvblNldHRpbmdzKSwgKF9iID0ge30sIF9iW2ludGVncmF0aW9uXSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBzZXR0aW5ncyksIG9wdGlvbk92ZXJyaWRlc1tpbnRlZ3JhdGlvbl0pLCBfYikpO1xuICAgIH0sIHt9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlZC1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onPageChange: () => (/* binding */ onPageChange)\n/* harmony export */ });\n/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nvar onPageChange = function (cb) {\n    var unloaded = false; // prevents double firing if both are supported\n    window.addEventListener('pagehide', function () {\n        if (unloaded)\n            return;\n        unloaded = true;\n        cb(unloaded);\n    });\n    // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n    document.addEventListener('visibilitychange', function () {\n        if (document.visibilityState == 'hidden') {\n            if (unloaded)\n                return;\n            unloaded = true;\n        }\n        else {\n            unloaded = false;\n        }\n        cb(unloaded);\n    });\n};\n//# sourceMappingURL=on-page-change.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL29uLXBhZ2UtY2hhbmdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9vbi1wYWdlLWNoYW5nZS5qcz82NDU1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXIgb24gZG9jdW1lbnQgdGhhdCBmaXJlcyB3aGVuOlxuICogKiB0YWIgY2hhbmdlIG9yIHRhYiBjbG9zZSAoaW4gbW9iaWxlIG9yIGRlc2t0b3ApXG4gKiAqIGNsaWNrIGJhY2sgLyBmb3J3YXJkIGJ1dHRvblxuICogKiBjbGljayBhbnkgbGluayBvciBwZXJmb3JtIGFueSBvdGhlciBuYXZpZ2F0aW9uIGFjdGlvblxuICogKiBzb2Z0IHJlZnJlc2ggLyBoYXJkIHJlZnJlc2hcbiAqXG4gKiBhZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzIzOTgzNC93aW5kb3ctb25iZWZvcmV1bmxvYWQtbm90LXdvcmtpbmctb24tdGhlLWlwYWQvNTI4NjQ1MDgjNTI4NjQ1MDgsXG4gKi9cbmV4cG9ydCB2YXIgb25QYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgdmFyIHVubG9hZGVkID0gZmFsc2U7IC8vIHByZXZlbnRzIGRvdWJsZSBmaXJpbmcgaWYgYm90aCBhcmUgc3VwcG9ydGVkXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodW5sb2FkZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgY2IodW5sb2FkZWQpO1xuICAgIH0pO1xuICAgIC8vIHVzaW5nIGRvY3VtZW50IGluc3RlYWQgb2Ygd2luZG93IGJlY2F1c2Ugb2YgYnVnIGFmZmVjdGluZyBicm93c2VycyBiZWZvcmUgc2FmYXJpIDE0IChkZXRhaWwgaW4gZm9vdG5vdGVzIGh0dHBzOi8vY2FuaXVzZS5jb20vP3NlYXJjaD12aXNpYmlsaXR5Y2hhbmdlKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgIGlmICh1bmxvYWRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB1bmxvYWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1bmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNiKHVubG9hZGVkKTtcbiAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vbi1wYWdlLWNoYW5nZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pWhile: () => (/* binding */ pWhile)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar pWhile = function (condition, action) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var loop;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n        loop = function (actionResult) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!condition(actionResult)) return [3 /*break*/, 2];\n                        _a = loop;\n                        return [4 /*yield*/, action()];\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); };\n        return [2 /*return*/, loop(undefined)];\n    });\n}); };\n//# sourceMappingURL=p-while.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3Atd2hpbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDeEMsNENBQTRDLE9BQU8sZ0RBQVM7QUFDbkU7QUFDQSxXQUFXLGtEQUFXO0FBQ3RCLHlDQUF5QyxPQUFPLGdEQUFTO0FBQ3pEO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wLXdoaWxlLmpzPzBiNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IHZhciBwV2hpbGUgPSBmdW5jdGlvbiAoY29uZGl0aW9uLCBhY3Rpb24pIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxvb3A7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBsb29wID0gZnVuY3Rpb24gKGFjdGlvblJlc3VsdCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZGl0aW9uKGFjdGlvblJlc3VsdCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBsb29wO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYWN0aW9uKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5hcHBseSh2b2lkIDAsIFtfYi5zZW50KCldKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGxvb3AodW5kZWZpbmVkKV07XG4gICAgfSk7XG59KTsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXAtd2hpbGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCDN: () => (/* binding */ getCDN),\n/* harmony export */   getLegacyAJSPath: () => (/* binding */ getLegacyAJSPath),\n/* harmony export */   getNextIntegrationsURL: () => (/* binding */ getNextIntegrationsURL),\n/* harmony export */   setGlobalCDNUrl: () => (/* binding */ setGlobalCDNUrl)\n/* harmony export */ });\n/* harmony import */ var _global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./global-analytics-helper */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _embedded_write_key__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embedded-write-key */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js\");\n\n\nvar analyticsScriptRegex = /(https:\\/\\/.*)\\/analytics\\.js\\/v1\\/(?:.*?)\\/(?:platform|analytics.*)?/;\nvar getCDNUrlFromScriptTag = function () {\n    var cdn;\n    var scripts = Array.prototype.slice.call(document.querySelectorAll('script'));\n    scripts.forEach(function (s) {\n        var _a;\n        var src = (_a = s.getAttribute('src')) !== null && _a !== void 0 ? _a : '';\n        var result = analyticsScriptRegex.exec(src);\n        if (result && result[1]) {\n            cdn = result[1];\n        }\n    });\n    return cdn;\n};\nvar _globalCDN; // set globalCDN as in-memory singleton\nvar getGlobalCDNUrl = function () {\n    var _a;\n    var result = _globalCDN !== null && _globalCDN !== void 0 ? _globalCDN : (_a = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)()) === null || _a === void 0 ? void 0 : _a._cdn;\n    return result;\n};\nvar setGlobalCDNUrl = function (cdn) {\n    var globalAnalytics = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)();\n    if (globalAnalytics) {\n        globalAnalytics._cdn = cdn;\n    }\n    _globalCDN = cdn;\n};\nvar getCDN = function () {\n    var globalCdnUrl = getGlobalCDNUrl();\n    if (globalCdnUrl)\n        return globalCdnUrl;\n    var cdnFromScriptTag = getCDNUrlFromScriptTag();\n    if (cdnFromScriptTag) {\n        return cdnFromScriptTag;\n    }\n    else {\n        // it's possible that the CDN is not found in the page because:\n        // - the script is loaded through a proxy\n        // - the script is removed after execution\n        // in this case, we fall back to the default Segment CDN\n        return \"https://cdn.segment.com\";\n    }\n};\nvar getNextIntegrationsURL = function () {\n    var cdn = getCDN();\n    return \"\".concat(cdn, \"/next-integrations\");\n};\n/**\n * Replaces the CDN URL in the script tag with the one from Analytics.js 1.0\n *\n * @returns the path to Analytics JS 1.0\n **/\nfunction getLegacyAJSPath() {\n    var _a, _b, _c;\n    var writeKey = (_a = (0,_embedded_write_key__WEBPACK_IMPORTED_MODULE_1__.embeddedWriteKey)()) !== null && _a !== void 0 ? _a : (_b = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)()) === null || _b === void 0 ? void 0 : _b._writeKey;\n    var scripts = Array.prototype.slice.call(document.querySelectorAll('script'));\n    var path = undefined;\n    for (var _i = 0, scripts_1 = scripts; _i < scripts_1.length; _i++) {\n        var s = scripts_1[_i];\n        var src = (_c = s.getAttribute('src')) !== null && _c !== void 0 ? _c : '';\n        var result = analyticsScriptRegex.exec(src);\n        if (result && result[1]) {\n            path = src;\n            break;\n        }\n    }\n    if (path) {\n        return path.replace('analytics.min.js', 'analytics.classic.js');\n    }\n    return \"https://cdn.segment.com/analytics.js/v1/\".concat(writeKey, \"/analytics.classic.js\");\n}\n//# sourceMappingURL=parse-cdn.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3BhcnNlLWNkbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0Q7QUFDUDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLG1GQUFtRiw0RUFBa0I7QUFDckc7QUFDQTtBQUNPO0FBQ1AsMEJBQTBCLDRFQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EseUJBQXlCLHFFQUFnQiwyQ0FBMkMsNEVBQWtCO0FBQ3RHO0FBQ0E7QUFDQSwwQ0FBMEMsdUJBQXVCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvcGFyc2UtY2RuLmpzPzExYzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0R2xvYmFsQW5hbHl0aWNzIH0gZnJvbSAnLi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5pbXBvcnQgeyBlbWJlZGRlZFdyaXRlS2V5IH0gZnJvbSAnLi9lbWJlZGRlZC13cml0ZS1rZXknO1xudmFyIGFuYWx5dGljc1NjcmlwdFJlZ2V4ID0gLyhodHRwczpcXC9cXC8uKilcXC9hbmFseXRpY3NcXC5qc1xcL3YxXFwvKD86Lio/KVxcLyg/OnBsYXRmb3JtfGFuYWx5dGljcy4qKT8vO1xudmFyIGdldENETlVybEZyb21TY3JpcHRUYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNkbjtcbiAgICB2YXIgc2NyaXB0cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKTtcbiAgICBzY3JpcHRzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgc3JjID0gKF9hID0gcy5nZXRBdHRyaWJ1dGUoJ3NyYycpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJztcbiAgICAgICAgdmFyIHJlc3VsdCA9IGFuYWx5dGljc1NjcmlwdFJlZ2V4LmV4ZWMoc3JjKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHRbMV0pIHtcbiAgICAgICAgICAgIGNkbiA9IHJlc3VsdFsxXTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjZG47XG59O1xudmFyIF9nbG9iYWxDRE47IC8vIHNldCBnbG9iYWxDRE4gYXMgaW4tbWVtb3J5IHNpbmdsZXRvblxudmFyIGdldEdsb2JhbENETlVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHJlc3VsdCA9IF9nbG9iYWxDRE4gIT09IG51bGwgJiYgX2dsb2JhbENETiAhPT0gdm9pZCAwID8gX2dsb2JhbENETiA6IChfYSA9IGdldEdsb2JhbEFuYWx5dGljcygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2NkbjtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbmV4cG9ydCB2YXIgc2V0R2xvYmFsQ0ROVXJsID0gZnVuY3Rpb24gKGNkbikge1xuICAgIHZhciBnbG9iYWxBbmFseXRpY3MgPSBnZXRHbG9iYWxBbmFseXRpY3MoKTtcbiAgICBpZiAoZ2xvYmFsQW5hbHl0aWNzKSB7XG4gICAgICAgIGdsb2JhbEFuYWx5dGljcy5fY2RuID0gY2RuO1xuICAgIH1cbiAgICBfZ2xvYmFsQ0ROID0gY2RuO1xufTtcbmV4cG9ydCB2YXIgZ2V0Q0ROID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBnbG9iYWxDZG5VcmwgPSBnZXRHbG9iYWxDRE5VcmwoKTtcbiAgICBpZiAoZ2xvYmFsQ2RuVXJsKVxuICAgICAgICByZXR1cm4gZ2xvYmFsQ2RuVXJsO1xuICAgIHZhciBjZG5Gcm9tU2NyaXB0VGFnID0gZ2V0Q0ROVXJsRnJvbVNjcmlwdFRhZygpO1xuICAgIGlmIChjZG5Gcm9tU2NyaXB0VGFnKSB7XG4gICAgICAgIHJldHVybiBjZG5Gcm9tU2NyaXB0VGFnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBDRE4gaXMgbm90IGZvdW5kIGluIHRoZSBwYWdlIGJlY2F1c2U6XG4gICAgICAgIC8vIC0gdGhlIHNjcmlwdCBpcyBsb2FkZWQgdGhyb3VnaCBhIHByb3h5XG4gICAgICAgIC8vIC0gdGhlIHNjcmlwdCBpcyByZW1vdmVkIGFmdGVyIGV4ZWN1dGlvblxuICAgICAgICAvLyBpbiB0aGlzIGNhc2UsIHdlIGZhbGwgYmFjayB0byB0aGUgZGVmYXVsdCBTZWdtZW50IENETlxuICAgICAgICByZXR1cm4gXCJodHRwczovL2Nkbi5zZWdtZW50LmNvbVwiO1xuICAgIH1cbn07XG5leHBvcnQgdmFyIGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNkbiA9IGdldENETigpO1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChjZG4sIFwiL25leHQtaW50ZWdyYXRpb25zXCIpO1xufTtcbi8qKlxuICogUmVwbGFjZXMgdGhlIENETiBVUkwgaW4gdGhlIHNjcmlwdCB0YWcgd2l0aCB0aGUgb25lIGZyb20gQW5hbHl0aWNzLmpzIDEuMFxuICpcbiAqIEByZXR1cm5zIHRoZSBwYXRoIHRvIEFuYWx5dGljcyBKUyAxLjBcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZWdhY3lBSlNQYXRoKCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIHZhciB3cml0ZUtleSA9IChfYSA9IGVtYmVkZGVkV3JpdGVLZXkoKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iID0gZ2V0R2xvYmFsQW5hbHl0aWNzKCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5fd3JpdGVLZXk7XG4gICAgdmFyIHNjcmlwdHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKSk7XG4gICAgdmFyIHBhdGggPSB1bmRlZmluZWQ7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBzY3JpcHRzXzEgPSBzY3JpcHRzOyBfaSA8IHNjcmlwdHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIHMgPSBzY3JpcHRzXzFbX2ldO1xuICAgICAgICB2YXIgc3JjID0gKF9jID0gcy5nZXRBdHRyaWJ1dGUoJ3NyYycpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJztcbiAgICAgICAgdmFyIHJlc3VsdCA9IGFuYWx5dGljc1NjcmlwdFJlZ2V4LmV4ZWMoc3JjKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHRbMV0pIHtcbiAgICAgICAgICAgIHBhdGggPSBzcmM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKCdhbmFseXRpY3MubWluLmpzJywgJ2FuYWx5dGljcy5jbGFzc2ljLmpzJyk7XG4gICAgfVxuICAgIHJldHVybiBcImh0dHBzOi8vY2RuLnNlZ21lbnQuY29tL2FuYWx5dGljcy5qcy92MS9cIi5jb25jYXQod3JpdGVLZXksIFwiL2FuYWx5dGljcy5jbGFzc2ljLmpzXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2UtY2RuLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pick: () => (/* binding */ pick)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nfunction pick(object, keys) {\n    return Object.assign.apply(Object, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([{}], keys.map(function (key) {\n        var _a;\n        if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n            return _a = {}, _a[key] = object[key], _a;\n        }\n    }), false));\n}\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3BpY2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDdEM7QUFDQTtBQUNBLFVBQVUsMEJBQTBCO0FBQ3BDLFFBQVE7QUFDUjtBQUNPO0FBQ1AsdUNBQXVDLG9EQUFhLElBQUk7QUFDeEQ7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3BpY2suanM/MmI5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBwaWNrKHsgJ2EnOiAxLCAnYic6ICcyJywgJ2MnOiAzIH0sIFsnYScsICdjJ10pXG4gKiA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpY2sob2JqZWN0LCBrZXlzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBfX3NwcmVhZEFycmF5KFt7fV0sIGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfYSA9IHt9LCBfYVtrZXldID0gb2JqZWN0W2tleV0sIF9hO1xuICAgICAgICB9XG4gICAgfSksIGZhbHNlKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waWNrLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PersistedPriorityQueue: () => (/* binding */ PersistedPriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/environment */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n\n\n\n\nvar loc = {\n    getItem: function () { },\n    setItem: function () { },\n    removeItem: function () { },\n};\ntry {\n    loc = (0,_core_environment__WEBPACK_IMPORTED_MODULE_0__.isBrowser)() && window.localStorage ? window.localStorage : loc;\n}\ncatch (err) {\n    console.warn('Unable to access localStorage', err);\n}\nfunction persisted(key) {\n    var items = loc.getItem(key);\n    return (items ? JSON.parse(items) : []).map(function (p) { return new _core_context__WEBPACK_IMPORTED_MODULE_1__.Context(p.event, p.id); });\n}\nfunction persistItems(key, items) {\n    var existing = persisted(key);\n    var all = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], items, true), existing, true);\n    var merged = all.reduce(function (acc, item) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, acc), (_a = {}, _a[item.id] = item, _a));\n    }, {});\n    loc.setItem(key, JSON.stringify(Object.values(merged)));\n}\nfunction seen(key) {\n    var stored = loc.getItem(key);\n    return stored ? JSON.parse(stored) : {};\n}\nfunction persistSeen(key, memory) {\n    var stored = seen(key);\n    loc.setItem(key, JSON.stringify((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, stored), memory)));\n}\nfunction remove(key) {\n    loc.removeItem(key);\n}\nvar now = function () { return new Date().getTime(); };\nfunction mutex(key, onUnlock, attempt) {\n    if (attempt === void 0) { attempt = 0; }\n    var lockTimeout = 50;\n    var lockKey = \"persisted-queue:v1:\".concat(key, \":lock\");\n    var expired = function (lock) { return new Date().getTime() > lock; };\n    var rawLock = loc.getItem(lockKey);\n    var lock = rawLock ? JSON.parse(rawLock) : null;\n    var allowed = lock === null || expired(lock);\n    if (allowed) {\n        loc.setItem(lockKey, JSON.stringify(now() + lockTimeout));\n        onUnlock();\n        loc.removeItem(lockKey);\n        return;\n    }\n    if (!allowed && attempt < 3) {\n        setTimeout(function () {\n            mutex(key, onUnlock, attempt + 1);\n        }, lockTimeout);\n    }\n    else {\n        console.error('Unable to retrieve lock');\n    }\n}\nvar PersistedPriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__extends)(PersistedPriorityQueue, _super);\n    function PersistedPriorityQueue(maxAttempts, key) {\n        var _this = _super.call(this, maxAttempts, []) || this;\n        var itemsKey = \"persisted-queue:v1:\".concat(key, \":items\");\n        var seenKey = \"persisted-queue:v1:\".concat(key, \":seen\");\n        var saved = [];\n        var lastSeen = {};\n        mutex(key, function () {\n            try {\n                saved = persisted(itemsKey);\n                lastSeen = seen(seenKey);\n                remove(itemsKey);\n                remove(seenKey);\n                _this.queue = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], saved, true), _this.queue, true);\n                _this.seen = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, lastSeen), _this.seen);\n            }\n            catch (err) {\n                console.error(err);\n            }\n        });\n        window.addEventListener('pagehide', function () {\n            // we deliberately want to use the less powerful 'pagehide' API to only persist on events where the analytics instance gets destroyed, and not on tab away.\n            if (_this.todo > 0) {\n                var items_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], _this.queue, true), _this.future, true);\n                try {\n                    mutex(key, function () {\n                        persistItems(itemsKey, items_1);\n                        persistSeen(seenKey, _this.seen);\n                    });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        });\n        return _this;\n    }\n    return PersistedPriorityQueue;\n}(___WEBPACK_IMPORTED_MODULE_3__.PriorityQueue));\n\n//# sourceMappingURL=persisted.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyRDtBQUN6QjtBQUNXO0FBQ007QUFDbkQ7QUFDQSw0QkFBNEI7QUFDNUIsNEJBQTRCO0FBQzVCLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0EsVUFBVSw0REFBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsV0FBVyxrREFBTyxrQkFBa0I7QUFDbkc7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvREFBYSxDQUFDLG9EQUFhO0FBQ3pDO0FBQ0E7QUFDQSxlQUFlLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxnQkFBZ0I7QUFDbkQsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBYSxDQUFDLG9EQUFhO0FBQ3pELDZCQUE2QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG9EQUFhLENBQUMsb0RBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMsNENBQWE7QUFDbUI7QUFDbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkLmpzP2Q5ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fZXh0ZW5kcywgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4nO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uLy4uL2NvcmUvY29udGV4dCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tICcuLi8uLi9jb3JlL2Vudmlyb25tZW50JztcbnZhciBsb2MgPSB7XG4gICAgZ2V0SXRlbTogZnVuY3Rpb24gKCkgeyB9LFxuICAgIHNldEl0ZW06IGZ1bmN0aW9uICgpIHsgfSxcbiAgICByZW1vdmVJdGVtOiBmdW5jdGlvbiAoKSB7IH0sXG59O1xudHJ5IHtcbiAgICBsb2MgPSBpc0Jyb3dzZXIoKSAmJiB3aW5kb3cubG9jYWxTdG9yYWdlID8gd2luZG93LmxvY2FsU3RvcmFnZSA6IGxvYztcbn1cbmNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBhY2Nlc3MgbG9jYWxTdG9yYWdlJywgZXJyKTtcbn1cbmZ1bmN0aW9uIHBlcnNpc3RlZChrZXkpIHtcbiAgICB2YXIgaXRlbXMgPSBsb2MuZ2V0SXRlbShrZXkpO1xuICAgIHJldHVybiAoaXRlbXMgPyBKU09OLnBhcnNlKGl0ZW1zKSA6IFtdKS5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIG5ldyBDb250ZXh0KHAuZXZlbnQsIHAuaWQpOyB9KTtcbn1cbmZ1bmN0aW9uIHBlcnNpc3RJdGVtcyhrZXksIGl0ZW1zKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gcGVyc2lzdGVkKGtleSk7XG4gICAgdmFyIGFsbCA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgaXRlbXMsIHRydWUpLCBleGlzdGluZywgdHJ1ZSk7XG4gICAgdmFyIG1lcmdlZCA9IGFsbC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaXRlbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYWNjKSwgKF9hID0ge30sIF9hW2l0ZW0uaWRdID0gaXRlbSwgX2EpKTtcbiAgICB9LCB7fSk7XG4gICAgbG9jLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShPYmplY3QudmFsdWVzKG1lcmdlZCkpKTtcbn1cbmZ1bmN0aW9uIHNlZW4oa2V5KSB7XG4gICAgdmFyIHN0b3JlZCA9IGxvYy5nZXRJdGVtKGtleSk7XG4gICAgcmV0dXJuIHN0b3JlZCA/IEpTT04ucGFyc2Uoc3RvcmVkKSA6IHt9O1xufVxuZnVuY3Rpb24gcGVyc2lzdFNlZW4oa2V5LCBtZW1vcnkpIHtcbiAgICB2YXIgc3RvcmVkID0gc2VlbihrZXkpO1xuICAgIGxvYy5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoX19hc3NpZ24oX19hc3NpZ24oe30sIHN0b3JlZCksIG1lbW9yeSkpKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICBsb2MucmVtb3ZlSXRlbShrZXkpO1xufVxudmFyIG5vdyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyB9O1xuZnVuY3Rpb24gbXV0ZXgoa2V5LCBvblVubG9jaywgYXR0ZW1wdCkge1xuICAgIGlmIChhdHRlbXB0ID09PSB2b2lkIDApIHsgYXR0ZW1wdCA9IDA7IH1cbiAgICB2YXIgbG9ja1RpbWVvdXQgPSA1MDtcbiAgICB2YXIgbG9ja0tleSA9IFwicGVyc2lzdGVkLXF1ZXVlOnYxOlwiLmNvbmNhdChrZXksIFwiOmxvY2tcIik7XG4gICAgdmFyIGV4cGlyZWQgPSBmdW5jdGlvbiAobG9jaykgeyByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPiBsb2NrOyB9O1xuICAgIHZhciByYXdMb2NrID0gbG9jLmdldEl0ZW0obG9ja0tleSk7XG4gICAgdmFyIGxvY2sgPSByYXdMb2NrID8gSlNPTi5wYXJzZShyYXdMb2NrKSA6IG51bGw7XG4gICAgdmFyIGFsbG93ZWQgPSBsb2NrID09PSBudWxsIHx8IGV4cGlyZWQobG9jayk7XG4gICAgaWYgKGFsbG93ZWQpIHtcbiAgICAgICAgbG9jLnNldEl0ZW0obG9ja0tleSwgSlNPTi5zdHJpbmdpZnkobm93KCkgKyBsb2NrVGltZW91dCkpO1xuICAgICAgICBvblVubG9jaygpO1xuICAgICAgICBsb2MucmVtb3ZlSXRlbShsb2NrS2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWFsbG93ZWQgJiYgYXR0ZW1wdCA8IDMpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtdXRleChrZXksIG9uVW5sb2NrLCBhdHRlbXB0ICsgMSk7XG4gICAgICAgIH0sIGxvY2tUaW1lb3V0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byByZXRyaWV2ZSBsb2NrJyk7XG4gICAgfVxufVxudmFyIFBlcnNpc3RlZFByaW9yaXR5UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBlcnNpc3RlZFByaW9yaXR5UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZShtYXhBdHRlbXB0cywga2V5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1heEF0dGVtcHRzLCBbXSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGl0ZW1zS2V5ID0gXCJwZXJzaXN0ZWQtcXVldWU6djE6XCIuY29uY2F0KGtleSwgXCI6aXRlbXNcIik7XG4gICAgICAgIHZhciBzZWVuS2V5ID0gXCJwZXJzaXN0ZWQtcXVldWU6djE6XCIuY29uY2F0KGtleSwgXCI6c2VlblwiKTtcbiAgICAgICAgdmFyIHNhdmVkID0gW107XG4gICAgICAgIHZhciBsYXN0U2VlbiA9IHt9O1xuICAgICAgICBtdXRleChrZXksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2F2ZWQgPSBwZXJzaXN0ZWQoaXRlbXNLZXkpO1xuICAgICAgICAgICAgICAgIGxhc3RTZWVuID0gc2VlbihzZWVuS2V5KTtcbiAgICAgICAgICAgICAgICByZW1vdmUoaXRlbXNLZXkpO1xuICAgICAgICAgICAgICAgIHJlbW92ZShzZWVuS2V5KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZSA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgc2F2ZWQsIHRydWUpLCBfdGhpcy5xdWV1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VlbiA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBsYXN0U2VlbiksIF90aGlzLnNlZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlaGlkZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHdlIGRlbGliZXJhdGVseSB3YW50IHRvIHVzZSB0aGUgbGVzcyBwb3dlcmZ1bCAncGFnZWhpZGUnIEFQSSB0byBvbmx5IHBlcnNpc3Qgb24gZXZlbnRzIHdoZXJlIHRoZSBhbmFseXRpY3MgaW5zdGFuY2UgZ2V0cyBkZXN0cm95ZWQsIGFuZCBub3Qgb24gdGFiIGF3YXkuXG4gICAgICAgICAgICBpZiAoX3RoaXMudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXNfMSA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX3RoaXMucXVldWUsIHRydWUpLCBfdGhpcy5mdXR1cmUsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG11dGV4KGtleSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdEl0ZW1zKGl0ZW1zS2V5LCBpdGVtc18xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RTZWVuKHNlZW5LZXksIF90aGlzLnNlZW4pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuZXhwb3J0IHsgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGVyc2lzdGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toFacade: () => (/* binding */ toFacade)\n/* harmony export */ });\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(ssr)/./node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction toFacade(evt, options) {\n    var fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Facade(evt, options);\n    if (evt.type === 'track') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track(evt, options);\n    }\n    if (evt.type === 'identify') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify(evt, options);\n    }\n    if (evt.type === 'page') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page(evt, options);\n    }\n    if (evt.type === 'alias') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias(evt, options);\n    }\n    if (evt.type === 'group') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group(evt, options);\n    }\n    if (evt.type === 'screen') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Screen(evt, options);\n    }\n    Object.defineProperty(fcd, 'obj', {\n        value: evt,\n        writable: true,\n    });\n    return fcd;\n}\n//# sourceMappingURL=to-facade.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3RvLWZhY2FkZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUY7QUFDaEY7QUFDUCxrQkFBa0IsbURBQU07QUFDeEI7QUFDQSxrQkFBa0Isa0RBQUs7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixxREFBUTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFJO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQUs7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixrREFBSztBQUN2QjtBQUNBO0FBQ0Esa0JBQWtCLG1EQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi90by1mYWNhZGUuanM/OWVlZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbGlhcywgRmFjYWRlLCBHcm91cCwgSWRlbnRpZnksIFBhZ2UsIFNjcmVlbiwgVHJhY2ssIH0gZnJvbSAnQHNlZ21lbnQvZmFjYWRlJztcbmV4cG9ydCBmdW5jdGlvbiB0b0ZhY2FkZShldnQsIG9wdGlvbnMpIHtcbiAgICB2YXIgZmNkID0gbmV3IEZhY2FkZShldnQsIG9wdGlvbnMpO1xuICAgIGlmIChldnQudHlwZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICBmY2QgPSBuZXcgVHJhY2soZXZ0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKGV2dC50eXBlID09PSAnaWRlbnRpZnknKSB7XG4gICAgICAgIGZjZCA9IG5ldyBJZGVudGlmeShldnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdwYWdlJykge1xuICAgICAgICBmY2QgPSBuZXcgUGFnZShldnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdhbGlhcycpIHtcbiAgICAgICAgZmNkID0gbmV3IEFsaWFzKGV2dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChldnQudHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBmY2QgPSBuZXcgR3JvdXAoZXZ0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKGV2dC50eXBlID09PSAnc2NyZWVuJykge1xuICAgICAgICBmY2QgPSBuZXcgU2NyZWVuKGV2dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmY2QsICdvYmonLCB7XG4gICAgICAgIHZhbHVlOiBldnQsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIH0pO1xuICAgIHJldHVybiBmY2Q7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10by1mYWNhZGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVersionType: () => (/* binding */ getVersionType),\n/* harmony export */   setVersionType: () => (/* binding */ setVersionType)\n/* harmony export */ });\n// Default value will be updated to 'web' in `bundle-umd.ts` for web build.\nvar _version = 'npm';\nfunction setVersionType(version) {\n    _version = version;\n}\nfunction getVersionType() {\n    return _version;\n}\n//# sourceMappingURL=version-type.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3ZlcnNpb24tdHlwZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi92ZXJzaW9uLXR5cGUuanM/ZWZkMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXBkYXRlZCB0byAnd2ViJyBpbiBgYnVuZGxlLXVtZC50c2AgZm9yIHdlYiBidWlsZC5cbnZhciBfdmVyc2lvbiA9ICducG0nO1xuZXhwb3J0IGZ1bmN0aW9uIHNldFZlcnNpb25UeXBlKHZlcnNpb24pIHtcbiAgICBfdmVyc2lvbiA9IHZlcnNpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVyc2lvblR5cGUoKSB7XG4gICAgcmV0dXJuIF92ZXJzaW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi10eXBlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LegacyDestination: () => (/* binding */ LegacyDestination),\n/* harmony export */   ajsDestinations: () => (/* binding */ ajsDestinations)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(ssr)/./node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/connection */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../core/environment */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../lib/merged-options */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/p-while */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../middleware */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loader */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_3__.pWhile)(function () { return queue.length > 0 && (0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOnline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_5__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nvar LegacyDestination = /** @class */ (function () {\n    function LegacyDestination(name, version, writeKey, settings, options, integrationSource) {\n        if (settings === void 0) { settings = {}; }\n        var _this = this;\n        this.options = {};\n        this.type = 'destination';\n        this.middleware = [];\n        this.initializePromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.createDeferred)();\n        this.flushing = false;\n        this.name = name;\n        this.version = version;\n        this.settings = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, settings);\n        this.disableAutoISOConversion = options.disableAutoISOConversion || false;\n        this.integrationSource = integrationSource;\n        // AJS-Renderer sets an extraneous `type` setting that clobbers\n        // existing type defaults. We need to remove it if it's present\n        if (this.settings['type'] && this.settings['type'] === 'browser') {\n            delete this.settings['type'];\n        }\n        this.initializePromise.promise.then(function (isInitialized) { return (_this._initialized = isInitialized); }, function () { });\n        this.options = options;\n        this.buffer = options.disableClientPersistence\n            ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__.PriorityQueue(4, [])\n            : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__.PersistedPriorityQueue(4, \"\".concat(writeKey, \":dest-\").concat(name));\n        this.scheduleFlush();\n    }\n    LegacyDestination.prototype.isLoaded = function () {\n        return !!this._ready;\n    };\n    LegacyDestination.prototype.ready = function () {\n        var _this = this;\n        return this.initializePromise.promise.then(function () { var _a; return (_a = _this.onReady) !== null && _a !== void 0 ? _a : Promise.resolve(); });\n    };\n    LegacyDestination.prototype.load = function (ctx, analyticsInstance) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var integrationSource, _b;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this._ready || this.onReady !== undefined) {\n                            return [2 /*return*/];\n                        }\n                        if (!((_a = this.integrationSource) !== null && _a !== void 0)) return [3 /*break*/, 1];\n                        _b = _a;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, (0,_loader__WEBPACK_IMPORTED_MODULE_9__.loadIntegration)(ctx, this.name, this.version, this.options.obfuscate)];\n                    case 2:\n                        _b = (_c.sent());\n                        _c.label = 3;\n                    case 3:\n                        integrationSource = _b;\n                        this.integration = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.buildIntegration)(integrationSource, this.settings, analyticsInstance);\n                        this.onReady = new Promise(function (resolve) {\n                            var onReadyFn = function () {\n                                _this._ready = true;\n                                resolve(true);\n                            };\n                            _this.integration.once('ready', onReadyFn);\n                        });\n                        this.integration.on('initialize', function () {\n                            _this.initializePromise.resolve(true);\n                        });\n                        try {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                            });\n                            this.integration.initialize();\n                        }\n                        catch (error) {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                                didError: true,\n                            });\n                            this.initializePromise.resolve(false);\n                            throw error;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.unload = function (_ctx, _analyticsInstance) {\n        return (0,_loader__WEBPACK_IMPORTED_MODULE_9__.unloadIntegration)(this.name, this.version, this.options.obfuscate);\n    };\n    LegacyDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        this.middleware = (_a = this.middleware).concat.apply(_a, fn);\n    };\n    LegacyDestination.prototype.shouldBuffer = function (ctx) {\n        return (\n        // page events can't be buffered because of destinations that automatically add page views\n        ctx.event.type !== 'page' &&\n            ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready !== true || this._initialized !== true));\n    };\n    LegacyDestination.prototype.send = function (ctx, clz, eventType) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var plan, ev, planEvent, afterMiddleware, event, err_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.shouldBuffer(ctx)) {\n                            this.buffer.push(ctx);\n                            this.scheduleFlush();\n                            return [2 /*return*/, ctx];\n                        }\n                        plan = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.plan) === null || _b === void 0 ? void 0 : _b.track;\n                        ev = ctx.event.event;\n                        if (plan && ev && this.name !== 'Segment.io') {\n                            planEvent = plan[ev];\n                            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__.isPlanEventEnabled)(plan, planEvent)) {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                            }\n                            else {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations));\n                            }\n                            if ((planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) && (planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations[this.name]) === false) {\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                            }\n                        }\n                        return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_13__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        afterMiddleware = _c.sent();\n                        if (afterMiddleware === null) {\n                            return [2 /*return*/, ctx];\n                        }\n                        event = new clz(afterMiddleware, {\n                            traverse: !this.disableAutoISOConversion,\n                        });\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                        });\n                        _c.label = 2;\n                    case 2:\n                        _c.trys.push([2, 5, , 6]);\n                        if (!this.integration) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.integration.invoke.call(this.integration, eventType, event)];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                            didError: true,\n                        });\n                        throw err_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.track = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track, 'track')];\n            });\n        });\n    };\n    LegacyDestination.prototype.page = function (ctx) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (((_a = this.integration) === null || _a === void 0 ? void 0 : _a._assumesPageview) && !this._initialized) {\n                            this.integration.initialize();\n                        }\n                        return [4 /*yield*/, this.initializePromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page, 'page')];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.identify = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify, 'identify')];\n            });\n        });\n    };\n    LegacyDestination.prototype.alias = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias, 'alias')];\n            });\n        });\n    };\n    LegacyDestination.prototype.group = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group, 'group')];\n            });\n        });\n    };\n    LegacyDestination.prototype.scheduleFlush = function () {\n        var _this = this;\n        if (this.flushing) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready !== true || this._initialized !== true) {\n                            this.scheduleFlush();\n                            return [2 /*return*/];\n                        }\n                        this.flushing = true;\n                        _a = this;\n                        return [4 /*yield*/, flushQueue(this, this.buffer)];\n                    case 1:\n                        _a.buffer = _b.sent();\n                        this.flushing = false;\n                        if (this.buffer.todo > 0) {\n                            this.scheduleFlush();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); }, Math.random() * 5000);\n    };\n    return LegacyDestination;\n}());\n\nfunction ajsDestinations(writeKey, settings, globalIntegrations, options, routingMiddleware, legacyIntegrationSources) {\n    var _a, _b;\n    if (globalIntegrations === void 0) { globalIntegrations = {}; }\n    if (options === void 0) { options = {}; }\n    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_14__.isServer)()) {\n        return [];\n    }\n    if (settings.plan) {\n        options = options !== null && options !== void 0 ? options : {};\n        options.plan = settings.plan;\n    }\n    var routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n    var remoteIntegrationsConfig = settings.integrations;\n    var localIntegrationsConfig = options.integrations;\n    // merged remote CDN settings with user provided options\n    var integrationOptions = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_15__.mergedOptions)(settings, options !== null && options !== void 0 ? options : {});\n    var adhocIntegrationSources = legacyIntegrationSources === null || legacyIntegrationSources === void 0 ? void 0 : legacyIntegrationSources.reduce(function (acc, integrationSource) {\n        var _a;\n        return ((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, acc), (_a = {}, _a[(0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveIntegrationNameFromSource)(integrationSource)] = integrationSource, _a)));\n    }, {});\n    var installableIntegrations = new Set((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)([], Object.keys(remoteIntegrationsConfig).filter(function (name) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_16__.isInstallableIntegration)(name, remoteIntegrationsConfig[name]);\n    }), true), Object.keys(adhocIntegrationSources || {}).filter(function (name) {\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(remoteIntegrationsConfig[name]) ||\n            (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(localIntegrationsConfig === null || localIntegrationsConfig === void 0 ? void 0 : localIntegrationsConfig[name]);\n    }), true));\n    return Array.from(installableIntegrations)\n        .filter(function (name) { return !(0,_utils__WEBPACK_IMPORTED_MODULE_16__.isDisabledIntegration)(name, globalIntegrations); })\n        .map(function (name) {\n        var integrationSettings = remoteIntegrationsConfig[name];\n        var version = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveVersion)(integrationSettings);\n        var destination = new LegacyDestination(name, version, writeKey, integrationOptions[name], options, adhocIntegrationSources === null || adhocIntegrationSources === void 0 ? void 0 : adhocIntegrationSources[name]);\n        var routing = routingRules.filter(function (rule) { return rule.destinationName === name; });\n        if (routing.length > 0 && routingMiddleware) {\n            destination.addMiddleware(routingMiddleware);\n        }\n        return destination;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ0Y7QUFDVjtBQUNLO0FBQ2Y7QUFDQTtBQUNtQjtBQUNaO0FBQ2Q7QUFDYztBQUNtQjtBQUNoQjtBQUN1RTtBQUMzRTtBQUM0QztBQUMxQjtBQUNSO0FBQ2xFO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkRBQVM7QUFDakM7QUFDQTtBQUNBLHlDQUF5QyxvREFBTSxlQUFlLDJCQUEyQiwwREFBUSxLQUFLLGdCQUFnQixPQUFPLGdEQUFTO0FBQ3RJO0FBQ0EsbUNBQW1DLGtEQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRUFBTztBQUNwRTtBQUNBO0FBQ0Esb0VBQW9FLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1Q0FBdUM7QUFDL0Y7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGdGQUFjO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBUSxHQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDhDQUE4QyxpQkFBaUI7QUFDdEk7QUFDQTtBQUNBLGtCQUFrQiw4REFBYTtBQUMvQixrQkFBa0IsaUZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFFBQVEsaUZBQWlGO0FBQzFKO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHdEQUFlO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMseURBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsNEJBQTRCLG9GQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9GQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSwwREFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJEQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrRUFBa0I7QUFDbkQsZ0VBQWdFLCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIsZ0NBQWdDO0FBQ2pKLCtDQUErQyw4REFBa0I7QUFDakU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxnRUFBZ0UsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ3BGO0FBQ0E7QUFDQSwrQ0FBK0MsOERBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsNkNBQTZDLHdFQUEwQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qix3QkFBd0Isb0ZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQsa0RBQUs7QUFDMUQsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGlEQUFJO0FBQ2pFO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUIscURBQXFELHFEQUFRO0FBQzdELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxrREFBSztBQUMxRCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQsa0RBQUs7QUFDMUQsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxPQUFPLGdEQUFTO0FBQ2pEO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQVM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0EsQ0FBQztBQUM0QjtBQUN0QjtBQUNQO0FBQ0EseUNBQXlDO0FBQ3pDLDhCQUE4QjtBQUM5QixRQUFRLDREQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1FQUFhLGdFQUFnRTtBQUMxRztBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxnQkFBZ0IsS0FBSyx5RUFBZ0M7QUFDekYsS0FBSyxJQUFJO0FBQ1QsMENBQTBDLG9EQUFhLENBQUMsb0RBQWE7QUFDckUsZUFBZSxpRUFBd0I7QUFDdkMsS0FBSyxtREFBbUQ7QUFDeEQsZUFBZSx1RUFBYTtBQUM1QixZQUFZLHVFQUFhO0FBQ3pCLEtBQUs7QUFDTDtBQUNBLGtDQUFrQyxRQUFRLDhEQUFxQiw2QkFBNkI7QUFDNUY7QUFDQTtBQUNBLHNCQUFzQix1REFBYztBQUNwQztBQUNBLDREQUE0RCx1Q0FBdUM7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2luZGV4LmpzP2UyYzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEFsaWFzLCBHcm91cCwgSWRlbnRpZnksIFBhZ2UsIFRyYWNrIH0gZnJvbSAnQHNlZ21lbnQvZmFjYWRlJztcbmltcG9ydCB7IGlzT2ZmbGluZSwgaXNPbmxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSAnLi4vLi4vY29yZS9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBhdHRlbXB0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgaXNQbGFuRXZlbnRFbmFibGVkIH0gZnJvbSAnLi4vLi4vbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZCc7XG5pbXBvcnQgeyBtZXJnZWRPcHRpb25zIH0gZnJvbSAnLi4vLi4vbGliL21lcmdlZC1vcHRpb25zJztcbmltcG9ydCB7IHBXaGlsZSB9IGZyb20gJy4uLy4uL2xpYi9wLXdoaWxlJztcbmltcG9ydCB7IFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZS9wZXJzaXN0ZWQnO1xuaW1wb3J0IHsgYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUsIH0gZnJvbSAnLi4vbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBidWlsZEludGVncmF0aW9uLCBsb2FkSW50ZWdyYXRpb24sIHJlc29sdmVJbnRlZ3JhdGlvbk5hbWVGcm9tU291cmNlLCByZXNvbHZlVmVyc2lvbiwgdW5sb2FkSW50ZWdyYXRpb24sIH0gZnJvbSAnLi9sb2FkZXInO1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IGlzRGlzYWJsZWRJbnRlZ3JhdGlvbiBhcyBzaG91bGRTa2lwSW50ZWdyYXRpb24sIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbiwgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IHJlY29yZEludGVncmF0aW9uTWV0cmljIH0gZnJvbSAnLi4vLi4vY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmZ1bmN0aW9uIGZsdXNoUXVldWUoeHQsIHF1ZXVlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmFpbGVkUXVldWU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwV2hpbGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUubGVuZ3RoID4gMCAmJiBpc09ubGluZSgpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCwgcmVzdWx0LCBzdWNjZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXR0ZW1wdChjdHgsIHh0KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSByZXN1bHQgaW5zdGFuY2VvZiBDb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZS5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1hZGQgZmFpbGVkIHRhc2tzXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCBmYWlsZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHsgcmV0dXJuIHF1ZXVlLnB1c2hXaXRoQmFja29mZihmYWlsZWQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG52YXIgTGVnYWN5RGVzdGluYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTGVnYWN5RGVzdGluYXRpb24obmFtZSwgdmVyc2lvbiwgd3JpdGVLZXksIHNldHRpbmdzLCBvcHRpb25zLCBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICBpZiAoc2V0dGluZ3MgPT09IHZvaWQgMCkgeyBzZXR0aW5ncyA9IHt9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnR5cGUgPSAnZGVzdGluYXRpb24nO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplUHJvbWlzZSA9IGNyZWF0ZURlZmVycmVkKCk7XG4gICAgICAgIHRoaXMuZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IF9fYXNzaWduKHt9LCBzZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uID0gb3B0aW9ucy5kaXNhYmxlQXV0b0lTT0NvbnZlcnNpb24gfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb25Tb3VyY2UgPSBpbnRlZ3JhdGlvblNvdXJjZTtcbiAgICAgICAgLy8gQUpTLVJlbmRlcmVyIHNldHMgYW4gZXh0cmFuZW91cyBgdHlwZWAgc2V0dGluZyB0aGF0IGNsb2JiZXJzXG4gICAgICAgIC8vIGV4aXN0aW5nIHR5cGUgZGVmYXVsdHMuIFdlIG5lZWQgdG8gcmVtb3ZlIGl0IGlmIGl0J3MgcHJlc2VudFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc1sndHlwZSddICYmIHRoaXMuc2V0dGluZ3NbJ3R5cGUnXSA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zZXR0aW5nc1sndHlwZSddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChpc0luaXRpYWxpemVkKSB7IHJldHVybiAoX3RoaXMuX2luaXRpYWxpemVkID0gaXNJbml0aWFsaXplZCk7IH0sIGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gb3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2VcbiAgICAgICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUoNCwgW10pXG4gICAgICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKDQsIFwiXCIuY29uY2F0KHdyaXRlS2V5LCBcIjpkZXN0LVwiKS5jb25jYXQobmFtZSkpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmlzTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9yZWFkeTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gX3RoaXMub25SZWFkeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogUHJvbWlzZS5yZXNvbHZlKCk7IH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoY3R4LCBhbmFseXRpY3NJbnN0YW5jZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvblNvdXJjZSwgX2I7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWR5IHx8IHRoaXMub25SZWFkeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gdGhpcy5pbnRlZ3JhdGlvblNvdXJjZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRJbnRlZ3JhdGlvbihjdHgsIHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMub2JmdXNjYXRlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gKF9jLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uU291cmNlID0gX2I7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uID0gYnVpbGRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvblNvdXJjZSwgdGhpcy5zZXR0aW5ncywgYW5hbHl0aWNzSW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlYWR5ID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25SZWFkeUZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW50ZWdyYXRpb24ub25jZSgncmVhZHknLCBvblJlYWR5Rm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLm9uKCdpbml0aWFsaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnaW5pdGlhbGl6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogJ2luaXRpYWxpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2xhc3NpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uIChfY3R4LCBfYW5hbHl0aWNzSW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHVubG9hZEludGVncmF0aW9uKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMub2JmdXNjYXRlKTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5hZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZm5bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSAoX2EgPSB0aGlzLm1pZGRsZXdhcmUpLmNvbmNhdC5hcHBseShfYSwgZm4pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnNob3VsZEJ1ZmZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLy8gcGFnZSBldmVudHMgY2FuJ3QgYmUgYnVmZmVyZWQgYmVjYXVzZSBvZiBkZXN0aW5hdGlvbnMgdGhhdCBhdXRvbWF0aWNhbGx5IGFkZCBwYWdlIHZpZXdzXG4gICAgICAgIGN0eC5ldmVudC50eXBlICE9PSAncGFnZScgJiZcbiAgICAgICAgICAgIChpc09mZmxpbmUoKSB8fCB0aGlzLl9yZWFkeSAhPT0gdHJ1ZSB8fCB0aGlzLl9pbml0aWFsaXplZCAhPT0gdHJ1ZSkpO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoY3R4LCBjbHosIGV2ZW50VHlwZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGxhbiwgZXYsIHBsYW5FdmVudCwgYWZ0ZXJNaWRkbGV3YXJlLCBldmVudCwgZXJyXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG91bGRCdWZmZXIoY3R4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYW4gPSAoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wbGFuKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBldiA9IGN0eC5ldmVudC5ldmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGFuICYmIGV2ICYmIHRoaXMubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhbkV2ZW50ID0gcGxhbltldl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1BsYW5FdmVudEVuYWJsZWQocGxhbiwgcGxhbkV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgudXBkYXRlRXZlbnQoJ2ludGVncmF0aW9ucycsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSwgeyBBbGw6IGZhbHNlLCAnU2VnbWVudC5pbyc6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FuY2VsKG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkV2ZW50IFwiLmNvbmNhdChldiwgXCIgZGlzYWJsZWQgZm9yIGludGVncmF0aW9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiBpbiB0cmFja2luZyBwbGFuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0Ryb3BwZWQgYnkgcGxhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC51cGRhdGVFdmVudCgnaW50ZWdyYXRpb25zJywgX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpLCBwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmVuYWJsZWQpICYmIChwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zW3RoaXMubmFtZV0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FuY2VsKG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkV2ZW50IFwiLmNvbmNhdChldiwgXCIgZGlzYWJsZWQgZm9yIGludGVncmF0aW9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiBpbiB0cmFja2luZyBwbGFuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0Ryb3BwZWQgYnkgcGxhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhcHBseURlc3RpbmF0aW9uTWlkZGxld2FyZSh0aGlzLm5hbWUsIGN0eC5ldmVudCwgdGhpcy5taWRkbGV3YXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyTWlkZGxld2FyZSA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZnRlck1pZGRsZXdhcmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gbmV3IGNseihhZnRlck1pZGRsZXdhcmUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogIXRoaXMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW50ZWdyYXRpb24pIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbnRlZ3JhdGlvbi5pbnZva2UuY2FsbCh0aGlzLmludGVncmF0aW9uLCBldmVudFR5cGUsIGV2ZW50KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgVHJhY2ssICd0cmFjaycpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5pbnRlZ3JhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9hc3N1bWVzUGFnZXZpZXcpICYmICF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb24uaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIFBhZ2UsICdwYWdlJyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBJZGVudGlmeSwgJ2lkZW50aWZ5JyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIEFsaWFzLCAnYWxpYXMnKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgR3JvdXAsICdncm91cCcpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5zY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5mbHVzaGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWlzdXNlZC1wcm9taXNlc1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSB8fCB0aGlzLl9yZWFkeSAhPT0gdHJ1ZSB8fCB0aGlzLl9pbml0aWFsaXplZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmx1c2hRdWV1ZSh0aGlzLCB0aGlzLmJ1ZmZlcildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5idWZmZXIgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idWZmZXIudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0sIE1hdGgucmFuZG9tKCkgKiA1MDAwKTtcbiAgICB9O1xuICAgIHJldHVybiBMZWdhY3lEZXN0aW5hdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBMZWdhY3lEZXN0aW5hdGlvbiB9O1xuZXhwb3J0IGZ1bmN0aW9uIGFqc0Rlc3RpbmF0aW9ucyh3cml0ZUtleSwgc2V0dGluZ3MsIGdsb2JhbEludGVncmF0aW9ucywgb3B0aW9ucywgcm91dGluZ01pZGRsZXdhcmUsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKGdsb2JhbEludGVncmF0aW9ucyA9PT0gdm9pZCAwKSB7IGdsb2JhbEludGVncmF0aW9ucyA9IHt9OyB9XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICBpZiAoaXNTZXJ2ZXIoKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmIChzZXR0aW5ncy5wbGFuKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fTtcbiAgICAgICAgb3B0aW9ucy5wbGFuID0gc2V0dGluZ3MucGxhbjtcbiAgICB9XG4gICAgdmFyIHJvdXRpbmdSdWxlcyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgdmFyIHJlbW90ZUludGVncmF0aW9uc0NvbmZpZyA9IHNldHRpbmdzLmludGVncmF0aW9ucztcbiAgICB2YXIgbG9jYWxJbnRlZ3JhdGlvbnNDb25maWcgPSBvcHRpb25zLmludGVncmF0aW9ucztcbiAgICAvLyBtZXJnZWQgcmVtb3RlIENETiBzZXR0aW5ncyB3aXRoIHVzZXIgcHJvdmlkZWQgb3B0aW9uc1xuICAgIHZhciBpbnRlZ3JhdGlvbk9wdGlvbnMgPSBtZXJnZWRPcHRpb25zKHNldHRpbmdzLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSk7XG4gICAgdmFyIGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID0gbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzID09PSBudWxsIHx8IGxlZ2FjeUludGVncmF0aW9uU291cmNlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGFjYyksIChfYSA9IHt9LCBfYVtyZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZShpbnRlZ3JhdGlvblNvdXJjZSldID0gaW50ZWdyYXRpb25Tb3VyY2UsIF9hKSkpO1xuICAgIH0sIHt9KTtcbiAgICB2YXIgaW5zdGFsbGFibGVJbnRlZ3JhdGlvbnMgPSBuZXcgU2V0KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgT2JqZWN0LmtleXMocmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnKS5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbihuYW1lLCByZW1vdGVJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pO1xuICAgIH0pLCB0cnVlKSwgT2JqZWN0LmtleXMoYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgfHwge30pLmZpbHRlcihmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gaXNQbGFpbk9iamVjdChyZW1vdGVJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pIHx8XG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID09PSBudWxsIHx8IGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbEludGVncmF0aW9uc0NvbmZpZ1tuYW1lXSk7XG4gICAgfSksIHRydWUpKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnN0YWxsYWJsZUludGVncmF0aW9ucylcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gIXNob3VsZFNraXBJbnRlZ3JhdGlvbihuYW1lLCBnbG9iYWxJbnRlZ3JhdGlvbnMpOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBpbnRlZ3JhdGlvblNldHRpbmdzID0gcmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdO1xuICAgICAgICB2YXIgdmVyc2lvbiA9IHJlc29sdmVWZXJzaW9uKGludGVncmF0aW9uU2V0dGluZ3MpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSBuZXcgTGVnYWN5RGVzdGluYXRpb24obmFtZSwgdmVyc2lvbiwgd3JpdGVLZXksIGludGVncmF0aW9uT3B0aW9uc1tuYW1lXSwgb3B0aW9ucywgYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgPT09IG51bGwgfHwgYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzW25hbWVdKTtcbiAgICAgICAgdmFyIHJvdXRpbmcgPSByb3V0aW5nUnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7IHJldHVybiBydWxlLmRlc3RpbmF0aW9uTmFtZSA9PT0gbmFtZTsgfSk7XG4gICAgICAgIGlmIChyb3V0aW5nLmxlbmd0aCA+IDAgJiYgcm91dGluZ01pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZE1pZGRsZXdhcmUocm91dGluZ01pZGRsZXdhcmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIntegration: () => (/* binding */ buildIntegration),\n/* harmony export */   loadIntegration: () => (/* binding */ loadIntegration),\n/* harmony export */   resolveIntegrationNameFromSource: () => (/* binding */ resolveIntegrationNameFromSource),\n/* harmony export */   resolveVersion: () => (/* binding */ resolveVersion),\n/* harmony export */   unloadIntegration: () => (/* binding */ unloadIntegration)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/load-script */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n\n\n\nfunction normalizeName(name) {\n    return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-');\n}\nfunction obfuscatePathName(pathName, obfuscate) {\n    if (obfuscate === void 0) { obfuscate = false; }\n    return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined;\n}\nfunction resolveIntegrationNameFromSource(integrationSource) {\n    return ('Integration' in integrationSource\n        ? integrationSource.Integration\n        : integrationSource).prototype.name;\n}\nfunction recordLoadMetrics(fullPath, ctx, name) {\n    var _a, _b;\n    try {\n        var metric = ((_b = (_a = window === null || window === void 0 ? void 0 : window.performance) === null || _a === void 0 ? void 0 : _a.getEntriesByName(fullPath, 'resource')) !== null && _b !== void 0 ? _b : [])[0];\n        // we assume everything that took under 100ms is cached\n        metric &&\n            ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([\n                name\n            ], (metric.duration < 100 ? ['cached'] : []), true));\n    }\n    catch (_) {\n        // not available\n    }\n}\nfunction buildIntegration(integrationSource, integrationSettings, analyticsInstance) {\n    var integrationCtr;\n    // GA and Appcues use a different interface to instantiating integrations\n    if ('Integration' in integrationSource) {\n        var analyticsStub = {\n            user: function () { return analyticsInstance.user(); },\n            addIntegration: function () { },\n        };\n        integrationSource(analyticsStub);\n        integrationCtr = integrationSource.Integration;\n    }\n    else {\n        integrationCtr = integrationSource;\n    }\n    var integration = new integrationCtr(integrationSettings);\n    integration.analytics = analyticsInstance;\n    return integration;\n}\nfunction loadIntegration(ctx, name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var pathName, obfuscatedPathName, path, fullPath, err_1, deps;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    pathName = normalizeName(name);\n                    obfuscatedPathName = obfuscatePathName(pathName, obfuscate);\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n                    fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(fullPath)];\n                case 2:\n                    _a.sent();\n                    recordLoadMetrics(fullPath, ctx, name);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    ctx.stats.gauge('legacy_destination_time', -1, [\"plugin:\".concat(name), \"failed\"]);\n                    throw err_1;\n                case 4:\n                    deps = window[\"\".concat(pathName, \"Deps\")];\n                    return [4 /*yield*/, Promise.all(deps.map(function (dep) { return (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(path + dep + '.gz'); }))\n                        // @ts-ignore\n                    ];\n                case 5:\n                    _a.sent();\n                    // @ts-ignore\n                    window[\"\".concat(pathName, \"Loader\")]();\n                    return [2 /*return*/, window[\n                        // @ts-ignore\n                        \"\".concat(pathName, \"Integration\")]];\n            }\n        });\n    });\n}\nfunction unloadIntegration(name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, pathName, obfuscatedPathName, fullPath;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n            pathName = normalizeName(name);\n            obfuscatedPathName = obfuscatePathName(name, obfuscate);\n            fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n            return [2 /*return*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.unloadScript)(fullPath)];\n        });\n    });\n}\nfunction resolveVersion(integrationConfig) {\n    var _a, _b, _c, _d;\n    return ((_d = (_b = (_a = integrationConfig === null || integrationConfig === void 0 ? void 0 : integrationConfig.versionSettings) === null || _a === void 0 ? void 0 : _a.override) !== null && _b !== void 0 ? _b : (_c = integrationConfig === null || integrationConfig === void 0 ? void 0 : integrationConfig.versionSettings) === null || _c === void 0 ? void 0 : _c.version) !== null && _d !== void 0 ? _d : 'latest');\n}\n//# sourceMappingURL=loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vbG9hZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThEO0FBQ0Q7QUFDSTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixvREFBYTtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDO0FBQ2xFLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzRUFBc0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsT0FBTyw0REFBVSx1QkFBdUI7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQixtQkFBbUIsc0VBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw4REFBWTtBQUM5QyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2xvYWRlci5qcz9kYjIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGxvYWRTY3JpcHQsIHVubG9hZFNjcmlwdCB9IGZyb20gJy4uLy4uL2xpYi9sb2FkLXNjcmlwdCc7XG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJy4nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xufVxuZnVuY3Rpb24gb2JmdXNjYXRlUGF0aE5hbWUocGF0aE5hbWUsIG9iZnVzY2F0ZSkge1xuICAgIGlmIChvYmZ1c2NhdGUgPT09IHZvaWQgMCkgeyBvYmZ1c2NhdGUgPSBmYWxzZTsgfVxuICAgIHJldHVybiBvYmZ1c2NhdGUgPyBidG9hKHBhdGhOYW1lKS5yZXBsYWNlKC89L2csICcnKSA6IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZShpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgIHJldHVybiAoJ0ludGVncmF0aW9uJyBpbiBpbnRlZ3JhdGlvblNvdXJjZVxuICAgICAgICA/IGludGVncmF0aW9uU291cmNlLkludGVncmF0aW9uXG4gICAgICAgIDogaW50ZWdyYXRpb25Tb3VyY2UpLnByb3RvdHlwZS5uYW1lO1xufVxuZnVuY3Rpb24gcmVjb3JkTG9hZE1ldHJpY3MoZnVsbFBhdGgsIGN0eCwgbmFtZSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIG1ldHJpYyA9ICgoX2IgPSAoX2EgPSB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cucGVyZm9ybWFuY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRFbnRyaWVzQnlOYW1lKGZ1bGxQYXRoLCAncmVzb3VyY2UnKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pWzBdO1xuICAgICAgICAvLyB3ZSBhc3N1bWUgZXZlcnl0aGluZyB0aGF0IHRvb2sgdW5kZXIgMTAwbXMgaXMgY2FjaGVkXG4gICAgICAgIG1ldHJpYyAmJlxuICAgICAgICAgICAgY3R4LnN0YXRzLmdhdWdlKCdsZWdhY3lfZGVzdGluYXRpb25fdGltZScsIE1hdGgucm91bmQobWV0cmljLmR1cmF0aW9uKSwgX19zcHJlYWRBcnJheShbXG4gICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgXSwgKG1ldHJpYy5kdXJhdGlvbiA8IDEwMCA/IFsnY2FjaGVkJ10gOiBbXSksIHRydWUpKTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgLy8gbm90IGF2YWlsYWJsZVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEludGVncmF0aW9uKGludGVncmF0aW9uU291cmNlLCBpbnRlZ3JhdGlvblNldHRpbmdzLCBhbmFseXRpY3NJbnN0YW5jZSkge1xuICAgIHZhciBpbnRlZ3JhdGlvbkN0cjtcbiAgICAvLyBHQSBhbmQgQXBwY3VlcyB1c2UgYSBkaWZmZXJlbnQgaW50ZXJmYWNlIHRvIGluc3RhbnRpYXRpbmcgaW50ZWdyYXRpb25zXG4gICAgaWYgKCdJbnRlZ3JhdGlvbicgaW4gaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICAgICAgdmFyIGFuYWx5dGljc1N0dWIgPSB7XG4gICAgICAgICAgICB1c2VyOiBmdW5jdGlvbiAoKSB7IHJldHVybiBhbmFseXRpY3NJbnN0YW5jZS51c2VyKCk7IH0sXG4gICAgICAgICAgICBhZGRJbnRlZ3JhdGlvbjogZnVuY3Rpb24gKCkgeyB9LFxuICAgICAgICB9O1xuICAgICAgICBpbnRlZ3JhdGlvblNvdXJjZShhbmFseXRpY3NTdHViKTtcbiAgICAgICAgaW50ZWdyYXRpb25DdHIgPSBpbnRlZ3JhdGlvblNvdXJjZS5JbnRlZ3JhdGlvbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGludGVncmF0aW9uQ3RyID0gaW50ZWdyYXRpb25Tb3VyY2U7XG4gICAgfVxuICAgIHZhciBpbnRlZ3JhdGlvbiA9IG5ldyBpbnRlZ3JhdGlvbkN0cihpbnRlZ3JhdGlvblNldHRpbmdzKTtcbiAgICBpbnRlZ3JhdGlvbi5hbmFseXRpY3MgPSBhbmFseXRpY3NJbnN0YW5jZTtcbiAgICByZXR1cm4gaW50ZWdyYXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gbG9hZEludGVncmF0aW9uKGN0eCwgbmFtZSwgdmVyc2lvbiwgb2JmdXNjYXRlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aE5hbWUsIG9iZnVzY2F0ZWRQYXRoTmFtZSwgcGF0aCwgZnVsbFBhdGgsIGVycl8xLCBkZXBzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBwYXRoTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRQYXRoTmFtZSA9IG9iZnVzY2F0ZVBhdGhOYW1lKHBhdGhOYW1lLCBvYmZ1c2NhdGUpO1xuICAgICAgICAgICAgICAgICAgICBwYXRoID0gZ2V0TmV4dEludGVncmF0aW9uc1VSTCgpO1xuICAgICAgICAgICAgICAgICAgICBmdWxsUGF0aCA9IFwiXCIuY29uY2F0KHBhdGgsIFwiL2ludGVncmF0aW9ucy9cIikuY29uY2F0KG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gbnVsbCAmJiBvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IHZvaWQgMCA/IG9iZnVzY2F0ZWRQYXRoTmFtZSA6IHBhdGhOYW1lLCBcIi9cIikuY29uY2F0KHZlcnNpb24sIFwiL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiLmR5bmFtaWMuanMuZ3pcIik7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRTY3JpcHQoZnVsbFBhdGgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkTG9hZE1ldHJpY3MoZnVsbFBhdGgsIGN0eCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnbGVnYWN5X2Rlc3RpbmF0aW9uX3RpbWUnLCAtMSwgW1wicGx1Z2luOlwiLmNvbmNhdChuYW1lKSwgXCJmYWlsZWRcIl0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGRlcHMgPSB3aW5kb3dbXCJcIi5jb25jYXQocGF0aE5hbWUsIFwiRGVwc1wiKV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGRlcHMubWFwKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGxvYWRTY3JpcHQocGF0aCArIGRlcCArICcuZ3onKTsgfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgd2luZG93W1wiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkxvYWRlclwiKV0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHdpbmRvd1tcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkludGVncmF0aW9uXCIpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubG9hZEludGVncmF0aW9uKG5hbWUsIHZlcnNpb24sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGgsIHBhdGhOYW1lLCBvYmZ1c2NhdGVkUGF0aE5hbWUsIGZ1bGxQYXRoO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBwYXRoID0gZ2V0TmV4dEludGVncmF0aW9uc1VSTCgpO1xuICAgICAgICAgICAgcGF0aE5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgb2JmdXNjYXRlZFBhdGhOYW1lID0gb2JmdXNjYXRlUGF0aE5hbWUobmFtZSwgb2JmdXNjYXRlKTtcbiAgICAgICAgICAgIGZ1bGxQYXRoID0gXCJcIi5jb25jYXQocGF0aCwgXCIvaW50ZWdyYXRpb25zL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiL1wiKS5jb25jYXQodmVyc2lvbiwgXCIvXCIpLmNvbmNhdChvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IG51bGwgJiYgb2JmdXNjYXRlZFBhdGhOYW1lICE9PSB2b2lkIDAgPyBvYmZ1c2NhdGVkUGF0aE5hbWUgOiBwYXRoTmFtZSwgXCIuZHluYW1pYy5qcy5nelwiKTtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1bmxvYWRTY3JpcHQoZnVsbFBhdGgpXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVZlcnNpb24oaW50ZWdyYXRpb25Db25maWcpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgcmV0dXJuICgoX2QgPSAoX2IgPSAoX2EgPSBpbnRlZ3JhdGlvbkNvbmZpZyA9PT0gbnVsbCB8fCBpbnRlZ3JhdGlvbkNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW50ZWdyYXRpb25Db25maWcudmVyc2lvblNldHRpbmdzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3ZlcnJpZGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IChfYyA9IGludGVncmF0aW9uQ29uZmlnID09PSBudWxsIHx8IGludGVncmF0aW9uQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbnRlZ3JhdGlvbkNvbmZpZy52ZXJzaW9uU2V0dGluZ3MpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy52ZXJzaW9uKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnbGF0ZXN0Jyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDisabledIntegration: () => (/* binding */ isDisabledIntegration),\n/* harmony export */   isInstallableIntegration: () => (/* binding */ isInstallableIntegration)\n/* harmony export */ });\nvar isInstallableIntegration = function (name, integrationSettings) {\n    var _a;\n    var type = integrationSettings.type, bundlingStatus = integrationSettings.bundlingStatus, versionSettings = integrationSettings.versionSettings;\n    // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n    // destinations without a defined value for `bundlingStatus`\n    var deviceMode = bundlingStatus !== 'unbundled' &&\n        (type === 'browser' || ((_a = versionSettings === null || versionSettings === void 0 ? void 0 : versionSettings.componentTypes) === null || _a === void 0 ? void 0 : _a.includes('browser')));\n    // checking for iterable is a quick fix we need in place to prevent\n    // errors showing Iterable as a failed destiantion. Ideally, we should\n    // fix the Iterable metadata instead, but that's a longer process.\n    return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode;\n};\nvar isDisabledIntegration = function (integrationName, globalIntegrations) {\n    var allDisableAndNotDefined = globalIntegrations.All === false &&\n        globalIntegrations[integrationName] === undefined;\n    return (globalIntegrations[integrationName] === false || allDisableAndNotDefined);\n};\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi91dGlscy5qcz82ZTM3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgaXNJbnN0YWxsYWJsZUludGVncmF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIGludGVncmF0aW9uU2V0dGluZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHR5cGUgPSBpbnRlZ3JhdGlvblNldHRpbmdzLnR5cGUsIGJ1bmRsaW5nU3RhdHVzID0gaW50ZWdyYXRpb25TZXR0aW5ncy5idW5kbGluZ1N0YXR1cywgdmVyc2lvblNldHRpbmdzID0gaW50ZWdyYXRpb25TZXR0aW5ncy52ZXJzaW9uU2V0dGluZ3M7XG4gICAgLy8gV2UgdXNlIGAhPT0gJ3VuYnVuZGxlZCdgICh2ZXJzdXMgYD09PSAnYnVuZGxlZCdgKSB0byBiZSBpbmNsdXNpdmUgb2ZcbiAgICAvLyBkZXN0aW5hdGlvbnMgd2l0aG91dCBhIGRlZmluZWQgdmFsdWUgZm9yIGBidW5kbGluZ1N0YXR1c2BcbiAgICB2YXIgZGV2aWNlTW9kZSA9IGJ1bmRsaW5nU3RhdHVzICE9PSAndW5idW5kbGVkJyAmJlxuICAgICAgICAodHlwZSA9PT0gJ2Jyb3dzZXInIHx8ICgoX2EgPSB2ZXJzaW9uU2V0dGluZ3MgPT09IG51bGwgfHwgdmVyc2lvblNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2ZXJzaW9uU2V0dGluZ3MuY29tcG9uZW50VHlwZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygnYnJvd3NlcicpKSk7XG4gICAgLy8gY2hlY2tpbmcgZm9yIGl0ZXJhYmxlIGlzIGEgcXVpY2sgZml4IHdlIG5lZWQgaW4gcGxhY2UgdG8gcHJldmVudFxuICAgIC8vIGVycm9ycyBzaG93aW5nIEl0ZXJhYmxlIGFzIGEgZmFpbGVkIGRlc3RpYW50aW9uLiBJZGVhbGx5LCB3ZSBzaG91bGRcbiAgICAvLyBmaXggdGhlIEl0ZXJhYmxlIG1ldGFkYXRhIGluc3RlYWQsIGJ1dCB0aGF0J3MgYSBsb25nZXIgcHJvY2Vzcy5cbiAgICByZXR1cm4gIW5hbWUuc3RhcnRzV2l0aCgnU2VnbWVudCcpICYmIG5hbWUgIT09ICdJdGVyYWJsZScgJiYgZGV2aWNlTW9kZTtcbn07XG5leHBvcnQgdmFyIGlzRGlzYWJsZWRJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbk5hbWUsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgIHZhciBhbGxEaXNhYmxlQW5kTm90RGVmaW5lZCA9IGdsb2JhbEludGVncmF0aW9ucy5BbGwgPT09IGZhbHNlICYmXG4gICAgICAgIGdsb2JhbEludGVncmF0aW9uc1tpbnRlZ3JhdGlvbk5hbWVdID09PSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIChnbG9iYWxJbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25OYW1lXSA9PT0gZmFsc2UgfHwgYWxsRGlzYWJsZUFuZE5vdERlZmluZWQpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ampId: () => (/* binding */ ampId),\n/* harmony export */   envEnrichment: () => (/* binding */ envEnrichment),\n/* harmony export */   utm: () => (/* binding */ utm)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(ssr)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/version-type */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n/* harmony import */ var _core_user_tld__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/user/tld */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\");\n/* harmony import */ var _core_query_string_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/query-string/gracefulDecodeURIComponent */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\");\n/* harmony import */ var _core_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _core_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/storage */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\");\n/* harmony import */ var _lib_client_hints__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/client-hints */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js\");\n\n\n\n\n\n\n\n\nvar cookieOptions;\nfunction getCookieOptions() {\n    if (cookieOptions) {\n        return cookieOptions;\n    }\n    var domain = (0,_core_user_tld__WEBPACK_IMPORTED_MODULE_1__.tld)(window.location.href);\n    cookieOptions = {\n        expires: 31536000000,\n        secure: false,\n        path: '/',\n    };\n    if (domain) {\n        cookieOptions.domain = domain;\n    }\n    return cookieOptions;\n}\nfunction ads(query) {\n    var queryIds = {\n        btid: 'dataxu',\n        urid: 'millennial-media',\n    };\n    if (query.startsWith('?')) {\n        query = query.substring(1);\n    }\n    query = query.replace(/\\?/g, '&');\n    var parts = query.split('&');\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        var _a = part.split('='), k = _a[0], v = _a[1];\n        if (queryIds[k]) {\n            return {\n                id: v,\n                type: queryIds[k],\n            };\n        }\n    }\n}\nfunction utm(query) {\n    if (query.startsWith('?')) {\n        query = query.substring(1);\n    }\n    query = query.replace(/\\?/g, '&');\n    return query.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], _b = _a[1], v = _b === void 0 ? '' : _b;\n        if (k.includes('utm_') && k.length > 4) {\n            var utmParam = k.slice(4);\n            if (utmParam === 'campaign') {\n                utmParam = 'name';\n            }\n            acc[utmParam] = (0,_core_query_string_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_2__.gracefulDecodeURIComponent)(v);\n        }\n        return acc;\n    }, {});\n}\nfunction ampId() {\n    var ampId = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('_ga');\n    if (ampId && ampId.startsWith('amp')) {\n        return ampId;\n    }\n}\nfunction referrerId(query, ctx, disablePersistance) {\n    var _a;\n    var storage = new _core_storage__WEBPACK_IMPORTED_MODULE_3__.UniversalStorage(disablePersistance ? [] : [new _core_storage__WEBPACK_IMPORTED_MODULE_4__.CookieStorage(getCookieOptions())]);\n    var stored = storage.get('s:context.referrer');\n    var ad = (_a = ads(query)) !== null && _a !== void 0 ? _a : stored;\n    if (!ad) {\n        return;\n    }\n    if (ctx) {\n        ctx.referrer = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({}, ctx.referrer), ad);\n    }\n    storage.set('s:context.referrer', ad);\n}\n/**\n *\n * @param obj e.g. { foo: 'b', bar: 'd', baz: ['123', '456']}\n * @returns e.g. 'foo=b&bar=d&baz=123&baz=456'\n */\nvar objectToQueryString = function (obj) {\n    try {\n        var searchParams_1 = new URLSearchParams();\n        Object.entries(obj).forEach(function (_a) {\n            var k = _a[0], v = _a[1];\n            if (Array.isArray(v)) {\n                v.forEach(function (value) { return searchParams_1.append(k, value); });\n            }\n            else {\n                searchParams_1.append(k, v);\n            }\n        });\n        return searchParams_1.toString();\n    }\n    catch (_a) {\n        return '';\n    }\n};\nvar EnvironmentEnrichmentPlugin = /** @class */ (function () {\n    function EnvironmentEnrichmentPlugin() {\n        var _this = this;\n        this.name = 'Page Enrichment';\n        this.type = 'before';\n        this.version = '0.1.0';\n        this.isLoaded = function () { return true; };\n        this.load = function (_ctx, instance) { return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(_this, void 0, void 0, function () {\n            var _a, _1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.instance = instance;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        _a = this;\n                        return [4 /*yield*/, (0,_lib_client_hints__WEBPACK_IMPORTED_MODULE_6__.clientHints)(this.instance.options.highEntropyValuesClientHints)];\n                    case 2:\n                        _a.userAgentData = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        _1 = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, Promise.resolve()];\n                }\n            });\n        }); };\n        this.enrich = function (ctx) {\n            var _a, _b;\n            // Note: Types are off - context should never be undefined here, since it is set as part of event creation.\n            var evtCtx = ctx.event.context;\n            var search = evtCtx.page.search || '';\n            var query = typeof search === 'object' ? objectToQueryString(search) : search;\n            evtCtx.userAgent = navigator.userAgent;\n            evtCtx.userAgentData = _this.userAgentData;\n            // @ts-ignore\n            var locale = navigator.userLanguage || navigator.language;\n            if (typeof evtCtx.locale === 'undefined' && typeof locale !== 'undefined') {\n                evtCtx.locale = locale;\n            }\n            (_a = evtCtx.library) !== null && _a !== void 0 ? _a : (evtCtx.library = {\n                name: 'analytics.js',\n                version: \"\".concat((0,_lib_version_type__WEBPACK_IMPORTED_MODULE_7__.getVersionType)() === 'web' ? 'next' : 'npm:next', \"-\").concat(_generated_version__WEBPACK_IMPORTED_MODULE_8__.version),\n            });\n            if (query && !evtCtx.campaign) {\n                evtCtx.campaign = utm(query);\n            }\n            var amp = ampId();\n            if (amp) {\n                evtCtx.amp = { id: amp };\n            }\n            referrerId(query, evtCtx, (_b = _this.instance.options.disableClientPersistence) !== null && _b !== void 0 ? _b : false);\n            try {\n                evtCtx.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            }\n            catch (_) {\n                // If browser doesn't have support leave timezone undefined\n            }\n            return ctx;\n        };\n        this.track = this.enrich;\n        this.identify = this.enrich;\n        this.page = this.enrich;\n        this.group = this.enrich;\n        this.alias = this.enrich;\n        this.screen = this.enrich;\n    }\n    return EnvironmentEnrichmentPlugin;\n}());\nvar envEnrichment = new EnvironmentEnrichmentPlugin();\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9lbnYtZW5yaWNobWVudC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDN0I7QUFDc0I7QUFDTTtBQUNkO0FBQ3NEO0FBQzNCO0FBQ2hCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbURBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQkFBcUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUdBQTBCO0FBQ3REO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNPO0FBQ1AsZ0JBQWdCLGlEQUFHO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBZ0IsZ0NBQWdDLHdEQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHlDQUF5QztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsZ0RBQWdELE9BQU8sZ0RBQVM7QUFDaEU7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsOERBQVc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlFQUFjLGdEQUFnRCx1REFBTztBQUN4RyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvZW52LWVucmljaG1lbnQvaW5kZXguanM/YTkyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IGphciBmcm9tICdqcy1jb29raWUnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGdldFZlcnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vbGliL3ZlcnNpb24tdHlwZSc7XG5pbXBvcnQgeyB0bGQgfSBmcm9tICcuLi8uLi9jb3JlL3VzZXIvdGxkJztcbmltcG9ydCB7IGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9xdWVyeS1zdHJpbmcvZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQnO1xuaW1wb3J0IHsgQ29va2llU3RvcmFnZSwgVW5pdmVyc2FsU3RvcmFnZSB9IGZyb20gJy4uLy4uL2NvcmUvc3RvcmFnZSc7XG5pbXBvcnQgeyBjbGllbnRIaW50cyB9IGZyb20gJy4uLy4uL2xpYi9jbGllbnQtaGludHMnO1xudmFyIGNvb2tpZU9wdGlvbnM7XG5mdW5jdGlvbiBnZXRDb29raWVPcHRpb25zKCkge1xuICAgIGlmIChjb29raWVPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBjb29raWVPcHRpb25zO1xuICAgIH1cbiAgICB2YXIgZG9tYWluID0gdGxkKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICBjb29raWVPcHRpb25zID0ge1xuICAgICAgICBleHBpcmVzOiAzMTUzNjAwMDAwMCxcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgICAgcGF0aDogJy8nLFxuICAgIH07XG4gICAgaWYgKGRvbWFpbikge1xuICAgICAgICBjb29raWVPcHRpb25zLmRvbWFpbiA9IGRvbWFpbjtcbiAgICB9XG4gICAgcmV0dXJuIGNvb2tpZU9wdGlvbnM7XG59XG5mdW5jdGlvbiBhZHMocXVlcnkpIHtcbiAgICB2YXIgcXVlcnlJZHMgPSB7XG4gICAgICAgIGJ0aWQ6ICdkYXRheHUnLFxuICAgICAgICB1cmlkOiAnbWlsbGVubmlhbC1tZWRpYScsXG4gICAgfTtcbiAgICBpZiAocXVlcnkuc3RhcnRzV2l0aCgnPycpKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL1xcPy9nLCAnJicpO1xuICAgIHZhciBwYXJ0cyA9IHF1ZXJ5LnNwbGl0KCcmJyk7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBwYXJ0c18xID0gcGFydHM7IF9pIDwgcGFydHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c18xW19pXTtcbiAgICAgICAgdmFyIF9hID0gcGFydC5zcGxpdCgnPScpLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgaWYgKHF1ZXJ5SWRzW2tdKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiB2LFxuICAgICAgICAgICAgICAgIHR5cGU6IHF1ZXJ5SWRzW2tdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB1dG0ocXVlcnkpIHtcbiAgICBpZiAocXVlcnkuc3RhcnRzV2l0aCgnPycpKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL1xcPy9nLCAnJicpO1xuICAgIHJldHVybiBxdWVyeS5zcGxpdCgnJicpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzdHIpIHtcbiAgICAgICAgdmFyIF9hID0gc3RyLnNwbGl0KCc9JyksIGsgPSBfYVswXSwgX2IgPSBfYVsxXSwgdiA9IF9iID09PSB2b2lkIDAgPyAnJyA6IF9iO1xuICAgICAgICBpZiAoay5pbmNsdWRlcygndXRtXycpICYmIGsubGVuZ3RoID4gNCkge1xuICAgICAgICAgICAgdmFyIHV0bVBhcmFtID0gay5zbGljZSg0KTtcbiAgICAgICAgICAgIGlmICh1dG1QYXJhbSA9PT0gJ2NhbXBhaWduJykge1xuICAgICAgICAgICAgICAgIHV0bVBhcmFtID0gJ25hbWUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjW3V0bVBhcmFtXSA9IGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFtcElkKCkge1xuICAgIHZhciBhbXBJZCA9IGphci5nZXQoJ19nYScpO1xuICAgIGlmIChhbXBJZCAmJiBhbXBJZC5zdGFydHNXaXRoKCdhbXAnKSkge1xuICAgICAgICByZXR1cm4gYW1wSWQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVmZXJyZXJJZChxdWVyeSwgY3R4LCBkaXNhYmxlUGVyc2lzdGFuY2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHN0b3JhZ2UgPSBuZXcgVW5pdmVyc2FsU3RvcmFnZShkaXNhYmxlUGVyc2lzdGFuY2UgPyBbXSA6IFtuZXcgQ29va2llU3RvcmFnZShnZXRDb29raWVPcHRpb25zKCkpXSk7XG4gICAgdmFyIHN0b3JlZCA9IHN0b3JhZ2UuZ2V0KCdzOmNvbnRleHQucmVmZXJyZXInKTtcbiAgICB2YXIgYWQgPSAoX2EgPSBhZHMocXVlcnkpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBzdG9yZWQ7XG4gICAgaWYgKCFhZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjdHgpIHtcbiAgICAgICAgY3R4LnJlZmVycmVyID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5yZWZlcnJlciksIGFkKTtcbiAgICB9XG4gICAgc3RvcmFnZS5zZXQoJ3M6Y29udGV4dC5yZWZlcnJlcicsIGFkKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBvYmogZS5nLiB7IGZvbzogJ2InLCBiYXI6ICdkJywgYmF6OiBbJzEyMycsICc0NTYnXX1cbiAqIEByZXR1cm5zIGUuZy4gJ2Zvbz1iJmJhcj1kJmJhej0xMjMmYmF6PTQ1NidcbiAqL1xudmFyIG9iamVjdFRvUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIHNlYXJjaFBhcmFtc18xID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBPYmplY3QuZW50cmllcyhvYmopLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgayA9IF9hWzBdLCB2ID0gX2FbMV07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAgICAgICAgIHYuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHNlYXJjaFBhcmFtc18xLmFwcGVuZChrLCB2YWx1ZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VhcmNoUGFyYW1zXzEuYXBwZW5kKGssIHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlYXJjaFBhcmFtc18xLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufTtcbnZhciBFbnZpcm9ubWVudEVucmljaG1lbnRQbHVnaW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRW52aXJvbm1lbnRFbnJpY2htZW50UGx1Z2luKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm5hbWUgPSAnUGFnZSBFbnJpY2htZW50JztcbiAgICAgICAgdGhpcy50eXBlID0gJ2JlZm9yZSc7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9ICcwLjEuMCc7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuICAgICAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoX2N0eCwgaW5zdGFuY2UpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSwgXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjbGllbnRIaW50cyh0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGlnaEVudHJvcHlWYWx1ZXNDbGllbnRIaW50cyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS51c2VyQWdlbnREYXRhID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF8xID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVzb2x2ZSgpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHRoaXMuZW5yaWNoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIC8vIE5vdGU6IFR5cGVzIGFyZSBvZmYgLSBjb250ZXh0IHNob3VsZCBuZXZlciBiZSB1bmRlZmluZWQgaGVyZSwgc2luY2UgaXQgaXMgc2V0IGFzIHBhcnQgb2YgZXZlbnQgY3JlYXRpb24uXG4gICAgICAgICAgICB2YXIgZXZ0Q3R4ID0gY3R4LmV2ZW50LmNvbnRleHQ7XG4gICAgICAgICAgICB2YXIgc2VhcmNoID0gZXZ0Q3R4LnBhZ2Uuc2VhcmNoIHx8ICcnO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdHlwZW9mIHNlYXJjaCA9PT0gJ29iamVjdCcgPyBvYmplY3RUb1F1ZXJ5U3RyaW5nKHNlYXJjaCkgOiBzZWFyY2g7XG4gICAgICAgICAgICBldnRDdHgudXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgICAgIGV2dEN0eC51c2VyQWdlbnREYXRhID0gX3RoaXMudXNlckFnZW50RGF0YTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHZhciBsb2NhbGUgPSBuYXZpZ2F0b3IudXNlckxhbmd1YWdlIHx8IG5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZ0Q3R4LmxvY2FsZSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxvY2FsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBldnRDdHgubG9jYWxlID0gbG9jYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF9hID0gZXZ0Q3R4LmxpYnJhcnkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChldnRDdHgubGlicmFyeSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnYW5hbHl0aWNzLmpzJyxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBcIlwiLmNvbmNhdChnZXRWZXJzaW9uVHlwZSgpID09PSAnd2ViJyA/ICduZXh0JyA6ICducG06bmV4dCcsIFwiLVwiKS5jb25jYXQodmVyc2lvbiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChxdWVyeSAmJiAhZXZ0Q3R4LmNhbXBhaWduKSB7XG4gICAgICAgICAgICAgICAgZXZ0Q3R4LmNhbXBhaWduID0gdXRtKHF1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhbXAgPSBhbXBJZCgpO1xuICAgICAgICAgICAgaWYgKGFtcCkge1xuICAgICAgICAgICAgICAgIGV2dEN0eC5hbXAgPSB7IGlkOiBhbXAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZmVycmVySWQocXVlcnksIGV2dEN0eCwgKF9iID0gX3RoaXMuaW5zdGFuY2Uub3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2UpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZXZ0Q3R4LnRpbWV6b25lID0gSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBicm93c2VyIGRvZXNuJ3QgaGF2ZSBzdXBwb3J0IGxlYXZlIHRpbWV6b25lIHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMuZW5yaWNoO1xuICAgICAgICB0aGlzLmlkZW50aWZ5ID0gdGhpcy5lbnJpY2g7XG4gICAgICAgIHRoaXMucGFnZSA9IHRoaXMuZW5yaWNoO1xuICAgICAgICB0aGlzLmdyb3VwID0gdGhpcy5lbnJpY2g7XG4gICAgICAgIHRoaXMuYWxpYXMgPSB0aGlzLmVucmljaDtcbiAgICAgICAgdGhpcy5zY3JlZW4gPSB0aGlzLmVucmljaDtcbiAgICB9XG4gICAgcmV0dXJuIEVudmlyb25tZW50RW5yaWNobWVudFBsdWdpbjtcbn0oKSk7XG5leHBvcnQgdmFyIGVudkVucmljaG1lbnQgPSBuZXcgRW52aXJvbm1lbnRFbnJpY2htZW50UGx1Z2luKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadLegacyVideoPlugins: () => (/* binding */ loadLegacyVideoPlugins)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction loadLegacyVideoPlugins(analytics) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var plugins;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() */ \"vendor-chunks/@segment\").then(__webpack_require__.t.bind(__webpack_require__, /*! @segment/analytics.js-video-plugins/dist/index.umd.js */ \"(ssr)/./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js\", 23))\n                    // This is super gross, but we need to support the `window.analytics.plugins` namespace\n                    // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n                    // @ts-expect-error\n                ];\n                case 1:\n                    plugins = _a.sent();\n                    // This is super gross, but we need to support the `window.analytics.plugins` namespace\n                    // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n                    // @ts-expect-error\n                    analytics._plugins = plugins;\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9sZWdhY3ktdmlkZW8tcGx1Z2lucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUN4QztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0EsNkNBQTZDLG9RQUUrQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2xlZ2FjeS12aWRlby1wbHVnaW5zL2luZGV4LmpzP2JhNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRMZWdhY3lWaWRlb1BsdWdpbnMoYW5hbHl0aWNzKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGx1Z2lucztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgICAgICdAc2VnbWVudC9hbmFseXRpY3MuanMtdmlkZW8tcGx1Z2lucy9kaXN0L2luZGV4LnVtZC5qcycpXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgc3VwZXIgZ3Jvc3MsIGJ1dCB3ZSBuZWVkIHRvIHN1cHBvcnQgdGhlIGB3aW5kb3cuYW5hbHl0aWNzLnBsdWdpbnNgIG5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGlzIGxpbmtlZCBpbiB0aGUgc2VnbWVudCBkb2NzIGluIG9yZGVyIHRvIGJlIGJhY2t3YXJkcyBjb21wYXRpYmxlIHdpdGggYWpzLWNsYXNzaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHN1cGVyIGdyb3NzLCBidXQgd2UgbmVlZCB0byBzdXBwb3J0IHRoZSBgd2luZG93LmFuYWx5dGljcy5wbHVnaW5zYCBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBpcyBsaW5rZWQgaW4gdGhlIHNlZ21lbnQgZG9jcyBpbiBvcmRlciB0byBiZSBiYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoIGFqcy1jbGFzc2ljXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzLl9wbHVnaW5zID0gcGx1Z2lucztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyDestinationMiddleware: () => (/* binding */ applyDestinationMiddleware),\n/* harmony export */   sourceMiddlewarePlugin: () => (/* binding */ sourceMiddlewarePlugin)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/to-facade */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\");\n\n\n\nfunction applyDestinationMiddleware(destination, evt, middleware) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        function applyMiddleware(event, fn) {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n                var nextCalled, returnedEvent;\n                var _a;\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            nextCalled = false;\n                            returnedEvent = null;\n                            return [4 /*yield*/, fn({\n                                    payload: (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(event, {\n                                        clone: true,\n                                        traverse: false,\n                                    }),\n                                    integration: destination,\n                                    next: function (evt) {\n                                        nextCalled = true;\n                                        if (evt === null) {\n                                            returnedEvent = null;\n                                        }\n                                        if (evt) {\n                                            returnedEvent = evt.obj;\n                                        }\n                                    },\n                                })];\n                        case 1:\n                            _b.sent();\n                            if (!nextCalled && returnedEvent !== null) {\n                                returnedEvent = returnedEvent;\n                                returnedEvent.integrations = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, event.integrations), (_a = {}, _a[destination] = false, _a));\n                            }\n                            return [2 /*return*/, returnedEvent];\n                    }\n                });\n            });\n        }\n        var modifiedEvent, _i, middleware_1, md, result;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    modifiedEvent = (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(evt, {\n                        clone: true,\n                        traverse: false,\n                    }).rawEvent();\n                    _i = 0, middleware_1 = middleware;\n                    _a.label = 1;\n                case 1:\n                    if (!(_i < middleware_1.length)) return [3 /*break*/, 4];\n                    md = middleware_1[_i];\n                    return [4 /*yield*/, applyMiddleware(modifiedEvent, md)];\n                case 2:\n                    result = _a.sent();\n                    if (result === null) {\n                        return [2 /*return*/, null];\n                    }\n                    modifiedEvent = result;\n                    _a.label = 3;\n                case 3:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 4: return [2 /*return*/, modifiedEvent];\n            }\n        });\n    });\n}\nfunction sourceMiddlewarePlugin(fn, integrations) {\n    function apply(ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var nextCalled;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        nextCalled = false;\n                        return [4 /*yield*/, fn({\n                                payload: (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(ctx.event, {\n                                    clone: true,\n                                    traverse: false,\n                                }),\n                                integrations: integrations !== null && integrations !== void 0 ? integrations : {},\n                                next: function (evt) {\n                                    nextCalled = true;\n                                    if (evt) {\n                                        ctx.event = evt.obj;\n                                    }\n                                },\n                            })];\n                    case 1:\n                        _a.sent();\n                        if (!nextCalled) {\n                            throw new _core_context__WEBPACK_IMPORTED_MODULE_2__.ContextCancelation({\n                                retry: false,\n                                type: 'middleware_cancellation',\n                                reason: 'Middleware `next` function skipped',\n                            });\n                        }\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    }\n    return {\n        name: \"Source Middleware \".concat(fn.name),\n        type: 'before',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function (ctx) { return Promise.resolve(ctx); },\n        track: apply,\n        page: apply,\n        identify: apply,\n        alias: apply,\n        group: apply,\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9taWRkbGV3YXJlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlEO0FBQ0Q7QUFDVDtBQUN4QztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxtQkFBbUIsZ0RBQVM7QUFDNUI7QUFDQTtBQUNBLHVCQUF1QixrREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHdEQUFRO0FBQ3JEO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsK0JBQStCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBLG9DQUFvQyx3REFBUTtBQUM1QztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx3REFBUTtBQUNqRDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGtIQUFrSDtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNkRBQWtCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsY0FBYztBQUM5QywrQkFBK0IsOEJBQThCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL21pZGRsZXdhcmUvaW5kZXguanM/ZDhiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IHRvRmFjYWRlIH0gZnJvbSAnLi4vLi4vbGliL3RvLWZhY2FkZSc7XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUoZGVzdGluYXRpb24sIGV2dCwgbWlkZGxld2FyZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gYXBwbHlNaWRkbGV3YXJlKGV2ZW50LCBmbikge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0Q2FsbGVkLCByZXR1cm5lZEV2ZW50O1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogdG9GYWNhZGUoZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uOiBkZXN0aW5hdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkRXZlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkRXZlbnQgPSBldnQub2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkICYmIHJldHVybmVkRXZlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudCA9IHJldHVybmVkRXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkRXZlbnQuaW50ZWdyYXRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50LmludGVncmF0aW9ucyksIChfYSA9IHt9LCBfYVtkZXN0aW5hdGlvbl0gPSBmYWxzZSwgX2EpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJldHVybmVkRXZlbnRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbW9kaWZpZWRFdmVudCwgX2ksIG1pZGRsZXdhcmVfMSwgbWQsIHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRFdmVudCA9IHRvRmFjYWRlKGV2dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pLnJhd0V2ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9pID0gMCwgbWlkZGxld2FyZV8xID0gbWlkZGxld2FyZTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBtaWRkbGV3YXJlXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIG1kID0gbWlkZGxld2FyZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXBwbHlNaWRkbGV3YXJlKG1vZGlmaWVkRXZlbnQsIG1kKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtb2RpZmllZEV2ZW50ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBfaSsrO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBtb2RpZmllZEV2ZW50XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc291cmNlTWlkZGxld2FyZVBsdWdpbihmbiwgaW50ZWdyYXRpb25zKSB7XG4gICAgZnVuY3Rpb24gYXBwbHkoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXh0Q2FsbGVkO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiB0b0ZhY2FkZShjdHguZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBpbnRlZ3JhdGlvbnMgIT09IG51bGwgJiYgaW50ZWdyYXRpb25zICE9PSB2b2lkIDAgPyBpbnRlZ3JhdGlvbnMgOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmV2ZW50ID0gZXZ0Lm9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV4dENhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtaWRkbGV3YXJlX2NhbmNlbGxhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ01pZGRsZXdhcmUgYG5leHRgIGZ1bmN0aW9uIHNraXBwZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBcIlNvdXJjZSBNaWRkbGV3YXJlIFwiLmNvbmNhdChmbi5uYW1lKSxcbiAgICAgICAgdHlwZTogJ2JlZm9yZScsXG4gICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgIGlzTG9hZGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoY3R4KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTsgfSxcbiAgICAgICAgdHJhY2s6IGFwcGx5LFxuICAgICAgICBwYWdlOiBhcHBseSxcbiAgICAgICAgaWRlbnRpZnk6IGFwcGx5LFxuICAgICAgICBhbGlhczogYXBwbHksXG4gICAgICAgIGdyb3VwOiBhcHBseSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionDestination: () => (/* binding */ ActionDestination),\n/* harmony export */   remoteLoader: () => (/* binding */ remoteLoader)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/load-script */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\nvar ActionDestination = /** @class */ (function () {\n    function ActionDestination(name, action) {\n        this.version = '1.0.0';\n        this.alternativeNames = [];\n        this.loadPromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__.createDeferred)();\n        this.middleware = [];\n        this.alias = this._createMethod('alias');\n        this.group = this._createMethod('group');\n        this.identify = this._createMethod('identify');\n        this.page = this._createMethod('page');\n        this.screen = this._createMethod('screen');\n        this.track = this._createMethod('track');\n        this.action = action;\n        this.name = name;\n        this.type = action.type;\n        this.alternativeNames.push(action.name);\n    }\n    ActionDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        /** Make sure we only apply destination filters to actions of the \"destination\" type to avoid causing issues for hybrid destinations */\n        if (this.type === 'destination') {\n            (_a = this.middleware).push.apply(_a, fn);\n        }\n    };\n    ActionDestination.prototype.transform = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var modifiedEvent;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_2__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        modifiedEvent = _a.sent();\n                        if (modifiedEvent === null) {\n                            ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation({\n                                retry: false,\n                                reason: 'dropped by destination middleware',\n                            }));\n                        }\n                        return [2 /*return*/, new _core_context__WEBPACK_IMPORTED_MODULE_4__.Context(modifiedEvent)];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype._createMethod = function (methodName) {\n        var _this = this;\n        return function (ctx) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var transformedContext, error_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.action[methodName])\n                            return [2 /*return*/, ctx];\n                        transformedContext = ctx;\n                        if (!(this.type === 'destination')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.transform(ctx)];\n                    case 1:\n                        transformedContext = _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 5, , 6]);\n                        return [4 /*yield*/, this.ready()];\n                    case 3:\n                        if (!(_a.sent())) {\n                            throw new Error('Something prevented the destination from getting ready');\n                        }\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: methodName,\n                            type: 'action',\n                        });\n                        return [4 /*yield*/, this.action[methodName](transformedContext)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: methodName,\n                            type: 'action',\n                            didError: true,\n                        });\n                        throw error_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        }); };\n    };\n    /* --- PASSTHROUGH METHODS --- */\n    ActionDestination.prototype.isLoaded = function () {\n        return this.action.isLoaded();\n    };\n    ActionDestination.prototype.ready = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.loadPromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, true];\n                    case 2:\n                        _a = _b.sent();\n                        return [2 /*return*/, false];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype.load = function (ctx, analytics) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var loadP, _a, _b, error_2;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.loadPromise.isSettled()) {\n                            return [2 /*return*/, this.loadPromise.promise];\n                        }\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 3, , 4]);\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: 'load',\n                            type: 'action',\n                        });\n                        loadP = this.action.load(ctx, analytics);\n                        _b = (_a = this.loadPromise).resolve;\n                        return [4 /*yield*/, loadP];\n                    case 2:\n                        _b.apply(_a, [_c.sent()]);\n                        return [2 /*return*/, loadP];\n                    case 3:\n                        error_2 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: 'load',\n                            type: 'action',\n                            didError: true,\n                        });\n                        this.loadPromise.reject(error_2);\n                        throw error_2;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype.unload = function (ctx, analytics) {\n        var _a, _b;\n        return (_b = (_a = this.action).unload) === null || _b === void 0 ? void 0 : _b.call(_a, ctx, analytics);\n    };\n    return ActionDestination;\n}());\n\nfunction validate(pluginLike) {\n    if (!Array.isArray(pluginLike)) {\n        throw new Error('Not a valid list of plugins');\n    }\n    var required = ['load', 'isLoaded', 'name', 'version', 'type'];\n    pluginLike.forEach(function (plugin) {\n        required.forEach(function (method) {\n            var _a;\n            if (plugin[method] === undefined) {\n                throw new Error(\"Plugin: \".concat((_a = plugin.name) !== null && _a !== void 0 ? _a : 'unknown', \" missing required function \").concat(method));\n            }\n        });\n    });\n    return true;\n}\nfunction isPluginDisabled(userIntegrations, remotePlugin) {\n    var creationNameEnabled = userIntegrations[remotePlugin.creationName];\n    var currentNameEnabled = userIntegrations[remotePlugin.name];\n    // Check that the plugin isn't explicitly enabled when All: false\n    if (userIntegrations.All === false &&\n        !creationNameEnabled &&\n        !currentNameEnabled) {\n        return true;\n    }\n    // Check that the plugin isn't explicitly disabled\n    if (creationNameEnabled === false || currentNameEnabled === false) {\n        return true;\n    }\n    return false;\n}\nfunction loadPluginFactory(remotePlugin, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var defaultCdn, cdn, urlSplit, name_1, obfuscatedURL, error_3, err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 9, , 10]);\n                    defaultCdn = new RegExp('https://cdn.segment.(com|build)');\n                    cdn = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_6__.getCDN)();\n                    if (!obfuscate) return [3 /*break*/, 6];\n                    urlSplit = remotePlugin.url.split('/');\n                    name_1 = urlSplit[urlSplit.length - 2];\n                    obfuscatedURL = remotePlugin.url.replace(name_1, btoa(name_1).replace(/=/g, ''));\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 5]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(obfuscatedURL.replace(defaultCdn, cdn))];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3:\n                    error_3 = _a.sent();\n                    // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n                    // We should use the unobfuscated version as a fallback.\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(remotePlugin.url.replace(defaultCdn, cdn))];\n                case 4:\n                    // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n                    // We should use the unobfuscated version as a fallback.\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 5: return [3 /*break*/, 8];\n                case 6: return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(remotePlugin.url.replace(defaultCdn, cdn))];\n                case 7:\n                    _a.sent();\n                    _a.label = 8;\n                case 8:\n                    // @ts-expect-error\n                    if (typeof window[remotePlugin.libraryName] === 'function') {\n                        // @ts-expect-error\n                        return [2 /*return*/, window[remotePlugin.libraryName]];\n                    }\n                    return [3 /*break*/, 10];\n                case 9:\n                    err_1 = _a.sent();\n                    console.error('Failed to create PluginFactory', remotePlugin);\n                    throw err_1;\n                case 10: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction remoteLoader(settings, userIntegrations, mergedIntegrations, options, routingMiddleware, pluginSources) {\n    var _a, _b, _c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var allPlugins, routingRules, pluginPromises;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    allPlugins = [];\n                    routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n                    pluginPromises = ((_c = settings.remotePlugins) !== null && _c !== void 0 ? _c : []).map(function (remotePlugin) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                        var pluginFactory, _a, plugin, plugins, routing_1, error_4;\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (isPluginDisabled(userIntegrations, remotePlugin))\n                                        return [2 /*return*/];\n                                    _b.label = 1;\n                                case 1:\n                                    _b.trys.push([1, 6, , 7]);\n                                    _a = (pluginSources === null || pluginSources === void 0 ? void 0 : pluginSources.find(function (_a) {\n                                        var pluginName = _a.pluginName;\n                                        return pluginName === remotePlugin.name;\n                                    }));\n                                    if (_a) return [3 /*break*/, 3];\n                                    return [4 /*yield*/, loadPluginFactory(remotePlugin, options === null || options === void 0 ? void 0 : options.obfuscate)];\n                                case 2:\n                                    _a = (_b.sent());\n                                    _b.label = 3;\n                                case 3:\n                                    pluginFactory = _a;\n                                    if (!pluginFactory) return [3 /*break*/, 5];\n                                    return [4 /*yield*/, pluginFactory((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, remotePlugin.settings), mergedIntegrations[remotePlugin.name]))];\n                                case 4:\n                                    plugin = _b.sent();\n                                    plugins = Array.isArray(plugin) ? plugin : [plugin];\n                                    validate(plugins);\n                                    routing_1 = routingRules.filter(function (rule) { return rule.destinationName === remotePlugin.creationName; });\n                                    plugins.forEach(function (plugin) {\n                                        var wrapper = new ActionDestination(remotePlugin.creationName, plugin);\n                                        if (routing_1.length && routingMiddleware) {\n                                            wrapper.addMiddleware(routingMiddleware);\n                                        }\n                                        allPlugins.push(wrapper);\n                                    });\n                                    _b.label = 5;\n                                case 5: return [3 /*break*/, 7];\n                                case 6:\n                                    error_4 = _b.sent();\n                                    console.warn('Failed to load Remote Plugin', error_4);\n                                    return [3 /*break*/, 7];\n                                case 7: return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                    return [4 /*yield*/, Promise.all(pluginPromises)];\n                case 1:\n                    _d.sent();\n                    return [2 /*return*/, allPlugins.filter(Boolean)];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yZW1vdGUtbG9hZGVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDTjtBQUNOO0FBQ2U7QUFDSztBQUNTO0FBQ1I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0ZBQWM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBLGlEQUFpRCx1RUFBMEI7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDZEQUFrQjtBQUM3RDtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0Esa0RBQWtELGtEQUFPO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTyxnREFBUztBQUNoRDtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtRkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDREQUFVO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUlBQXVJLE9BQU8sZ0RBQVM7QUFDdko7QUFDQSwrQkFBK0Isa0RBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0YsNERBQTREO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQixJQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3JlbW90ZS1sb2FkZXIvaW5kZXguanM/NGY4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgbG9hZFNjcmlwdCB9IGZyb20gJy4uLy4uL2xpYi9sb2FkLXNjcmlwdCc7XG5pbXBvcnQgeyBnZXRDRE4gfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlLCB9IGZyb20gJy4uL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IHJlY29yZEludGVncmF0aW9uTWV0cmljIH0gZnJvbSAnLi4vLi4vY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbnZhciBBY3Rpb25EZXN0aW5hdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBY3Rpb25EZXN0aW5hdGlvbihuYW1lLCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gJzEuMC4wJztcbiAgICAgICAgdGhpcy5hbHRlcm5hdGl2ZU5hbWVzID0gW107XG4gICAgICAgIHRoaXMubG9hZFByb21pc2UgPSBjcmVhdGVEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnYWxpYXMnKTtcbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnZ3JvdXAnKTtcbiAgICAgICAgdGhpcy5pZGVudGlmeSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnaWRlbnRpZnknKTtcbiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdwYWdlJyk7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdzY3JlZW4nKTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2snKTtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudHlwZSA9IGFjdGlvbi50eXBlO1xuICAgICAgICB0aGlzLmFsdGVybmF0aXZlTmFtZXMucHVzaChhY3Rpb24ubmFtZSk7XG4gICAgfVxuICAgIEFjdGlvbkRlc3RpbmF0aW9uLnByb3RvdHlwZS5hZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZm5bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICAvKiogTWFrZSBzdXJlIHdlIG9ubHkgYXBwbHkgZGVzdGluYXRpb24gZmlsdGVycyB0byBhY3Rpb25zIG9mIHRoZSBcImRlc3RpbmF0aW9uXCIgdHlwZSB0byBhdm9pZCBjYXVzaW5nIGlzc3VlcyBmb3IgaHlicmlkIGRlc3RpbmF0aW9ucyAqL1xuICAgICAgICBpZiAodGhpcy50eXBlID09PSAnZGVzdGluYXRpb24nKSB7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLm1pZGRsZXdhcmUpLnB1c2guYXBwbHkoX2EsIGZuKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZGlmaWVkRXZlbnQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlKHRoaXMubmFtZSwgY3R4LmV2ZW50LCB0aGlzLm1pZGRsZXdhcmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRFdmVudCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RpZmllZEV2ZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbmNlbChuZXcgQ29udGV4dENhbmNlbGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdkcm9wcGVkIGJ5IGRlc3RpbmF0aW9uIG1pZGRsZXdhcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgQ29udGV4dChtb2RpZmllZEV2ZW50KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLl9jcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN0eCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybWVkQ29udGV4dCwgZXJyb3JfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5hY3Rpb25bbWV0aG9kTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvbnRleHQgPSBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudHJhbnNmb3JtKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvbnRleHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlYWR5KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYS5zZW50KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb21ldGhpbmcgcHJldmVudGVkIHRoZSBkZXN0aW5hdGlvbiBmcm9tIGdldHRpbmcgcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5hY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBtZXRob2ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmFjdGlvblttZXRob2ROYW1lXSh0cmFuc2Zvcm1lZENvbnRleHQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMuYWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogbWV0aG9kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JfMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgfTtcbiAgICAvKiAtLS0gUEFTU1RIUk9VR0ggTUVUSE9EUyAtLS0gKi9cbiAgICBBY3Rpb25EZXN0aW5hdGlvbi5wcm90b3R5cGUuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5pc0xvYWRlZCgpO1xuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2FkUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFjdGlvbkRlc3RpbmF0aW9uLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsb2FkUCwgX2EsIF9iLCBlcnJvcl8yO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFByb21pc2UuaXNTZXR0bGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5sb2FkUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5hY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQID0gdGhpcy5hY3Rpb24ubG9hZChjdHgsIGFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IChfYSA9IHRoaXMubG9hZFByb21pc2UpLnJlc29sdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmFwcGx5KF9hLCBbX2Muc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbG9hZFBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLmFjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWU6ICdsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUHJvbWlzZS5yZWplY3QoZXJyb3JfMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBY3Rpb25EZXN0aW5hdGlvbi5wcm90b3R5cGUudW5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLmFjdGlvbikudW5sb2FkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgY3R4LCBhbmFseXRpY3MpO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbkRlc3RpbmF0aW9uO1xufSgpKTtcbmV4cG9ydCB7IEFjdGlvbkRlc3RpbmF0aW9uIH07XG5mdW5jdGlvbiB2YWxpZGF0ZShwbHVnaW5MaWtlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBsdWdpbkxpa2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQgbGlzdCBvZiBwbHVnaW5zJyk7XG4gICAgfVxuICAgIHZhciByZXF1aXJlZCA9IFsnbG9hZCcsICdpc0xvYWRlZCcsICduYW1lJywgJ3ZlcnNpb24nLCAndHlwZSddO1xuICAgIHBsdWdpbkxpa2UuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgIHJlcXVpcmVkLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKHBsdWdpblttZXRob2RdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbHVnaW46IFwiLmNvbmNhdCgoX2EgPSBwbHVnaW4ubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3Vua25vd24nLCBcIiBtaXNzaW5nIHJlcXVpcmVkIGZ1bmN0aW9uIFwiKS5jb25jYXQobWV0aG9kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNQbHVnaW5EaXNhYmxlZCh1c2VySW50ZWdyYXRpb25zLCByZW1vdGVQbHVnaW4pIHtcbiAgICB2YXIgY3JlYXRpb25OYW1lRW5hYmxlZCA9IHVzZXJJbnRlZ3JhdGlvbnNbcmVtb3RlUGx1Z2luLmNyZWF0aW9uTmFtZV07XG4gICAgdmFyIGN1cnJlbnROYW1lRW5hYmxlZCA9IHVzZXJJbnRlZ3JhdGlvbnNbcmVtb3RlUGx1Z2luLm5hbWVdO1xuICAgIC8vIENoZWNrIHRoYXQgdGhlIHBsdWdpbiBpc24ndCBleHBsaWNpdGx5IGVuYWJsZWQgd2hlbiBBbGw6IGZhbHNlXG4gICAgaWYgKHVzZXJJbnRlZ3JhdGlvbnMuQWxsID09PSBmYWxzZSAmJlxuICAgICAgICAhY3JlYXRpb25OYW1lRW5hYmxlZCAmJlxuICAgICAgICAhY3VycmVudE5hbWVFbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBDaGVjayB0aGF0IHRoZSBwbHVnaW4gaXNuJ3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmIChjcmVhdGlvbk5hbWVFbmFibGVkID09PSBmYWxzZSB8fCBjdXJyZW50TmFtZUVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBsb2FkUGx1Z2luRmFjdG9yeShyZW1vdGVQbHVnaW4sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRDZG4sIGNkbiwgdXJsU3BsaXQsIG5hbWVfMSwgb2JmdXNjYXRlZFVSTCwgZXJyb3JfMywgZXJyXzE7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgOSwgLCAxMF0pO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2RuID0gbmV3IFJlZ0V4cCgnaHR0cHM6Ly9jZG4uc2VnbWVudC4oY29tfGJ1aWxkKScpO1xuICAgICAgICAgICAgICAgICAgICBjZG4gPSBnZXRDRE4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmZ1c2NhdGUpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICB1cmxTcGxpdCA9IHJlbW90ZVBsdWdpbi51cmwuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZV8xID0gdXJsU3BsaXRbdXJsU3BsaXQubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRVUkwgPSByZW1vdGVQbHVnaW4udXJsLnJlcGxhY2UobmFtZV8xLCBidG9hKG5hbWVfMSkucmVwbGFjZSgvPS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KG9iZnVzY2F0ZWRVUkwucmVwbGFjZShkZWZhdWx0Q2RuLCBjZG4pKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRHVlIHRvIHN5bmNpbmcgY29uY2VybnMgaXQgaXMgcG9zc2libGUgdGhhdCB0aGUgb2JmdXNjYXRlZCBhY3Rpb24gZGVzdGluYXRpb24gKG9yIHJlcXVlc3RlZCB2ZXJzaW9uKSBtaWdodCBub3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHNob3VsZCB1c2UgdGhlIHVub2JmdXNjYXRlZCB2ZXJzaW9uIGFzIGEgZmFsbGJhY2suXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRTY3JpcHQocmVtb3RlUGx1Z2luLnVybC5yZXBsYWNlKGRlZmF1bHRDZG4sIGNkbikpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIER1ZSB0byBzeW5jaW5nIGNvbmNlcm5zIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIG9iZnVzY2F0ZWQgYWN0aW9uIGRlc3RpbmF0aW9uIChvciByZXF1ZXN0ZWQgdmVyc2lvbikgbWlnaHQgbm90IGV4aXN0LlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgdXNlIHRoZSB1bm9iZnVzY2F0ZWQgdmVyc2lvbiBhcyBhIGZhbGxiYWNrLlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KHJlbW90ZVBsdWdpbi51cmwucmVwbGFjZShkZWZhdWx0Q2RuLCBjZG4pKV07XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gODtcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3dbcmVtb3RlUGx1Z2luLmxpYnJhcnlOYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHdpbmRvd1tyZW1vdGVQbHVnaW4ubGlicmFyeU5hbWVdXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMF07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBQbHVnaW5GYWN0b3J5JywgcmVtb3RlUGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzE7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdGVMb2FkZXIoc2V0dGluZ3MsIHVzZXJJbnRlZ3JhdGlvbnMsIG1lcmdlZEludGVncmF0aW9ucywgb3B0aW9ucywgcm91dGluZ01pZGRsZXdhcmUsIHBsdWdpblNvdXJjZXMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGxQbHVnaW5zLCByb3V0aW5nUnVsZXMsIHBsdWdpblByb21pc2VzO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9kKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9kLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBhbGxQbHVnaW5zID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJvdXRpbmdSdWxlcyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpblByb21pc2VzID0gKChfYyA9IHNldHRpbmdzLnJlbW90ZVBsdWdpbnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFtdKS5tYXAoZnVuY3Rpb24gKHJlbW90ZVBsdWdpbikgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbkZhY3RvcnksIF9hLCBwbHVnaW4sIHBsdWdpbnMsIHJvdXRpbmdfMSwgZXJyb3JfNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1BsdWdpbkRpc2FibGVkKHVzZXJJbnRlZ3JhdGlvbnMsIHJlbW90ZVBsdWdpbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsIDYsICwgN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAocGx1Z2luU291cmNlcyA9PT0gbnVsbCB8fCBwbHVnaW5Tb3VyY2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5Tb3VyY2VzLmZpbmQoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbk5hbWUgPSBfYS5wbHVnaW5OYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5OYW1lID09PSByZW1vdGVQbHVnaW4ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUGx1Z2luRmFjdG9yeShyZW1vdGVQbHVnaW4sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vYmZ1c2NhdGUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAoX2Iuc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luRmFjdG9yeSA9IF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW5GYWN0b3J5KSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbkZhY3RvcnkoX19hc3NpZ24oX19hc3NpZ24oe30sIHJlbW90ZVBsdWdpbi5zZXR0aW5ncyksIG1lcmdlZEludGVncmF0aW9uc1tyZW1vdGVQbHVnaW4ubmFtZV0pKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbiA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbnMgPSBBcnJheS5pc0FycmF5KHBsdWdpbikgPyBwbHVnaW4gOiBbcGx1Z2luXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlKHBsdWdpbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGluZ18xID0gcm91dGluZ1J1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkgeyByZXR1cm4gcnVsZS5kZXN0aW5hdGlvbk5hbWUgPT09IHJlbW90ZVBsdWdpbi5jcmVhdGlvbk5hbWU7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IG5ldyBBY3Rpb25EZXN0aW5hdGlvbihyZW1vdGVQbHVnaW4uY3JlYXRpb25OYW1lLCBwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3V0aW5nXzEubGVuZ3RoICYmIHJvdXRpbmdNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYWRkTWlkZGxld2FyZShyb3V0aW5nTWlkZGxld2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFBsdWdpbnMucHVzaCh3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl80ID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBSZW1vdGUgUGx1Z2luJywgZXJyb3JfNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwocGx1Z2luUHJvbWlzZXMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9kLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFsbFBsdWdpbnMuZmlsdGVyKEJvb2xlYW4pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remoteMiddlewares: () => (/* binding */ remoteMiddlewares)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/environment */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/load-script */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n\n\n\n\nfunction remoteMiddlewares(ctx, settings, obfuscate) {\n    var _a;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, remoteMiddleware, names, scripts, middleware;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_1__.isServer)()) {\n                        return [2 /*return*/, []];\n                    }\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__.getNextIntegrationsURL)();\n                    remoteMiddleware = (_a = settings.enabledMiddleware) !== null && _a !== void 0 ? _a : {};\n                    names = Object.entries(remoteMiddleware)\n                        .filter(function (_a) {\n                        var _ = _a[0], enabled = _a[1];\n                        return enabled;\n                    })\n                        .map(function (_a) {\n                        var name = _a[0];\n                        return name;\n                    });\n                    scripts = names.map(function (name) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n                        var nonNamespaced, bundleName, fullPath, error_1;\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    nonNamespaced = name.replace('@segment/', '');\n                                    bundleName = nonNamespaced;\n                                    if (obfuscate) {\n                                        bundleName = btoa(nonNamespaced).replace(/=/g, '');\n                                    }\n                                    fullPath = \"\".concat(path, \"/middleware/\").concat(bundleName, \"/latest/\").concat(bundleName, \".js.gz\");\n                                    _a.label = 1;\n                                case 1:\n                                    _a.trys.push([1, 3, , 4]);\n                                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_3__.loadScript)(fullPath)\n                                        // @ts-ignore\n                                    ];\n                                case 2:\n                                    _a.sent();\n                                    // @ts-ignore\n                                    return [2 /*return*/, window[\"\".concat(nonNamespaced, \"Middleware\")]];\n                                case 3:\n                                    error_1 = _a.sent();\n                                    ctx.log('error', error_1);\n                                    ctx.stats.increment('failed_remote_middleware');\n                                    return [3 /*break*/, 4];\n                                case 4: return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                    return [4 /*yield*/, Promise.all(scripts)];\n                case 1:\n                    middleware = _b.sent();\n                    middleware = middleware.filter(Boolean);\n                    return [2 /*return*/, middleware];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yZW1vdGUtbWlkZGxld2FyZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUErQztBQUNHO0FBQ0M7QUFDVTtBQUN0RDtBQUNQO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0Esd0JBQXdCLDJEQUFRO0FBQ2hDO0FBQ0E7QUFDQSwyQkFBMkIsc0VBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLDBEQUEwRCxPQUFPLGdEQUFTO0FBQzFFO0FBQ0EsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsNERBQVU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCLElBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yZW1vdGUtbWlkZGxld2FyZS9pbmRleC5qcz9lYmI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSAnLi4vLi4vY29yZS9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBsb2FkU2NyaXB0IH0gZnJvbSAnLi4vLi4vbGliL2xvYWQtc2NyaXB0JztcbmltcG9ydCB7IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmV4cG9ydCBmdW5jdGlvbiByZW1vdGVNaWRkbGV3YXJlcyhjdHgsIHNldHRpbmdzLCBvYmZ1c2NhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCwgcmVtb3RlTWlkZGxld2FyZSwgbmFtZXMsIHNjcmlwdHMsIG1pZGRsZXdhcmU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NlcnZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBnZXROZXh0SW50ZWdyYXRpb25zVVJMKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZU1pZGRsZXdhcmUgPSAoX2EgPSBzZXR0aW5ncy5lbmFibGVkTWlkZGxld2FyZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzID0gT2JqZWN0LmVudHJpZXMocmVtb3RlTWlkZGxld2FyZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXyA9IF9hWzBdLCBlbmFibGVkID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9hWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHRzID0gbmFtZXMubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9uTmFtZXNwYWNlZCwgYnVuZGxlTmFtZSwgZnVsbFBhdGgsIGVycm9yXzE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25OYW1lc3BhY2VkID0gbmFtZS5yZXBsYWNlKCdAc2VnbWVudC8nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVOYW1lID0gbm9uTmFtZXNwYWNlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmZ1c2NhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVOYW1lID0gYnRvYShub25OYW1lc3BhY2VkKS5yZXBsYWNlKC89L2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxQYXRoID0gXCJcIi5jb25jYXQocGF0aCwgXCIvbWlkZGxld2FyZS9cIikuY29uY2F0KGJ1bmRsZU5hbWUsIFwiL2xhdGVzdC9cIikuY29uY2F0KGJ1bmRsZU5hbWUsIFwiLmpzLmd6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFNjcmlwdChmdWxsUGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2luZG93W1wiXCIuY29uY2F0KG5vbk5hbWVzcGFjZWQsIFwiTWlkZGxld2FyZVwiKV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnZXJyb3InLCBlcnJvcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2ZhaWxlZF9yZW1vdGVfbWlkZGxld2FyZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHNjcmlwdHMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZXdhcmUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZXdhcmUgPSBtaWRkbGV3YXJlLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG1pZGRsZXdhcmVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tsubMiddleware: () => (/* binding */ tsubMiddleware)\n/* harmony export */ });\n/* harmony import */ var _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vendor/tsub/tsub */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js\");\n/* harmony import */ var _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__);\n// @ts-ignore\n\nvar tsubMiddleware = function (rules) {\n    return function (_a) {\n        var payload = _a.payload, integration = _a.integration, next = _a.next;\n        var store = new _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__.Store(rules);\n        var rulesToApply = store.getRulesByDestinationName(integration);\n        rulesToApply.forEach(function (rule) {\n            var matchers = rule.matchers, transformers = rule.transformers;\n            for (var i = 0; i < matchers.length; i++) {\n                if (_vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__.matches(payload.obj, matchers[i])) {\n                    payload.obj = _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__.transform(payload.obj, transformers[i]);\n                    if (payload.obj === null) {\n                        return next(null);\n                    }\n                }\n            }\n        });\n        next(payload);\n    };\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yb3V0aW5nLW1pZGRsZXdhcmUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDK0M7QUFDeEM7QUFDUDtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxQkFBcUI7QUFDakQsb0JBQW9CLHNEQUFZO0FBQ2hDLGtDQUFrQyx3REFBYztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yb3V0aW5nLW1pZGRsZXdhcmUvaW5kZXguanM/NjU2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtaWdub3JlXG5pbXBvcnQgKiBhcyB0c3ViIGZyb20gJy4uLy4uL3ZlbmRvci90c3ViL3RzdWInO1xuZXhwb3J0IHZhciB0c3ViTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChydWxlcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBfYS5wYXlsb2FkLCBpbnRlZ3JhdGlvbiA9IF9hLmludGVncmF0aW9uLCBuZXh0ID0gX2EubmV4dDtcbiAgICAgICAgdmFyIHN0b3JlID0gbmV3IHRzdWIuU3RvcmUocnVsZXMpO1xuICAgICAgICB2YXIgcnVsZXNUb0FwcGx5ID0gc3RvcmUuZ2V0UnVsZXNCeURlc3RpbmF0aW9uTmFtZShpbnRlZ3JhdGlvbik7XG4gICAgICAgIHJ1bGVzVG9BcHBseS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlcnMgPSBydWxlLm1hdGNoZXJzLCB0cmFuc2Zvcm1lcnMgPSBydWxlLnRyYW5zZm9ybWVycztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodHN1Yi5tYXRjaGVzKHBheWxvYWQub2JqLCBtYXRjaGVyc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5vYmogPSB0c3ViLnRyYW5zZm9ybShwYXlsb2FkLm9iaiwgdHJhbnNmb3JtZXJzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQub2JqID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG5leHQocGF5bG9hZCk7XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schemaFilter: () => (/* binding */ schemaFilter)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n\n\nfunction disabledActionDestinations(plan, settings) {\n    var _a, _b;\n    if (!plan || !Object.keys(plan)) {\n        return {};\n    }\n    var disabledIntegrations = plan.integrations\n        ? Object.keys(plan.integrations).filter(function (i) { return plan.integrations[i] === false; })\n        : [];\n    // This accounts for cases like Fullstory, where the settings.integrations\n    // contains a \"Fullstory\" object but settings.remotePlugins contains \"Fullstory (Actions)\"\n    var disabledRemotePlugins = [];\n    ((_a = settings.remotePlugins) !== null && _a !== void 0 ? _a : []).forEach(function (p) {\n        disabledIntegrations.forEach(function (int) {\n            if (p.creationName == int) {\n                disabledRemotePlugins.push(p.name);\n            }\n        });\n    });\n    return ((_b = settings.remotePlugins) !== null && _b !== void 0 ? _b : []).reduce(function (acc, p) {\n        if (p.settings['subscriptions']) {\n            if (disabledRemotePlugins.includes(p.name)) {\n                // @ts-expect-error element implicitly has an 'any' type because p.settings is a JSONObject\n                p.settings['subscriptions'].forEach(\n                // @ts-expect-error parameter 'sub' implicitly has an 'any' type\n                function (sub) { return (acc[\"\".concat(p.name, \" \").concat(sub.partnerAction)] = false); });\n            }\n        }\n        return acc;\n    }, {});\n}\nfunction schemaFilter(track, settings) {\n    function filter(ctx) {\n        var plan = track;\n        var ev = ctx.event.event;\n        if (plan && ev) {\n            var planEvent = plan[ev];\n            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_0__.isPlanEventEnabled)(plan, planEvent)) {\n                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                return ctx;\n            }\n            else {\n                var disabledActions = disabledActionDestinations(planEvent, settings);\n                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations), disabledActions));\n            }\n        }\n        return ctx;\n    }\n    return {\n        name: 'Schema Filter',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function () { return Promise.resolve(); },\n        type: 'before',\n        page: filter,\n        alias: filter,\n        track: filter,\n        identify: filter,\n        group: filter,\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zY2hlbWEtZmlsdGVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNvQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Qsd0NBQXdDO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHlFQUF5RTtBQUMxRztBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4RUFBa0I7QUFDbkMsZ0RBQWdELCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIsZ0NBQWdDO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGNBQWM7QUFDOUMsNEJBQTRCLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NjaGVtYS1maWx0ZXIvaW5kZXguanM/YzRlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNQbGFuRXZlbnRFbmFibGVkIH0gZnJvbSAnLi4vLi4vbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZCc7XG5mdW5jdGlvbiBkaXNhYmxlZEFjdGlvbkRlc3RpbmF0aW9ucyhwbGFuLCBzZXR0aW5ncykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKCFwbGFuIHx8ICFPYmplY3Qua2V5cyhwbGFuKSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHZhciBkaXNhYmxlZEludGVncmF0aW9ucyA9IHBsYW4uaW50ZWdyYXRpb25zXG4gICAgICAgID8gT2JqZWN0LmtleXMocGxhbi5pbnRlZ3JhdGlvbnMpLmZpbHRlcihmdW5jdGlvbiAoaSkgeyByZXR1cm4gcGxhbi5pbnRlZ3JhdGlvbnNbaV0gPT09IGZhbHNlOyB9KVxuICAgICAgICA6IFtdO1xuICAgIC8vIFRoaXMgYWNjb3VudHMgZm9yIGNhc2VzIGxpa2UgRnVsbHN0b3J5LCB3aGVyZSB0aGUgc2V0dGluZ3MuaW50ZWdyYXRpb25zXG4gICAgLy8gY29udGFpbnMgYSBcIkZ1bGxzdG9yeVwiIG9iamVjdCBidXQgc2V0dGluZ3MucmVtb3RlUGx1Z2lucyBjb250YWlucyBcIkZ1bGxzdG9yeSAoQWN0aW9ucylcIlxuICAgIHZhciBkaXNhYmxlZFJlbW90ZVBsdWdpbnMgPSBbXTtcbiAgICAoKF9hID0gc2V0dGluZ3MucmVtb3RlUGx1Z2lucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgZGlzYWJsZWRJbnRlZ3JhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW50KSB7XG4gICAgICAgICAgICBpZiAocC5jcmVhdGlvbk5hbWUgPT0gaW50KSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZWRSZW1vdGVQbHVnaW5zLnB1c2gocC5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgoX2IgPSBzZXR0aW5ncy5yZW1vdGVQbHVnaW5zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHApIHtcbiAgICAgICAgaWYgKHAuc2V0dGluZ3NbJ3N1YnNjcmlwdGlvbnMnXSkge1xuICAgICAgICAgICAgaWYgKGRpc2FibGVkUmVtb3RlUGx1Z2lucy5pbmNsdWRlcyhwLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBlbGVtZW50IGltcGxpY2l0bHkgaGFzIGFuICdhbnknIHR5cGUgYmVjYXVzZSBwLnNldHRpbmdzIGlzIGEgSlNPTk9iamVjdFxuICAgICAgICAgICAgICAgIHAuc2V0dGluZ3NbJ3N1YnNjcmlwdGlvbnMnXS5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcGFyYW1ldGVyICdzdWInIGltcGxpY2l0bHkgaGFzIGFuICdhbnknIHR5cGVcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoc3ViKSB7IHJldHVybiAoYWNjW1wiXCIuY29uY2F0KHAubmFtZSwgXCIgXCIpLmNvbmNhdChzdWIucGFydG5lckFjdGlvbildID0gZmFsc2UpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzY2hlbWFGaWx0ZXIodHJhY2ssIHNldHRpbmdzKSB7XG4gICAgZnVuY3Rpb24gZmlsdGVyKGN0eCkge1xuICAgICAgICB2YXIgcGxhbiA9IHRyYWNrO1xuICAgICAgICB2YXIgZXYgPSBjdHguZXZlbnQuZXZlbnQ7XG4gICAgICAgIGlmIChwbGFuICYmIGV2KSB7XG4gICAgICAgICAgICB2YXIgcGxhbkV2ZW50ID0gcGxhbltldl07XG4gICAgICAgICAgICBpZiAoIWlzUGxhbkV2ZW50RW5hYmxlZChwbGFuLCBwbGFuRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdpbnRlZ3JhdGlvbnMnLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LmV2ZW50LmludGVncmF0aW9ucyksIHsgQWxsOiBmYWxzZSwgJ1NlZ21lbnQuaW8nOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc2FibGVkQWN0aW9ucyA9IGRpc2FibGVkQWN0aW9uRGVzdGluYXRpb25zKHBsYW5FdmVudCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGN0eC51cGRhdGVFdmVudCgnaW50ZWdyYXRpb25zJywgX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpLCBwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zKSwgZGlzYWJsZWRBY3Rpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJ1NjaGVtYSBGaWx0ZXInLFxuICAgICAgICB2ZXJzaW9uOiAnMC4xLjAnLFxuICAgICAgICBpc0xvYWRlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH0sXG4gICAgICAgIHR5cGU6ICdiZWZvcmUnLFxuICAgICAgICBwYWdlOiBmaWx0ZXIsXG4gICAgICAgIGFsaWFzOiBmaWx0ZXIsXG4gICAgICAgIHRyYWNrOiBmaWx0ZXIsXG4gICAgICAgIGlkZW50aWZ5OiBmaWx0ZXIsXG4gICAgICAgIGdyb3VwOiBmaWx0ZXIsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ batch)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/fetch */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _lib_on_page_change__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/on-page-change */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js\");\n/* harmony import */ var _ratelimit_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ratelimit-error */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n\n\n\n\n\nvar MAX_PAYLOAD_SIZE = 500;\nvar MAX_KEEPALIVE_SIZE = 64;\nfunction kilobytes(buffer) {\n    var size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1;\n    return size / 1024;\n}\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer) {\n    return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50;\n}\n/**\n * Checks if payload is over or approaching the limit for keepalive\n * requests. If keepalive is enabled we want to avoid\n * going over this to prevent data loss.\n */\nfunction passedKeepaliveLimit(buffer) {\n    return kilobytes(buffer) >= MAX_KEEPALIVE_SIZE - 10;\n}\nfunction chunks(batch) {\n    var result = [];\n    var index = 0;\n    batch.forEach(function (item) {\n        var size = kilobytes(result[index]);\n        if (size >= 64) {\n            index++;\n        }\n        if (result[index]) {\n            result[index].push(item);\n        }\n        else {\n            result[index] = [item];\n        }\n    });\n    return result;\n}\nfunction batch(apiHost, config) {\n    var _a, _b;\n    var buffer = [];\n    var pageUnloaded = false;\n    var limit = (_a = config === null || config === void 0 ? void 0 : config.size) !== null && _a !== void 0 ? _a : 10;\n    var timeout = (_b = config === null || config === void 0 ? void 0 : config.timeout) !== null && _b !== void 0 ? _b : 5000;\n    var rateLimitTimeout = 0;\n    function sendBatch(batch) {\n        var _a;\n        if (batch.length === 0) {\n            return;\n        }\n        var writeKey = (_a = batch[0]) === null || _a === void 0 ? void 0 : _a.writeKey;\n        // Remove sentAt from every event as batching only needs a single timestamp\n        var updatedBatch = batch.map(function (event) {\n            var _a = event, sentAt = _a.sentAt, newEvent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"sentAt\"]);\n            return newEvent;\n        });\n        return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_1__.fetch)(\"https://\".concat(apiHost, \"/b\"), {\n            keepalive: (config === null || config === void 0 ? void 0 : config.keepalive) || pageUnloaded,\n            headers: {\n                'Content-Type': 'text/plain',\n            },\n            method: 'post',\n            body: JSON.stringify({\n                writeKey: writeKey,\n                batch: updatedBatch,\n                sentAt: new Date().toISOString(),\n            }),\n        }).then(function (res) {\n            var _a;\n            if (res.status >= 500) {\n                throw new Error(\"Bad response from server: \".concat(res.status));\n            }\n            if (res.status === 429) {\n                var retryTimeoutStringSecs = (_a = res.headers) === null || _a === void 0 ? void 0 : _a.get('x-ratelimit-reset');\n                var retryTimeoutMS = typeof retryTimeoutStringSecs == 'string'\n                    ? parseInt(retryTimeoutStringSecs) * 1000\n                    : timeout;\n                throw new _ratelimit_error__WEBPACK_IMPORTED_MODULE_2__.RateLimitError(\"Rate limit exceeded: \".concat(res.status), retryTimeoutMS);\n            }\n        });\n    }\n    function flush(attempt) {\n        var _a;\n        if (attempt === void 0) { attempt = 1; }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var batch_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                if (buffer.length) {\n                    batch_1 = buffer;\n                    buffer = [];\n                    return [2 /*return*/, (_a = sendBatch(batch_1)) === null || _a === void 0 ? void 0 : _a.catch(function (error) {\n                            var _a;\n                            var ctx = _core_context__WEBPACK_IMPORTED_MODULE_3__.Context.system();\n                            ctx.log('error', 'Error sending batch', error);\n                            if (attempt <= ((_a = config === null || config === void 0 ? void 0 : config.maxRetries) !== null && _a !== void 0 ? _a : 10)) {\n                                if (error.name === 'RateLimitError') {\n                                    rateLimitTimeout = error.retryTimeout;\n                                }\n                                buffer.push.apply(buffer, batch_1);\n                                buffer.map(function (event) {\n                                    if ('_metadata' in event) {\n                                        var segmentEvent = event;\n                                        segmentEvent._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, segmentEvent._metadata), { retryCount: attempt });\n                                    }\n                                });\n                                scheduleFlush(attempt + 1);\n                            }\n                        })];\n                }\n                return [2 /*return*/];\n            });\n        });\n    }\n    var schedule;\n    function scheduleFlush(attempt) {\n        if (attempt === void 0) { attempt = 1; }\n        if (schedule) {\n            return;\n        }\n        schedule = setTimeout(function () {\n            schedule = undefined;\n            flush(attempt).catch(console.error);\n        }, rateLimitTimeout ? rateLimitTimeout : timeout);\n        rateLimitTimeout = 0;\n    }\n    (0,_lib_on_page_change__WEBPACK_IMPORTED_MODULE_4__.onPageChange)(function (unloaded) {\n        pageUnloaded = unloaded;\n        if (pageUnloaded && buffer.length) {\n            var reqs = chunks(buffer).map(sendBatch);\n            Promise.all(reqs).catch(console.error);\n        }\n    });\n    function dispatch(_url, body) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var bufferOverflow;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                buffer.push(body);\n                bufferOverflow = buffer.length >= limit ||\n                    approachingTrackingAPILimit(buffer) ||\n                    ((config === null || config === void 0 ? void 0 : config.keepalive) && passedKeepaliveLimit(buffer));\n                return [2 /*return*/, bufferOverflow || pageUnloaded ? flush() : scheduleFlush()];\n            });\n        });\n    }\n    return {\n        dispatch: dispatch,\n    };\n}\n//# sourceMappingURL=batched-dispatcher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vYmF0Y2hlZC1kaXNwYXRjaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRTtBQUN6QjtBQUNnQjtBQUNMO0FBQ047QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsNkNBQU07QUFDakU7QUFDQSxTQUFTO0FBQ1QsZUFBZSxpREFBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDREQUFjO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msa0RBQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIscUJBQXFCO0FBQ3ZJO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsSUFBSSxpRUFBWTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NlZ21lbnRpby9iYXRjaGVkLWRpc3BhdGNoZXIuanM/ZWU4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBmZXRjaCB9IGZyb20gJy4uLy4uL2xpYi9mZXRjaCc7XG5pbXBvcnQgeyBvblBhZ2VDaGFuZ2UgfSBmcm9tICcuLi8uLi9saWIvb24tcGFnZS1jaGFuZ2UnO1xuaW1wb3J0IHsgUmF0ZUxpbWl0RXJyb3IgfSBmcm9tICcuL3JhdGVsaW1pdC1lcnJvcic7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbnZhciBNQVhfUEFZTE9BRF9TSVpFID0gNTAwO1xudmFyIE1BWF9LRUVQQUxJVkVfU0laRSA9IDY0O1xuZnVuY3Rpb24ga2lsb2J5dGVzKGJ1ZmZlcikge1xuICAgIHZhciBzaXplID0gZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KGJ1ZmZlcikpLnNwbGl0KC8lLi58Li8pLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIHNpemUgLyAxMDI0O1xufVxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHBheWxvYWQgaXMgb3ZlciBvciBjbG9zZSB0b1xuICogdGhlIG1heGltdW0gcGF5bG9hZCBzaXplIGFsbG93ZWQgYnkgdHJhY2tpbmdcbiAqIEFQSS5cbiAqL1xuZnVuY3Rpb24gYXBwcm9hY2hpbmdUcmFja2luZ0FQSUxpbWl0KGJ1ZmZlcikge1xuICAgIHJldHVybiBraWxvYnl0ZXMoYnVmZmVyKSA+PSBNQVhfUEFZTE9BRF9TSVpFIC0gNTA7XG59XG4vKipcbiAqIENoZWNrcyBpZiBwYXlsb2FkIGlzIG92ZXIgb3IgYXBwcm9hY2hpbmcgdGhlIGxpbWl0IGZvciBrZWVwYWxpdmVcbiAqIHJlcXVlc3RzLiBJZiBrZWVwYWxpdmUgaXMgZW5hYmxlZCB3ZSB3YW50IHRvIGF2b2lkXG4gKiBnb2luZyBvdmVyIHRoaXMgdG8gcHJldmVudCBkYXRhIGxvc3MuXG4gKi9cbmZ1bmN0aW9uIHBhc3NlZEtlZXBhbGl2ZUxpbWl0KGJ1ZmZlcikge1xuICAgIHJldHVybiBraWxvYnl0ZXMoYnVmZmVyKSA+PSBNQVhfS0VFUEFMSVZFX1NJWkUgLSAxMDtcbn1cbmZ1bmN0aW9uIGNodW5rcyhiYXRjaCkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGJhdGNoLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIHNpemUgPSBraWxvYnl0ZXMocmVzdWx0W2luZGV4XSk7XG4gICAgICAgIGlmIChzaXplID49IDY0KSB7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHRbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXN1bHRbaW5kZXhdLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gW2l0ZW1dO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJhdGNoKGFwaUhvc3QsIGNvbmZpZykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdmFyIGJ1ZmZlciA9IFtdO1xuICAgIHZhciBwYWdlVW5sb2FkZWQgPSBmYWxzZTtcbiAgICB2YXIgbGltaXQgPSAoX2EgPSBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcuc2l6ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMTA7XG4gICAgdmFyIHRpbWVvdXQgPSAoX2IgPSBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcudGltZW91dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNTAwMDtcbiAgICB2YXIgcmF0ZUxpbWl0VGltZW91dCA9IDA7XG4gICAgZnVuY3Rpb24gc2VuZEJhdGNoKGJhdGNoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3cml0ZUtleSA9IChfYSA9IGJhdGNoWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud3JpdGVLZXk7XG4gICAgICAgIC8vIFJlbW92ZSBzZW50QXQgZnJvbSBldmVyeSBldmVudCBhcyBiYXRjaGluZyBvbmx5IG5lZWRzIGEgc2luZ2xlIHRpbWVzdGFtcFxuICAgICAgICB2YXIgdXBkYXRlZEJhdGNoID0gYmF0Y2gubWFwKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF9hID0gZXZlbnQsIHNlbnRBdCA9IF9hLnNlbnRBdCwgbmV3RXZlbnQgPSBfX3Jlc3QoX2EsIFtcInNlbnRBdFwiXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL1wiLmNvbmNhdChhcGlIb3N0LCBcIi9iXCIpLCB7XG4gICAgICAgICAgICBrZWVwYWxpdmU6IChjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcua2VlcGFsaXZlKSB8fCBwYWdlVW5sb2FkZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB3cml0ZUtleTogd3JpdGVLZXksXG4gICAgICAgICAgICAgICAgYmF0Y2g6IHVwZGF0ZWRCYXRjaCxcbiAgICAgICAgICAgICAgICBzZW50QXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID49IDUwMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIHNlcnZlcjogXCIuY29uY2F0KHJlcy5zdGF0dXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0cnlUaW1lb3V0U3RyaW5nU2VjcyA9IChfYSA9IHJlcy5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0KCd4LXJhdGVsaW1pdC1yZXNldCcpO1xuICAgICAgICAgICAgICAgIHZhciByZXRyeVRpbWVvdXRNUyA9IHR5cGVvZiByZXRyeVRpbWVvdXRTdHJpbmdTZWNzID09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQocmV0cnlUaW1lb3V0U3RyaW5nU2VjcykgKiAxMDAwXG4gICAgICAgICAgICAgICAgICAgIDogdGltZW91dDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmF0ZUxpbWl0RXJyb3IoXCJSYXRlIGxpbWl0IGV4Y2VlZGVkOiBcIi5jb25jYXQocmVzLnN0YXR1cyksIHJldHJ5VGltZW91dE1TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZsdXNoKGF0dGVtcHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdm9pZCAwKSB7IGF0dGVtcHQgPSAxOyB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiYXRjaF8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhdGNoXzEgPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gc2VuZEJhdGNoKGJhdGNoXzEpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSBDb250ZXh0LnN5c3RlbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ0Vycm9yIHNlbmRpbmcgYmF0Y2gnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGVtcHQgPD0gKChfYSA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5tYXhSZXRyaWVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdSYXRlTGltaXRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGVMaW1pdFRpbWVvdXQgPSBlcnJvci5yZXRyeVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2guYXBwbHkoYnVmZmVyLCBiYXRjaF8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLm1hcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnX21ldGFkYXRhJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWdtZW50RXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQuX21ldGFkYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHNlZ21lbnRFdmVudC5fbWV0YWRhdGEpLCB7IHJldHJ5Q291bnQ6IGF0dGVtcHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUZsdXNoKGF0dGVtcHQgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdmFyIHNjaGVkdWxlO1xuICAgIGZ1bmN0aW9uIHNjaGVkdWxlRmx1c2goYXR0ZW1wdCkge1xuICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdm9pZCAwKSB7IGF0dGVtcHQgPSAxOyB9XG4gICAgICAgIGlmIChzY2hlZHVsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjaGVkdWxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY2hlZHVsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGZsdXNoKGF0dGVtcHQpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICB9LCByYXRlTGltaXRUaW1lb3V0ID8gcmF0ZUxpbWl0VGltZW91dCA6IHRpbWVvdXQpO1xuICAgICAgICByYXRlTGltaXRUaW1lb3V0ID0gMDtcbiAgICB9XG4gICAgb25QYWdlQ2hhbmdlKGZ1bmN0aW9uICh1bmxvYWRlZCkge1xuICAgICAgICBwYWdlVW5sb2FkZWQgPSB1bmxvYWRlZDtcbiAgICAgICAgaWYgKHBhZ2VVbmxvYWRlZCAmJiBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgcmVxcyA9IGNodW5rcyhidWZmZXIpLm1hcChzZW5kQmF0Y2gpO1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwocmVxcykuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiBkaXNwYXRjaChfdXJsLCBib2R5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBidWZmZXJPdmVyZmxvdztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChib2R5KTtcbiAgICAgICAgICAgICAgICBidWZmZXJPdmVyZmxvdyA9IGJ1ZmZlci5sZW5ndGggPj0gbGltaXQgfHxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm9hY2hpbmdUcmFja2luZ0FQSUxpbWl0KGJ1ZmZlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgKChjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcua2VlcGFsaXZlKSAmJiBwYXNzZWRLZWVwYWxpdmVMaW1pdChidWZmZXIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYnVmZmVyT3ZlcmZsb3cgfHwgcGFnZVVubG9hZGVkID8gZmx1c2goKSA6IHNjaGVkdWxlRmx1c2goKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmF0Y2hlZC1kaXNwYXRjaGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/fetch */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _ratelimit_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ratelimit-error */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js\");\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(config) {\n    function dispatch(url, body) {\n        return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetch)(url, {\n            keepalive: config === null || config === void 0 ? void 0 : config.keepalive,\n            headers: { 'Content-Type': 'text/plain' },\n            method: 'post',\n            body: JSON.stringify(body),\n        }).then(function (res) {\n            var _a;\n            if (res.status >= 500) {\n                throw new Error(\"Bad response from server: \".concat(res.status));\n            }\n            if (res.status === 429) {\n                var retryTimeoutStringSecs = (_a = res.headers) === null || _a === void 0 ? void 0 : _a.get('x-ratelimit-reset');\n                var retryTimeoutMS = retryTimeoutStringSecs\n                    ? parseInt(retryTimeoutStringSecs) * 1000\n                    : 5000;\n                throw new _ratelimit_error__WEBPACK_IMPORTED_MODULE_1__.RateLimitError(\"Rate limit exceeded: \".concat(res.status), retryTimeoutMS);\n            }\n        });\n    }\n    return {\n        dispatch: dispatch,\n    };\n}\n//# sourceMappingURL=fetch-dispatcher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vZmV0Y2gtZGlzcGF0Y2hlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDVztBQUNuRCw2QkFBZSxvQ0FBVTtBQUN6QjtBQUNBLGVBQWUsaURBQUs7QUFDcEI7QUFDQSx1QkFBdUIsOEJBQThCO0FBQ3JEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDREQUFjO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL2ZldGNoLWRpc3BhdGNoZXIuanM/NTc3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZXRjaCB9IGZyb20gJy4uLy4uL2xpYi9mZXRjaCc7XG5pbXBvcnQgeyBSYXRlTGltaXRFcnJvciB9IGZyb20gJy4vcmF0ZWxpbWl0LWVycm9yJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICBmdW5jdGlvbiBkaXNwYXRjaCh1cmwsIGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgICAgICAga2VlcGFsaXZlOiBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcua2VlcGFsaXZlLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID49IDUwMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIHNlcnZlcjogXCIuY29uY2F0KHJlcy5zdGF0dXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0cnlUaW1lb3V0U3RyaW5nU2VjcyA9IChfYSA9IHJlcy5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0KCd4LXJhdGVsaW1pdC1yZXNldCcpO1xuICAgICAgICAgICAgICAgIHZhciByZXRyeVRpbWVvdXRNUyA9IHJldHJ5VGltZW91dFN0cmluZ1NlY3NcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChyZXRyeVRpbWVvdXRTdHJpbmdTZWNzKSAqIDEwMDBcbiAgICAgICAgICAgICAgICAgICAgOiA1MDAwO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYXRlTGltaXRFcnJvcihcIlJhdGUgbGltaXQgZXhjZWVkZWQ6IFwiLmNvbmNhdChyZXMuc3RhdHVzKSwgcmV0cnlUaW1lb3V0TVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZXRjaC1kaXNwYXRjaGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSegmentPlugin: () => (/* binding */ isSegmentPlugin),\n/* harmony export */   segmentio: () => (/* binding */ segmentio)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/connection */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/to-facade */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\");\n/* harmony import */ var _batched_dispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./batched-dispatcher */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js\");\n/* harmony import */ var _fetch_dispatcher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fetch-dispatcher */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js\");\n/* harmony import */ var _normalize__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./normalize */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js\");\n/* harmony import */ var _schedule_flush__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./schedule-flush */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js\");\n/* harmony import */ var _core_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/constants */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\");\n\n\n\n\n\n\n\n\n\n\nfunction onAlias(analytics, json) {\n    var _a, _b, _c, _d;\n    var user = analytics.user();\n    json.previousId =\n        (_c = (_b = (_a = json.previousId) !== null && _a !== void 0 ? _a : json.from) !== null && _b !== void 0 ? _b : user.id()) !== null && _c !== void 0 ? _c : user.anonymousId();\n    json.userId = (_d = json.userId) !== null && _d !== void 0 ? _d : json.to;\n    delete json.from;\n    delete json.to;\n    return json;\n}\nvar isSegmentPlugin = function (plugin) {\n    return plugin.name === 'Segment.io';\n};\nfunction segmentio(analytics, settings, integrations) {\n    var _a, _b, _c;\n    // Attach `pagehide` before buffer is created so that inflight events are added\n    // to the buffer before the buffer persists events in its own `pagehide` handler.\n    window.addEventListener('pagehide', function () {\n        buffer.push.apply(buffer, Array.from(inflightEvents));\n        inflightEvents.clear();\n    });\n    var writeKey = (_a = settings === null || settings === void 0 ? void 0 : settings.apiKey) !== null && _a !== void 0 ? _a : '';\n    var buffer = analytics.options.disableClientPersistence\n        ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_0__.PriorityQueue(analytics.queue.queue.maxAttempts, [])\n        : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__.PersistedPriorityQueue(analytics.queue.queue.maxAttempts, \"\".concat(writeKey, \":dest-Segment.io\"));\n    var inflightEvents = new Set();\n    var flushing = false;\n    var apiHost = (_b = settings === null || settings === void 0 ? void 0 : settings.apiHost) !== null && _b !== void 0 ? _b : _core_constants__WEBPACK_IMPORTED_MODULE_2__.SEGMENT_API_HOST;\n    var protocol = (_c = settings === null || settings === void 0 ? void 0 : settings.protocol) !== null && _c !== void 0 ? _c : 'https';\n    var remote = \"\".concat(protocol, \"://\").concat(apiHost);\n    var deliveryStrategy = settings === null || settings === void 0 ? void 0 : settings.deliveryStrategy;\n    var client = (deliveryStrategy === null || deliveryStrategy === void 0 ? void 0 : deliveryStrategy.strategy) === 'batching'\n        ? (0,_batched_dispatcher__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(apiHost, deliveryStrategy.config)\n        : (0,_fetch_dispatcher__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(deliveryStrategy === null || deliveryStrategy === void 0 ? void 0 : deliveryStrategy.config);\n    function send(ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var path, json;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_6__.isOffline)()) {\n                    buffer.push(ctx);\n                    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                    (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n                    return [2 /*return*/, ctx];\n                }\n                inflightEvents.add(ctx);\n                path = ctx.event.type.charAt(0);\n                json = (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_8__.toFacade)(ctx.event).json();\n                if (ctx.event.type === 'track') {\n                    delete json.traits;\n                }\n                if (ctx.event.type === 'alias') {\n                    json = onAlias(analytics, json);\n                }\n                return [2 /*return*/, client\n                        .dispatch(\"\".concat(remote, \"/\").concat(path), (0,_normalize__WEBPACK_IMPORTED_MODULE_9__.normalize)(analytics, json, settings, integrations, ctx))\n                        .then(function () { return ctx; })\n                        .catch(function (error) {\n                        ctx.log('error', 'Error sending event', error);\n                        if (error.name === 'RateLimitError') {\n                            var timeout = error.retryTimeout;\n                            buffer.pushWithBackoff(ctx, timeout);\n                        }\n                        else {\n                            buffer.pushWithBackoff(ctx);\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                        (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n                        return ctx;\n                    })\n                        .finally(function () {\n                        inflightEvents.delete(ctx);\n                    })];\n            });\n        });\n    }\n    var segmentio = {\n        metadata: {\n            writeKey: writeKey,\n            apiHost: apiHost,\n            protocol: protocol,\n        },\n        name: 'Segment.io',\n        type: 'destination',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function () { return Promise.resolve(); },\n        track: send,\n        identify: send,\n        page: send,\n        alias: send,\n        group: send,\n        screen: send,\n    };\n    // Buffer may already have items if they were previously stored in localStorage.\n    // Start flushing them immediately.\n    if (buffer.todo) {\n        (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n    }\n    return segmentio;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ0c7QUFDTztBQUNtQjtBQUM3QjtBQUNOO0FBQ0M7QUFDRjtBQUNTO0FBQ087QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw4REFBYTtBQUMzQixjQUFjLGlGQUFzQjtBQUNwQztBQUNBO0FBQ0EsK0hBQStILDZEQUFnQjtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0RBQUs7QUFDZixVQUFVLDZEQUFRO0FBQ2xCO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QixvQkFBb0IsMkRBQVM7QUFDN0I7QUFDQTtBQUNBLG9CQUFvQiw4REFBYSw4QkFBOEIsMERBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUscURBQVM7QUFDaEYsNENBQTRDLGFBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQWEsOEJBQThCLDBEQUFhO0FBQ2hGO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGNBQWM7QUFDOUMsNEJBQTRCLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWEsOEJBQThCLDBEQUFhO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanM/NzE3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc09mZmxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZSc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZCc7XG5pbXBvcnQgeyB0b0ZhY2FkZSB9IGZyb20gJy4uLy4uL2xpYi90by1mYWNhZGUnO1xuaW1wb3J0IGJhdGNoIGZyb20gJy4vYmF0Y2hlZC1kaXNwYXRjaGVyJztcbmltcG9ydCBzdGFuZGFyZCBmcm9tICcuL2ZldGNoLWRpc3BhdGNoZXInO1xuaW1wb3J0IHsgbm9ybWFsaXplIH0gZnJvbSAnLi9ub3JtYWxpemUnO1xuaW1wb3J0IHsgc2NoZWR1bGVGbHVzaCB9IGZyb20gJy4vc2NoZWR1bGUtZmx1c2gnO1xuaW1wb3J0IHsgU0VHTUVOVF9BUElfSE9TVCB9IGZyb20gJy4uLy4uL2NvcmUvY29uc3RhbnRzJztcbmZ1bmN0aW9uIG9uQWxpYXMoYW5hbHl0aWNzLCBqc29uKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIHZhciB1c2VyID0gYW5hbHl0aWNzLnVzZXIoKTtcbiAgICBqc29uLnByZXZpb3VzSWQgPVxuICAgICAgICAoX2MgPSAoX2IgPSAoX2EgPSBqc29uLnByZXZpb3VzSWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGpzb24uZnJvbSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdXNlci5pZCgpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1c2VyLmFub255bW91c0lkKCk7XG4gICAganNvbi51c2VySWQgPSAoX2QgPSBqc29uLnVzZXJJZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDoganNvbi50bztcbiAgICBkZWxldGUganNvbi5mcm9tO1xuICAgIGRlbGV0ZSBqc29uLnRvO1xuICAgIHJldHVybiBqc29uO1xufVxuZXhwb3J0IHZhciBpc1NlZ21lbnRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgcmV0dXJuIHBsdWdpbi5uYW1lID09PSAnU2VnbWVudC5pbyc7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNlZ21lbnRpbyhhbmFseXRpY3MsIHNldHRpbmdzLCBpbnRlZ3JhdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAvLyBBdHRhY2ggYHBhZ2VoaWRlYCBiZWZvcmUgYnVmZmVyIGlzIGNyZWF0ZWQgc28gdGhhdCBpbmZsaWdodCBldmVudHMgYXJlIGFkZGVkXG4gICAgLy8gdG8gdGhlIGJ1ZmZlciBiZWZvcmUgdGhlIGJ1ZmZlciBwZXJzaXN0cyBldmVudHMgaW4gaXRzIG93biBgcGFnZWhpZGVgIGhhbmRsZXIuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBidWZmZXIucHVzaC5hcHBseShidWZmZXIsIEFycmF5LmZyb20oaW5mbGlnaHRFdmVudHMpKTtcbiAgICAgICAgaW5mbGlnaHRFdmVudHMuY2xlYXIoKTtcbiAgICB9KTtcbiAgICB2YXIgd3JpdGVLZXkgPSAoX2EgPSBzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3MuYXBpS2V5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJztcbiAgICB2YXIgYnVmZmVyID0gYW5hbHl0aWNzLm9wdGlvbnMuZGlzYWJsZUNsaWVudFBlcnNpc3RlbmNlXG4gICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUoYW5hbHl0aWNzLnF1ZXVlLnF1ZXVlLm1heEF0dGVtcHRzLCBbXSlcbiAgICAgICAgOiBuZXcgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZShhbmFseXRpY3MucXVldWUucXVldWUubWF4QXR0ZW1wdHMsIFwiXCIuY29uY2F0KHdyaXRlS2V5LCBcIjpkZXN0LVNlZ21lbnQuaW9cIikpO1xuICAgIHZhciBpbmZsaWdodEV2ZW50cyA9IG5ldyBTZXQoKTtcbiAgICB2YXIgZmx1c2hpbmcgPSBmYWxzZTtcbiAgICB2YXIgYXBpSG9zdCA9IChfYiA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5hcGlIb3N0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBTRUdNRU5UX0FQSV9IT1NUO1xuICAgIHZhciBwcm90b2NvbCA9IChfYyA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5wcm90b2NvbCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJ2h0dHBzJztcbiAgICB2YXIgcmVtb3RlID0gXCJcIi5jb25jYXQocHJvdG9jb2wsIFwiOi8vXCIpLmNvbmNhdChhcGlIb3N0KTtcbiAgICB2YXIgZGVsaXZlcnlTdHJhdGVneSA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5kZWxpdmVyeVN0cmF0ZWd5O1xuICAgIHZhciBjbGllbnQgPSAoZGVsaXZlcnlTdHJhdGVneSA9PT0gbnVsbCB8fCBkZWxpdmVyeVN0cmF0ZWd5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWxpdmVyeVN0cmF0ZWd5LnN0cmF0ZWd5KSA9PT0gJ2JhdGNoaW5nJ1xuICAgICAgICA/IGJhdGNoKGFwaUhvc3QsIGRlbGl2ZXJ5U3RyYXRlZ3kuY29uZmlnKVxuICAgICAgICA6IHN0YW5kYXJkKGRlbGl2ZXJ5U3RyYXRlZ3kgPT09IG51bGwgfHwgZGVsaXZlcnlTdHJhdGVneSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVsaXZlcnlTdHJhdGVneS5jb25maWcpO1xuICAgIGZ1bmN0aW9uIHNlbmQoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXRoLCBqc29uO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChjdHgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goZmx1c2hpbmcsIGJ1ZmZlciwgc2VnbWVudGlvLCBzY2hlZHVsZUZsdXNoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZmxpZ2h0RXZlbnRzLmFkZChjdHgpO1xuICAgICAgICAgICAgICAgIHBhdGggPSBjdHguZXZlbnQudHlwZS5jaGFyQXQoMCk7XG4gICAgICAgICAgICAgICAganNvbiA9IHRvRmFjYWRlKGN0eC5ldmVudCkuanNvbigpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguZXZlbnQudHlwZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi50cmFpdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdHguZXZlbnQudHlwZSA9PT0gJ2FsaWFzJykge1xuICAgICAgICAgICAgICAgICAgICBqc29uID0gb25BbGlhcyhhbmFseXRpY3MsIGpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY2xpZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAuZGlzcGF0Y2goXCJcIi5jb25jYXQocmVtb3RlLCBcIi9cIikuY29uY2F0KHBhdGgpLCBub3JtYWxpemUoYW5hbHl0aWNzLCBqc29uLCBzZXR0aW5ncywgaW50ZWdyYXRpb25zLCBjdHgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY3R4OyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnZXJyb3InLCAnRXJyb3Igc2VuZGluZyBldmVudCcsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnUmF0ZUxpbWl0RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBlcnJvci5yZXRyeVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2hXaXRoQmFja29mZihjdHgsIHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2hXaXRoQmFja29mZihjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVGbHVzaChmbHVzaGluZywgYnVmZmVyLCBzZWdtZW50aW8sIHNjaGVkdWxlRmx1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZmxpZ2h0RXZlbnRzLmRlbGV0ZShjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBzZWdtZW50aW8gPSB7XG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICB3cml0ZUtleTogd3JpdGVLZXksXG4gICAgICAgICAgICBhcGlIb3N0OiBhcGlIb3N0LFxuICAgICAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lOiAnU2VnbWVudC5pbycsXG4gICAgICAgIHR5cGU6ICdkZXN0aW5hdGlvbicsXG4gICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgIGlzTG9hZGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfSxcbiAgICAgICAgdHJhY2s6IHNlbmQsXG4gICAgICAgIGlkZW50aWZ5OiBzZW5kLFxuICAgICAgICBwYWdlOiBzZW5kLFxuICAgICAgICBhbGlhczogc2VuZCxcbiAgICAgICAgZ3JvdXA6IHNlbmQsXG4gICAgICAgIHNjcmVlbjogc2VuZCxcbiAgICB9O1xuICAgIC8vIEJ1ZmZlciBtYXkgYWxyZWFkeSBoYXZlIGl0ZW1zIGlmIHRoZXkgd2VyZSBwcmV2aW91c2x5IHN0b3JlZCBpbiBsb2NhbFN0b3JhZ2UuXG4gICAgLy8gU3RhcnQgZmx1c2hpbmcgdGhlbSBpbW1lZGlhdGVseS5cbiAgICBpZiAoYnVmZmVyLnRvZG8pIHtcbiAgICAgICAgc2NoZWR1bGVGbHVzaChmbHVzaGluZywgYnVmZmVyLCBzZWdtZW50aW8sIHNjaGVkdWxlRmx1c2gpO1xuICAgIH1cbiAgICByZXR1cm4gc2VnbWVudGlvO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalize: () => (/* binding */ normalize)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction normalize(analytics, json, settings, integrations, ctx) {\n    var _a;\n    var user = analytics.user();\n    delete json.options;\n    json.writeKey = settings === null || settings === void 0 ? void 0 : settings.apiKey;\n    json.userId = json.userId || user.id();\n    json.anonymousId = json.anonymousId || user.anonymousId();\n    json.sentAt = new Date();\n    var failed = analytics.queue.failedInitializations || [];\n    if (failed.length > 0) {\n        json._metadata = { failedInitializations: failed };\n    }\n    if (ctx != null) {\n        if (ctx.attempts > 1) {\n            json._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, json._metadata), { retryCount: ctx.attempts });\n        }\n        ctx.attempts++;\n    }\n    var bundled = [];\n    var unbundled = [];\n    for (var key in integrations) {\n        var integration = integrations[key];\n        if (key === 'Segment.io') {\n            bundled.push(key);\n        }\n        if (integration.bundlingStatus === 'bundled') {\n            bundled.push(key);\n        }\n        if (integration.bundlingStatus === 'unbundled') {\n            unbundled.push(key);\n        }\n    }\n    // This will make sure that the disabled cloud mode destinations will be\n    // included in the unbundled list.\n    for (var _i = 0, _b = (settings === null || settings === void 0 ? void 0 : settings.unbundledIntegrations) || []; _i < _b.length; _i++) {\n        var settingsUnbundled = _b[_i];\n        if (!unbundled.includes(settingsUnbundled)) {\n            unbundled.push(settingsUnbundled);\n        }\n    }\n    var configIds = (_a = settings === null || settings === void 0 ? void 0 : settings.maybeBundledConfigIds) !== null && _a !== void 0 ? _a : {};\n    var bundledConfigIds = [];\n    bundled.sort().forEach(function (name) {\n        var _a;\n        ;\n        ((_a = configIds[name]) !== null && _a !== void 0 ? _a : []).forEach(function (id) {\n            bundledConfigIds.push(id);\n        });\n    });\n    if ((settings === null || settings === void 0 ? void 0 : settings.addBundledMetadata) !== false) {\n        json._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, json._metadata), { bundled: bundled.sort(), unbundled: unbundled.sort(), bundledIds: bundledConfigIds });\n    }\n    return json;\n}\n//# sourceMappingURL=normalize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vbm9ybWFsaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQzFCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcscUJBQXFCLDBCQUEwQjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNIQUFzSCxnQkFBZ0I7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLHlCQUF5QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcscUJBQXFCLG9GQUFvRjtBQUN0SjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL25vcm1hbGl6ZS5qcz82YjNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGFuYWx5dGljcywganNvbiwgc2V0dGluZ3MsIGludGVncmF0aW9ucywgY3R4KSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciB1c2VyID0gYW5hbHl0aWNzLnVzZXIoKTtcbiAgICBkZWxldGUganNvbi5vcHRpb25zO1xuICAgIGpzb24ud3JpdGVLZXkgPSBzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3MuYXBpS2V5O1xuICAgIGpzb24udXNlcklkID0ganNvbi51c2VySWQgfHwgdXNlci5pZCgpO1xuICAgIGpzb24uYW5vbnltb3VzSWQgPSBqc29uLmFub255bW91c0lkIHx8IHVzZXIuYW5vbnltb3VzSWQoKTtcbiAgICBqc29uLnNlbnRBdCA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIGZhaWxlZCA9IGFuYWx5dGljcy5xdWV1ZS5mYWlsZWRJbml0aWFsaXphdGlvbnMgfHwgW107XG4gICAgaWYgKGZhaWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGpzb24uX21ldGFkYXRhID0geyBmYWlsZWRJbml0aWFsaXphdGlvbnM6IGZhaWxlZCB9O1xuICAgIH1cbiAgICBpZiAoY3R4ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGN0eC5hdHRlbXB0cyA+IDEpIHtcbiAgICAgICAgICAgIGpzb24uX21ldGFkYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGpzb24uX21ldGFkYXRhKSwgeyByZXRyeUNvdW50OiBjdHguYXR0ZW1wdHMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmF0dGVtcHRzKys7XG4gICAgfVxuICAgIHZhciBidW5kbGVkID0gW107XG4gICAgdmFyIHVuYnVuZGxlZCA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBpbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdmFyIGludGVncmF0aW9uID0gaW50ZWdyYXRpb25zW2tleV07XG4gICAgICAgIGlmIChrZXkgPT09ICdTZWdtZW50LmlvJykge1xuICAgICAgICAgICAgYnVuZGxlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVncmF0aW9uLmJ1bmRsaW5nU3RhdHVzID09PSAnYnVuZGxlZCcpIHtcbiAgICAgICAgICAgIGJ1bmRsZWQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlZ3JhdGlvbi5idW5kbGluZ1N0YXR1cyA9PT0gJ3VuYnVuZGxlZCcpIHtcbiAgICAgICAgICAgIHVuYnVuZGxlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVGhpcyB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRoZSBkaXNhYmxlZCBjbG91ZCBtb2RlIGRlc3RpbmF0aW9ucyB3aWxsIGJlXG4gICAgLy8gaW5jbHVkZWQgaW4gdGhlIHVuYnVuZGxlZCBsaXN0LlxuICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSAoc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLnVuYnVuZGxlZEludGVncmF0aW9ucykgfHwgW107IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBzZXR0aW5nc1VuYnVuZGxlZCA9IF9iW19pXTtcbiAgICAgICAgaWYgKCF1bmJ1bmRsZWQuaW5jbHVkZXMoc2V0dGluZ3NVbmJ1bmRsZWQpKSB7XG4gICAgICAgICAgICB1bmJ1bmRsZWQucHVzaChzZXR0aW5nc1VuYnVuZGxlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbmZpZ0lkcyA9IChfYSA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5tYXliZUJ1bmRsZWRDb25maWdJZHMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgIHZhciBidW5kbGVkQ29uZmlnSWRzID0gW107XG4gICAgYnVuZGxlZC5zb3J0KCkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIDtcbiAgICAgICAgKChfYSA9IGNvbmZpZ0lkc1tuYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBidW5kbGVkQ29uZmlnSWRzLnB1c2goaWQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBpZiAoKHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5hZGRCdW5kbGVkTWV0YWRhdGEpICE9PSBmYWxzZSkge1xuICAgICAgICBqc29uLl9tZXRhZGF0YSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBqc29uLl9tZXRhZGF0YSksIHsgYnVuZGxlZDogYnVuZGxlZC5zb3J0KCksIHVuYnVuZGxlZDogdW5idW5kbGVkLnNvcnQoKSwgYnVuZGxlZElkczogYnVuZGxlZENvbmZpZ0lkcyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGpzb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3JtYWxpemUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar RateLimitError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(RateLimitError, _super);\n    function RateLimitError(message, retryTimeout) {\n        var _this = _super.call(this, message) || this;\n        _this.retryTimeout = retryTimeout;\n        _this.name = 'RateLimitError';\n        return _this;\n    }\n    return RateLimitError;\n}(Error));\n\n//# sourceMappingURL=ratelimit-error.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vcmF0ZWxpbWl0LWVycm9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBQ2xDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN5QjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL3JhdGVsaW1pdC1lcnJvci5qcz85M2ZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xudmFyIFJhdGVMaW1pdEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRlTGltaXRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSYXRlTGltaXRFcnJvcihtZXNzYWdlLCByZXRyeVRpbWVvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucmV0cnlUaW1lb3V0ID0gcmV0cnlUaW1lb3V0O1xuICAgICAgICBfdGhpcy5uYW1lID0gJ1JhdGVMaW1pdEVycm9yJztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUmF0ZUxpbWl0RXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBSYXRlTGltaXRFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmF0ZWxpbWl0LWVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scheduleFlush: () => (/* binding */ scheduleFlush)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/connection */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/p-while */ \"(ssr)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_1__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_2__.pWhile)(function () { return queue.length > 0 && !(0,_core_connection__WEBPACK_IMPORTED_MODULE_1__.isOffline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_4__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nfunction scheduleFlush(flushing, buffer, xt, scheduleFlush) {\n    var _this = this;\n    if (flushing) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n        var isFlushing, newBuffer;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    isFlushing = true;\n                    return [4 /*yield*/, flushQueue(xt, buffer)];\n                case 1:\n                    newBuffer = _a.sent();\n                    isFlushing = false;\n                    if (buffer.todo > 0) {\n                        scheduleFlush(isFlushing, newBuffer, xt, scheduleFlush);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); }, Math.random() * 5000);\n}\n//# sourceMappingURL=schedule-flush.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vc2NoZWR1bGUtZmx1c2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStDO0FBQ0c7QUFDTDtBQUNLO0FBQ1A7QUFDM0M7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBUztBQUNqQztBQUNBO0FBQ0EseUNBQXlDLG9EQUFNLGVBQWUsNEJBQTRCLDJEQUFTLEtBQUssZ0JBQWdCLE9BQU8sZ0RBQVM7QUFDeEk7QUFDQSxtQ0FBbUMsa0RBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGdFQUFPO0FBQ3BFO0FBQ0E7QUFDQSxvRUFBb0Usa0RBQU87QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUIsSUFBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHVDQUF1QztBQUMvRjtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixPQUFPLGdEQUFTO0FBQzdDO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSyxJQUFJO0FBQ1Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL3NjaGVkdWxlLWZsdXNoLmpzPzcwZGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNPZmZsaW5lIH0gZnJvbSAnLi4vLi4vY29yZS9jb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tICcuLi8uLi9jb3JlL2NvbnRleHQnO1xuaW1wb3J0IHsgYXR0ZW1wdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IHBXaGlsZSB9IGZyb20gJy4uLy4uL2xpYi9wLXdoaWxlJztcbmZ1bmN0aW9uIGZsdXNoUXVldWUoeHQsIHF1ZXVlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmFpbGVkUXVldWU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwV2hpbGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUubGVuZ3RoID4gMCAmJiAhaXNPZmZsaW5lKCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4LCByZXN1bHQsIHN1Y2Nlc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gcXVldWUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhdHRlbXB0KGN0eCwgeHQpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHJlc3VsdCBpbnN0YW5jZW9mIENvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCBmYWlsZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIGZhaWxlZCB0YXNrc1xuICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZS5tYXAoZnVuY3Rpb24gKGZhaWxlZCkgeyByZXR1cm4gcXVldWUucHVzaFdpdGhCYWNrb2ZmKGZhaWxlZCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcXVldWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZUZsdXNoKGZsdXNoaW5nLCBidWZmZXIsIHh0LCBzY2hlZHVsZUZsdXNoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBpZiAoZmx1c2hpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlzRmx1c2hpbmcsIG5ld0J1ZmZlcjtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaXNGbHVzaGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZsdXNoUXVldWUoeHQsIGJ1ZmZlcildO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbmV3QnVmZmVyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goaXNGbHVzaGluZywgbmV3QnVmZmVyLCB4dCwgc2NoZWR1bGVGbHVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTsgfSwgTWF0aC5yYW5kb20oKSAqIDUwMDApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGUtZmx1c2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js ***!
  \***************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n// @ts-nocheck\n// prettier-ignore\n/* eslint-disable */\n// @segment/tsub 2.0.0 - GENERATED DO NOT MODIFY\n/*! For license information please see tsub.js.LICENSE.txt */\n!function (t, r) { if (true)\n    module.exports = r();\nelse { var n, e; } }(self, (function () { return (function () { var t = { 2870: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 }), r.Store = r.matches = r.transform = void 0;\n        var o = e(4303);\n        Object.defineProperty(r, \"transform\", { enumerable: !0, get: function () { return n(o).default; } });\n        var s = e(2370);\n        Object.defineProperty(r, \"matches\", { enumerable: !0, get: function () { return n(s).default; } });\n        var i = e(1444);\n        Object.defineProperty(r, \"Store\", { enumerable: !0, get: function () { return n(i).default; } });\n    }, 2370: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 });\n        var o = n(e(7843));\n        function s(t, r) { if (!Array.isArray(t))\n            return !0 === i(t, r); var e, n, o, f, p = t[0]; switch (p) {\n            case \"!\": return !s(t[1], r);\n            case \"or\":\n                for (var l = 1; l < t.length; l++)\n                    if (s(t[l], r))\n                        return !0;\n                return !1;\n            case \"and\":\n                for (l = 1; l < t.length; l++)\n                    if (!s(t[l], r))\n                        return !1;\n                return !0;\n            case \"=\":\n            case \"!=\": return function (t, r, e, n) { switch (u(t) && (t = s(t, n)), u(r) && (r = s(r, n)), \"object\" == typeof t && \"object\" == typeof r && (t = JSON.stringify(t), r = JSON.stringify(r)), e) {\n                case \"=\": return t === r;\n                case \"!=\": return t !== r;\n                default: throw new Error(\"Invalid operator in compareItems: \".concat(e));\n            } }(i(t[1], r), i(t[2], r), p, r);\n            case \"<=\":\n            case \"<\":\n            case \">\":\n            case \">=\": return function (t, r, e, n) { if (u(t) && (t = s(t, n)), u(r) && (r = s(r, n)), \"number\" != typeof t || \"number\" != typeof r)\n                return !1; switch (e) {\n                case \"<=\": return t <= r;\n                case \">=\": return t >= r;\n                case \"<\": return t < r;\n                case \">\": return t > r;\n                default: throw new Error(\"Invalid operator in compareNumbers: \".concat(e));\n            } }(i(t[1], r), i(t[2], r), p, r);\n            case \"in\": return function (t, r, e) { return void 0 !== r.find((function (r) { return i(r, e) === t; })); }(i(t[1], r), i(t[2], r), r);\n            case \"contains\": return o = i(t[1], r), f = i(t[2], r), \"string\" == typeof o && \"string\" == typeof f && -1 !== o.indexOf(f);\n            case \"match\": return e = i(t[1], r), n = i(t[2], r), \"string\" == typeof e && \"string\" == typeof n && function (t, r) { var e, n; t: for (; t.length > 0;) {\n                var o, s;\n                if (o = (e = a(t)).star, s = e.chunk, t = e.pattern, o && \"\" === s)\n                    return !0;\n                var i = c(s, r), u = i.t, f = i.ok, p = i.err;\n                if (p)\n                    return !1;\n                if (!f || !(0 === u.length || t.length > 0)) {\n                    if (o)\n                        for (var l = 0; l < r.length; l++) {\n                            if (u = (n = c(s, r.slice(l + 1))).t, f = n.ok, p = n.err, f) {\n                                if (0 === t.length && u.length > 0)\n                                    continue;\n                                r = u;\n                                continue t;\n                            }\n                            if (p)\n                                return !1;\n                        }\n                    return !1;\n                }\n                r = u;\n            } return 0 === r.length; }(n, e);\n            case \"lowercase\":\n                var v = i(t[1], r);\n                return \"string\" != typeof v ? null : v.toLowerCase();\n            case \"typeof\": return typeof i(t[1], r);\n            case \"length\": return function (t) { return null === t ? 0 : Array.isArray(t) || \"string\" == typeof t ? t.length : NaN; }(i(t[1], r));\n            default: throw new Error(\"FQL IR could not evaluate for token: \".concat(p));\n        } }\n        function i(t, r) { return Array.isArray(t) ? t : \"object\" == typeof t ? t.value : (0, o.default)(r, t); }\n        function u(t) { return !!Array.isArray(t) && ((\"lowercase\" === t[0] || \"length\" === t[0] || \"typeof\" === t[0]) && 2 === t.length || (\"contains\" === t[0] || \"match\" === t[0]) && 3 === t.length); }\n        function a(t) { for (var r = { star: !1, chunk: \"\", pattern: \"\" }; t.length > 0 && \"*\" === t[0];)\n            t = t.slice(1), r.star = !0; var e, n = !1; t: for (e = 0; e < t.length; e++)\n            switch (t[e]) {\n                case \"\\\\\":\n                    e + 1 < t.length && e++;\n                    break;\n                case \"[\":\n                    n = !0;\n                    break;\n                case \"]\":\n                    n = !1;\n                    break;\n                case \"*\": if (!n)\n                    break t;\n            } return r.chunk = t.slice(0, e), r.pattern = t.slice(e), r; }\n        function c(t, r) { for (var e, n, o = { t: \"\", ok: !1, err: !1 }; t.length > 0;) {\n            if (0 === r.length)\n                return o;\n            switch (t[0]) {\n                case \"[\":\n                    var s = r[0];\n                    r = r.slice(1);\n                    var i = !0;\n                    (t = t.slice(1)).length > 0 && \"^\" === t[0] && (i = !1, t = t.slice(1));\n                    for (var u = !1, a = 0;;) {\n                        if (t.length > 0 && \"]\" === t[0] && a > 0) {\n                            t = t.slice(1);\n                            break;\n                        }\n                        var c, p = \"\";\n                        if (c = (e = f(t)).char, t = e.newChunk, e.err)\n                            return o;\n                        if (p = c, \"-\" === t[0] && (p = (n = f(t.slice(1))).char, t = n.newChunk, n.err))\n                            return o;\n                        c <= s && s <= p && (u = !0), a++;\n                    }\n                    if (u !== i)\n                        return o;\n                    break;\n                case \"?\":\n                    r = r.slice(1), t = t.slice(1);\n                    break;\n                case \"\\\\\": if (0 === (t = t.slice(1)).length)\n                    return o.err = !0, o;\n                default:\n                    if (t[0] !== r[0])\n                        return o;\n                    r = r.slice(1), t = t.slice(1);\n            }\n        } return o.t = r, o.ok = !0, o.err = !1, o; }\n        function f(t) { var r = { char: \"\", newChunk: \"\", err: !1 }; return 0 === t.length || \"-\" === t[0] || \"]\" === t[0] || \"\\\\\" === t[0] && 0 === (t = t.slice(1)).length ? (r.err = !0, r) : (r.char = t[0], r.newChunk = t.slice(1), 0 === r.newChunk.length && (r.err = !0), r); }\n        r.default = function (t, r) { if (!r)\n            throw new Error(\"No matcher supplied!\"); switch (r.type) {\n            case \"all\": return !0;\n            case \"fql\": return function (t, r) { if (!t)\n                return !1; try {\n                t = JSON.parse(t);\n            }\n            catch (r) {\n                throw new Error('Failed to JSON.parse FQL intermediate representation \"'.concat(t, '\": ').concat(r));\n            } var e = s(t, r); return \"boolean\" == typeof e && e; }(r.ir, t);\n            default: throw new Error(\"Matcher of type \".concat(r.type, \" unsupported.\"));\n        } };\n    }, 1444: function (t, r) {\n        \"use strict\";\n        Object.defineProperty(r, \"__esModule\", { value: !0 });\n        var e = function () { function t(t) { this.rules = [], this.rules = t || []; } return t.prototype.getRulesByDestinationName = function (t) { for (var r = [], e = 0, n = this.rules; e < n.length; e++) {\n            var o = n[e];\n            o.destinationName !== t && void 0 !== o.destinationName || r.push(o);\n        } return r; }, t; }();\n        r.default = e;\n    }, 4303: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 });\n        var o = n(e(374)), s = n(e(7843)), i = n(e(5500)), u = e(9014), a = e(4966);\n        function c(t, r) { p(t, r.drop, (function (t, r) { r.forEach((function (r) { return delete t[r]; })); })); }\n        function f(t, r) { p(t, r.allow, (function (t, r) { Object.keys(t).forEach((function (e) { r.includes(e) || delete t[e]; })); })); }\n        function p(t, r, e) { Object.entries(r).forEach((function (r) { var n = r[0], o = r[1], i = function (t) { \"object\" == typeof t && null !== t && e(t, o); }, u = \"\" === n ? t : (0, s.default)(t, n); Array.isArray(u) ? u.forEach(i) : i(u); })); }\n        function l(t, r) { var e = JSON.parse(JSON.stringify(t)); for (var n in r.map)\n            if (r.map.hasOwnProperty(n)) {\n                var o = r.map[n], i = n.split(\".\"), c = void 0;\n                if (i.length > 1 ? (i.pop(), c = (0, s.default)(e, i.join(\".\"))) : c = t, \"object\" == typeof c) {\n                    if (o.copy) {\n                        var f = (0, s.default)(e, o.copy);\n                        void 0 !== f && (0, u.dset)(t, n, f);\n                    }\n                    else if (o.move) {\n                        var p = (0, s.default)(e, o.move);\n                        void 0 !== p && (0, u.dset)(t, n, p), (0, a.unset)(t, o.move);\n                    }\n                    else\n                        o.hasOwnProperty(\"set\") && (0, u.dset)(t, n, o.set);\n                    if (o.to_string) {\n                        var l = (0, s.default)(t, n);\n                        if (\"string\" == typeof l || \"object\" == typeof l && null !== l)\n                            continue;\n                        void 0 !== l ? (0, u.dset)(t, n, JSON.stringify(l)) : (0, u.dset)(t, n, \"undefined\");\n                    }\n                }\n            } }\n        function v(t, r) { return !(r.sample.percent <= 0) && (r.sample.percent >= 1 || (r.sample.path ? function (t, r) { var e = (0, s.default)(t, r.sample.path), n = (0, o.default)(JSON.stringify(e)), u = -64, a = []; y(n.slice(0, 8), a); for (var c = 0, f = 0; f < 64 && 1 !== a[f]; f++)\n            c++; if (0 !== c) {\n            var p = [];\n            y(n.slice(9, 16), p), u -= c, a.splice(0, c), p.splice(64 - c), a = a.concat(p);\n        } return a[63] = 0 === a[63] ? 1 : 0, (0, i.default)(parseInt(a.join(\"\"), 2), u) < r.sample.percent; }(t, r) : (e = r.sample.percent, Math.random() <= e))); var e; }\n        function y(t, r) { for (var e = 0; e < 8; e++)\n            for (var n = t[e], o = 128; o >= 1; o /= 2)\n                n - o >= 0 ? (n -= o, r.push(1)) : r.push(0); }\n        r.default = function (t, r) { for (var e = t, n = 0, o = r; n < o.length; n++) {\n            var s = o[n];\n            switch (s.type) {\n                case \"drop\": return null;\n                case \"drop_properties\":\n                    c(e, s.config);\n                    break;\n                case \"allow_properties\":\n                    f(e, s.config);\n                    break;\n                case \"sample_event\":\n                    if (v(e, s.config))\n                        break;\n                    return null;\n                case \"map_properties\":\n                    l(e, s.config);\n                    break;\n                case \"hash_properties\": break;\n                default: throw new Error('Transformer of type \"'.concat(s.type, '\" is unsupported.'));\n            }\n        } return e; };\n    }, 4966: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 }), r.unset = void 0;\n        var o = n(e(7843));\n        r.unset = function (t, r) { if ((0, o.default)(t, r)) {\n            for (var e = r.split(\".\"), n = e.pop(); e.length && \"\\\\\" === e[e.length - 1].slice(-1);)\n                n = e.pop().slice(0, -1) + \".\" + n;\n            for (; e.length;)\n                t = t[r = e.shift()];\n            return delete t[n];\n        } return !0; };\n    }, 9014: function (t, r) { r.dset = function (t, r, e) { r.split && (r = r.split(\".\")); for (var n, o, s = 0, i = r.length, u = t; s < i && \"__proto__\" !== (o = r[s++]) && \"constructor\" !== o && \"prototype\" !== o;)\n        u = u[o] = s === i ? e : typeof (n = u[o]) == typeof r ? n : 0 * r[s] != 0 || ~(\"\" + r[s]).indexOf(\".\") ? {} : []; }; }, 3304: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Float64Array ? Float64Array : void 0;\n        t.exports = r;\n    }, 7382: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(5569), s = e(3304), i = e(8482);\n        n = o() ? s : i, t.exports = n;\n    }, 8482: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 6322: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(2508), s = e(5679), i = e(882);\n        n = o() ? s : i, t.exports = n;\n    }, 882: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 5679: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint16Array ? Uint16Array : void 0;\n        t.exports = r;\n    }, 4773: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(9773), s = e(3004), i = e(3078);\n        n = o() ? s : i, t.exports = n;\n    }, 3078: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 3004: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint32Array ? Uint32Array : void 0;\n        t.exports = r;\n    }, 7980: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(8114), s = e(6737), i = e(3357);\n        n = o() ? s : i, t.exports = n;\n    }, 3357: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 6737: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint8Array ? Uint8Array : void 0;\n        t.exports = r;\n    }, 2684: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Float64Array ? Float64Array : null;\n        t.exports = r;\n    }, 5569: function (t, r, e) {\n        \"use strict\";\n        var n = e(3876);\n        t.exports = n;\n    }, 3876: function (t, r, e) {\n        \"use strict\";\n        var n = e(1448), o = e(2684);\n        t.exports = function () { var t, r; if (\"function\" != typeof o)\n            return !1; try {\n            r = new o([1, 3.14, -3.14, NaN]), t = n(r) && 1 === r[0] && 3.14 === r[1] && -3.14 === r[2] && r[3] != r[3];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 9048: function (t, r, e) {\n        \"use strict\";\n        var n = e(3763);\n        t.exports = n;\n    }, 3763: function (t) {\n        \"use strict\";\n        var r = Object.prototype.hasOwnProperty;\n        t.exports = function (t, e) { return null != t && r.call(t, e); };\n    }, 7009: function (t, r, e) {\n        \"use strict\";\n        var n = e(6784);\n        t.exports = n;\n    }, 6784: function (t) {\n        \"use strict\";\n        t.exports = function () { return \"function\" == typeof Symbol && \"symbol\" == typeof Symbol(\"foo\"); };\n    }, 3123: function (t, r, e) {\n        \"use strict\";\n        var n = e(8481);\n        t.exports = n;\n    }, 8481: function (t, r, e) {\n        \"use strict\";\n        var n = e(7009)();\n        t.exports = function () { return n && \"symbol\" == typeof Symbol.toStringTag; };\n    }, 2508: function (t, r, e) {\n        \"use strict\";\n        var n = e(3403);\n        t.exports = n;\n    }, 3403: function (t, r, e) {\n        \"use strict\";\n        var n = e(768), o = e(9668), s = e(187);\n        t.exports = function () { var t, r; if (\"function\" != typeof s)\n            return !1; try {\n            r = new s(r = [1, 3.14, -3.14, o + 1, o + 2]), t = n(r) && 1 === r[0] && 3 === r[1] && r[2] === o - 2 && 0 === r[3] && 1 === r[4];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 187: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint16Array ? Uint16Array : null;\n        t.exports = r;\n    }, 9773: function (t, r, e) {\n        \"use strict\";\n        var n = e(2822);\n        t.exports = n;\n    }, 2822: function (t, r, e) {\n        \"use strict\";\n        var n = e(2744), o = e(3899), s = e(746);\n        t.exports = function () { var t, r; if (\"function\" != typeof s)\n            return !1; try {\n            r = new s(r = [1, 3.14, -3.14, o + 1, o + 2]), t = n(r) && 1 === r[0] && 3 === r[1] && r[2] === o - 2 && 0 === r[3] && 1 === r[4];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 746: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint32Array ? Uint32Array : null;\n        t.exports = r;\n    }, 8114: function (t, r, e) {\n        \"use strict\";\n        var n = e(8066);\n        t.exports = n;\n    }, 8066: function (t, r, e) {\n        \"use strict\";\n        var n = e(8279), o = e(3443), s = e(2731);\n        t.exports = function () { var t, r; if (\"function\" != typeof s)\n            return !1; try {\n            r = new s(r = [1, 3.14, -3.14, o + 1, o + 2]), t = n(r) && 1 === r[0] && 3 === r[1] && r[2] === o - 2 && 0 === r[3] && 1 === r[4];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 2731: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint8Array ? Uint8Array : null;\n        t.exports = r;\n    }, 1448: function (t, r, e) {\n        \"use strict\";\n        var n = e(1453);\n        t.exports = n;\n    }, 1453: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Float64Array;\n        t.exports = function (t) { return o && t instanceof Float64Array || \"[object Float64Array]\" === n(t); };\n    }, 9331: function (t, r, e) {\n        \"use strict\";\n        var n = e(7980), o = { uint16: e(6322), uint8: n };\n        t.exports = o;\n    }, 5902: function (t, r, e) {\n        \"use strict\";\n        var n = e(4106);\n        t.exports = n;\n    }, 4106: function (t, r, e) {\n        \"use strict\";\n        var n, o, s = e(9331);\n        (o = new s.uint16(1))[0] = 4660, n = 52 === new s.uint8(o.buffer)[0], t.exports = n;\n    }, 768: function (t, r, e) {\n        \"use strict\";\n        var n = e(3823);\n        t.exports = n;\n    }, 3823: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Uint16Array;\n        t.exports = function (t) { return o && t instanceof Uint16Array || \"[object Uint16Array]\" === n(t); };\n    }, 2744: function (t, r, e) {\n        \"use strict\";\n        var n = e(2326);\n        t.exports = n;\n    }, 2326: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Uint32Array;\n        t.exports = function (t) { return o && t instanceof Uint32Array || \"[object Uint32Array]\" === n(t); };\n    }, 8279: function (t, r, e) {\n        \"use strict\";\n        var n = e(208);\n        t.exports = n;\n    }, 208: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Uint8Array;\n        t.exports = function (t) { return o && t instanceof Uint8Array || \"[object Uint8Array]\" === n(t); };\n    }, 6315: function (t) {\n        \"use strict\";\n        t.exports = 1023;\n    }, 1686: function (t) {\n        \"use strict\";\n        t.exports = 2147483647;\n    }, 3105: function (t) {\n        \"use strict\";\n        t.exports = 2146435072;\n    }, 3449: function (t) {\n        \"use strict\";\n        t.exports = 2147483648;\n    }, 6988: function (t) {\n        \"use strict\";\n        t.exports = -1023;\n    }, 9777: function (t) {\n        \"use strict\";\n        t.exports = 1023;\n    }, 3690: function (t) {\n        \"use strict\";\n        t.exports = -1074;\n    }, 2918: function (t, r, e) {\n        \"use strict\";\n        var n = e(4772).NEGATIVE_INFINITY;\n        t.exports = n;\n    }, 4165: function (t) {\n        \"use strict\";\n        var r = Number.POSITIVE_INFINITY;\n        t.exports = r;\n    }, 6488: function (t) {\n        \"use strict\";\n        t.exports = 22250738585072014e-324;\n    }, 9668: function (t) {\n        \"use strict\";\n        t.exports = 65535;\n    }, 3899: function (t) {\n        \"use strict\";\n        t.exports = 4294967295;\n    }, 3443: function (t) {\n        \"use strict\";\n        t.exports = 255;\n    }, 7011: function (t, r, e) {\n        \"use strict\";\n        var n = e(812);\n        t.exports = n;\n    }, 812: function (t, r, e) {\n        \"use strict\";\n        var n = e(4165), o = e(2918);\n        t.exports = function (t) { return t === n || t === o; };\n    }, 1883: function (t, r, e) {\n        \"use strict\";\n        var n = e(1797);\n        t.exports = n;\n    }, 1797: function (t) {\n        \"use strict\";\n        t.exports = function (t) { return t != t; };\n    }, 513: function (t, r, e) {\n        \"use strict\";\n        var n = e(5760);\n        t.exports = n;\n    }, 5760: function (t) {\n        \"use strict\";\n        t.exports = function (t) { return Math.abs(t); };\n    }, 5848: function (t, r, e) {\n        \"use strict\";\n        var n = e(677);\n        t.exports = n;\n    }, 677: function (t, r, e) {\n        \"use strict\";\n        var n = e(3449), o = e(1686), s = e(7838), i = e(1921), u = e(2490), a = [0, 0];\n        t.exports = function (t, r) { var e, c; return s.assign(t, a, 1, 0), e = a[0], e &= o, c = i(r), u(e |= c &= n, a[1]); };\n    }, 5500: function (t, r, e) {\n        \"use strict\";\n        var n = e(8397);\n        t.exports = n;\n    }, 8397: function (t, r, e) {\n        \"use strict\";\n        var n = e(4165), o = e(2918), s = e(6315), i = e(9777), u = e(6988), a = e(3690), c = e(1883), f = e(7011), p = e(5848), l = e(4948), v = e(8478), y = e(7838), d = e(2490), h = [0, 0], x = [0, 0];\n        t.exports = function (t, r) { var e, b; return 0 === t || c(t) || f(t) ? t : (l(h, t), r += h[1], (r += v(t = h[0])) < a ? p(0, t) : r > i ? t < 0 ? o : n : (r <= u ? (r += 52, b = 2220446049250313e-31) : b = 1, y(x, t), e = x[0], e &= 2148532223, b * d(e |= r + s << 20, x[1]))); };\n    }, 4772: function (t, r, e) {\n        \"use strict\";\n        var n = e(7548);\n        t.exports = n;\n    }, 7548: function (t) {\n        \"use strict\";\n        t.exports = Number;\n    }, 8478: function (t, r, e) {\n        \"use strict\";\n        var n = e(4500);\n        t.exports = n;\n    }, 4500: function (t, r, e) {\n        \"use strict\";\n        var n = e(1921), o = e(3105), s = e(6315);\n        t.exports = function (t) { var r = n(t); return (r = (r & o) >>> 20) - s | 0; };\n    }, 2490: function (t, r, e) {\n        \"use strict\";\n        var n = e(9639);\n        t.exports = n;\n    }, 4445: function (t, r, e) {\n        \"use strict\";\n        var n, o, s;\n        !0 === e(5902) ? (o = 1, s = 0) : (o = 0, s = 1), n = { HIGH: o, LOW: s }, t.exports = n;\n    }, 9639: function (t, r, e) {\n        \"use strict\";\n        var n = e(4773), o = e(7382), s = e(4445), i = new o(1), u = new n(i.buffer), a = s.HIGH, c = s.LOW;\n        t.exports = function (t, r) { return u[a] = t, u[c] = r, i[0]; };\n    }, 5646: function (t, r, e) {\n        \"use strict\";\n        var n;\n        n = !0 === e(5902) ? 1 : 0, t.exports = n;\n    }, 1921: function (t, r, e) {\n        \"use strict\";\n        var n = e(6285);\n        t.exports = n;\n    }, 6285: function (t, r, e) {\n        \"use strict\";\n        var n = e(4773), o = e(7382), s = e(5646), i = new o(1), u = new n(i.buffer);\n        t.exports = function (t) { return i[0] = t, u[s]; };\n    }, 9024: function (t, r, e) {\n        \"use strict\";\n        var n = e(6488), o = e(7011), s = e(1883), i = e(513);\n        t.exports = function (t, r, e, u) { return s(t) || o(t) ? (r[u] = t, r[u + e] = 0, r) : 0 !== t && i(t) < n ? (r[u] = 4503599627370496 * t, r[u + e] = -52, r) : (r[u] = t, r[u + e] = 0, r); };\n    }, 4948: function (t, r, e) {\n        \"use strict\";\n        var n = e(7576), o = e(9422);\n        n(o, \"assign\", e(9024)), t.exports = o;\n    }, 9422: function (t, r, e) {\n        \"use strict\";\n        var n = e(9024);\n        t.exports = function (t) { return n(t, [0, 0], 1, 0); };\n    }, 5239: function (t, r, e) {\n        \"use strict\";\n        var n = e(4773), o = e(7382), s = e(5782), i = new o(1), u = new n(i.buffer), a = s.HIGH, c = s.LOW;\n        t.exports = function (t, r, e, n) { return i[0] = t, r[n] = u[a], r[n + e] = u[c], r; };\n    }, 7838: function (t, r, e) {\n        \"use strict\";\n        var n = e(7576), o = e(4010);\n        n(o, \"assign\", e(5239)), t.exports = o;\n    }, 5782: function (t, r, e) {\n        \"use strict\";\n        var n, o, s;\n        !0 === e(5902) ? (o = 1, s = 0) : (o = 0, s = 1), n = { HIGH: o, LOW: s }, t.exports = n;\n    }, 4010: function (t, r, e) {\n        \"use strict\";\n        var n = e(5239);\n        t.exports = function (t) { return n(t, [0, 0], 1, 0); };\n    }, 7576: function (t, r, e) {\n        \"use strict\";\n        var n = e(7063);\n        t.exports = n;\n    }, 7063: function (t, r, e) {\n        \"use strict\";\n        var n = e(6691);\n        t.exports = function (t, r, e) { n(t, r, { configurable: !1, enumerable: !1, writable: !1, value: e }); };\n    }, 2073: function (t) {\n        \"use strict\";\n        var r = Object.defineProperty;\n        t.exports = r;\n    }, 1680: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Object.defineProperty ? Object.defineProperty : null;\n        t.exports = r;\n    }, 1471: function (t, r, e) {\n        \"use strict\";\n        var n = e(1680);\n        t.exports = function () { try {\n            return n({}, \"x\", {}), !0;\n        }\n        catch (t) {\n            return !1;\n        } };\n    }, 6691: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(1471), s = e(2073), i = e(1309);\n        n = o() ? s : i, t.exports = n;\n    }, 1309: function (t) {\n        \"use strict\";\n        var r = Object.prototype, e = r.toString, n = r.__defineGetter__, o = r.__defineSetter__, s = r.__lookupGetter__, i = r.__lookupSetter__;\n        t.exports = function (t, u, a) { var c, f, p, l; if (\"object\" != typeof t || null === t || \"[object Array]\" === e.call(t))\n            throw new TypeError(\"invalid argument. First argument must be an object. Value: `\" + t + \"`.\"); if (\"object\" != typeof a || null === a || \"[object Array]\" === e.call(a))\n            throw new TypeError(\"invalid argument. Property descriptor must be an object. Value: `\" + a + \"`.\"); if ((f = \"value\" in a) && (s.call(t, u) || i.call(t, u) ? (c = t.__proto__, t.__proto__ = r, delete t[u], t[u] = a.value, t.__proto__ = c) : t[u] = a.value), p = \"get\" in a, l = \"set\" in a, f && (p || l))\n            throw new Error(\"invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.\"); return p && n && n.call(t, u, a.get), l && o && o.call(t, u, a.set), t; };\n    }, 6208: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(3123), s = e(7407), i = e(4210);\n        n = o() ? i : s, t.exports = n;\n    }, 7407: function (t, r, e) {\n        \"use strict\";\n        var n = e(173);\n        t.exports = function (t) { return n.call(t); };\n    }, 4210: function (t, r, e) {\n        \"use strict\";\n        var n = e(9048), o = e(1403), s = e(173);\n        t.exports = function (t) { var r, e, i; if (null == t)\n            return s.call(t); e = t[o], r = n(t, o); try {\n            t[o] = void 0;\n        }\n        catch (r) {\n            return s.call(t);\n        } return i = s.call(t), r ? t[o] = e : delete t[o], i; };\n    }, 173: function (t) {\n        \"use strict\";\n        var r = Object.prototype.toString;\n        t.exports = r;\n    }, 1403: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Symbol ? Symbol.toStringTag : \"\";\n        t.exports = r;\n    }, 7843: function (t) { t.exports = function (t, r, e, n, o) { for (r = r.split ? r.split(\".\") : r, n = 0; n < r.length; n++)\n        t = t ? t[r[n]] : o; return t === o ? e : t; }; }, 374: function (t, r, e) {\n        \"use strict\";\n        e.r(r), e.d(r, { default: function () { return s; } });\n        for (var n = [], o = 0; o < 64;)\n            n[o] = 0 | 4294967296 * Math.sin(++o % Math.PI);\n        function s(t) { var r, e, s, i = [r = 1732584193, e = 4023233417, ~r, ~e], u = [], a = unescape(encodeURI(t)) + \"\", c = a.length; for (t = --c / 4 + 2 | 15, u[--t] = 8 * c; ~c;)\n            u[c >> 2] |= a.charCodeAt(c) << 8 * c--; for (o = a = 0; o < t; o += 16) {\n            for (c = i; a < 64; c = [s = c[3], r + ((s = c[0] + [r & e | ~r & s, s & r | ~s & e, r ^ e ^ s, e ^ (r | ~s)][c = a >> 4] + n[a] + ~~u[o | 15 & [a, 5 * a + 1, 3 * a + 5, 7 * a][c]]) << (c = [7, 12, 17, 22, 5, 9, 14, 20, 4, 11, 16, 23, 6, 10, 15, 21][4 * c + a++ % 4]) | s >>> -c), r, e])\n                r = 0 | c[1], e = c[2];\n            for (a = 4; a;)\n                i[--a] += c[a];\n        } for (t = \"\"; a < 32;)\n            t += (i[a >> 3] >> 4 * (1 ^ a++) & 15).toString(16); return t; }\n    } }, r = {}; function e(n) { var o = r[n]; if (void 0 !== o)\n    return o.exports; var s = r[n] = { exports: {} }; return t[n].call(s.exports, s, s.exports, e), s.exports; } return e.d = function (t, r) { for (var n in r)\n    e.o(r, n) && !e.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: r[n] }); }, e.o = function (t, r) { return Object.prototype.hasOwnProperty.call(t, r); }, e.r = function (t) { \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(t, \"__esModule\", { value: !0 }); }, e(2870); })(); }));\n//# sourceMappingURL=tsub.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvdmVuZG9yL3RzdWIvdHN1Yi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsSUFBSSxJQUF1RDtBQUM5RTtBQUNBLEtBQUssYUFNSixFQUFFLHNCQUFzQixzQkFBc0IsVUFBVTtBQUN6RDtBQUNBLCtEQUErRCxpQ0FBaUM7QUFDaEcsaURBQWlELFdBQVc7QUFDNUQ7QUFDQSxnREFBZ0QsbUNBQW1DLHdCQUF3QjtBQUMzRztBQUNBLDhDQUE4QyxtQ0FBbUMsd0JBQXdCO0FBQ3pHO0FBQ0EsNENBQTRDLG1DQUFtQyx3QkFBd0I7QUFDdkcsS0FBSztBQUNMO0FBQ0EsK0RBQStELGlDQUFpQztBQUNoRyxpREFBaUQsV0FBVztBQUM1RDtBQUNBLDJCQUEyQjtBQUMzQixtQ0FBbUMsMEJBQTBCO0FBQzdEO0FBQ0E7QUFDQSxnQ0FBZ0MsY0FBYztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsbURBQW1ELHlDQUF5Qyx1QkFBdUIsS0FBSztBQUN4SDtBQUNBLG1JQUFtSSxVQUFVLFVBQVUsYUFBYTtBQUNwSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGNBQWM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3QkFBd0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsb0ZBQW9GO0FBQ3JJO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isd0JBQXdCO0FBQ3hCLHdCQUF3QixlQUFlLG9DQUFvQyw2QkFBNkI7QUFDeEcseUNBQXlDLGVBQWUsZUFBZSxjQUFjO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCwyQkFBMkIscUJBQXFCLDBCQUEwQixhQUFhO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHdCQUF3QixVQUFVLG1DQUFtQztBQUNyRSxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JEO0FBQ0EsaURBQWlEO0FBQ2pELDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUJBQWlCLG9DQUFvQztBQUNuRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaURBQWlELFdBQVc7QUFDNUQsOEJBQThCLGdCQUFnQix5Q0FBeUMsOERBQThELHdDQUF3QyxjQUFjO0FBQzNNO0FBQ0E7QUFDQSxVQUFVLFdBQVcsTUFBTTtBQUMzQjtBQUNBLEtBQUs7QUFDTDtBQUNBLCtEQUErRCxpQ0FBaUM7QUFDaEcsaURBQWlELFdBQVc7QUFDNUQ7QUFDQSwyQkFBMkIsZ0NBQWdDLDBCQUEwQixxQkFBcUIsS0FBSztBQUMvRywyQkFBMkIsaUNBQWlDLHVDQUF1QywrQkFBK0IsS0FBSztBQUN2SSw4QkFBOEIsMENBQTBDLDJDQUEyQyxnREFBZ0QsMkNBQTJDLHlDQUF5QztBQUN2UCwyQkFBMkIsdUNBQXVDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnR0FBZ0csa0dBQWtHLHFCQUFxQix1QkFBdUIsc0JBQXNCO0FBQy9SLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsVUFBVSxvR0FBb0csdURBQXVEO0FBQ3JLLDJCQUEyQixnQkFBZ0IsT0FBTztBQUNsRCx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBLHNDQUFzQyw4QkFBOEIsY0FBYztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixLQUFLO0FBQ0w7QUFDQSwrREFBK0QsaUNBQWlDO0FBQ2hHLGlEQUFpRCxXQUFXO0FBQzVEO0FBQ0Esb0NBQW9DO0FBQ3BDLG9EQUFvRCwrQ0FBK0M7QUFDbkc7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUssMEJBQTBCLDhCQUE4QiwrQkFBK0IsMkNBQTJDLGtGQUFrRjtBQUN6TixxSEFBcUgsVUFBVTtBQUMvSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0NBQWtDO0FBQ2xDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1Qyx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUMsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1Qyx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxtQ0FBbUM7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0NBQXNDLFVBQVU7QUFDaEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0NBQXNDLFVBQVU7QUFDaEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DLGNBQWM7QUFDakQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0VBQWdFLGlCQUFpQjtBQUNqRixLQUFLO0FBQ0w7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRDQUE0QztBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlDQUF5QyxVQUFVLDBEQUEwRDtBQUM3RyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUNBQXlDLGdCQUFnQjtBQUN6RCw0R0FBNEc7QUFDNUcsaUhBQWlIO0FBQ2pILHFKQUFxSjtBQUNySixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUMsYUFBYTtBQUNoRCw4QkFBOEIsdUJBQXVCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSyx1QkFBdUIsdUNBQXVDLDRDQUE0QyxjQUFjO0FBQzdILDZCQUE2Qiw0QkFBNEI7QUFDekQ7QUFDQSx5QkFBeUIsdUJBQXVCLGFBQWE7QUFDN0QsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQSx3QkFBd0IsbUhBQW1ILDJDQUEyQyxHQUFHO0FBQ3pMLHFEQUFxRCxnQkFBZ0IsT0FBTztBQUM1RSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBLHdCQUF3QixFQUFFO0FBQzFCO0FBQ0EsVUFBVSxhQUFhLE9BQU87QUFDOUIsaUVBQWlFO0FBQ2pFLE9BQU8sVUFBVSxnQkFBZ0IsY0FBYztBQUMvQyxzQkFBc0IsaUJBQWlCLGVBQWUsMkRBQTJELCtCQUErQjtBQUNoSiw2REFBNkQsMkJBQTJCLElBQUksMEJBQTBCLG9EQUFvRCx1QkFBdUIscUdBQXFHLGlCQUFpQiw0Q0FBNEMsV0FBVyxJQUFJLFlBQVksTUFBTTtBQUNwWSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3ZlbmRvci90c3ViL3RzdWIuanM/ZmUyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8vIEB0cy1ub2NoZWNrXG4vLyBwcmV0dGllci1pZ25vcmVcbi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAc2VnbWVudC90c3ViIDIuMC4wIC0gR0VORVJBVEVEIERPIE5PVCBNT0RJRllcbi8qISBGb3IgbGljZW5zZSBpbmZvcm1hdGlvbiBwbGVhc2Ugc2VlIHRzdWIuanMuTElDRU5TRS50eHQgKi9cbiFmdW5jdGlvbiAodCwgcikgeyBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgZXhwb3J0cyAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBtb2R1bGUpXG4gICAgbW9kdWxlLmV4cG9ydHMgPSByKCk7XG5lbHNlIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kKVxuICAgIGRlZmluZShbXSwgcik7XG5lbHNlIHtcbiAgICB2YXIgZSA9IHIoKTtcbiAgICBmb3IgKHZhciBuIGluIGUpXG4gICAgICAgIChcIm9iamVjdFwiID09IHR5cGVvZiBleHBvcnRzID8gZXhwb3J0cyA6IHQpW25dID0gZVtuXTtcbn0gfShzZWxmLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gKGZ1bmN0aW9uICgpIHsgdmFyIHQgPSB7IDI4NzA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQgfHwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgJiYgdC5fX2VzTW9kdWxlID8gdCA6IHsgZGVmYXVsdDogdCB9OyB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6ICEwIH0pLCByLlN0b3JlID0gci5tYXRjaGVzID0gci50cmFuc2Zvcm0gPSB2b2lkIDA7XG4gICAgICAgIHZhciBvID0gZSg0MzAzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIFwidHJhbnNmb3JtXCIsIHsgZW51bWVyYWJsZTogITAsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbihvKS5kZWZhdWx0OyB9IH0pO1xuICAgICAgICB2YXIgcyA9IGUoMjM3MCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIm1hdGNoZXNcIiwgeyBlbnVtZXJhYmxlOiAhMCwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBuKHMpLmRlZmF1bHQ7IH0gfSk7XG4gICAgICAgIHZhciBpID0gZSgxNDQ0KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIFwiU3RvcmVcIiwgeyBlbnVtZXJhYmxlOiAhMCwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBuKGkpLmRlZmF1bHQ7IH0gfSk7XG4gICAgfSwgMjM3MDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCB8fCBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgPyB0IDogeyBkZWZhdWx0OiB0IH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7XG4gICAgICAgIHZhciBvID0gbihlKDc4NDMpKTtcbiAgICAgICAgZnVuY3Rpb24gcyh0LCByKSB7IGlmICghQXJyYXkuaXNBcnJheSh0KSlcbiAgICAgICAgICAgIHJldHVybiAhMCA9PT0gaSh0LCByKTsgdmFyIGUsIG4sIG8sIGYsIHAgPSB0WzBdOyBzd2l0Y2ggKHApIHtcbiAgICAgICAgICAgIGNhc2UgXCIhXCI6IHJldHVybiAhcyh0WzFdLCByKTtcbiAgICAgICAgICAgIGNhc2UgXCJvclwiOlxuICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAxOyBsIDwgdC5sZW5ndGg7IGwrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHModFtsXSwgcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgY2FzZSBcImFuZFwiOlxuICAgICAgICAgICAgICAgIGZvciAobCA9IDE7IGwgPCB0Lmxlbmd0aDsgbCsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXModFtsXSwgcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgY2FzZSBcIj1cIjpcbiAgICAgICAgICAgIGNhc2UgXCIhPVwiOiByZXR1cm4gZnVuY3Rpb24gKHQsIHIsIGUsIG4pIHsgc3dpdGNoICh1KHQpICYmICh0ID0gcyh0LCBuKSksIHUocikgJiYgKHIgPSBzKHIsIG4pKSwgXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiByICYmICh0ID0gSlNPTi5zdHJpbmdpZnkodCksIHIgPSBKU09OLnN0cmluZ2lmeShyKSksIGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiPVwiOiByZXR1cm4gdCA9PT0gcjtcbiAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIjogcmV0dXJuIHQgIT09IHI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGVyYXRvciBpbiBjb21wYXJlSXRlbXM6IFwiLmNvbmNhdChlKSk7XG4gICAgICAgICAgICB9IH0oaSh0WzFdLCByKSwgaSh0WzJdLCByKSwgcCwgcik7XG4gICAgICAgICAgICBjYXNlIFwiPD1cIjpcbiAgICAgICAgICAgIGNhc2UgXCI8XCI6XG4gICAgICAgICAgICBjYXNlIFwiPlwiOlxuICAgICAgICAgICAgY2FzZSBcIj49XCI6IHJldHVybiBmdW5jdGlvbiAodCwgciwgZSwgbikgeyBpZiAodSh0KSAmJiAodCA9IHModCwgbikpLCB1KHIpICYmIChyID0gcyhyLCBuKSksIFwibnVtYmVyXCIgIT0gdHlwZW9mIHQgfHwgXCJudW1iZXJcIiAhPSB0eXBlb2YgcilcbiAgICAgICAgICAgICAgICByZXR1cm4gITE7IHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCI8PVwiOiByZXR1cm4gdCA8PSByO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI+PVwiOiByZXR1cm4gdCA+PSByO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI8XCI6IHJldHVybiB0IDwgcjtcbiAgICAgICAgICAgICAgICBjYXNlIFwiPlwiOiByZXR1cm4gdCA+IHI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGVyYXRvciBpbiBjb21wYXJlTnVtYmVyczogXCIuY29uY2F0KGUpKTtcbiAgICAgICAgICAgIH0gfShpKHRbMV0sIHIpLCBpKHRbMl0sIHIpLCBwLCByKTtcbiAgICAgICAgICAgIGNhc2UgXCJpblwiOiByZXR1cm4gZnVuY3Rpb24gKHQsIHIsIGUpIHsgcmV0dXJuIHZvaWQgMCAhPT0gci5maW5kKChmdW5jdGlvbiAocikgeyByZXR1cm4gaShyLCBlKSA9PT0gdDsgfSkpOyB9KGkodFsxXSwgciksIGkodFsyXSwgciksIHIpO1xuICAgICAgICAgICAgY2FzZSBcImNvbnRhaW5zXCI6IHJldHVybiBvID0gaSh0WzFdLCByKSwgZiA9IGkodFsyXSwgciksIFwic3RyaW5nXCIgPT0gdHlwZW9mIG8gJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZiAmJiAtMSAhPT0gby5pbmRleE9mKGYpO1xuICAgICAgICAgICAgY2FzZSBcIm1hdGNoXCI6IHJldHVybiBlID0gaSh0WzFdLCByKSwgbiA9IGkodFsyXSwgciksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiAmJiBmdW5jdGlvbiAodCwgcikgeyB2YXIgZSwgbjsgdDogZm9yICg7IHQubGVuZ3RoID4gMDspIHtcbiAgICAgICAgICAgICAgICB2YXIgbywgcztcbiAgICAgICAgICAgICAgICBpZiAobyA9IChlID0gYSh0KSkuc3RhciwgcyA9IGUuY2h1bmssIHQgPSBlLnBhdHRlcm4sIG8gJiYgXCJcIiA9PT0gcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIHZhciBpID0gYyhzLCByKSwgdSA9IGkudCwgZiA9IGkub2ssIHAgPSBpLmVycjtcbiAgICAgICAgICAgICAgICBpZiAocClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIGlmICghZiB8fCAhKDAgPT09IHUubGVuZ3RoIHx8IHQubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8pXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHIubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9IChuID0gYyhzLCByLnNsaWNlKGwgKyAxKSkpLnQsIGYgPSBuLm9rLCBwID0gbi5lcnIsIGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoICYmIHUubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByID0gdTtcbiAgICAgICAgICAgIH0gcmV0dXJuIDAgPT09IHIubGVuZ3RoOyB9KG4sIGUpO1xuICAgICAgICAgICAgY2FzZSBcImxvd2VyY2FzZVwiOlxuICAgICAgICAgICAgICAgIHZhciB2ID0gaSh0WzFdLCByKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgdiA/IG51bGwgOiB2LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjYXNlIFwidHlwZW9mXCI6IHJldHVybiB0eXBlb2YgaSh0WzFdLCByKTtcbiAgICAgICAgICAgIGNhc2UgXCJsZW5ndGhcIjogcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiBudWxsID09PSB0ID8gMCA6IEFycmF5LmlzQXJyYXkodCkgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IHQubGVuZ3RoIDogTmFOOyB9KGkodFsxXSwgcikpO1xuICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiRlFMIElSIGNvdWxkIG5vdCBldmFsdWF0ZSBmb3IgdG9rZW46IFwiLmNvbmNhdChwKSk7XG4gICAgICAgIH0gfVxuICAgICAgICBmdW5jdGlvbiBpKHQsIHIpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkodCkgPyB0IDogXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiAoMCwgby5kZWZhdWx0KShyLCB0KTsgfVxuICAgICAgICBmdW5jdGlvbiB1KHQpIHsgcmV0dXJuICEhQXJyYXkuaXNBcnJheSh0KSAmJiAoKFwibG93ZXJjYXNlXCIgPT09IHRbMF0gfHwgXCJsZW5ndGhcIiA9PT0gdFswXSB8fCBcInR5cGVvZlwiID09PSB0WzBdKSAmJiAyID09PSB0Lmxlbmd0aCB8fCAoXCJjb250YWluc1wiID09PSB0WzBdIHx8IFwibWF0Y2hcIiA9PT0gdFswXSkgJiYgMyA9PT0gdC5sZW5ndGgpOyB9XG4gICAgICAgIGZ1bmN0aW9uIGEodCkgeyBmb3IgKHZhciByID0geyBzdGFyOiAhMSwgY2h1bms6IFwiXCIsIHBhdHRlcm46IFwiXCIgfTsgdC5sZW5ndGggPiAwICYmIFwiKlwiID09PSB0WzBdOylcbiAgICAgICAgICAgIHQgPSB0LnNsaWNlKDEpLCByLnN0YXIgPSAhMDsgdmFyIGUsIG4gPSAhMTsgdDogZm9yIChlID0gMDsgZSA8IHQubGVuZ3RoOyBlKyspXG4gICAgICAgICAgICBzd2l0Y2ggKHRbZV0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiXFxcXFwiOlxuICAgICAgICAgICAgICAgICAgICBlICsgMSA8IHQubGVuZ3RoICYmIGUrKztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIltcIjpcbiAgICAgICAgICAgICAgICAgICAgbiA9ICEwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiXVwiOlxuICAgICAgICAgICAgICAgICAgICBuID0gITE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6IGlmICghbilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgdDtcbiAgICAgICAgICAgIH0gcmV0dXJuIHIuY2h1bmsgPSB0LnNsaWNlKDAsIGUpLCByLnBhdHRlcm4gPSB0LnNsaWNlKGUpLCByOyB9XG4gICAgICAgIGZ1bmN0aW9uIGModCwgcikgeyBmb3IgKHZhciBlLCBuLCBvID0geyB0OiBcIlwiLCBvazogITEsIGVycjogITEgfTsgdC5sZW5ndGggPiAwOykge1xuICAgICAgICAgICAgaWYgKDAgPT09IHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgc3dpdGNoICh0WzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIltcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSByWzBdO1xuICAgICAgICAgICAgICAgICAgICByID0gci5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgKHQgPSB0LnNsaWNlKDEpKS5sZW5ndGggPiAwICYmIFwiXlwiID09PSB0WzBdICYmIChpID0gITEsIHQgPSB0LnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9ICExLCBhID0gMDs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGggPiAwICYmIFwiXVwiID09PSB0WzBdICYmIGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYywgcCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9IChlID0gZih0KSkuY2hhciwgdCA9IGUubmV3Q2h1bmssIGUuZXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPSBjLCBcIi1cIiA9PT0gdFswXSAmJiAocCA9IChuID0gZih0LnNsaWNlKDEpKSkuY2hhciwgdCA9IG4ubmV3Q2h1bmssIG4uZXJyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPD0gcyAmJiBzIDw9IHAgJiYgKHUgPSAhMCksIGErKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodSAhPT0gaSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiP1wiOlxuICAgICAgICAgICAgICAgICAgICByID0gci5zbGljZSgxKSwgdCA9IHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJcXFxcXCI6IGlmICgwID09PSAodCA9IHQuc2xpY2UoMSkpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uZXJyID0gITAsIG87XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMF0gIT09IHJbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgICAgICAgICAgciA9IHIuc2xpY2UoMSksIHQgPSB0LnNsaWNlKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHJldHVybiBvLnQgPSByLCBvLm9rID0gITAsIG8uZXJyID0gITEsIG87IH1cbiAgICAgICAgZnVuY3Rpb24gZih0KSB7IHZhciByID0geyBjaGFyOiBcIlwiLCBuZXdDaHVuazogXCJcIiwgZXJyOiAhMSB9OyByZXR1cm4gMCA9PT0gdC5sZW5ndGggfHwgXCItXCIgPT09IHRbMF0gfHwgXCJdXCIgPT09IHRbMF0gfHwgXCJcXFxcXCIgPT09IHRbMF0gJiYgMCA9PT0gKHQgPSB0LnNsaWNlKDEpKS5sZW5ndGggPyAoci5lcnIgPSAhMCwgcikgOiAoci5jaGFyID0gdFswXSwgci5uZXdDaHVuayA9IHQuc2xpY2UoMSksIDAgPT09IHIubmV3Q2h1bmsubGVuZ3RoICYmIChyLmVyciA9ICEwKSwgcik7IH1cbiAgICAgICAgci5kZWZhdWx0ID0gZnVuY3Rpb24gKHQsIHIpIHsgaWYgKCFyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWF0Y2hlciBzdXBwbGllZCFcIik7IHN3aXRjaCAoci50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiYWxsXCI6IHJldHVybiAhMDtcbiAgICAgICAgICAgIGNhc2UgXCJmcWxcIjogcmV0dXJuIGZ1bmN0aW9uICh0LCByKSB7IGlmICghdClcbiAgICAgICAgICAgICAgICByZXR1cm4gITE7IHRyeSB7XG4gICAgICAgICAgICAgICAgdCA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIEpTT04ucGFyc2UgRlFMIGludGVybWVkaWF0ZSByZXByZXNlbnRhdGlvbiBcIicuY29uY2F0KHQsICdcIjogJykuY29uY2F0KHIpKTtcbiAgICAgICAgICAgIH0gdmFyIGUgPSBzKHQsIHIpOyByZXR1cm4gXCJib29sZWFuXCIgPT0gdHlwZW9mIGUgJiYgZTsgfShyLmlyLCB0KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIk1hdGNoZXIgb2YgdHlwZSBcIi5jb25jYXQoci50eXBlLCBcIiB1bnN1cHBvcnRlZC5cIikpO1xuICAgICAgICB9IH07XG4gICAgfSwgMTQ0NDogZnVuY3Rpb24gKHQsIHIpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7XG4gICAgICAgIHZhciBlID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiB0KHQpIHsgdGhpcy5ydWxlcyA9IFtdLCB0aGlzLnJ1bGVzID0gdCB8fCBbXTsgfSByZXR1cm4gdC5wcm90b3R5cGUuZ2V0UnVsZXNCeURlc3RpbmF0aW9uTmFtZSA9IGZ1bmN0aW9uICh0KSB7IGZvciAodmFyIHIgPSBbXSwgZSA9IDAsIG4gPSB0aGlzLnJ1bGVzOyBlIDwgbi5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgdmFyIG8gPSBuW2VdO1xuICAgICAgICAgICAgby5kZXN0aW5hdGlvbk5hbWUgIT09IHQgJiYgdm9pZCAwICE9PSBvLmRlc3RpbmF0aW9uTmFtZSB8fCByLnB1c2gobyk7XG4gICAgICAgIH0gcmV0dXJuIHI7IH0sIHQ7IH0oKTtcbiAgICAgICAgci5kZWZhdWx0ID0gZTtcbiAgICB9LCA0MzAzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSB0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0IHx8IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICYmIHQuX19lc01vZHVsZSA/IHQgOiB7IGRlZmF1bHQ6IHQgfTsgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiAhMCB9KTtcbiAgICAgICAgdmFyIG8gPSBuKGUoMzc0KSksIHMgPSBuKGUoNzg0MykpLCBpID0gbihlKDU1MDApKSwgdSA9IGUoOTAxNCksIGEgPSBlKDQ5NjYpO1xuICAgICAgICBmdW5jdGlvbiBjKHQsIHIpIHsgcCh0LCByLmRyb3AsIChmdW5jdGlvbiAodCwgcikgeyByLmZvckVhY2goKGZ1bmN0aW9uIChyKSB7IHJldHVybiBkZWxldGUgdFtyXTsgfSkpOyB9KSk7IH1cbiAgICAgICAgZnVuY3Rpb24gZih0LCByKSB7IHAodCwgci5hbGxvdywgKGZ1bmN0aW9uICh0LCByKSB7IE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uIChlKSB7IHIuaW5jbHVkZXMoZSkgfHwgZGVsZXRlIHRbZV07IH0pKTsgfSkpOyB9XG4gICAgICAgIGZ1bmN0aW9uIHAodCwgciwgZSkgeyBPYmplY3QuZW50cmllcyhyKS5mb3JFYWNoKChmdW5jdGlvbiAocikgeyB2YXIgbiA9IHJbMF0sIG8gPSByWzFdLCBpID0gZnVuY3Rpb24gKHQpIHsgXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIGUodCwgbyk7IH0sIHUgPSBcIlwiID09PSBuID8gdCA6ICgwLCBzLmRlZmF1bHQpKHQsIG4pOyBBcnJheS5pc0FycmF5KHUpID8gdS5mb3JFYWNoKGkpIDogaSh1KTsgfSkpOyB9XG4gICAgICAgIGZ1bmN0aW9uIGwodCwgcikgeyB2YXIgZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpOyBmb3IgKHZhciBuIGluIHIubWFwKVxuICAgICAgICAgICAgaWYgKHIubWFwLmhhc093blByb3BlcnR5KG4pKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSByLm1hcFtuXSwgaSA9IG4uc3BsaXQoXCIuXCIpLCBjID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IDEgPyAoaS5wb3AoKSwgYyA9ICgwLCBzLmRlZmF1bHQpKGUsIGkuam9pbihcIi5cIikpKSA6IGMgPSB0LCBcIm9iamVjdFwiID09IHR5cGVvZiBjKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLmNvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gKDAsIHMuZGVmYXVsdCkoZSwgby5jb3B5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZiAmJiAoMCwgdS5kc2V0KSh0LCBuLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvLm1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gKDAsIHMuZGVmYXVsdCkoZSwgby5tb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gcCAmJiAoMCwgdS5kc2V0KSh0LCBuLCBwKSwgKDAsIGEudW5zZXQpKHQsIG8ubW92ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgby5oYXNPd25Qcm9wZXJ0eShcInNldFwiKSAmJiAoMCwgdS5kc2V0KSh0LCBuLCBvLnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLnRvX3N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSAoMCwgcy5kZWZhdWx0KSh0LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBsIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIGwgJiYgbnVsbCAhPT0gbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gbCA/ICgwLCB1LmRzZXQpKHQsIG4sIEpTT04uc3RyaW5naWZ5KGwpKSA6ICgwLCB1LmRzZXQpKHQsIG4sIFwidW5kZWZpbmVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHYodCwgcikgeyByZXR1cm4gIShyLnNhbXBsZS5wZXJjZW50IDw9IDApICYmIChyLnNhbXBsZS5wZXJjZW50ID49IDEgfHwgKHIuc2FtcGxlLnBhdGggPyBmdW5jdGlvbiAodCwgcikgeyB2YXIgZSA9ICgwLCBzLmRlZmF1bHQpKHQsIHIuc2FtcGxlLnBhdGgpLCBuID0gKDAsIG8uZGVmYXVsdCkoSlNPTi5zdHJpbmdpZnkoZSkpLCB1ID0gLTY0LCBhID0gW107IHkobi5zbGljZSgwLCA4KSwgYSk7IGZvciAodmFyIGMgPSAwLCBmID0gMDsgZiA8IDY0ICYmIDEgIT09IGFbZl07IGYrKylcbiAgICAgICAgICAgIGMrKzsgaWYgKDAgIT09IGMpIHtcbiAgICAgICAgICAgIHZhciBwID0gW107XG4gICAgICAgICAgICB5KG4uc2xpY2UoOSwgMTYpLCBwKSwgdSAtPSBjLCBhLnNwbGljZSgwLCBjKSwgcC5zcGxpY2UoNjQgLSBjKSwgYSA9IGEuY29uY2F0KHApO1xuICAgICAgICB9IHJldHVybiBhWzYzXSA9IDAgPT09IGFbNjNdID8gMSA6IDAsICgwLCBpLmRlZmF1bHQpKHBhcnNlSW50KGEuam9pbihcIlwiKSwgMiksIHUpIDwgci5zYW1wbGUucGVyY2VudDsgfSh0LCByKSA6IChlID0gci5zYW1wbGUucGVyY2VudCwgTWF0aC5yYW5kb20oKSA8PSBlKSkpOyB2YXIgZTsgfVxuICAgICAgICBmdW5jdGlvbiB5KHQsIHIpIHsgZm9yICh2YXIgZSA9IDA7IGUgPCA4OyBlKyspXG4gICAgICAgICAgICBmb3IgKHZhciBuID0gdFtlXSwgbyA9IDEyODsgbyA+PSAxOyBvIC89IDIpXG4gICAgICAgICAgICAgICAgbiAtIG8gPj0gMCA/IChuIC09IG8sIHIucHVzaCgxKSkgOiByLnB1c2goMCk7IH1cbiAgICAgICAgci5kZWZhdWx0ID0gZnVuY3Rpb24gKHQsIHIpIHsgZm9yICh2YXIgZSA9IHQsIG4gPSAwLCBvID0gcjsgbiA8IG8ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIHZhciBzID0gb1tuXTtcbiAgICAgICAgICAgIHN3aXRjaCAocy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRyb3BcIjogcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRyb3BfcHJvcGVydGllc1wiOlxuICAgICAgICAgICAgICAgICAgICBjKGUsIHMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFsbG93X3Byb3BlcnRpZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgZihlLCBzLmNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzYW1wbGVfZXZlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYoZSwgcy5jb25maWcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtYXBfcHJvcGVydGllc1wiOlxuICAgICAgICAgICAgICAgICAgICBsKGUsIHMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImhhc2hfcHJvcGVydGllc1wiOiBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zZm9ybWVyIG9mIHR5cGUgXCInLmNvbmNhdChzLnR5cGUsICdcIiBpcyB1bnN1cHBvcnRlZC4nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gcmV0dXJuIGU7IH07XG4gICAgfSwgNDk2NjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCB8fCBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgPyB0IDogeyBkZWZhdWx0OiB0IH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSksIHIudW5zZXQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBvID0gbihlKDc4NDMpKTtcbiAgICAgICAgci51bnNldCA9IGZ1bmN0aW9uICh0LCByKSB7IGlmICgoMCwgby5kZWZhdWx0KSh0LCByKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgZSA9IHIuc3BsaXQoXCIuXCIpLCBuID0gZS5wb3AoKTsgZS5sZW5ndGggJiYgXCJcXFxcXCIgPT09IGVbZS5sZW5ndGggLSAxXS5zbGljZSgtMSk7KVxuICAgICAgICAgICAgICAgIG4gPSBlLnBvcCgpLnNsaWNlKDAsIC0xKSArIFwiLlwiICsgbjtcbiAgICAgICAgICAgIGZvciAoOyBlLmxlbmd0aDspXG4gICAgICAgICAgICAgICAgdCA9IHRbciA9IGUuc2hpZnQoKV07XG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlIHRbbl07XG4gICAgICAgIH0gcmV0dXJuICEwOyB9O1xuICAgIH0sIDkwMTQ6IGZ1bmN0aW9uICh0LCByKSB7IHIuZHNldCA9IGZ1bmN0aW9uICh0LCByLCBlKSB7IHIuc3BsaXQgJiYgKHIgPSByLnNwbGl0KFwiLlwiKSk7IGZvciAodmFyIG4sIG8sIHMgPSAwLCBpID0gci5sZW5ndGgsIHUgPSB0OyBzIDwgaSAmJiBcIl9fcHJvdG9fX1wiICE9PSAobyA9IHJbcysrXSkgJiYgXCJjb25zdHJ1Y3RvclwiICE9PSBvICYmIFwicHJvdG90eXBlXCIgIT09IG87KVxuICAgICAgICB1ID0gdVtvXSA9IHMgPT09IGkgPyBlIDogdHlwZW9mIChuID0gdVtvXSkgPT0gdHlwZW9mIHIgPyBuIDogMCAqIHJbc10gIT0gMCB8fCB+KFwiXCIgKyByW3NdKS5pbmRleE9mKFwiLlwiKSA/IHt9IDogW107IH07IH0sIDMzMDQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgRmxvYXQ2NEFycmF5ID8gRmxvYXQ2NEFycmF5IDogdm9pZCAwO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDczODI6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbyA9IGUoNTU2OSksIHMgPSBlKDMzMDQpLCBpID0gZSg4NDgyKTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDg0ODI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTsgfTtcbiAgICB9LCA2MzIyOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4sIG8gPSBlKDI1MDgpLCBzID0gZSg1Njc5KSwgaSA9IGUoODgyKTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDg4MjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpOyB9O1xuICAgIH0sIDU2Nzk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgVWludDE2QXJyYXkgPyBVaW50MTZBcnJheSA6IHZvaWQgMDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCA0NzczOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4sIG8gPSBlKDk3NzMpLCBzID0gZSgzMDA0KSwgaSA9IGUoMzA3OCk7XG4gICAgICAgIG4gPSBvKCkgPyBzIDogaSwgdC5leHBvcnRzID0gbjtcbiAgICB9LCAzMDc4OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIik7IH07XG4gICAgfSwgMzAwNDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciByID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBVaW50MzJBcnJheSA/IFVpbnQzMkFycmF5IDogdm9pZCAwO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDc5ODA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbyA9IGUoODExNCksIHMgPSBlKDY3MzcpLCBpID0gZSgzMzU3KTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDMzNTc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTsgfTtcbiAgICB9LCA2NzM3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXkgPyBVaW50OEFycmF5IDogdm9pZCAwO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDI2ODQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgRmxvYXQ2NEFycmF5ID8gRmxvYXQ2NEFycmF5IDogbnVsbDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCA1NTY5OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDM4NzYpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDM4NzY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMTQ0OCksIG8gPSBlKDI2ODQpO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHZhciB0LCByOyBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBvKVxuICAgICAgICAgICAgcmV0dXJuICExOyB0cnkge1xuICAgICAgICAgICAgciA9IG5ldyBvKFsxLCAzLjE0LCAtMy4xNCwgTmFOXSksIHQgPSBuKHIpICYmIDEgPT09IHJbMF0gJiYgMy4xNCA9PT0gclsxXSAmJiAtMy4xNCA9PT0gclsyXSAmJiByWzNdICE9IHJbM107XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfSByZXR1cm4gdDsgfTtcbiAgICB9LCA5MDQ4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDM3NjMpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDM3NjM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBudWxsICE9IHQgJiYgci5jYWxsKHQsIGUpOyB9O1xuICAgIH0sIDcwMDk6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjc4NCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNjc4NDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbChcImZvb1wiKTsgfTtcbiAgICB9LCAzMTIzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDg0ODEpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDg0ODE6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNzAwOSkoKTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbiAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWc7IH07XG4gICAgfSwgMjUwODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgzNDAzKTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAzNDAzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDc2OCksIG8gPSBlKDk2NjgpLCBzID0gZSgxODcpO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHZhciB0LCByOyBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBzKVxuICAgICAgICAgICAgcmV0dXJuICExOyB0cnkge1xuICAgICAgICAgICAgciA9IG5ldyBzKHIgPSBbMSwgMy4xNCwgLTMuMTQsIG8gKyAxLCBvICsgMl0pLCB0ID0gbihyKSAmJiAxID09PSByWzBdICYmIDMgPT09IHJbMV0gJiYgclsyXSA9PT0gbyAtIDIgJiYgMCA9PT0gclszXSAmJiAxID09PSByWzRdO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChyKSB7XG4gICAgICAgICAgICB0ID0gITE7XG4gICAgICAgIH0gcmV0dXJuIHQ7IH07XG4gICAgfSwgMTg3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQxNkFycmF5ID8gVWludDE2QXJyYXkgOiBudWxsO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDk3NzM6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMjgyMik7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgMjgyMjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgyNzQ0KSwgbyA9IGUoMzg5OSksIHMgPSBlKDc0Nik7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgdmFyIHQsIHI7IGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHMpXG4gICAgICAgICAgICByZXR1cm4gITE7IHRyeSB7XG4gICAgICAgICAgICByID0gbmV3IHMociA9IFsxLCAzLjE0LCAtMy4xNCwgbyArIDEsIG8gKyAyXSksIHQgPSBuKHIpICYmIDEgPT09IHJbMF0gJiYgMyA9PT0gclsxXSAmJiByWzJdID09PSBvIC0gMiAmJiAwID09PSByWzNdICYmIDEgPT09IHJbNF07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfSByZXR1cm4gdDsgfTtcbiAgICB9LCA3NDY6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgVWludDMyQXJyYXkgPyBVaW50MzJBcnJheSA6IG51bGw7XG4gICAgICAgIHQuZXhwb3J0cyA9IHI7XG4gICAgfSwgODExNDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg4MDY2KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA4MDY2OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDgyNzkpLCBvID0gZSgzNDQzKSwgcyA9IGUoMjczMSk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgdmFyIHQsIHI7IGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHMpXG4gICAgICAgICAgICByZXR1cm4gITE7IHRyeSB7XG4gICAgICAgICAgICByID0gbmV3IHMociA9IFsxLCAzLjE0LCAtMy4xNCwgbyArIDEsIG8gKyAyXSksIHQgPSBuKHIpICYmIDEgPT09IHJbMF0gJiYgMyA9PT0gclsxXSAmJiByWzJdID09PSBvIC0gMiAmJiAwID09PSByWzNdICYmIDEgPT09IHJbNF07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfSByZXR1cm4gdDsgfTtcbiAgICB9LCAyNzMxOiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXkgPyBVaW50OEFycmF5IDogbnVsbDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCAxNDQ4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDE0NTMpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDE0NTM6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjIwOCksIG8gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIEZsb2F0NjRBcnJheTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG8gJiYgdCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSB8fCBcIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiID09PSBuKHQpOyB9O1xuICAgIH0sIDkzMzE6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNzk4MCksIG8gPSB7IHVpbnQxNjogZSg2MzIyKSwgdWludDg6IG4gfTtcbiAgICAgICAgdC5leHBvcnRzID0gbztcbiAgICB9LCA1OTAyOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQxMDYpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQxMDY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbywgcyA9IGUoOTMzMSk7XG4gICAgICAgIChvID0gbmV3IHMudWludDE2KDEpKVswXSA9IDQ2NjAsIG4gPSA1MiA9PT0gbmV3IHMudWludDgoby5idWZmZXIpWzBdLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDc2ODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgzODIzKTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAzODIzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDYyMDgpLCBvID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBVaW50MTZBcnJheTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG8gJiYgdCBpbnN0YW5jZW9mIFVpbnQxNkFycmF5IHx8IFwiW29iamVjdCBVaW50MTZBcnJheV1cIiA9PT0gbih0KTsgfTtcbiAgICB9LCAyNzQ0OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDIzMjYpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDIzMjY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjIwOCksIG8gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQzMkFycmF5O1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gbyAmJiB0IGluc3RhbmNlb2YgVWludDMyQXJyYXkgfHwgXCJbb2JqZWN0IFVpbnQzMkFycmF5XVwiID09PSBuKHQpOyB9O1xuICAgIH0sIDgyNzk6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMjA4KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAyMDg6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjIwOCksIG8gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBvICYmIHQgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IFwiW29iamVjdCBVaW50OEFycmF5XVwiID09PSBuKHQpOyB9O1xuICAgIH0sIDYzMTU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAxMDIzO1xuICAgIH0sIDE2ODY6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyMTQ3NDgzNjQ3O1xuICAgIH0sIDMxMDU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyMTQ2NDM1MDcyO1xuICAgIH0sIDM0NDk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyMTQ3NDgzNjQ4O1xuICAgIH0sIDY5ODg6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAtMTAyMztcbiAgICB9LCA5Nzc3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gMTAyMztcbiAgICB9LCAzNjkwOiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gLTEwNzQ7XG4gICAgfSwgMjkxODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg0NzcyKS5ORUdBVElWRV9JTkZJTklUWTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA0MTY1OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIHQuZXhwb3J0cyA9IHI7XG4gICAgfSwgNjQ4ODogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IDIyMjUwNzM4NTg1MDcyMDE0ZS0zMjQ7XG4gICAgfSwgOTY2ODogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IDY1NTM1O1xuICAgIH0sIDM4OTk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSA0Mjk0OTY3Mjk1O1xuICAgIH0sIDM0NDM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyNTU7XG4gICAgfSwgNzAxMTogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg4MTIpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDgxMjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg0MTY1KSwgbyA9IGUoMjkxOCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ID09PSBuIHx8IHQgPT09IG87IH07XG4gICAgfSwgMTg4MzogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgxNzk3KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAxNzk3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgIT0gdDsgfTtcbiAgICB9LCA1MTM6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNTc2MCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNTc2MDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBNYXRoLmFicyh0KTsgfTtcbiAgICB9LCA1ODQ4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDY3Nyk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNjc3OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDM0NDkpLCBvID0gZSgxNjg2KSwgcyA9IGUoNzgzOCksIGkgPSBlKDE5MjEpLCB1ID0gZSgyNDkwKSwgYSA9IFswLCAwXTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHIpIHsgdmFyIGUsIGM7IHJldHVybiBzLmFzc2lnbih0LCBhLCAxLCAwKSwgZSA9IGFbMF0sIGUgJj0gbywgYyA9IGkociksIHUoZSB8PSBjICY9IG4sIGFbMV0pOyB9O1xuICAgIH0sIDU1MDA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoODM5Nyk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgODM5NzogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg0MTY1KSwgbyA9IGUoMjkxOCksIHMgPSBlKDYzMTUpLCBpID0gZSg5Nzc3KSwgdSA9IGUoNjk4OCksIGEgPSBlKDM2OTApLCBjID0gZSgxODgzKSwgZiA9IGUoNzAxMSksIHAgPSBlKDU4NDgpLCBsID0gZSg0OTQ4KSwgdiA9IGUoODQ3OCksIHkgPSBlKDc4MzgpLCBkID0gZSgyNDkwKSwgaCA9IFswLCAwXSwgeCA9IFswLCAwXTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHIpIHsgdmFyIGUsIGI7IHJldHVybiAwID09PSB0IHx8IGModCkgfHwgZih0KSA/IHQgOiAobChoLCB0KSwgciArPSBoWzFdLCAociArPSB2KHQgPSBoWzBdKSkgPCBhID8gcCgwLCB0KSA6IHIgPiBpID8gdCA8IDAgPyBvIDogbiA6IChyIDw9IHUgPyAociArPSA1MiwgYiA9IDIyMjA0NDYwNDkyNTAzMTNlLTMxKSA6IGIgPSAxLCB5KHgsIHQpLCBlID0geFswXSwgZSAmPSAyMTQ4NTMyMjIzLCBiICogZChlIHw9IHIgKyBzIDw8IDIwLCB4WzFdKSkpOyB9O1xuICAgIH0sIDQ3NzI6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNzU0OCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNzU0ODogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IE51bWJlcjtcbiAgICB9LCA4NDc4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ1MDApO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQ1MDA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMTkyMSksIG8gPSBlKDMxMDUpLCBzID0gZSg2MzE1KTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgdmFyIHIgPSBuKHQpOyByZXR1cm4gKHIgPSAociAmIG8pID4+PiAyMCkgLSBzIHwgMDsgfTtcbiAgICB9LCAyNDkwOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDk2MzkpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQ0NDU6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbywgcztcbiAgICAgICAgITAgPT09IGUoNTkwMikgPyAobyA9IDEsIHMgPSAwKSA6IChvID0gMCwgcyA9IDEpLCBuID0geyBISUdIOiBvLCBMT1c6IHMgfSwgdC5leHBvcnRzID0gbjtcbiAgICB9LCA5NjM5OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ3NzMpLCBvID0gZSg3MzgyKSwgcyA9IGUoNDQ0NSksIGkgPSBuZXcgbygxKSwgdSA9IG5ldyBuKGkuYnVmZmVyKSwgYSA9IHMuSElHSCwgYyA9IHMuTE9XO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgcikgeyByZXR1cm4gdVthXSA9IHQsIHVbY10gPSByLCBpWzBdOyB9O1xuICAgIH0sIDU2NDY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgbiA9ICEwID09PSBlKDU5MDIpID8gMSA6IDAsIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgMTkyMTogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg2Mjg1KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA2Mjg1OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ3NzMpLCBvID0gZSg3MzgyKSwgcyA9IGUoNTY0NiksIGkgPSBuZXcgbygxKSwgdSA9IG5ldyBuKGkuYnVmZmVyKTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGlbMF0gPSB0LCB1W3NdOyB9O1xuICAgIH0sIDkwMjQ6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjQ4OCksIG8gPSBlKDcwMTEpLCBzID0gZSgxODgzKSwgaSA9IGUoNTEzKTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHIsIGUsIHUpIHsgcmV0dXJuIHModCkgfHwgbyh0KSA/IChyW3VdID0gdCwgclt1ICsgZV0gPSAwLCByKSA6IDAgIT09IHQgJiYgaSh0KSA8IG4gPyAoclt1XSA9IDQ1MDM1OTk2MjczNzA0OTYgKiB0LCByW3UgKyBlXSA9IC01MiwgcikgOiAoclt1XSA9IHQsIHJbdSArIGVdID0gMCwgcik7IH07XG4gICAgfSwgNDk0ODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg3NTc2KSwgbyA9IGUoOTQyMik7XG4gICAgICAgIG4obywgXCJhc3NpZ25cIiwgZSg5MDI0KSksIHQuZXhwb3J0cyA9IG87XG4gICAgfSwgOTQyMjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg5MDI0KTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG4odCwgWzAsIDBdLCAxLCAwKTsgfTtcbiAgICB9LCA1MjM5OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ3NzMpLCBvID0gZSg3MzgyKSwgcyA9IGUoNTc4MiksIGkgPSBuZXcgbygxKSwgdSA9IG5ldyBuKGkuYnVmZmVyKSwgYSA9IHMuSElHSCwgYyA9IHMuTE9XO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgciwgZSwgbikgeyByZXR1cm4gaVswXSA9IHQsIHJbbl0gPSB1W2FdLCByW24gKyBlXSA9IHVbY10sIHI7IH07XG4gICAgfSwgNzgzODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg3NTc2KSwgbyA9IGUoNDAxMCk7XG4gICAgICAgIG4obywgXCJhc3NpZ25cIiwgZSg1MjM5KSksIHQuZXhwb3J0cyA9IG87XG4gICAgfSwgNTc4MjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuLCBvLCBzO1xuICAgICAgICAhMCA9PT0gZSg1OTAyKSA/IChvID0gMSwgcyA9IDApIDogKG8gPSAwLCBzID0gMSksIG4gPSB7IEhJR0g6IG8sIExPVzogcyB9LCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQwMTA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNTIzOSk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBuKHQsIFswLCAwXSwgMSwgMCk7IH07XG4gICAgfSwgNzU3NjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg3MDYzKTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA3MDYzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDY2OTEpO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgciwgZSkgeyBuKHQsIHIsIHsgY29uZmlndXJhYmxlOiAhMSwgZW51bWVyYWJsZTogITEsIHdyaXRhYmxlOiAhMSwgdmFsdWU6IGUgfSk7IH07XG4gICAgfSwgMjA3MzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciByID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDE2ODA6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnR5ID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogbnVsbDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCAxNDcxOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDE2ODApO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbih7fSwgXCJ4XCIsIHt9KSwgITA7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSB9O1xuICAgIH0sIDY2OTE6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbyA9IGUoMTQ3MSksIHMgPSBlKDIwNzMpLCBpID0gZSgxMzA5KTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDEzMDk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUsIGUgPSByLnRvU3RyaW5nLCBuID0gci5fX2RlZmluZUdldHRlcl9fLCBvID0gci5fX2RlZmluZVNldHRlcl9fLCBzID0gci5fX2xvb2t1cEdldHRlcl9fLCBpID0gci5fX2xvb2t1cFNldHRlcl9fO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgdSwgYSkgeyB2YXIgYywgZiwgcCwgbDsgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCBcIltvYmplY3QgQXJyYXldXCIgPT09IGUuY2FsbCh0KSlcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJpbnZhbGlkIGFyZ3VtZW50LiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdC4gVmFsdWU6IGBcIiArIHQgKyBcImAuXCIpOyBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgYSB8fCBudWxsID09PSBhIHx8IFwiW29iamVjdCBBcnJheV1cIiA9PT0gZS5jYWxsKGEpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImludmFsaWQgYXJndW1lbnQuIFByb3BlcnR5IGRlc2NyaXB0b3IgbXVzdCBiZSBhbiBvYmplY3QuIFZhbHVlOiBgXCIgKyBhICsgXCJgLlwiKTsgaWYgKChmID0gXCJ2YWx1ZVwiIGluIGEpICYmIChzLmNhbGwodCwgdSkgfHwgaS5jYWxsKHQsIHUpID8gKGMgPSB0Ll9fcHJvdG9fXywgdC5fX3Byb3RvX18gPSByLCBkZWxldGUgdFt1XSwgdFt1XSA9IGEudmFsdWUsIHQuX19wcm90b19fID0gYykgOiB0W3VdID0gYS52YWx1ZSksIHAgPSBcImdldFwiIGluIGEsIGwgPSBcInNldFwiIGluIGEsIGYgJiYgKHAgfHwgbCkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGFyZ3VtZW50LiBDYW5ub3Qgc3BlY2lmeSBvbmUgb3IgbW9yZSBhY2Nlc3NvcnMgYW5kIGEgdmFsdWUgb3Igd3JpdGFibGUgYXR0cmlidXRlIGluIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yLlwiKTsgcmV0dXJuIHAgJiYgbiAmJiBuLmNhbGwodCwgdSwgYS5nZXQpLCBsICYmIG8gJiYgby5jYWxsKHQsIHUsIGEuc2V0KSwgdDsgfTtcbiAgICB9LCA2MjA4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4sIG8gPSBlKDMxMjMpLCBzID0gZSg3NDA3KSwgaSA9IGUoNDIxMCk7XG4gICAgICAgIG4gPSBvKCkgPyBpIDogcywgdC5leHBvcnRzID0gbjtcbiAgICB9LCA3NDA3OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDE3Myk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBuLmNhbGwodCk7IH07XG4gICAgfSwgNDIxMDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg5MDQ4KSwgbyA9IGUoMTQwMyksIHMgPSBlKDE3Myk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHZhciByLCBlLCBpOyBpZiAobnVsbCA9PSB0KVxuICAgICAgICAgICAgcmV0dXJuIHMuY2FsbCh0KTsgZSA9IHRbb10sIHIgPSBuKHQsIG8pOyB0cnkge1xuICAgICAgICAgICAgdFtvXSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocikge1xuICAgICAgICAgICAgcmV0dXJuIHMuY2FsbCh0KTtcbiAgICAgICAgfSByZXR1cm4gaSA9IHMuY2FsbCh0KSwgciA/IHRbb10gPSBlIDogZGVsZXRlIHRbb10sIGk7IH07XG4gICAgfSwgMTczOiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDE0MDM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogXCJcIjtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCA3ODQzOiBmdW5jdGlvbiAodCkgeyB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgciwgZSwgbiwgbykgeyBmb3IgKHIgPSByLnNwbGl0ID8gci5zcGxpdChcIi5cIikgOiByLCBuID0gMDsgbiA8IHIubGVuZ3RoOyBuKyspXG4gICAgICAgIHQgPSB0ID8gdFtyW25dXSA6IG87IHJldHVybiB0ID09PSBvID8gZSA6IHQ7IH07IH0sIDM3NDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIGUucihyKSwgZS5kKHIsIHsgZGVmYXVsdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gczsgfSB9KTtcbiAgICAgICAgZm9yICh2YXIgbiA9IFtdLCBvID0gMDsgbyA8IDY0OylcbiAgICAgICAgICAgIG5bb10gPSAwIHwgNDI5NDk2NzI5NiAqIE1hdGguc2luKCsrbyAlIE1hdGguUEkpO1xuICAgICAgICBmdW5jdGlvbiBzKHQpIHsgdmFyIHIsIGUsIHMsIGkgPSBbciA9IDE3MzI1ODQxOTMsIGUgPSA0MDIzMjMzNDE3LCB+ciwgfmVdLCB1ID0gW10sIGEgPSB1bmVzY2FwZShlbmNvZGVVUkkodCkpICsgXCLCgFwiLCBjID0gYS5sZW5ndGg7IGZvciAodCA9IC0tYyAvIDQgKyAyIHwgMTUsIHVbLS10XSA9IDggKiBjOyB+YzspXG4gICAgICAgICAgICB1W2MgPj4gMl0gfD0gYS5jaGFyQ29kZUF0KGMpIDw8IDggKiBjLS07IGZvciAobyA9IGEgPSAwOyBvIDwgdDsgbyArPSAxNikge1xuICAgICAgICAgICAgZm9yIChjID0gaTsgYSA8IDY0OyBjID0gW3MgPSBjWzNdLCByICsgKChzID0gY1swXSArIFtyICYgZSB8IH5yICYgcywgcyAmIHIgfCB+cyAmIGUsIHIgXiBlIF4gcywgZSBeIChyIHwgfnMpXVtjID0gYSA+PiA0XSArIG5bYV0gKyB+fnVbbyB8IDE1ICYgW2EsIDUgKiBhICsgMSwgMyAqIGEgKyA1LCA3ICogYV1bY11dKSA8PCAoYyA9IFs3LCAxMiwgMTcsIDIyLCA1LCA5LCAxNCwgMjAsIDQsIDExLCAxNiwgMjMsIDYsIDEwLCAxNSwgMjFdWzQgKiBjICsgYSsrICUgNF0pIHwgcyA+Pj4gLWMpLCByLCBlXSlcbiAgICAgICAgICAgICAgICByID0gMCB8IGNbMV0sIGUgPSBjWzJdO1xuICAgICAgICAgICAgZm9yIChhID0gNDsgYTspXG4gICAgICAgICAgICAgICAgaVstLWFdICs9IGNbYV07XG4gICAgICAgIH0gZm9yICh0ID0gXCJcIjsgYSA8IDMyOylcbiAgICAgICAgICAgIHQgKz0gKGlbYSA+PiAzXSA+PiA0ICogKDEgXiBhKyspICYgMTUpLnRvU3RyaW5nKDE2KTsgcmV0dXJuIHQ7IH1cbiAgICB9IH0sIHIgPSB7fTsgZnVuY3Rpb24gZShuKSB7IHZhciBvID0gcltuXTsgaWYgKHZvaWQgMCAhPT0gbylcbiAgICByZXR1cm4gby5leHBvcnRzOyB2YXIgcyA9IHJbbl0gPSB7IGV4cG9ydHM6IHt9IH07IHJldHVybiB0W25dLmNhbGwocy5leHBvcnRzLCBzLCBzLmV4cG9ydHMsIGUpLCBzLmV4cG9ydHM7IH0gcmV0dXJuIGUuZCA9IGZ1bmN0aW9uICh0LCByKSB7IGZvciAodmFyIG4gaW4gcilcbiAgICBlLm8ociwgbikgJiYgIWUubyh0LCBuKSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgeyBlbnVtZXJhYmxlOiAhMCwgZ2V0OiByW25dIH0pOyB9LCBlLm8gPSBmdW5jdGlvbiAodCwgcikgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIHIpOyB9LCBlLnIgPSBmdW5jdGlvbiAodCkgeyBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7IH0sIGUoMjg3MCk7IH0pKCk7IH0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRzdWIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("!function(e,t){ true?module.exports=t():0}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=2)}([function(e,t,a){\"use strict\";a.r(t);var n=\"function\"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(a,n){var i=new XMLHttpRequest;for(var r in i.open(t.method||\"get\",e,!0),t.headers)i.setRequestHeader(r,t.headers[r]);function o(){var e,t=[],a=[],n={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,(function(i,r,o){t.push(r=r.toLowerCase()),a.push([r,o]),e=n[r],n[r]=e?e+\",\"+o:o})),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return a},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}i.withCredentials=\"include\"==t.credentials,i.onload=function(){a(o())},i.onerror=n,i.send(t.body)}))};t.default=n},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.pluginName=t}return n(e,[{key:\"track\",value:function(e,t){window.analytics.track(e,t,{integration:{name:this.pluginName}})}}]),e}();t.default=i},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.YouTubeAnalytics=t.VimeoAnalytics=void 0;var n=r(a(3)),i=r(a(4));function r(e){return e&&e.__esModule?e:{default:e}}t.VimeoAnalytics=n.default,t.YouTubeAnalytics=i.default},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=r(a(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"VimeoAnalytics\"));return n.authToken=a,n.player=e,n.metadata={content:{},playback:{videoPlayer:\"Vimeo\"}},n.mostRecentHeartbeat=0,n.isPaused=!1,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){var e=this,t={loaded:this.retrieveMetadata,play:this.trackPlay,pause:this.trackPause,ended:this.trackEnded,timeupdate:this.trackHeartbeat};for(var a in t)this.registerHandler(a,t[a]);this.player.getVideoId().then((function(t){e.retrieveMetadata({id:t})})).catch(console.error)}},{key:\"registerHandler\",value:function(e,t){var a=this;this.player.on(e,(function(e){a.updateMetadata(e),t.call(a,e)}))}},{key:\"trackPlay\",value:function(){this.isPaused?(this.track(\"Video Playback Resumed\",this.metadata.playback),this.isPaused=!1):(this.track(\"Video Playback Started\",this.metadata.playback),this.track(\"Video Content Started\",this.metadata.content))}},{key:\"trackEnded\",value:function(){this.track(\"Video Playback Completed\",this.metadata.playback),this.track(\"Video Content Completed\",this.metadata.content)}},{key:\"trackHeartbeat\",value:function(){var e=this.mostRecentHeartbeat,t=this.metadata.playback.position;t!==e&&t-e>=10&&(this.track(\"Video Content Playing\",this.metadata.content),this.mostRecentHeartbeat=Math.floor(t))}},{key:\"trackPause\",value:function(){this.isPaused=!0,this.track(\"Video Playback Paused\",this.metadata.playback)}},{key:\"retrieveMetadata\",value:function(e){var t=this;return new Promise((function(a,n){var r=e.id;(0,i.default)(\"https://api.vimeo.com/videos/\"+r,{headers:{Authorization:\"Bearer \"+t.authToken}}).then((function(e){return e.ok?e.json():n(e)})).then((function(e){t.metadata.content.title=e.name,t.metadata.content.description=e.description,t.metadata.content.publisher=e.user.name,t.metadata.playback.position=0,t.metadata.playback.totalLength=e.duration})).catch((function(e){return console.error(\"Request to Vimeo API Failed with: \",e),n(e)}))}))}},{key:\"updateMetadata\",value:function(e){var t=this;return new Promise((function(a,n){t.player.getVolume().then((function(n){n&&(t.metadata.playback.sound=100*n),t.metadata.playback.position=e.seconds,a()})).catch(n)}))}}]),t}(r(a(1)).default);t.default=o},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"YoutubeAnalytics\"));return n.player=e,n.apiKey=a,n.playerLoaded=!1,n.playbackStarted=!1,n.contentStarted=!1,n.isPaused=!1,n.isBuffering=!1,n.isSeeking=!1,n.lastRecordedTime={timeReported:Date.now(),timeElapsed:0},n.metadata=[{playback:{video_player:\"youtube\"},content:{}}],n.playlistIndex=0,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){window.segmentYoutubeOnStateChange=this.onPlayerStateChange.bind(this),window.segmentYoutubeOnReady=this.onPlayerReady.bind(this),this.player.addEventListener(\"onReady\",\"segmentYoutubeOnReady\"),this.player.addEventListener(\"onStateChange\",\"segmentYoutubeOnStateChange\")}},{key:\"onPlayerReady\",value:function(e){this.retrieveMetadata()}},{key:\"onPlayerStateChange\",value:function(e){var t=this.player.getCurrentTime();switch(this.metadata[this.playlistIndex]&&(this.metadata[this.playlistIndex].playback.position=this.metadata[this.playlistIndex].content.position=t,this.metadata[this.playlistIndex].playback.quality=this.player.getPlaybackQuality(),this.metadata[this.playlistIndex].playback.sound=this.player.isMuted()?0:this.player.getVolume()),e.data){case-1:if(this.playerLoaded)break;this.retrieveMetadata(),this.playerLoaded=!0;break;case YT.PlayerState.BUFFERING:this.handleBuffer();break;case YT.PlayerState.PLAYING:this.handlePlay();break;case YT.PlayerState.PAUSED:this.handlePause();break;case YT.PlayerState.ENDED:this.handleEnd()}this.lastRecordedTime={timeReported:Date.now(),timeElapsed:1e3*this.player.getCurrentTime()}}},{key:\"retrieveMetadata\",value:function(){var e=this;return new Promise((function(t,a){var n=e.player.getVideoData(),r=e.player.getPlaylist()||[n.video_id],o=r.join();(0,i.default)(\"https://www.googleapis.com/youtube/v3/videos?id=\"+o+\"&part=snippet,contentDetails&key=\"+e.apiKey).then((function(e){if(!e.ok){var t=new Error(\"Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)\");throw t.response=e,t}return e.json()})).then((function(a){e.metadata=[];for(var n=0,i=0;i<r.length;i++){var o=a.items[i];e.metadata.push({content:{title:o.snippet.title,description:o.snippet.description,keywords:o.snippet.tags,channel:o.snippet.channelTitle,airdate:o.snippet.publishedAt}}),n+=l(o.contentDetails.duration)}for(i=0;i<r.length;i++)e.metadata[i].playback={total_length:n,video_player:\"youtube\"};t()})).catch((function(t){e.metadata=r.map((function(e){return{playback:{video_player:\"youtube\"},content:{}}})),a(t)}))}))}},{key:\"handleBuffer\",value:function(){var e=this.determineSeek();this.playbackStarted||(this.playbackStarted=!0,this.track(\"Video Playback Started\",this.metadata[this.playlistIndex].playback)),e&&!this.isSeeking&&(this.isSeeking=!0,this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback)),this.isSeeking&&(this.track(\"Video Playback Seek Completed\",this.metadata[this.playlistIndex].playback),this.isSeeking=!1);var t=this.player.getPlaylist();t&&0===this.player.getCurrentTime()&&this.player.getPlaylistIndex()!==this.playlistIndex&&(this.contentStarted=!1,this.playlistIndex===t.length-1&&0===this.player.getPlaylistIndex()&&(this.track(\"Video Playback Completed\",this.metadata[this.player.getPlaylistIndex()].playback),this.track(\"Video Playback Started\",this.metadata[this.player.getPlaylistIndex()].playback))),this.track(\"Video Playback Buffer Started\",this.metadata[this.playlistIndex].playback),this.isBuffering=!0}},{key:\"handlePlay\",value:function(){this.contentStarted||(this.playlistIndex=this.player.getPlaylistIndex(),-1===this.playlistIndex&&(this.playlistIndex=0),this.track(\"Video Content Started\",this.metadata[this.playlistIndex].content),this.contentStarted=!0),this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused&&(this.track(\"Video Playback Resumed\",this.metadata[this.playlistIndex].playback),this.isPaused=!1)}},{key:\"handlePause\",value:function(){var e=this.determineSeek();this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused||(e?(this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback),this.isSeeking=!0):(this.track(\"Video Playback Paused\",this.metadata[this.playlistIndex].playback),this.isPaused=!0))}},{key:\"handleEnd\",value:function(){this.track(\"Video Content Completed\",this.metadata[this.playlistIndex].content),this.contentStarted=!1;var e=this.player.getPlaylistIndex(),t=this.player.getPlaylist();(t&&e===t.length-1||-1===e)&&(this.track(\"Video Playback Completed\",this.metadata[this.playlistIndex].playback),this.playbackStarted=!1)}},{key:\"determineSeek\",value:function(){var e=this.isPaused||this.isBuffering?0:Date.now()-this.lastRecordedTime.timeReported,t=1e3*this.player.getCurrentTime()-this.lastRecordedTime.timeElapsed;return Math.abs(e-t)>2e3}}]),t}(r.default);function l(e){var t=e.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);return t=t.slice(1).map((function(e){if(null!=e)return e.replace(/\\D/,\"\")})),3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}t.default=s}])}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLmpzLXZpZGVvLXBsdWdpbnMvZGlzdC9pbmRleC51bWQuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZSxLQUFpRCxvQkFBb0IsQ0FBeUksQ0FBQyxvQkFBb0IsbUJBQW1CLFNBQVMsY0FBYyw0QkFBNEIsWUFBWSxxQkFBcUIsMkRBQTJELHVDQUF1QyxxQ0FBcUMsb0JBQW9CLEVBQUUsaUJBQWlCLDRGQUE0RixlQUFlLHdDQUF3QyxTQUFTLEVBQUUsbUJBQW1CLDhCQUE4QixxREFBcUQsMEJBQTBCLDZDQUE2QyxzQkFBc0IsNkRBQTZELFlBQVksZUFBZSxTQUFTLGlCQUFpQixpQ0FBaUMsaUJBQWlCLFlBQVksVUFBVSxzQkFBc0IsbUJBQW1CLGlEQUFpRCxpQkFBaUIsa0JBQWtCLGFBQWEsT0FBTywwREFBMEQsY0FBYyw0QkFBNEIseUJBQXlCLHVGQUF1RixhQUFhLHFCQUFxQix5RkFBeUYsZ0VBQWdFLElBQUkseUdBQXlHLHVDQUF1QyxpQkFBaUIsd0RBQXdELGlCQUFpQiwrQ0FBK0MsVUFBVSxnQkFBZ0IsU0FBUyxvQkFBb0IsU0FBUyxpQkFBaUIsMEJBQTBCLGlCQUFpQiw4QkFBOEIsK0RBQStELE9BQU8sNEJBQTRCLElBQUksWUFBWSxpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyxFQUFFLGlCQUFpQixnQkFBZ0IsWUFBWSxXQUFXLEtBQUssV0FBVywrR0FBK0csdUJBQXVCLHdDQUF3QyxHQUFHLGlCQUFpQixnQkFBZ0IsZUFBZSw4RUFBOEUsMkJBQTJCLGFBQWEsZ0NBQWdDLDRCQUE0QixhQUFhLHNCQUFzQixHQUFHLEtBQUssR0FBRyxZQUFZLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLDZDQUE2Qyx3QkFBd0IsY0FBYywwQkFBMEIsV0FBVyx3REFBd0QsaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxpQkFBaUIsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFdBQVcsK0dBQStHLHVCQUF1Qix3Q0FBd0MsYUFBYSxjQUFjLDBCQUEwQixXQUFXLGtCQUFrQixnQkFBZ0IsZUFBZSw4RUFBOEUsU0FBUyxvQkFBb0IsNEZBQTRGLHVEQUF1RCwyRUFBMkUsNENBQTRDLFVBQVUsV0FBVyxxQkFBcUIseUNBQXlDLHFCQUFxQiwySEFBMkgsMENBQTBDLGFBQWEsbURBQW1ELHNFQUFzRSxZQUFZLGtDQUFrQyxjQUFjLDZIQUE2SCw0Q0FBNEMsMkNBQTJDLG9CQUFvQixLQUFLLEVBQUUseUJBQXlCLEVBQUUsMENBQTBDLFdBQVcsOEJBQThCLGdDQUFnQyxJQUFJLEVBQUUsaUNBQWlDLHNOQUFzTixFQUFFLGtDQUFrQywySEFBMkgsRUFBRSxzQ0FBc0MsaUVBQWlFLG9IQUFvSCxFQUFFLGtDQUFrQyw2RUFBNkUsRUFBRSx5Q0FBeUMsV0FBVyxrQ0FBa0MsV0FBVyxpREFBaUQsU0FBUyxxQ0FBcUMsb0JBQW9CLDBCQUEwQixxQkFBcUIsZ01BQWdNLHNCQUFzQixrRUFBa0UsR0FBRyxJQUFJLEVBQUUsdUNBQXVDLFdBQVcsa0NBQWtDLHVDQUF1QyxnRkFBZ0YsWUFBWSxJQUFJLEtBQUssa0JBQWtCLFlBQVksaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxpQkFBaUIsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFdBQVcsK0dBQStHLHVCQUF1Qix3Q0FBd0MsdUJBQXVCLGNBQWMsMEJBQTBCLFdBQVcsa0JBQWtCLGdCQUFnQixlQUFlLDhFQUE4RSxTQUFTLG9CQUFvQiw0RkFBNEYsdURBQXVELDZFQUE2RSwwSkFBMEosc0NBQXNDLGNBQWMsVUFBVSx1QkFBdUIsWUFBWSxzQkFBc0IscUJBQXFCLDJIQUEySCwwQ0FBMEMsYUFBYSxtREFBbUQsc0VBQXNFLFlBQVksa0NBQWtDLCtRQUErUSxFQUFFLHNDQUFzQyx5QkFBeUIsRUFBRSw0Q0FBNEMsbUNBQW1DLGtWQUFrVixrQ0FBa0MsNkNBQTZDLE1BQU0sa0RBQWtELE1BQU0sOENBQThDLE1BQU0sOENBQThDLE1BQU0sMkNBQTJDLHVCQUF1Qix1RUFBdUUsRUFBRSx3Q0FBd0MsV0FBVyxrQ0FBa0MsZ0ZBQWdGLG1JQUFtSSxVQUFVLHNKQUFzSixxQkFBcUIsZ0JBQWdCLHFCQUFxQixjQUFjLGdCQUFnQixXQUFXLEtBQUssaUJBQWlCLGlCQUFpQixTQUFTLDhJQUE4SSxrQ0FBa0MsUUFBUSxXQUFXLDRCQUE0Qix1Q0FBdUMsSUFBSSxzQkFBc0IsOEJBQThCLE9BQU8sVUFBVSx1QkFBdUIsYUFBYSxRQUFRLEdBQUcsSUFBSSxFQUFFLG9DQUFvQywyQkFBMkIsd1hBQXdYLGdDQUFnQyxnZUFBZ2UsRUFBRSxrQ0FBa0Msa2RBQWtkLEVBQUUsbUNBQW1DLDJCQUEyQixnV0FBZ1csRUFBRSxpQ0FBaUMsdUdBQXVHLGlFQUFpRSwwSUFBMEksRUFBRSxxQ0FBcUMsMkpBQTJKLDBCQUEwQixLQUFLLFlBQVksY0FBYyx5Q0FBeUMscUNBQXFDLHFDQUFxQyx1RUFBdUUsWUFBWSxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLmpzLXZpZGVvLXBsdWdpbnMvZGlzdC9pbmRleC51bWQuanM/ZjMwYyJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLmFuYWx5dGljc1ZpZGVvUGx1Z2lucz10KCk6ZS5hbmFseXRpY3NWaWRlb1BsdWdpbnM9dCgpfSh3aW5kb3csKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIGEobil7aWYodFtuXSlyZXR1cm4gdFtuXS5leHBvcnRzO3ZhciBpPXRbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLGEpLGkubD0hMCxpLmV4cG9ydHN9cmV0dXJuIGEubT1lLGEuYz10LGEuZD1mdW5jdGlvbihlLHQsbil7YS5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0Om59KX0sYS5yPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LGEudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9YShlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKGEucihuKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIGkgaW4gZSlhLmQobixpLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsaSkpO3JldHVybiBufSxhLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIGEuZCh0LFwiYVwiLHQpLHR9LGEubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sYS5wPVwiXCIsYShhLnM9Mil9KFtmdW5jdGlvbihlLHQsYSl7XCJ1c2Ugc3RyaWN0XCI7YS5yKHQpO3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGZldGNoP2ZldGNoLmJpbmQoKTpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHt9LG5ldyBQcm9taXNlKChmdW5jdGlvbihhLG4pe3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtmb3IodmFyIHIgaW4gaS5vcGVuKHQubWV0aG9kfHxcImdldFwiLGUsITApLHQuaGVhZGVycylpLnNldFJlcXVlc3RIZWFkZXIocix0LmhlYWRlcnNbcl0pO2Z1bmN0aW9uIG8oKXt2YXIgZSx0PVtdLGE9W10sbj17fTtyZXR1cm4gaS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS5yZXBsYWNlKC9eKC4qPyk6W15cXFNcXG5dKihbXFxzXFxTXSo/KSQvZ20sKGZ1bmN0aW9uKGkscixvKXt0LnB1c2gocj1yLnRvTG93ZXJDYXNlKCkpLGEucHVzaChbcixvXSksZT1uW3JdLG5bcl09ZT9lK1wiLFwiK286b30pKSx7b2s6Mj09KGkuc3RhdHVzLzEwMHwwKSxzdGF0dXM6aS5zdGF0dXMsc3RhdHVzVGV4dDppLnN0YXR1c1RleHQsdXJsOmkucmVzcG9uc2VVUkwsY2xvbmU6byx0ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShpLnJlc3BvbnNlVGV4dCl9LGpzb246ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGkucmVzcG9uc2VUZXh0KS50aGVuKEpTT04ucGFyc2UpfSxibG9iOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbaS5yZXNwb25zZV0pKX0saGVhZGVyczp7a2V5czpmdW5jdGlvbigpe3JldHVybiB0fSxlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKWluIG59fX19aS53aXRoQ3JlZGVudGlhbHM9XCJpbmNsdWRlXCI9PXQuY3JlZGVudGlhbHMsaS5vbmxvYWQ9ZnVuY3Rpb24oKXthKG8oKSl9LGkub25lcnJvcj1uLGkuc2VuZCh0LmJvZHkpfSkpfTt0LmRlZmF1bHQ9bn0sZnVuY3Rpb24oZSx0LGEpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbj10W2FdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQsYSxuKXtyZXR1cm4gYSYmZSh0LnByb3RvdHlwZSxhKSxuJiZlKHQsbiksdH19KCk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSl7IWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyxlKSx0aGlzLnBsdWdpbk5hbWU9dH1yZXR1cm4gbihlLFt7a2V5OlwidHJhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3dpbmRvdy5hbmFseXRpY3MudHJhY2soZSx0LHtpbnRlZ3JhdGlvbjp7bmFtZTp0aGlzLnBsdWdpbk5hbWV9fSl9fV0pLGV9KCk7dC5kZWZhdWx0PWl9LGZ1bmN0aW9uKGUsdCxhKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LllvdVR1YmVBbmFseXRpY3M9dC5WaW1lb0FuYWx5dGljcz12b2lkIDA7dmFyIG49cihhKDMpKSxpPXIoYSg0KSk7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5WaW1lb0FuYWx5dGljcz1uLmRlZmF1bHQsdC5Zb3VUdWJlQW5hbHl0aWNzPWkuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LGEpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbj10W2FdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQsYSxuKXtyZXR1cm4gYSYmZSh0LnByb3RvdHlwZSxhKSxuJiZlKHQsbiksdH19KCksaT1yKGEoMCkpO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxhKXshZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpO3ZhciBuPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9KHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcyxcIlZpbWVvQW5hbHl0aWNzXCIpKTtyZXR1cm4gbi5hdXRoVG9rZW49YSxuLnBsYXllcj1lLG4ubWV0YWRhdGE9e2NvbnRlbnQ6e30scGxheWJhY2s6e3ZpZGVvUGxheWVyOlwiVmltZW9cIn19LG4ubW9zdFJlY2VudEhlYXJ0YmVhdD0wLG4uaXNQYXVzZWQ9ITEsbn1yZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX0odCxlKSxuKHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e2xvYWRlZDp0aGlzLnJldHJpZXZlTWV0YWRhdGEscGxheTp0aGlzLnRyYWNrUGxheSxwYXVzZTp0aGlzLnRyYWNrUGF1c2UsZW5kZWQ6dGhpcy50cmFja0VuZGVkLHRpbWV1cGRhdGU6dGhpcy50cmFja0hlYXJ0YmVhdH07Zm9yKHZhciBhIGluIHQpdGhpcy5yZWdpc3RlckhhbmRsZXIoYSx0W2FdKTt0aGlzLnBsYXllci5nZXRWaWRlb0lkKCkudGhlbigoZnVuY3Rpb24odCl7ZS5yZXRyaWV2ZU1ldGFkYXRhKHtpZDp0fSl9KSkuY2F0Y2goY29uc29sZS5lcnJvcil9fSx7a2V5OlwicmVnaXN0ZXJIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgYT10aGlzO3RoaXMucGxheWVyLm9uKGUsKGZ1bmN0aW9uKGUpe2EudXBkYXRlTWV0YWRhdGEoZSksdC5jYWxsKGEsZSl9KSl9fSx7a2V5OlwidHJhY2tQbGF5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkPyh0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgUmVzdW1lZFwiLHRoaXMubWV0YWRhdGEucGxheWJhY2spLHRoaXMuaXNQYXVzZWQ9ITEpOih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGEucGxheWJhY2spLHRoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhLmNvbnRlbnQpKX19LHtrZXk6XCJ0cmFja0VuZGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YS5wbGF5YmFjayksdGhpcy50cmFjayhcIlZpZGVvIENvbnRlbnQgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YS5jb250ZW50KX19LHtrZXk6XCJ0cmFja0hlYXJ0YmVhdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tb3N0UmVjZW50SGVhcnRiZWF0LHQ9dGhpcy5tZXRhZGF0YS5wbGF5YmFjay5wb3NpdGlvbjt0IT09ZSYmdC1lPj0xMCYmKHRoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IFBsYXlpbmdcIix0aGlzLm1ldGFkYXRhLmNvbnRlbnQpLHRoaXMubW9zdFJlY2VudEhlYXJ0YmVhdD1NYXRoLmZsb29yKHQpKX19LHtrZXk6XCJ0cmFja1BhdXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkPSEwLHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBQYXVzZWRcIix0aGlzLm1ldGFkYXRhLnBsYXliYWNrKX19LHtrZXk6XCJyZXRyaWV2ZU1ldGFkYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGEsbil7dmFyIHI9ZS5pZDsoMCxpLmRlZmF1bHQpKFwiaHR0cHM6Ly9hcGkudmltZW8uY29tL3ZpZGVvcy9cIityLHtoZWFkZXJzOntBdXRob3JpemF0aW9uOlwiQmVhcmVyIFwiK3QuYXV0aFRva2VufX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9rP2UuanNvbigpOm4oZSl9KSkudGhlbigoZnVuY3Rpb24oZSl7dC5tZXRhZGF0YS5jb250ZW50LnRpdGxlPWUubmFtZSx0Lm1ldGFkYXRhLmNvbnRlbnQuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbix0Lm1ldGFkYXRhLmNvbnRlbnQucHVibGlzaGVyPWUudXNlci5uYW1lLHQubWV0YWRhdGEucGxheWJhY2sucG9zaXRpb249MCx0Lm1ldGFkYXRhLnBsYXliYWNrLnRvdGFsTGVuZ3RoPWUuZHVyYXRpb259KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBjb25zb2xlLmVycm9yKFwiUmVxdWVzdCB0byBWaW1lbyBBUEkgRmFpbGVkIHdpdGg6IFwiLGUpLG4oZSl9KSl9KSl9fSx7a2V5OlwidXBkYXRlTWV0YWRhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSxuKXt0LnBsYXllci5nZXRWb2x1bWUoKS50aGVuKChmdW5jdGlvbihuKXtuJiYodC5tZXRhZGF0YS5wbGF5YmFjay5zb3VuZD0xMDAqbiksdC5tZXRhZGF0YS5wbGF5YmFjay5wb3NpdGlvbj1lLnNlY29uZHMsYSgpfSkpLmNhdGNoKG4pfSkpfX1dKSx0fShyKGEoMSkpLmRlZmF1bHQpO3QuZGVmYXVsdD1vfSxmdW5jdGlvbihlLHQsYSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciBuPXRbYV07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxhLG4pe3JldHVybiBhJiZlKHQucHJvdG90eXBlLGEpLG4mJmUodCxuKSx0fX0oKSxpPW8oYSgwKSkscj1vKGEoMSkpO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxhKXshZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpO3ZhciBuPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9KHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcyxcIllvdXR1YmVBbmFseXRpY3NcIikpO3JldHVybiBuLnBsYXllcj1lLG4uYXBpS2V5PWEsbi5wbGF5ZXJMb2FkZWQ9ITEsbi5wbGF5YmFja1N0YXJ0ZWQ9ITEsbi5jb250ZW50U3RhcnRlZD0hMSxuLmlzUGF1c2VkPSExLG4uaXNCdWZmZXJpbmc9ITEsbi5pc1NlZWtpbmc9ITEsbi5sYXN0UmVjb3JkZWRUaW1lPXt0aW1lUmVwb3J0ZWQ6RGF0ZS5ub3coKSx0aW1lRWxhcHNlZDowfSxuLm1ldGFkYXRhPVt7cGxheWJhY2s6e3ZpZGVvX3BsYXllcjpcInlvdXR1YmVcIn0sY29udGVudDp7fX1dLG4ucGxheWxpc3RJbmRleD0wLG59cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9KHQsZSksbih0LFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93LnNlZ21lbnRZb3V0dWJlT25TdGF0ZUNoYW5nZT10aGlzLm9uUGxheWVyU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSx3aW5kb3cuc2VnbWVudFlvdXR1YmVPblJlYWR5PXRoaXMub25QbGF5ZXJSZWFkeS5iaW5kKHRoaXMpLHRoaXMucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJvblJlYWR5XCIsXCJzZWdtZW50WW91dHViZU9uUmVhZHlcIiksdGhpcy5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm9uU3RhdGVDaGFuZ2VcIixcInNlZ21lbnRZb3V0dWJlT25TdGF0ZUNoYW5nZVwiKX19LHtrZXk6XCJvblBsYXllclJlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5yZXRyaWV2ZU1ldGFkYXRhKCl9fSx7a2V5Olwib25QbGF5ZXJTdGF0ZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCk7c3dpdGNoKHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XSYmKHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjay5wb3NpdGlvbj10aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0uY29udGVudC5wb3NpdGlvbj10LHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjay5xdWFsaXR5PXRoaXMucGxheWVyLmdldFBsYXliYWNrUXVhbGl0eSgpLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjay5zb3VuZD10aGlzLnBsYXllci5pc011dGVkKCk/MDp0aGlzLnBsYXllci5nZXRWb2x1bWUoKSksZS5kYXRhKXtjYXNlLTE6aWYodGhpcy5wbGF5ZXJMb2FkZWQpYnJlYWs7dGhpcy5yZXRyaWV2ZU1ldGFkYXRhKCksdGhpcy5wbGF5ZXJMb2FkZWQ9ITA7YnJlYWs7Y2FzZSBZVC5QbGF5ZXJTdGF0ZS5CVUZGRVJJTkc6dGhpcy5oYW5kbGVCdWZmZXIoKTticmVhaztjYXNlIFlULlBsYXllclN0YXRlLlBMQVlJTkc6dGhpcy5oYW5kbGVQbGF5KCk7YnJlYWs7Y2FzZSBZVC5QbGF5ZXJTdGF0ZS5QQVVTRUQ6dGhpcy5oYW5kbGVQYXVzZSgpO2JyZWFrO2Nhc2UgWVQuUGxheWVyU3RhdGUuRU5ERUQ6dGhpcy5oYW5kbGVFbmQoKX10aGlzLmxhc3RSZWNvcmRlZFRpbWU9e3RpbWVSZXBvcnRlZDpEYXRlLm5vdygpLHRpbWVFbGFwc2VkOjFlMyp0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpfX19LHtrZXk6XCJyZXRyaWV2ZU1ldGFkYXRhXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxhKXt2YXIgbj1lLnBsYXllci5nZXRWaWRlb0RhdGEoKSxyPWUucGxheWVyLmdldFBsYXlsaXN0KCl8fFtuLnZpZGVvX2lkXSxvPXIuam9pbigpOygwLGkuZGVmYXVsdCkoXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3ZpZGVvcz9pZD1cIitvK1wiJnBhcnQ9c25pcHBldCxjb250ZW50RGV0YWlscyZrZXk9XCIrZS5hcGlLZXkpLnRoZW4oKGZ1bmN0aW9uKGUpe2lmKCFlLm9rKXt2YXIgdD1uZXcgRXJyb3IoXCJTZWdtZW50IHJlcXVlc3QgdG8gWW91dHViZSBBUEkgZmFpbGVkIChsaWtlbHkgZHVlIHRvIGEgYmFkIEFQSSBLZXkuIEV2ZW50cyB3aWxsIHN0aWxsIGJlIHNlbnQgYnV0IHdpbGwgbm90IGNvbnRhaW4gdmlkZW8gbWV0YWRhdGEpXCIpO3Rocm93IHQucmVzcG9uc2U9ZSx0fXJldHVybiBlLmpzb24oKX0pKS50aGVuKChmdW5jdGlvbihhKXtlLm1ldGFkYXRhPVtdO2Zvcih2YXIgbj0wLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89YS5pdGVtc1tpXTtlLm1ldGFkYXRhLnB1c2goe2NvbnRlbnQ6e3RpdGxlOm8uc25pcHBldC50aXRsZSxkZXNjcmlwdGlvbjpvLnNuaXBwZXQuZGVzY3JpcHRpb24sa2V5d29yZHM6by5zbmlwcGV0LnRhZ3MsY2hhbm5lbDpvLnNuaXBwZXQuY2hhbm5lbFRpdGxlLGFpcmRhdGU6by5zbmlwcGV0LnB1Ymxpc2hlZEF0fX0pLG4rPWwoby5jb250ZW50RGV0YWlscy5kdXJhdGlvbil9Zm9yKGk9MDtpPHIubGVuZ3RoO2krKyllLm1ldGFkYXRhW2ldLnBsYXliYWNrPXt0b3RhbF9sZW5ndGg6bix2aWRlb19wbGF5ZXI6XCJ5b3V0dWJlXCJ9O3QoKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5tZXRhZGF0YT1yLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3BsYXliYWNrOnt2aWRlb19wbGF5ZXI6XCJ5b3V0dWJlXCJ9LGNvbnRlbnQ6e319fSkpLGEodCl9KSl9KSl9fSx7a2V5OlwiaGFuZGxlQnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRldGVybWluZVNlZWsoKTt0aGlzLnBsYXliYWNrU3RhcnRlZHx8KHRoaXMucGxheWJhY2tTdGFydGVkPSEwLHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSksZSYmIXRoaXMuaXNTZWVraW5nJiYodGhpcy5pc1NlZWtpbmc9ITAsdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFNlZWsgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjaykpLHRoaXMuaXNTZWVraW5nJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFNlZWsgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzU2Vla2luZz0hMSk7dmFyIHQ9dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3QoKTt0JiYwPT09dGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKSYmdGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpIT09dGhpcy5wbGF5bGlzdEluZGV4JiYodGhpcy5jb250ZW50U3RhcnRlZD0hMSx0aGlzLnBsYXlsaXN0SW5kZXg9PT10Lmxlbmd0aC0xJiYwPT09dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpXS5wbGF5YmFjayksdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWVyLmdldFBsYXlsaXN0SW5kZXgoKV0ucGxheWJhY2spKSksdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIEJ1ZmZlciBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzQnVmZmVyaW5nPSEwfX0se2tleTpcImhhbmRsZVBsYXlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY29udGVudFN0YXJ0ZWR8fCh0aGlzLnBsYXlsaXN0SW5kZXg9dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpLC0xPT09dGhpcy5wbGF5bGlzdEluZGV4JiYodGhpcy5wbGF5bGlzdEluZGV4PTApLHRoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0uY29udGVudCksdGhpcy5jb250ZW50U3RhcnRlZD0hMCksdGhpcy5pc0J1ZmZlcmluZyYmKHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBCdWZmZXIgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzQnVmZmVyaW5nPSExKSx0aGlzLmlzUGF1c2VkJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFJlc3VtZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNQYXVzZWQ9ITEpfX0se2tleTpcImhhbmRsZVBhdXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRldGVybWluZVNlZWsoKTt0aGlzLmlzQnVmZmVyaW5nJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIEJ1ZmZlciBDb21wbGV0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNCdWZmZXJpbmc9ITEpLHRoaXMuaXNQYXVzZWR8fChlPyh0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU2VlayBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzU2Vla2luZz0hMCk6KHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBQYXVzZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNQYXVzZWQ9ITApKX19LHtrZXk6XCJoYW5kbGVFbmRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5jb250ZW50KSx0aGlzLmNvbnRlbnRTdGFydGVkPSExO3ZhciBlPXRoaXMucGxheWVyLmdldFBsYXlsaXN0SW5kZXgoKSx0PXRoaXMucGxheWVyLmdldFBsYXlsaXN0KCk7KHQmJmU9PT10Lmxlbmd0aC0xfHwtMT09PWUpJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjayksdGhpcy5wbGF5YmFja1N0YXJ0ZWQ9ITEpfX0se2tleTpcImRldGVybWluZVNlZWtcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaXNQYXVzZWR8fHRoaXMuaXNCdWZmZXJpbmc/MDpEYXRlLm5vdygpLXRoaXMubGFzdFJlY29yZGVkVGltZS50aW1lUmVwb3J0ZWQsdD0xZTMqdGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKS10aGlzLmxhc3RSZWNvcmRlZFRpbWUudGltZUVsYXBzZWQ7cmV0dXJuIE1hdGguYWJzKGUtdCk+MmUzfX1dKSx0fShyLmRlZmF1bHQpO2Z1bmN0aW9uIGwoZSl7dmFyIHQ9ZS5tYXRjaCgvUFQoXFxkK0gpPyhcXGQrTSk/KFxcZCtTKT8vKTtyZXR1cm4gdD10LnNsaWNlKDEpLm1hcCgoZnVuY3Rpb24oZSl7aWYobnVsbCE9ZSlyZXR1cm4gZS5yZXBsYWNlKC9cXEQvLFwiXCIpfSkpLDM2MDAqKHBhcnNlSW50KHRbMF0pfHwwKSs2MCoocGFyc2VJbnQodFsxXSl8fDApKyhwYXJzZUludCh0WzJdKXx8MCl9dC5kZWZhdWx0PXN9XSl9KSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/address.js":
/*!******************************************************!*\
  !*** ./node_modules/@segment/facade/dist/address.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/./node_modules/obj-case/index.js\"));\nfunction trait(a, b) {\n    return function () {\n        var traits = this.traits();\n        var props = this.properties ? this.properties() : {};\n        return (obj_case_1.default(traits, \"address.\" + a) ||\n            obj_case_1.default(traits, a) ||\n            (b ? obj_case_1.default(traits, \"address.\" + b) : null) ||\n            (b ? obj_case_1.default(traits, b) : null) ||\n            obj_case_1.default(props, \"address.\" + a) ||\n            obj_case_1.default(props, a) ||\n            (b ? obj_case_1.default(props, \"address.\" + b) : null) ||\n            (b ? obj_case_1.default(props, b) : null));\n    };\n}\nfunction default_1(proto) {\n    proto.zip = trait(\"postalCode\", \"zip\");\n    proto.country = trait(\"country\");\n    proto.street = trait(\"street\");\n    proto.state = trait(\"state\");\n    proto.city = trait(\"city\");\n    proto.region = trait(\"region\");\n}\nexports[\"default\"] = default_1;\n//# sourceMappingURL=address.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWRkcmVzcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlDQUFpQyxtQkFBTyxDQUFDLHdEQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2FkZHJlc3MuanM/NTc2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG5mdW5jdGlvbiB0cmFpdChhLCBiKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcGVydGllcyA/IHRoaXMucHJvcGVydGllcygpIDoge307XG4gICAgICAgIHJldHVybiAob2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgXCJhZGRyZXNzLlwiICsgYSkgfHxcbiAgICAgICAgICAgIG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIGEpIHx8XG4gICAgICAgICAgICAoYiA/IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiYWRkcmVzcy5cIiArIGIpIDogbnVsbCkgfHxcbiAgICAgICAgICAgIChiID8gb2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgYikgOiBudWxsKSB8fFxuICAgICAgICAgICAgb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBcImFkZHJlc3MuXCIgKyBhKSB8fFxuICAgICAgICAgICAgb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBhKSB8fFxuICAgICAgICAgICAgKGIgPyBvYmpfY2FzZV8xLmRlZmF1bHQocHJvcHMsIFwiYWRkcmVzcy5cIiArIGIpIDogbnVsbCkgfHxcbiAgICAgICAgICAgIChiID8gb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBiKSA6IG51bGwpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdF8xKHByb3RvKSB7XG4gICAgcHJvdG8uemlwID0gdHJhaXQoXCJwb3N0YWxDb2RlXCIsIFwiemlwXCIpO1xuICAgIHByb3RvLmNvdW50cnkgPSB0cmFpdChcImNvdW50cnlcIik7XG4gICAgcHJvdG8uc3RyZWV0ID0gdHJhaXQoXCJzdHJlZXRcIik7XG4gICAgcHJvdG8uc3RhdGUgPSB0cmFpdChcInN0YXRlXCIpO1xuICAgIHByb3RvLmNpdHkgPSB0cmFpdChcImNpdHlcIik7XG4gICAgcHJvdG8ucmVnaW9uID0gdHJhaXQoXCJyZWdpb25cIik7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBkZWZhdWx0XzE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGRyZXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/address.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/alias.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/alias.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Alias = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nfunction Alias(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Alias = Alias;\ninherits_1.default(Alias, facade_1.Facade);\nAlias.prototype.action = function () {\n    return \"alias\";\n};\nAlias.prototype.type = Alias.prototype.action;\nAlias.prototype.previousId = function () {\n    return this.field(\"previousId\") || this.field(\"from\");\n};\nAlias.prototype.from = Alias.prototype.previousId;\nAlias.prototype.userId = function () {\n    return this.field(\"userId\") || this.field(\"to\");\n};\nAlias.prototype.to = Alias.prototype.userId;\n//# sourceMappingURL=alias.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWxpYXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUNBQWlDLG1CQUFPLENBQUMsMkRBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWxpYXMuanM/NmYzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQWxpYXMgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xuZnVuY3Rpb24gQWxpYXMoZGljdGlvbmFyeSwgb3B0cykge1xuICAgIGZhY2FkZV8xLkZhY2FkZS5jYWxsKHRoaXMsIGRpY3Rpb25hcnksIG9wdHMpO1xufVxuZXhwb3J0cy5BbGlhcyA9IEFsaWFzO1xuaW5oZXJpdHNfMS5kZWZhdWx0KEFsaWFzLCBmYWNhZGVfMS5GYWNhZGUpO1xuQWxpYXMucHJvdG90eXBlLmFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gXCJhbGlhc1wiO1xufTtcbkFsaWFzLnByb3RvdHlwZS50eXBlID0gQWxpYXMucHJvdG90eXBlLmFjdGlvbjtcbkFsaWFzLnByb3RvdHlwZS5wcmV2aW91c0lkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZpZWxkKFwicHJldmlvdXNJZFwiKSB8fCB0aGlzLmZpZWxkKFwiZnJvbVwiKTtcbn07XG5BbGlhcy5wcm90b3R5cGUuZnJvbSA9IEFsaWFzLnByb3RvdHlwZS5wcmV2aW91c0lkO1xuQWxpYXMucHJvdG90eXBlLnVzZXJJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZChcInVzZXJJZFwiKSB8fCB0aGlzLmZpZWxkKFwidG9cIik7XG59O1xuQWxpYXMucHJvdG90eXBlLnRvID0gQWxpYXMucHJvdG90eXBlLnVzZXJJZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFsaWFzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/alias.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/clone.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/clone.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.clone = void 0;\nfunction clone(properties) {\n    if (typeof properties !== 'object')\n        return properties;\n    if (Object.prototype.toString.call(properties) === '[object Object]') {\n        var temp = {};\n        for (var key in properties) {\n            if (Object.prototype.hasOwnProperty.call(properties, key)) {\n                temp[key] = clone(properties[key]);\n            }\n        }\n        return temp;\n    }\n    else if (Array.isArray(properties)) {\n        return properties.map(clone);\n    }\n    else {\n        return properties;\n    }\n}\nexports.clone = clone;\n//# sourceMappingURL=clone.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvY2xvbmUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvY2xvbmUuanM/YjI4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2xvbmUgPSB2b2lkIDA7XG5mdW5jdGlvbiBjbG9uZShwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9wZXJ0aWVzKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgdmFyIHRlbXAgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuICAgICAgICAgICAgICAgIHRlbXBba2V5XSA9IGNsb25lKHByb3BlcnRpZXNba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcykpIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXMubWFwKGNsb25lKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICAgIH1cbn1cbmV4cG9ydHMuY2xvbmUgPSBjbG9uZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb25lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/clone.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/delete.js":
/*!*****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/delete.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nfunction Delete(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Delete = Delete;\ninherits_1.default(Delete, facade_1.Facade);\nDelete.prototype.type = function () {\n    return \"delete\";\n};\n//# sourceMappingURL=delete.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZGVsZXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYztBQUNkLGlDQUFpQyxtQkFBTyxDQUFDLDJEQUFVO0FBQ25ELGVBQWUsbUJBQU8sQ0FBQyxxRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2RlbGV0ZS5qcz82ZTYxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWxldGUgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xuZnVuY3Rpb24gRGVsZXRlKGRpY3Rpb25hcnksIG9wdHMpIHtcbiAgICBmYWNhZGVfMS5GYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5LCBvcHRzKTtcbn1cbmV4cG9ydHMuRGVsZXRlID0gRGVsZXRlO1xuaW5oZXJpdHNfMS5kZWZhdWx0KERlbGV0ZSwgZmFjYWRlXzEuRmFjYWRlKTtcbkRlbGV0ZS5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gXCJkZWxldGVcIjtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxldGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/delete.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/facade.js":
/*!*****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/facade.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Facade = void 0;\nvar address_1 = __importDefault(__webpack_require__(/*! ./address */ \"(ssr)/./node_modules/@segment/facade/dist/address.js\"));\nvar clone_1 = __webpack_require__(/*! ./clone */ \"(ssr)/./node_modules/@segment/facade/dist/clone.js\");\nvar is_enabled_1 = __importDefault(__webpack_require__(/*! ./is-enabled */ \"(ssr)/./node_modules/@segment/facade/dist/is-enabled.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(ssr)/./node_modules/new-date/lib/index.js\"));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/./node_modules/obj-case/index.js\"));\nvar isodate_traverse_1 = __importDefault(__webpack_require__(/*! @segment/isodate-traverse */ \"(ssr)/./node_modules/@segment/isodate-traverse/lib/index.js\"));\nfunction Facade(obj, opts) {\n    opts = opts || {};\n    this.raw = clone_1.clone(obj);\n    if (!(\"clone\" in opts))\n        opts.clone = true;\n    if (opts.clone)\n        obj = clone_1.clone(obj);\n    if (!(\"traverse\" in opts))\n        opts.traverse = true;\n    if (!(\"timestamp\" in obj))\n        obj.timestamp = new Date();\n    else\n        obj.timestamp = new_date_1.default(obj.timestamp);\n    if (opts.traverse)\n        isodate_traverse_1.default(obj);\n    this.opts = opts;\n    this.obj = obj;\n}\nexports.Facade = Facade;\nvar f = Facade.prototype;\nf.proxy = function (field) {\n    var fields = field.split(\".\");\n    field = fields.shift();\n    var obj = this[field] || this.obj[field];\n    if (!obj)\n        return obj;\n    if (typeof obj === \"function\")\n        obj = obj.call(this) || {};\n    if (fields.length === 0)\n        return this.opts.clone ? transform(obj) : obj;\n    obj = obj_case_1.default(obj, fields.join(\".\"));\n    return this.opts.clone ? transform(obj) : obj;\n};\nf.field = function (field) {\n    var obj = this.obj[field];\n    return this.opts.clone ? transform(obj) : obj;\n};\nFacade.proxy = function (field) {\n    return function () {\n        return this.proxy(field);\n    };\n};\nFacade.field = function (field) {\n    return function () {\n        return this.field(field);\n    };\n};\nFacade.multi = function (path) {\n    return function () {\n        var multi = this.proxy(path + \"s\");\n        if (Array.isArray(multi))\n            return multi;\n        var one = this.proxy(path);\n        if (one)\n            one = [this.opts.clone ? clone_1.clone(one) : one];\n        return one || [];\n    };\n};\nFacade.one = function (path) {\n    return function () {\n        var one = this.proxy(path);\n        if (one)\n            return one;\n        var multi = this.proxy(path + \"s\");\n        if (Array.isArray(multi))\n            return multi[0];\n    };\n};\nf.json = function () {\n    var ret = this.opts.clone ? clone_1.clone(this.obj) : this.obj;\n    if (this.type)\n        ret.type = this.type();\n    return ret;\n};\nf.rawEvent = function () {\n    return this.raw;\n};\nf.options = function (integration) {\n    var obj = this.obj.options || this.obj.context || {};\n    var options = this.opts.clone ? clone_1.clone(obj) : obj;\n    if (!integration)\n        return options;\n    if (!this.enabled(integration))\n        return;\n    var integrations = this.integrations();\n    var value = integrations[integration] || obj_case_1.default(integrations, integration);\n    if (typeof value !== \"object\")\n        value = obj_case_1.default(this.options(), integration);\n    return typeof value === \"object\" ? value : {};\n};\nf.context = f.options;\nf.enabled = function (integration) {\n    var allEnabled = this.proxy(\"options.providers.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = this.proxy(\"options.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = this.proxy(\"integrations.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = true;\n    var enabled = allEnabled && is_enabled_1.default(integration);\n    var options = this.integrations();\n    if (options.providers && options.providers.hasOwnProperty(integration)) {\n        enabled = options.providers[integration];\n    }\n    if (options.hasOwnProperty(integration)) {\n        var settings = options[integration];\n        if (typeof settings === \"boolean\") {\n            enabled = settings;\n        }\n        else {\n            enabled = true;\n        }\n    }\n    return !!enabled;\n};\nf.integrations = function () {\n    return (this.obj.integrations || this.proxy(\"options.providers\") || this.options());\n};\nf.active = function () {\n    var active = this.proxy(\"options.active\");\n    if (active === null || active === undefined)\n        active = true;\n    return active;\n};\nf.anonymousId = function () {\n    return this.field(\"anonymousId\") || this.field(\"sessionId\");\n};\nf.sessionId = f.anonymousId;\nf.groupId = Facade.proxy(\"options.groupId\");\nf.traits = function (aliases) {\n    var ret = this.proxy(\"options.traits\") || {};\n    var id = this.userId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"options.traits.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\nf.library = function () {\n    var library = this.proxy(\"options.library\");\n    if (!library)\n        return { name: \"unknown\", version: null };\n    if (typeof library === \"string\")\n        return { name: library, version: null };\n    return library;\n};\nf.device = function () {\n    var device = this.proxy(\"context.device\");\n    if (typeof device !== \"object\" || device === null) {\n        device = {};\n    }\n    var library = this.library().name;\n    if (device.type)\n        return device;\n    if (library.indexOf(\"ios\") > -1)\n        device.type = \"ios\";\n    if (library.indexOf(\"android\") > -1)\n        device.type = \"android\";\n    return device;\n};\nf.userAgent = Facade.proxy(\"context.userAgent\");\nf.timezone = Facade.proxy(\"context.timezone\");\nf.timestamp = Facade.field(\"timestamp\");\nf.channel = Facade.field(\"channel\");\nf.ip = Facade.proxy(\"context.ip\");\nf.userId = Facade.field(\"userId\");\naddress_1.default(f);\nfunction transform(obj) {\n    return clone_1.clone(obj);\n}\n//# sourceMappingURL=facade.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZmFjYWRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYztBQUNkLGdDQUFnQyxtQkFBTyxDQUFDLHVFQUFXO0FBQ25ELGNBQWMsbUJBQU8sQ0FBQyxtRUFBUztBQUMvQixtQ0FBbUMsbUJBQU8sQ0FBQyw2RUFBYztBQUN6RCxpQ0FBaUMsbUJBQU8sQ0FBQyw0REFBVTtBQUNuRCxpQ0FBaUMsbUJBQU8sQ0FBQyx3REFBVTtBQUNuRCx5Q0FBeUMsbUJBQU8sQ0FBQyw4RkFBMkI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9mYWNhZGUuanM/MDAwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRmFjYWRlID0gdm9pZCAwO1xudmFyIGFkZHJlc3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9hZGRyZXNzXCIpKTtcbnZhciBjbG9uZV8xID0gcmVxdWlyZShcIi4vY2xvbmVcIik7XG52YXIgaXNfZW5hYmxlZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVuYWJsZWRcIikpO1xudmFyIG5ld19kYXRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5ldy1kYXRlXCIpKTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG52YXIgaXNvZGF0ZV90cmF2ZXJzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJAc2VnbWVudC9pc29kYXRlLXRyYXZlcnNlXCIpKTtcbmZ1bmN0aW9uIEZhY2FkZShvYmosIG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLnJhdyA9IGNsb25lXzEuY2xvbmUob2JqKTtcbiAgICBpZiAoIShcImNsb25lXCIgaW4gb3B0cykpXG4gICAgICAgIG9wdHMuY2xvbmUgPSB0cnVlO1xuICAgIGlmIChvcHRzLmNsb25lKVxuICAgICAgICBvYmogPSBjbG9uZV8xLmNsb25lKG9iaik7XG4gICAgaWYgKCEoXCJ0cmF2ZXJzZVwiIGluIG9wdHMpKVxuICAgICAgICBvcHRzLnRyYXZlcnNlID0gdHJ1ZTtcbiAgICBpZiAoIShcInRpbWVzdGFtcFwiIGluIG9iaikpXG4gICAgICAgIG9iai50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuICAgIGVsc2VcbiAgICAgICAgb2JqLnRpbWVzdGFtcCA9IG5ld19kYXRlXzEuZGVmYXVsdChvYmoudGltZXN0YW1wKTtcbiAgICBpZiAob3B0cy50cmF2ZXJzZSlcbiAgICAgICAgaXNvZGF0ZV90cmF2ZXJzZV8xLmRlZmF1bHQob2JqKTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMub2JqID0gb2JqO1xufVxuZXhwb3J0cy5GYWNhZGUgPSBGYWNhZGU7XG52YXIgZiA9IEZhY2FkZS5wcm90b3R5cGU7XG5mLnByb3h5ID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgdmFyIGZpZWxkcyA9IGZpZWxkLnNwbGl0KFwiLlwiKTtcbiAgICBmaWVsZCA9IGZpZWxkcy5zaGlmdCgpO1xuICAgIHZhciBvYmogPSB0aGlzW2ZpZWxkXSB8fCB0aGlzLm9ialtmaWVsZF07XG4gICAgaWYgKCFvYmopXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgaWYgKHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgb2JqID0gb2JqLmNhbGwodGhpcykgfHwge307XG4gICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiB0aGlzLm9wdHMuY2xvbmUgPyB0cmFuc2Zvcm0ob2JqKSA6IG9iajtcbiAgICBvYmogPSBvYmpfY2FzZV8xLmRlZmF1bHQob2JqLCBmaWVsZHMuam9pbihcIi5cIikpO1xuICAgIHJldHVybiB0aGlzLm9wdHMuY2xvbmUgPyB0cmFuc2Zvcm0ob2JqKSA6IG9iajtcbn07XG5mLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgdmFyIG9iaiA9IHRoaXMub2JqW2ZpZWxkXTtcbiAgICByZXR1cm4gdGhpcy5vcHRzLmNsb25lID8gdHJhbnNmb3JtKG9iaikgOiBvYmo7XG59O1xuRmFjYWRlLnByb3h5ID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJveHkoZmllbGQpO1xuICAgIH07XG59O1xuRmFjYWRlLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQoZmllbGQpO1xuICAgIH07XG59O1xuRmFjYWRlLm11bHRpID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbXVsdGkgPSB0aGlzLnByb3h5KHBhdGggKyBcInNcIik7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG11bHRpKSlcbiAgICAgICAgICAgIHJldHVybiBtdWx0aTtcbiAgICAgICAgdmFyIG9uZSA9IHRoaXMucHJveHkocGF0aCk7XG4gICAgICAgIGlmIChvbmUpXG4gICAgICAgICAgICBvbmUgPSBbdGhpcy5vcHRzLmNsb25lID8gY2xvbmVfMS5jbG9uZShvbmUpIDogb25lXTtcbiAgICAgICAgcmV0dXJuIG9uZSB8fCBbXTtcbiAgICB9O1xufTtcbkZhY2FkZS5vbmUgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvbmUgPSB0aGlzLnByb3h5KHBhdGgpO1xuICAgICAgICBpZiAob25lKVxuICAgICAgICAgICAgcmV0dXJuIG9uZTtcbiAgICAgICAgdmFyIG11bHRpID0gdGhpcy5wcm94eShwYXRoICsgXCJzXCIpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtdWx0aSkpXG4gICAgICAgICAgICByZXR1cm4gbXVsdGlbMF07XG4gICAgfTtcbn07XG5mLmpzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHRoaXMub3B0cy5jbG9uZSA/IGNsb25lXzEuY2xvbmUodGhpcy5vYmopIDogdGhpcy5vYmo7XG4gICAgaWYgKHRoaXMudHlwZSlcbiAgICAgICAgcmV0LnR5cGUgPSB0aGlzLnR5cGUoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcbmYucmF3RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmF3O1xufTtcbmYub3B0aW9ucyA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbikge1xuICAgIHZhciBvYmogPSB0aGlzLm9iai5vcHRpb25zIHx8IHRoaXMub2JqLmNvbnRleHQgfHwge307XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdHMuY2xvbmUgPyBjbG9uZV8xLmNsb25lKG9iaikgOiBvYmo7XG4gICAgaWYgKCFpbnRlZ3JhdGlvbilcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoaW50ZWdyYXRpb24pKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGludGVncmF0aW9ucyA9IHRoaXMuaW50ZWdyYXRpb25zKCk7XG4gICAgdmFyIHZhbHVlID0gaW50ZWdyYXRpb25zW2ludGVncmF0aW9uXSB8fCBvYmpfY2FzZV8xLmRlZmF1bHQoaW50ZWdyYXRpb25zLCBpbnRlZ3JhdGlvbik7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgdmFsdWUgPSBvYmpfY2FzZV8xLmRlZmF1bHQodGhpcy5vcHRpb25zKCksIGludGVncmF0aW9uKTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiID8gdmFsdWUgOiB7fTtcbn07XG5mLmNvbnRleHQgPSBmLm9wdGlvbnM7XG5mLmVuYWJsZWQgPSBmdW5jdGlvbiAoaW50ZWdyYXRpb24pIHtcbiAgICB2YXIgYWxsRW5hYmxlZCA9IHRoaXMucHJveHkoXCJvcHRpb25zLnByb3ZpZGVycy5hbGxcIik7XG4gICAgaWYgKHR5cGVvZiBhbGxFbmFibGVkICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgYWxsRW5hYmxlZCA9IHRoaXMucHJveHkoXCJvcHRpb25zLmFsbFwiKTtcbiAgICBpZiAodHlwZW9mIGFsbEVuYWJsZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICBhbGxFbmFibGVkID0gdGhpcy5wcm94eShcImludGVncmF0aW9ucy5hbGxcIik7XG4gICAgaWYgKHR5cGVvZiBhbGxFbmFibGVkICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgYWxsRW5hYmxlZCA9IHRydWU7XG4gICAgdmFyIGVuYWJsZWQgPSBhbGxFbmFibGVkICYmIGlzX2VuYWJsZWRfMS5kZWZhdWx0KGludGVncmF0aW9uKTtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuaW50ZWdyYXRpb25zKCk7XG4gICAgaWYgKG9wdGlvbnMucHJvdmlkZXJzICYmIG9wdGlvbnMucHJvdmlkZXJzLmhhc093blByb3BlcnR5KGludGVncmF0aW9uKSkge1xuICAgICAgICBlbmFibGVkID0gb3B0aW9ucy5wcm92aWRlcnNbaW50ZWdyYXRpb25dO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShpbnRlZ3JhdGlvbikpIHtcbiAgICAgICAgdmFyIHNldHRpbmdzID0gb3B0aW9uc1tpbnRlZ3JhdGlvbl07XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICBlbmFibGVkID0gc2V0dGluZ3M7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gISFlbmFibGVkO1xufTtcbmYuaW50ZWdyYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5vYmouaW50ZWdyYXRpb25zIHx8IHRoaXMucHJveHkoXCJvcHRpb25zLnByb3ZpZGVyc1wiKSB8fCB0aGlzLm9wdGlvbnMoKSk7XG59O1xuZi5hY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMucHJveHkoXCJvcHRpb25zLmFjdGl2ZVwiKTtcbiAgICBpZiAoYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgIHJldHVybiBhY3RpdmU7XG59O1xuZi5hbm9ueW1vdXNJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZChcImFub255bW91c0lkXCIpIHx8IHRoaXMuZmllbGQoXCJzZXNzaW9uSWRcIik7XG59O1xuZi5zZXNzaW9uSWQgPSBmLmFub255bW91c0lkO1xuZi5ncm91cElkID0gRmFjYWRlLnByb3h5KFwib3B0aW9ucy5ncm91cElkXCIpO1xuZi50cmFpdHMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICAgIHZhciByZXQgPSB0aGlzLnByb3h5KFwib3B0aW9ucy50cmFpdHNcIikgfHwge307XG4gICAgdmFyIGlkID0gdGhpcy51c2VySWQoKTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBpZiAoaWQpXG4gICAgICAgIHJldC5pZCA9IGlkO1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbGlhc2VzLCBhbGlhcykpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNbYWxpYXNdID09IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJveHkoXCJvcHRpb25zLnRyYWl0cy5cIiArIGFsaWFzKVxuICAgICAgICAgICAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0W2FsaWFzZXNbYWxpYXNdXSA9IHZhbHVlO1xuICAgICAgICAgICAgZGVsZXRlIHJldFthbGlhc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5mLmxpYnJhcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxpYnJhcnkgPSB0aGlzLnByb3h5KFwib3B0aW9ucy5saWJyYXJ5XCIpO1xuICAgIGlmICghbGlicmFyeSlcbiAgICAgICAgcmV0dXJuIHsgbmFtZTogXCJ1bmtub3duXCIsIHZlcnNpb246IG51bGwgfTtcbiAgICBpZiAodHlwZW9mIGxpYnJhcnkgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IG5hbWU6IGxpYnJhcnksIHZlcnNpb246IG51bGwgfTtcbiAgICByZXR1cm4gbGlicmFyeTtcbn07XG5mLmRldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGV2aWNlID0gdGhpcy5wcm94eShcImNvbnRleHQuZGV2aWNlXCIpO1xuICAgIGlmICh0eXBlb2YgZGV2aWNlICE9PSBcIm9iamVjdFwiIHx8IGRldmljZSA9PT0gbnVsbCkge1xuICAgICAgICBkZXZpY2UgPSB7fTtcbiAgICB9XG4gICAgdmFyIGxpYnJhcnkgPSB0aGlzLmxpYnJhcnkoKS5uYW1lO1xuICAgIGlmIChkZXZpY2UudHlwZSlcbiAgICAgICAgcmV0dXJuIGRldmljZTtcbiAgICBpZiAobGlicmFyeS5pbmRleE9mKFwiaW9zXCIpID4gLTEpXG4gICAgICAgIGRldmljZS50eXBlID0gXCJpb3NcIjtcbiAgICBpZiAobGlicmFyeS5pbmRleE9mKFwiYW5kcm9pZFwiKSA+IC0xKVxuICAgICAgICBkZXZpY2UudHlwZSA9IFwiYW5kcm9pZFwiO1xuICAgIHJldHVybiBkZXZpY2U7XG59O1xuZi51c2VyQWdlbnQgPSBGYWNhZGUucHJveHkoXCJjb250ZXh0LnVzZXJBZ2VudFwiKTtcbmYudGltZXpvbmUgPSBGYWNhZGUucHJveHkoXCJjb250ZXh0LnRpbWV6b25lXCIpO1xuZi50aW1lc3RhbXAgPSBGYWNhZGUuZmllbGQoXCJ0aW1lc3RhbXBcIik7XG5mLmNoYW5uZWwgPSBGYWNhZGUuZmllbGQoXCJjaGFubmVsXCIpO1xuZi5pcCA9IEZhY2FkZS5wcm94eShcImNvbnRleHQuaXBcIik7XG5mLnVzZXJJZCA9IEZhY2FkZS5maWVsZChcInVzZXJJZFwiKTtcbmFkZHJlc3NfMS5kZWZhdWx0KGYpO1xuZnVuY3Rpb24gdHJhbnNmb3JtKG9iaikge1xuICAgIHJldHVybiBjbG9uZV8xLmNsb25lKG9iaik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mYWNhZGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/facade.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/group.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/group.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Group = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/./node_modules/@segment/facade/dist/is-email.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(ssr)/./node_modules/new-date/lib/index.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nfunction Group(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Group = Group;\ninherits_1.default(Group, facade_1.Facade);\nvar g = Group.prototype;\ng.action = function () {\n    return \"group\";\n};\ng.type = g.action;\ng.groupId = facade_1.Facade.field(\"groupId\");\ng.created = function () {\n    var created = this.proxy(\"traits.createdAt\") ||\n        this.proxy(\"traits.created\") ||\n        this.proxy(\"properties.createdAt\") ||\n        this.proxy(\"properties.created\");\n    if (created)\n        return new_date_1.default(created);\n};\ng.email = function () {\n    var email = this.proxy(\"traits.email\");\n    if (email)\n        return email;\n    var groupId = this.groupId();\n    if (is_email_1.default(groupId))\n        return groupId;\n};\ng.traits = function (aliases) {\n    var ret = this.properties();\n    var id = this.groupId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"traits.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\ng.name = facade_1.Facade.proxy(\"traits.name\");\ng.industry = facade_1.Facade.proxy(\"traits.industry\");\ng.employees = facade_1.Facade.proxy(\"traits.employees\");\ng.properties = function () {\n    return this.field(\"traits\") || this.field(\"properties\") || {};\n};\n//# sourceMappingURL=group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZ3JvdXAuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUNBQWlDLG1CQUFPLENBQUMsMkRBQVU7QUFDbkQsaUNBQWlDLG1CQUFPLENBQUMseUVBQVk7QUFDckQsaUNBQWlDLG1CQUFPLENBQUMsNERBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2dyb3VwLmpzPzkzYjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdyb3VwID0gdm9pZCAwO1xudmFyIGluaGVyaXRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImluaGVyaXRzXCIpKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbnZhciBuZXdfZGF0ZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJuZXctZGF0ZVwiKSk7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG5mdW5jdGlvbiBHcm91cChkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLkdyb3VwID0gR3JvdXA7XG5pbmhlcml0c18xLmRlZmF1bHQoR3JvdXAsIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgZyA9IEdyb3VwLnByb3RvdHlwZTtcbmcuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcImdyb3VwXCI7XG59O1xuZy50eXBlID0gZy5hY3Rpb247XG5nLmdyb3VwSWQgPSBmYWNhZGVfMS5GYWNhZGUuZmllbGQoXCJncm91cElkXCIpO1xuZy5jcmVhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjcmVhdGVkID0gdGhpcy5wcm94eShcInRyYWl0cy5jcmVhdGVkQXRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInRyYWl0cy5jcmVhdGVkXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNyZWF0ZWRBdFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jcmVhdGVkXCIpO1xuICAgIGlmIChjcmVhdGVkKVxuICAgICAgICByZXR1cm4gbmV3X2RhdGVfMS5kZWZhdWx0KGNyZWF0ZWQpO1xufTtcbmcuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcInRyYWl0cy5lbWFpbFwiKTtcbiAgICBpZiAoZW1haWwpXG4gICAgICAgIHJldHVybiBlbWFpbDtcbiAgICB2YXIgZ3JvdXBJZCA9IHRoaXMuZ3JvdXBJZCgpO1xuICAgIGlmIChpc19lbWFpbF8xLmRlZmF1bHQoZ3JvdXBJZCkpXG4gICAgICAgIHJldHVybiBncm91cElkO1xufTtcbmcudHJhaXRzID0gZnVuY3Rpb24gKGFsaWFzZXMpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgdmFyIGlkID0gdGhpcy5ncm91cElkKCk7XG4gICAgYWxpYXNlcyA9IGFsaWFzZXMgfHwge307XG4gICAgaWYgKGlkKVxuICAgICAgICByZXQuaWQgPSBpZDtcbiAgICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWxpYXNlcywgYWxpYXMpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnByb3h5KFwidHJhaXRzLlwiICsgYWxpYXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgcmV0W2FsaWFzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcbmcubmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy5uYW1lXCIpO1xuZy5pbmR1c3RyeSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy5pbmR1c3RyeVwiKTtcbmcuZW1wbG95ZWVzID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLmVtcGxveWVlc1wiKTtcbmcucHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZChcInRyYWl0c1wiKSB8fCB0aGlzLmZpZWxkKFwicHJvcGVydGllc1wiKSB8fCB7fTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/group.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/identify.js":
/*!*******************************************************!*\
  !*** ./node_modules/@segment/facade/dist/identify.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Identify = void 0;\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/./node_modules/obj-case/index.js\"));\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/./node_modules/@segment/facade/dist/is-email.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(ssr)/./node_modules/new-date/lib/index.js\"));\nvar trim = function (str) { return str.trim(); };\nfunction Identify(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Identify = Identify;\ninherits_1.default(Identify, facade_1.Facade);\nvar i = Identify.prototype;\ni.action = function () {\n    return \"identify\";\n};\ni.type = i.action;\ni.traits = function (aliases) {\n    var ret = this.field(\"traits\") || {};\n    var id = this.userId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        var value = this[alias] == null ? this.proxy(\"traits.\" + alias) : this[alias]();\n        if (value == null)\n            continue;\n        ret[aliases[alias]] = value;\n        if (alias !== aliases[alias])\n            delete ret[alias];\n    }\n    return ret;\n};\ni.email = function () {\n    var email = this.proxy(\"traits.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\ni.created = function () {\n    var created = this.proxy(\"traits.created\") || this.proxy(\"traits.createdAt\");\n    if (created)\n        return new_date_1.default(created);\n};\ni.companyCreated = function () {\n    var created = this.proxy(\"traits.company.created\") ||\n        this.proxy(\"traits.company.createdAt\");\n    if (created) {\n        return new_date_1.default(created);\n    }\n};\ni.companyName = function () {\n    return this.proxy(\"traits.company.name\");\n};\ni.name = function () {\n    var name = this.proxy(\"traits.name\");\n    if (typeof name === \"string\") {\n        return trim(name);\n    }\n    var firstName = this.firstName();\n    var lastName = this.lastName();\n    if (firstName && lastName) {\n        return trim(firstName + \" \" + lastName);\n    }\n};\ni.firstName = function () {\n    var firstName = this.proxy(\"traits.firstName\");\n    if (typeof firstName === \"string\") {\n        return trim(firstName);\n    }\n    var name = this.proxy(\"traits.name\");\n    if (typeof name === \"string\") {\n        return trim(name).split(\" \")[0];\n    }\n};\ni.lastName = function () {\n    var lastName = this.proxy(\"traits.lastName\");\n    if (typeof lastName === \"string\") {\n        return trim(lastName);\n    }\n    var name = this.proxy(\"traits.name\");\n    if (typeof name !== \"string\") {\n        return;\n    }\n    var space = trim(name).indexOf(\" \");\n    if (space === -1) {\n        return;\n    }\n    return trim(name.substr(space + 1));\n};\ni.uid = function () {\n    return this.userId() || this.username() || this.email();\n};\ni.description = function () {\n    return this.proxy(\"traits.description\") || this.proxy(\"traits.background\");\n};\ni.age = function () {\n    var date = this.birthday();\n    var age = obj_case_1.default(this.traits(), \"age\");\n    if (age != null)\n        return age;\n    if (!(date instanceof Date))\n        return;\n    var now = new Date();\n    return now.getFullYear() - date.getFullYear();\n};\ni.avatar = function () {\n    var traits = this.traits();\n    return (obj_case_1.default(traits, \"avatar\") || obj_case_1.default(traits, \"photoUrl\") || obj_case_1.default(traits, \"avatarUrl\"));\n};\ni.position = function () {\n    var traits = this.traits();\n    return obj_case_1.default(traits, \"position\") || obj_case_1.default(traits, \"jobTitle\");\n};\ni.username = facade_1.Facade.proxy(\"traits.username\");\ni.website = facade_1.Facade.one(\"traits.website\");\ni.websites = facade_1.Facade.multi(\"traits.website\");\ni.phone = facade_1.Facade.one(\"traits.phone\");\ni.phones = facade_1.Facade.multi(\"traits.phone\");\ni.address = facade_1.Facade.proxy(\"traits.address\");\ni.gender = facade_1.Facade.proxy(\"traits.gender\");\ni.birthday = facade_1.Facade.proxy(\"traits.birthday\");\n//# sourceMappingURL=identify.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaWRlbnRpZnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxnQkFBZ0I7QUFDaEIsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDLGlDQUFpQyxtQkFBTyxDQUFDLHdEQUFVO0FBQ25ELGlDQUFpQyxtQkFBTyxDQUFDLDJEQUFVO0FBQ25ELGlDQUFpQyxtQkFBTyxDQUFDLHlFQUFZO0FBQ3JELGlDQUFpQyxtQkFBTyxDQUFDLDREQUFVO0FBQ25ELDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaWRlbnRpZnkuanM/MTg5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSWRlbnRpZnkgPSB2b2lkIDA7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG52YXIgb2JqX2Nhc2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwib2JqLWNhc2VcIikpO1xudmFyIGluaGVyaXRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImluaGVyaXRzXCIpKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbnZhciBuZXdfZGF0ZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJuZXctZGF0ZVwiKSk7XG52YXIgdHJpbSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci50cmltKCk7IH07XG5mdW5jdGlvbiBJZGVudGlmeShkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLklkZW50aWZ5ID0gSWRlbnRpZnk7XG5pbmhlcml0c18xLmRlZmF1bHQoSWRlbnRpZnksIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgaSA9IElkZW50aWZ5LnByb3RvdHlwZTtcbmkuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcImlkZW50aWZ5XCI7XG59O1xuaS50eXBlID0gaS5hY3Rpb247XG5pLnRyYWl0cyA9IGZ1bmN0aW9uIChhbGlhc2VzKSB7XG4gICAgdmFyIHJldCA9IHRoaXMuZmllbGQoXCJ0cmFpdHNcIikgfHwge307XG4gICAgdmFyIGlkID0gdGhpcy51c2VySWQoKTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBpZiAoaWQpXG4gICAgICAgIHJldC5pZCA9IGlkO1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpc1thbGlhc10gPT0gbnVsbCA/IHRoaXMucHJveHkoXCJ0cmFpdHMuXCIgKyBhbGlhcykgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgIGlmIChhbGlhcyAhPT0gYWxpYXNlc1thbGlhc10pXG4gICAgICAgICAgICBkZWxldGUgcmV0W2FsaWFzXTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5pLmVtYWlsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbWFpbCA9IHRoaXMucHJveHkoXCJ0cmFpdHMuZW1haWxcIik7XG4gICAgaWYgKGVtYWlsKVxuICAgICAgICByZXR1cm4gZW1haWw7XG4gICAgdmFyIHVzZXJJZCA9IHRoaXMudXNlcklkKCk7XG4gICAgaWYgKGlzX2VtYWlsXzEuZGVmYXVsdCh1c2VySWQpKVxuICAgICAgICByZXR1cm4gdXNlcklkO1xufTtcbmkuY3JlYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3JlYXRlZCA9IHRoaXMucHJveHkoXCJ0cmFpdHMuY3JlYXRlZFwiKSB8fCB0aGlzLnByb3h5KFwidHJhaXRzLmNyZWF0ZWRBdFwiKTtcbiAgICBpZiAoY3JlYXRlZClcbiAgICAgICAgcmV0dXJuIG5ld19kYXRlXzEuZGVmYXVsdChjcmVhdGVkKTtcbn07XG5pLmNvbXBhbnlDcmVhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjcmVhdGVkID0gdGhpcy5wcm94eShcInRyYWl0cy5jb21wYW55LmNyZWF0ZWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInRyYWl0cy5jb21wYW55LmNyZWF0ZWRBdFwiKTtcbiAgICBpZiAoY3JlYXRlZCkge1xuICAgICAgICByZXR1cm4gbmV3X2RhdGVfMS5kZWZhdWx0KGNyZWF0ZWQpO1xuICAgIH1cbn07XG5pLmNvbXBhbnlOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb3h5KFwidHJhaXRzLmNvbXBhbnkubmFtZVwiKTtcbn07XG5pLm5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnByb3h5KFwidHJhaXRzLm5hbWVcIik7XG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKG5hbWUpO1xuICAgIH1cbiAgICB2YXIgZmlyc3ROYW1lID0gdGhpcy5maXJzdE5hbWUoKTtcbiAgICB2YXIgbGFzdE5hbWUgPSB0aGlzLmxhc3ROYW1lKCk7XG4gICAgaWYgKGZpcnN0TmFtZSAmJiBsYXN0TmFtZSkge1xuICAgICAgICByZXR1cm4gdHJpbShmaXJzdE5hbWUgKyBcIiBcIiArIGxhc3ROYW1lKTtcbiAgICB9XG59O1xuaS5maXJzdE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZpcnN0TmFtZSA9IHRoaXMucHJveHkoXCJ0cmFpdHMuZmlyc3ROYW1lXCIpO1xuICAgIGlmICh0eXBlb2YgZmlyc3ROYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKGZpcnN0TmFtZSk7XG4gICAgfVxuICAgIHZhciBuYW1lID0gdGhpcy5wcm94eShcInRyYWl0cy5uYW1lXCIpO1xuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdHJpbShuYW1lKS5zcGxpdChcIiBcIilbMF07XG4gICAgfVxufTtcbmkubGFzdE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3ROYW1lID0gdGhpcy5wcm94eShcInRyYWl0cy5sYXN0TmFtZVwiKTtcbiAgICBpZiAodHlwZW9mIGxhc3ROYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKGxhc3ROYW1lKTtcbiAgICB9XG4gICAgdmFyIG5hbWUgPSB0aGlzLnByb3h5KFwidHJhaXRzLm5hbWVcIik7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNwYWNlID0gdHJpbShuYW1lKS5pbmRleE9mKFwiIFwiKTtcbiAgICBpZiAoc3BhY2UgPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRyaW0obmFtZS5zdWJzdHIoc3BhY2UgKyAxKSk7XG59O1xuaS51aWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlcklkKCkgfHwgdGhpcy51c2VybmFtZSgpIHx8IHRoaXMuZW1haWwoKTtcbn07XG5pLmRlc2NyaXB0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb3h5KFwidHJhaXRzLmRlc2NyaXB0aW9uXCIpIHx8IHRoaXMucHJveHkoXCJ0cmFpdHMuYmFja2dyb3VuZFwiKTtcbn07XG5pLmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0ZSA9IHRoaXMuYmlydGhkYXkoKTtcbiAgICB2YXIgYWdlID0gb2JqX2Nhc2VfMS5kZWZhdWx0KHRoaXMudHJhaXRzKCksIFwiYWdlXCIpO1xuICAgIGlmIChhZ2UgIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIGFnZTtcbiAgICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICByZXR1cm4gbm93LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCk7XG59O1xuaS5hdmF0YXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgcmV0dXJuIChvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcImF2YXRhclwiKSB8fCBvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcInBob3RvVXJsXCIpIHx8IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiYXZhdGFyVXJsXCIpKTtcbn07XG5pLnBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0cmFpdHMgPSB0aGlzLnRyYWl0cygpO1xuICAgIHJldHVybiBvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcInBvc2l0aW9uXCIpIHx8IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiam9iVGl0bGVcIik7XG59O1xuaS51c2VybmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy51c2VybmFtZVwiKTtcbmkud2Vic2l0ZSA9IGZhY2FkZV8xLkZhY2FkZS5vbmUoXCJ0cmFpdHMud2Vic2l0ZVwiKTtcbmkud2Vic2l0ZXMgPSBmYWNhZGVfMS5GYWNhZGUubXVsdGkoXCJ0cmFpdHMud2Vic2l0ZVwiKTtcbmkucGhvbmUgPSBmYWNhZGVfMS5GYWNhZGUub25lKFwidHJhaXRzLnBob25lXCIpO1xuaS5waG9uZXMgPSBmYWNhZGVfMS5GYWNhZGUubXVsdGkoXCJ0cmFpdHMucGhvbmVcIik7XG5pLmFkZHJlc3MgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJ0cmFpdHMuYWRkcmVzc1wiKTtcbmkuZ2VuZGVyID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLmdlbmRlclwiKTtcbmkuYmlydGhkYXkgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJ0cmFpdHMuYmlydGhkYXlcIik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZGVudGlmeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/identify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/index.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = exports.Screen = exports.Page = exports.Track = exports.Identify = exports.Group = exports.Alias = exports.Facade = void 0;\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nObject.defineProperty(exports, \"Facade\", ({ enumerable: true, get: function () { return facade_1.Facade; } }));\nvar alias_1 = __webpack_require__(/*! ./alias */ \"(ssr)/./node_modules/@segment/facade/dist/alias.js\");\nObject.defineProperty(exports, \"Alias\", ({ enumerable: true, get: function () { return alias_1.Alias; } }));\nvar group_1 = __webpack_require__(/*! ./group */ \"(ssr)/./node_modules/@segment/facade/dist/group.js\");\nObject.defineProperty(exports, \"Group\", ({ enumerable: true, get: function () { return group_1.Group; } }));\nvar identify_1 = __webpack_require__(/*! ./identify */ \"(ssr)/./node_modules/@segment/facade/dist/identify.js\");\nObject.defineProperty(exports, \"Identify\", ({ enumerable: true, get: function () { return identify_1.Identify; } }));\nvar track_1 = __webpack_require__(/*! ./track */ \"(ssr)/./node_modules/@segment/facade/dist/track.js\");\nObject.defineProperty(exports, \"Track\", ({ enumerable: true, get: function () { return track_1.Track; } }));\nvar page_1 = __webpack_require__(/*! ./page */ \"(ssr)/./node_modules/@segment/facade/dist/page.js\");\nObject.defineProperty(exports, \"Page\", ({ enumerable: true, get: function () { return page_1.Page; } }));\nvar screen_1 = __webpack_require__(/*! ./screen */ \"(ssr)/./node_modules/@segment/facade/dist/screen.js\");\nObject.defineProperty(exports, \"Screen\", ({ enumerable: true, get: function () { return screen_1.Screen; } }));\nvar delete_1 = __webpack_require__(/*! ./delete */ \"(ssr)/./node_modules/@segment/facade/dist/delete.js\");\nObject.defineProperty(exports, \"Delete\", ({ enumerable: true, get: function () { return delete_1.Delete; } }));\nexports[\"default\"] = __assign(__assign({}, facade_1.Facade), { Alias: alias_1.Alias,\n    Group: group_1.Group,\n    Identify: identify_1.Identify,\n    Track: track_1.Track,\n    Page: page_1.Page,\n    Screen: screen_1.Screen,\n    Delete: delete_1.Delete });\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxjQUFjLEdBQUcsY0FBYyxHQUFHLFlBQVksR0FBRyxhQUFhLEdBQUcsZ0JBQWdCLEdBQUcsYUFBYSxHQUFHLGFBQWEsR0FBRyxjQUFjO0FBQ2xJLGVBQWUsbUJBQU8sQ0FBQyxxRUFBVTtBQUNqQywwQ0FBeUMsRUFBRSxxQ0FBcUMsMkJBQTJCLEVBQUM7QUFDNUcsY0FBYyxtQkFBTyxDQUFDLG1FQUFTO0FBQy9CLHlDQUF3QyxFQUFFLHFDQUFxQyx5QkFBeUIsRUFBQztBQUN6RyxjQUFjLG1CQUFPLENBQUMsbUVBQVM7QUFDL0IseUNBQXdDLEVBQUUscUNBQXFDLHlCQUF5QixFQUFDO0FBQ3pHLGlCQUFpQixtQkFBTyxDQUFDLHlFQUFZO0FBQ3JDLDRDQUEyQyxFQUFFLHFDQUFxQywrQkFBK0IsRUFBQztBQUNsSCxjQUFjLG1CQUFPLENBQUMsbUVBQVM7QUFDL0IseUNBQXdDLEVBQUUscUNBQXFDLHlCQUF5QixFQUFDO0FBQ3pHLGFBQWEsbUJBQU8sQ0FBQyxpRUFBUTtBQUM3Qix3Q0FBdUMsRUFBRSxxQ0FBcUMsdUJBQXVCLEVBQUM7QUFDdEcsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDLDBDQUF5QyxFQUFFLHFDQUFxQywyQkFBMkIsRUFBQztBQUM1RyxlQUFlLG1CQUFPLENBQUMscUVBQVU7QUFDakMsMENBQXlDLEVBQUUscUNBQXFDLDJCQUEyQixFQUFDO0FBQzVHLGtCQUFlLHVCQUF1QixzQkFBc0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2luZGV4LmpzP2NiM2IiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWxldGUgPSBleHBvcnRzLlNjcmVlbiA9IGV4cG9ydHMuUGFnZSA9IGV4cG9ydHMuVHJhY2sgPSBleHBvcnRzLklkZW50aWZ5ID0gZXhwb3J0cy5Hcm91cCA9IGV4cG9ydHMuQWxpYXMgPSBleHBvcnRzLkZhY2FkZSA9IHZvaWQgMDtcbnZhciBmYWNhZGVfMSA9IHJlcXVpcmUoXCIuL2ZhY2FkZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkZhY2FkZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFjYWRlXzEuRmFjYWRlOyB9IH0pO1xudmFyIGFsaWFzXzEgPSByZXF1aXJlKFwiLi9hbGlhc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFsaWFzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhbGlhc18xLkFsaWFzOyB9IH0pO1xudmFyIGdyb3VwXzEgPSByZXF1aXJlKFwiLi9ncm91cFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkdyb3VwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBncm91cF8xLkdyb3VwOyB9IH0pO1xudmFyIGlkZW50aWZ5XzEgPSByZXF1aXJlKFwiLi9pZGVudGlmeVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIklkZW50aWZ5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpZGVudGlmeV8xLklkZW50aWZ5OyB9IH0pO1xudmFyIHRyYWNrXzEgPSByZXF1aXJlKFwiLi90cmFja1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRyYWNrXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cmFja18xLlRyYWNrOyB9IH0pO1xudmFyIHBhZ2VfMSA9IHJlcXVpcmUoXCIuL3BhZ2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQYWdlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwYWdlXzEuUGFnZTsgfSB9KTtcbnZhciBzY3JlZW5fMSA9IHJlcXVpcmUoXCIuL3NjcmVlblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNjcmVlblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2NyZWVuXzEuU2NyZWVuOyB9IH0pO1xudmFyIGRlbGV0ZV8xID0gcmVxdWlyZShcIi4vZGVsZXRlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRGVsZXRlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWxldGVfMS5EZWxldGU7IH0gfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmFjYWRlXzEuRmFjYWRlKSwgeyBBbGlhczogYWxpYXNfMS5BbGlhcyxcbiAgICBHcm91cDogZ3JvdXBfMS5Hcm91cCxcbiAgICBJZGVudGlmeTogaWRlbnRpZnlfMS5JZGVudGlmeSxcbiAgICBUcmFjazogdHJhY2tfMS5UcmFjayxcbiAgICBQYWdlOiBwYWdlXzEuUGFnZSxcbiAgICBTY3JlZW46IHNjcmVlbl8xLlNjcmVlbixcbiAgICBEZWxldGU6IGRlbGV0ZV8xLkRlbGV0ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/is-email.js":
/*!*******************************************************!*\
  !*** ./node_modules/@segment/facade/dist/is-email.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar matcher = /.+\\@.+\\..+/;\nfunction isEmail(string) {\n    return matcher.test(string);\n}\nexports[\"default\"] = isEmail;\n//# sourceMappingURL=is-email.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW1haWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW1haWwuanM/N2NkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBtYXRjaGVyID0gLy4rXFxALitcXC4uKy87XG5mdW5jdGlvbiBpc0VtYWlsKHN0cmluZykge1xuICAgIHJldHVybiBtYXRjaGVyLnRlc3Qoc3RyaW5nKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGlzRW1haWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1lbWFpbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/is-email.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/is-enabled.js":
/*!*********************************************************!*\
  !*** ./node_modules/@segment/facade/dist/is-enabled.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar disabled = {\n    Salesforce: true,\n};\nfunction default_1(integration) {\n    return !disabled[integration];\n}\nexports[\"default\"] = default_1;\n//# sourceMappingURL=is-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW5hYmxlZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW5hYmxlZC5qcz9hMjNiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGRpc2FibGVkID0ge1xuICAgIFNhbGVzZm9yY2U6IHRydWUsXG59O1xuZnVuY3Rpb24gZGVmYXVsdF8xKGludGVncmF0aW9uKSB7XG4gICAgcmV0dXJuICFkaXNhYmxlZFtpbnRlZ3JhdGlvbl07XG59XG5leHBvcnRzLmRlZmF1bHQgPSBkZWZhdWx0XzE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1lbmFibGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/is-enabled.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/page.js":
/*!***************************************************!*\
  !*** ./node_modules/@segment/facade/dist/page.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Page = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nvar track_1 = __webpack_require__(/*! ./track */ \"(ssr)/./node_modules/@segment/facade/dist/track.js\");\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/./node_modules/@segment/facade/dist/is-email.js\"));\nfunction Page(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Page = Page;\ninherits_1.default(Page, facade_1.Facade);\nvar p = Page.prototype;\np.action = function () {\n    return \"page\";\n};\np.type = p.action;\np.category = facade_1.Facade.field(\"category\");\np.name = facade_1.Facade.field(\"name\");\np.title = facade_1.Facade.proxy(\"properties.title\");\np.path = facade_1.Facade.proxy(\"properties.path\");\np.url = facade_1.Facade.proxy(\"properties.url\");\np.referrer = function () {\n    return (this.proxy(\"context.referrer.url\") ||\n        this.proxy(\"context.page.referrer\") ||\n        this.proxy(\"properties.referrer\"));\n};\np.properties = function (aliases) {\n    var props = this.field(\"properties\") || {};\n    var category = this.category();\n    var name = this.name();\n    aliases = aliases || {};\n    if (category)\n        props.category = category;\n    if (name)\n        props.name = name;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"properties.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            props[aliases[alias]] = value;\n            if (alias !== aliases[alias])\n                delete props[alias];\n        }\n    }\n    return props;\n};\np.email = function () {\n    var email = this.proxy(\"context.traits.email\") || this.proxy(\"properties.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\np.fullName = function () {\n    var category = this.category();\n    var name = this.name();\n    return name && category ? category + \" \" + name : name;\n};\np.event = function (name) {\n    return name ? \"Viewed \" + name + \" Page\" : \"Loaded a Page\";\n};\np.track = function (name) {\n    var json = this.json();\n    json.event = this.event(name);\n    json.timestamp = this.timestamp();\n    json.properties = this.properties();\n    return new track_1.Track(json, this.opts);\n};\n//# sourceMappingURL=page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvcGFnZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELFlBQVk7QUFDWixpQ0FBaUMsbUJBQU8sQ0FBQywyREFBVTtBQUNuRCxlQUFlLG1CQUFPLENBQUMscUVBQVU7QUFDakMsY0FBYyxtQkFBTyxDQUFDLG1FQUFTO0FBQy9CLGlDQUFpQyxtQkFBTyxDQUFDLHlFQUFZO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9wYWdlLmpzPzg2ZDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBhZ2UgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xudmFyIHRyYWNrXzEgPSByZXF1aXJlKFwiLi90cmFja1wiKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbmZ1bmN0aW9uIFBhZ2UoZGljdGlvbmFyeSwgb3B0cykge1xuICAgIGZhY2FkZV8xLkZhY2FkZS5jYWxsKHRoaXMsIGRpY3Rpb25hcnksIG9wdHMpO1xufVxuZXhwb3J0cy5QYWdlID0gUGFnZTtcbmluaGVyaXRzXzEuZGVmYXVsdChQYWdlLCBmYWNhZGVfMS5GYWNhZGUpO1xudmFyIHAgPSBQYWdlLnByb3RvdHlwZTtcbnAuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcInBhZ2VcIjtcbn07XG5wLnR5cGUgPSBwLmFjdGlvbjtcbnAuY2F0ZWdvcnkgPSBmYWNhZGVfMS5GYWNhZGUuZmllbGQoXCJjYXRlZ29yeVwiKTtcbnAubmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5maWVsZChcIm5hbWVcIik7XG5wLnRpdGxlID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy50aXRsZVwiKTtcbnAucGF0aCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMucGF0aFwiKTtcbnAudXJsID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy51cmxcIik7XG5wLnJlZmVycmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcImNvbnRleHQucmVmZXJyZXIudXJsXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJjb250ZXh0LnBhZ2UucmVmZXJyZXJcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMucmVmZXJyZXJcIikpO1xufTtcbnAucHJvcGVydGllcyA9IGZ1bmN0aW9uIChhbGlhc2VzKSB7XG4gICAgdmFyIHByb3BzID0gdGhpcy5maWVsZChcInByb3BlcnRpZXNcIikgfHwge307XG4gICAgdmFyIGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeSgpO1xuICAgIHZhciBuYW1lID0gdGhpcy5uYW1lKCk7XG4gICAgYWxpYXNlcyA9IGFsaWFzZXMgfHwge307XG4gICAgaWYgKGNhdGVnb3J5KVxuICAgICAgICBwcm9wcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgIGlmIChuYW1lKVxuICAgICAgICBwcm9wcy5uYW1lID0gbmFtZTtcbiAgICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWxpYXNlcywgYWxpYXMpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnByb3h5KFwicHJvcGVydGllcy5cIiArIGFsaWFzKVxuICAgICAgICAgICAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcHJvcHNbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoYWxpYXMgIT09IGFsaWFzZXNbYWxpYXNdKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1thbGlhc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb3BzO1xufTtcbnAuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcImNvbnRleHQudHJhaXRzLmVtYWlsXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmVtYWlsXCIpO1xuICAgIGlmIChlbWFpbClcbiAgICAgICAgcmV0dXJuIGVtYWlsO1xuICAgIHZhciB1c2VySWQgPSB0aGlzLnVzZXJJZCgpO1xuICAgIGlmIChpc19lbWFpbF8xLmRlZmF1bHQodXNlcklkKSlcbiAgICAgICAgcmV0dXJuIHVzZXJJZDtcbn07XG5wLmZ1bGxOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcnkoKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMubmFtZSgpO1xuICAgIHJldHVybiBuYW1lICYmIGNhdGVnb3J5ID8gY2F0ZWdvcnkgKyBcIiBcIiArIG5hbWUgOiBuYW1lO1xufTtcbnAuZXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiBuYW1lID8gXCJWaWV3ZWQgXCIgKyBuYW1lICsgXCIgUGFnZVwiIDogXCJMb2FkZWQgYSBQYWdlXCI7XG59O1xucC50cmFjayA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGpzb24gPSB0aGlzLmpzb24oKTtcbiAgICBqc29uLmV2ZW50ID0gdGhpcy5ldmVudChuYW1lKTtcbiAgICBqc29uLnRpbWVzdGFtcCA9IHRoaXMudGltZXN0YW1wKCk7XG4gICAganNvbi5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgcmV0dXJuIG5ldyB0cmFja18xLlRyYWNrKGpzb24sIHRoaXMub3B0cyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/page.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/screen.js":
/*!*****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/screen.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Screen = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar page_1 = __webpack_require__(/*! ./page */ \"(ssr)/./node_modules/@segment/facade/dist/page.js\");\nvar track_1 = __webpack_require__(/*! ./track */ \"(ssr)/./node_modules/@segment/facade/dist/track.js\");\nfunction Screen(dictionary, opts) {\n    page_1.Page.call(this, dictionary, opts);\n}\nexports.Screen = Screen;\ninherits_1.default(Screen, page_1.Page);\nScreen.prototype.action = function () {\n    return \"screen\";\n};\nScreen.prototype.type = Screen.prototype.action;\nScreen.prototype.event = function (name) {\n    return name ? \"Viewed \" + name + \" Screen\" : \"Loaded a Screen\";\n};\nScreen.prototype.track = function (name) {\n    var json = this.json();\n    json.event = this.event(name);\n    json.timestamp = this.timestamp();\n    json.properties = this.properties();\n    return new track_1.Track(json, this.opts);\n};\n//# sourceMappingURL=screen.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3Qvc2NyZWVuLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYztBQUNkLGlDQUFpQyxtQkFBTyxDQUFDLDJEQUFVO0FBQ25ELGFBQWEsbUJBQU8sQ0FBQyxpRUFBUTtBQUM3QixjQUFjLG1CQUFPLENBQUMsbUVBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3Qvc2NyZWVuLmpzPzEwMjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNjcmVlbiA9IHZvaWQgMDtcbnZhciBpbmhlcml0c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpbmhlcml0c1wiKSk7XG52YXIgcGFnZV8xID0gcmVxdWlyZShcIi4vcGFnZVwiKTtcbnZhciB0cmFja18xID0gcmVxdWlyZShcIi4vdHJhY2tcIik7XG5mdW5jdGlvbiBTY3JlZW4oZGljdGlvbmFyeSwgb3B0cykge1xuICAgIHBhZ2VfMS5QYWdlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLlNjcmVlbiA9IFNjcmVlbjtcbmluaGVyaXRzXzEuZGVmYXVsdChTY3JlZW4sIHBhZ2VfMS5QYWdlKTtcblNjcmVlbi5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcInNjcmVlblwiO1xufTtcblNjcmVlbi5wcm90b3R5cGUudHlwZSA9IFNjcmVlbi5wcm90b3R5cGUuYWN0aW9uO1xuU2NyZWVuLnByb3RvdHlwZS5ldmVudCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUgPyBcIlZpZXdlZCBcIiArIG5hbWUgKyBcIiBTY3JlZW5cIiA6IFwiTG9hZGVkIGEgU2NyZWVuXCI7XG59O1xuU2NyZWVuLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGpzb24gPSB0aGlzLmpzb24oKTtcbiAgICBqc29uLmV2ZW50ID0gdGhpcy5ldmVudChuYW1lKTtcbiAgICBqc29uLnRpbWVzdGFtcCA9IHRoaXMudGltZXN0YW1wKCk7XG4gICAganNvbi5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgcmV0dXJuIG5ldyB0cmFja18xLlRyYWNrKGpzb24sIHRoaXMub3B0cyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NyZWVuLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/screen.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/facade/dist/track.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/track.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Track = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/./node_modules/@segment/facade/dist/facade.js\");\nvar identify_1 = __webpack_require__(/*! ./identify */ \"(ssr)/./node_modules/@segment/facade/dist/identify.js\");\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/./node_modules/@segment/facade/dist/is-email.js\"));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/./node_modules/obj-case/index.js\"));\nfunction Track(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Track = Track;\ninherits_1.default(Track, facade_1.Facade);\nvar t = Track.prototype;\nt.action = function () {\n    return \"track\";\n};\nt.type = t.action;\nt.event = facade_1.Facade.field(\"event\");\nt.value = facade_1.Facade.proxy(\"properties.value\");\nt.category = facade_1.Facade.proxy(\"properties.category\");\nt.id = facade_1.Facade.proxy(\"properties.id\");\nt.productId = function () {\n    return (this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\"));\n};\nt.promotionId = function () {\n    return (this.proxy(\"properties.promotion_id\") ||\n        this.proxy(\"properties.promotionId\"));\n};\nt.cartId = function () {\n    return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\nt.checkoutId = function () {\n    return (this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\"));\n};\nt.paymentId = function () {\n    return (this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\"));\n};\nt.couponId = function () {\n    return (this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\"));\n};\nt.wishlistId = function () {\n    return (this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\"));\n};\nt.reviewId = function () {\n    return (this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\"));\n};\nt.orderId = function () {\n    return (this.proxy(\"properties.id\") ||\n        this.proxy(\"properties.order_id\") ||\n        this.proxy(\"properties.orderId\"));\n};\nt.sku = facade_1.Facade.proxy(\"properties.sku\");\nt.tax = facade_1.Facade.proxy(\"properties.tax\");\nt.name = facade_1.Facade.proxy(\"properties.name\");\nt.price = facade_1.Facade.proxy(\"properties.price\");\nt.total = facade_1.Facade.proxy(\"properties.total\");\nt.repeat = facade_1.Facade.proxy(\"properties.repeat\");\nt.coupon = facade_1.Facade.proxy(\"properties.coupon\");\nt.shipping = facade_1.Facade.proxy(\"properties.shipping\");\nt.discount = facade_1.Facade.proxy(\"properties.discount\");\nt.shippingMethod = function () {\n    return (this.proxy(\"properties.shipping_method\") ||\n        this.proxy(\"properties.shippingMethod\"));\n};\nt.paymentMethod = function () {\n    return (this.proxy(\"properties.payment_method\") ||\n        this.proxy(\"properties.paymentMethod\"));\n};\nt.description = facade_1.Facade.proxy(\"properties.description\");\nt.plan = facade_1.Facade.proxy(\"properties.plan\");\nt.subtotal = function () {\n    var subtotal = obj_case_1.default(this.properties(), \"subtotal\");\n    var total = this.total() || this.revenue();\n    if (subtotal)\n        return subtotal;\n    if (!total)\n        return 0;\n    if (this.total()) {\n        var n = this.tax();\n        if (n)\n            total -= n;\n        n = this.shipping();\n        if (n)\n            total -= n;\n        n = this.discount();\n        if (n)\n            total += n;\n    }\n    return total;\n};\nt.products = function () {\n    var props = this.properties();\n    var products = obj_case_1.default(props, \"products\");\n    if (Array.isArray(products)) {\n        return products.filter(function (item) { return item !== null; });\n    }\n    return [];\n};\nt.quantity = function () {\n    var props = this.obj.properties || {};\n    return props.quantity || 1;\n};\nt.currency = function () {\n    var props = this.obj.properties || {};\n    return props.currency || \"USD\";\n};\nt.referrer = function () {\n    return (this.proxy(\"context.referrer.url\") ||\n        this.proxy(\"context.page.referrer\") ||\n        this.proxy(\"properties.referrer\"));\n};\nt.query = facade_1.Facade.proxy(\"options.query\");\nt.properties = function (aliases) {\n    var ret = this.field(\"properties\") || {};\n    aliases = aliases || {};\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"properties.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\nt.username = function () {\n    return (this.proxy(\"traits.username\") ||\n        this.proxy(\"properties.username\") ||\n        this.userId() ||\n        this.sessionId());\n};\nt.email = function () {\n    var email = this.proxy(\"traits.email\") ||\n        this.proxy(\"properties.email\") ||\n        this.proxy(\"options.traits.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\nt.revenue = function () {\n    var revenue = this.proxy(\"properties.revenue\");\n    var event = this.event();\n    var orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n    if (!revenue && event && event.match(orderCompletedRegExp)) {\n        revenue = this.proxy(\"properties.total\");\n    }\n    return currency(revenue);\n};\nt.cents = function () {\n    var revenue = this.revenue();\n    return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\nt.identify = function () {\n    var json = this.json();\n    json.traits = this.traits();\n    return new identify_1.Identify(json, this.opts);\n};\nfunction currency(val) {\n    if (!val)\n        return;\n    if (typeof val === \"number\") {\n        return val;\n    }\n    if (typeof val !== \"string\") {\n        return;\n    }\n    val = val.replace(/\\$/g, \"\");\n    val = parseFloat(val);\n    if (!isNaN(val)) {\n        return val;\n    }\n}\n//# sourceMappingURL=track.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvdHJhY2suanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUNBQWlDLG1CQUFPLENBQUMsMkRBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDLGlCQUFpQixtQkFBTyxDQUFDLHlFQUFZO0FBQ3JDLGlDQUFpQyxtQkFBTyxDQUFDLHlFQUFZO0FBQ3JELGlDQUFpQyxtQkFBTyxDQUFDLHdEQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHVCQUF1QjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvdHJhY2suanM/YWFhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHJhY2sgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xudmFyIGlkZW50aWZ5XzEgPSByZXF1aXJlKFwiLi9pZGVudGlmeVwiKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG5mdW5jdGlvbiBUcmFjayhkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLlRyYWNrID0gVHJhY2s7XG5pbmhlcml0c18xLmRlZmF1bHQoVHJhY2ssIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgdCA9IFRyYWNrLnByb3RvdHlwZTtcbnQuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcInRyYWNrXCI7XG59O1xudC50eXBlID0gdC5hY3Rpb247XG50LmV2ZW50ID0gZmFjYWRlXzEuRmFjYWRlLmZpZWxkKFwiZXZlbnRcIik7XG50LnZhbHVlID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy52YWx1ZVwiKTtcbnQuY2F0ZWdvcnkgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLmNhdGVnb3J5XCIpO1xudC5pZCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuaWRcIik7XG50LnByb2R1Y3RJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnByb2R1Y3RfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMucHJvZHVjdElkXCIpKTtcbn07XG50LnByb21vdGlvbklkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMucHJvbW90aW9uX2lkXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnByb21vdGlvbklkXCIpKTtcbn07XG50LmNhcnRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm94eShcInByb3BlcnRpZXMuY2FydF9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jYXJ0SWRcIik7XG59O1xudC5jaGVja291dElkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMuY2hlY2tvdXRfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMuY2hlY2tvdXRJZFwiKSk7XG59O1xudC5wYXltZW50SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy5wYXltZW50X2lkXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnBheW1lbnRJZFwiKSk7XG59O1xudC5jb3Vwb25JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNvdXBvbl9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jb3Vwb25JZFwiKSk7XG59O1xudC53aXNobGlzdElkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMud2lzaGxpc3RfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMud2lzaGxpc3RJZFwiKSk7XG59O1xudC5yZXZpZXdJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnJldmlld19pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5yZXZpZXdJZFwiKSk7XG59O1xudC5vcmRlcklkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMuaWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMub3JkZXJfaWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMub3JkZXJJZFwiKSk7XG59O1xudC5za3UgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnNrdVwiKTtcbnQudGF4ID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy50YXhcIik7XG50Lm5hbWUgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLm5hbWVcIik7XG50LnByaWNlID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5wcmljZVwiKTtcbnQudG90YWwgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnRvdGFsXCIpO1xudC5yZXBlYXQgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnJlcGVhdFwiKTtcbnQuY291cG9uID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5jb3Vwb25cIik7XG50LnNoaXBwaW5nID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5zaGlwcGluZ1wiKTtcbnQuZGlzY291bnQgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLmRpc2NvdW50XCIpO1xudC5zaGlwcGluZ01ldGhvZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnNoaXBwaW5nX21ldGhvZFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5zaGlwcGluZ01ldGhvZFwiKSk7XG59O1xudC5wYXltZW50TWV0aG9kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMucGF5bWVudF9tZXRob2RcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMucGF5bWVudE1ldGhvZFwiKSk7XG59O1xudC5kZXNjcmlwdGlvbiA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuZGVzY3JpcHRpb25cIik7XG50LnBsYW4gPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnBsYW5cIik7XG50LnN1YnRvdGFsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdWJ0b3RhbCA9IG9ial9jYXNlXzEuZGVmYXVsdCh0aGlzLnByb3BlcnRpZXMoKSwgXCJzdWJ0b3RhbFwiKTtcbiAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsKCkgfHwgdGhpcy5yZXZlbnVlKCk7XG4gICAgaWYgKHN1YnRvdGFsKVxuICAgICAgICByZXR1cm4gc3VidG90YWw7XG4gICAgaWYgKCF0b3RhbClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgaWYgKHRoaXMudG90YWwoKSkge1xuICAgICAgICB2YXIgbiA9IHRoaXMudGF4KCk7XG4gICAgICAgIGlmIChuKVxuICAgICAgICAgICAgdG90YWwgLT0gbjtcbiAgICAgICAgbiA9IHRoaXMuc2hpcHBpbmcoKTtcbiAgICAgICAgaWYgKG4pXG4gICAgICAgICAgICB0b3RhbCAtPSBuO1xuICAgICAgICBuID0gdGhpcy5kaXNjb3VudCgpO1xuICAgICAgICBpZiAobilcbiAgICAgICAgICAgIHRvdGFsICs9IG47XG4gICAgfVxuICAgIHJldHVybiB0b3RhbDtcbn07XG50LnByb2R1Y3RzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcGVydGllcygpO1xuICAgIHZhciBwcm9kdWN0cyA9IG9ial9jYXNlXzEuZGVmYXVsdChwcm9wcywgXCJwcm9kdWN0c1wiKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9kdWN0cykpIHtcbiAgICAgICAgcmV0dXJuIHByb2R1Y3RzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbSAhPT0gbnVsbDsgfSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn07XG50LnF1YW50aXR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IHRoaXMub2JqLnByb3BlcnRpZXMgfHwge307XG4gICAgcmV0dXJuIHByb3BzLnF1YW50aXR5IHx8IDE7XG59O1xudC5jdXJyZW5jeSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJvcHMgPSB0aGlzLm9iai5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgIHJldHVybiBwcm9wcy5jdXJyZW5jeSB8fCBcIlVTRFwiO1xufTtcbnQucmVmZXJyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwiY29udGV4dC5yZWZlcnJlci51cmxcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcImNvbnRleHQucGFnZS5yZWZlcnJlclwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5yZWZlcnJlclwiKSk7XG59O1xudC5xdWVyeSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcIm9wdGlvbnMucXVlcnlcIik7XG50LnByb3BlcnRpZXMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICAgIHZhciByZXQgPSB0aGlzLmZpZWxkKFwicHJvcGVydGllc1wiKSB8fCB7fTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWxpYXNlcywgYWxpYXMpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnByb3h5KFwicHJvcGVydGllcy5cIiArIGFsaWFzKVxuICAgICAgICAgICAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0W2FsaWFzZXNbYWxpYXNdXSA9IHZhbHVlO1xuICAgICAgICAgICAgZGVsZXRlIHJldFthbGlhc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG50LnVzZXJuYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInRyYWl0cy51c2VybmFtZVwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy51c2VybmFtZVwiKSB8fFxuICAgICAgICB0aGlzLnVzZXJJZCgpIHx8XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkKCkpO1xufTtcbnQuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcInRyYWl0cy5lbWFpbFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5lbWFpbFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwib3B0aW9ucy50cmFpdHMuZW1haWxcIik7XG4gICAgaWYgKGVtYWlsKVxuICAgICAgICByZXR1cm4gZW1haWw7XG4gICAgdmFyIHVzZXJJZCA9IHRoaXMudXNlcklkKCk7XG4gICAgaWYgKGlzX2VtYWlsXzEuZGVmYXVsdCh1c2VySWQpKVxuICAgICAgICByZXR1cm4gdXNlcklkO1xufTtcbnQucmV2ZW51ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV2ZW51ZSA9IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnJldmVudWVcIik7XG4gICAgdmFyIGV2ZW50ID0gdGhpcy5ldmVudCgpO1xuICAgIHZhciBvcmRlckNvbXBsZXRlZFJlZ0V4cCA9IC9eWyBfXT9jb21wbGV0ZWRbIF9dP29yZGVyWyBfXT98XlsgX10/b3JkZXJbIF9dP2NvbXBsZXRlZFsgX10/JC9pO1xuICAgIGlmICghcmV2ZW51ZSAmJiBldmVudCAmJiBldmVudC5tYXRjaChvcmRlckNvbXBsZXRlZFJlZ0V4cCkpIHtcbiAgICAgICAgcmV2ZW51ZSA9IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnRvdGFsXCIpO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVuY3kocmV2ZW51ZSk7XG59O1xudC5jZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV2ZW51ZSA9IHRoaXMucmV2ZW51ZSgpO1xuICAgIHJldHVybiB0eXBlb2YgcmV2ZW51ZSAhPT0gXCJudW1iZXJcIiA/IHRoaXMudmFsdWUoKSB8fCAwIDogcmV2ZW51ZSAqIDEwMDtcbn07XG50LmlkZW50aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBqc29uID0gdGhpcy5qc29uKCk7XG4gICAganNvbi50cmFpdHMgPSB0aGlzLnRyYWl0cygpO1xuICAgIHJldHVybiBuZXcgaWRlbnRpZnlfMS5JZGVudGlmeShqc29uLCB0aGlzLm9wdHMpO1xufTtcbmZ1bmN0aW9uIGN1cnJlbmN5KHZhbCkge1xuICAgIGlmICghdmFsKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YWwgPSB2YWwucmVwbGFjZSgvXFwkL2csIFwiXCIpO1xuICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICBpZiAoIWlzTmFOKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/facade/dist/track.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/isodate-traverse/lib/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@segment/isodate-traverse/lib/index.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar isodate = __webpack_require__(/*! @segment/isodate */ \"(ssr)/./node_modules/@segment/isodate/lib/index.js\");\n\n/**\n * Expose `traverse`.\n */\nmodule.exports = traverse;\n\n/**\n * Recursively traverse an object or array, and convert\n * all ISO date strings parse into Date objects.\n *\n * @param {Object} input - object, array, or string to convert\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverse(input, strict) {\n  if (strict === undefined) strict = true;\n  if (input && typeof input === 'object') {\n    return traverseObject(input, strict);\n  } else if (Array.isArray(input)) {\n    return traverseArray(input, strict);\n  } else if (isodate.is(input, strict)) {\n    return isodate.parse(input);\n  }\n  return input;\n}\n\n/**\n * Object traverser helper function.\n *\n * @param {Object} obj - object to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverseObject(obj, strict) {\n  Object.keys(obj).forEach(function(key) {\n    obj[key] = traverse(obj[key], strict);\n  });\n  return obj;\n}\n\n/**\n * Array traverser helper function\n *\n * @param {Array} arr - array to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Array}\n */\nfunction traverseArray(arr, strict) {\n  arr.forEach(function(value, index) {\n    arr[index] = traverse(value, strict);\n  });\n  return arr;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvaXNvZGF0ZS10cmF2ZXJzZS9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsY0FBYyxtQkFBTyxDQUFDLDRFQUFrQjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2lzb2RhdGUtdHJhdmVyc2UvbGliL2luZGV4LmpzP2YzNzgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNvZGF0ZSA9IHJlcXVpcmUoJ0BzZWdtZW50L2lzb2RhdGUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYHRyYXZlcnNlYC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB0cmF2ZXJzZTtcblxuLyoqXG4gKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3Qgb3IgYXJyYXksIGFuZCBjb252ZXJ0XG4gKiBhbGwgSVNPIGRhdGUgc3RyaW5ncyBwYXJzZSBpbnRvIERhdGUgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXQgLSBvYmplY3QsIGFycmF5LCBvciBzdHJpbmcgdG8gY29udmVydFxuICogQHBhcmFtIHtCb29sZWFufSBzdHJpY3QgLSBvbmx5IGNvbnZlcnQgc3RyaW5ncyB3aXRoIHllYXIsIG1vbnRoLCBhbmQgZGF0ZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZShpbnB1dCwgc3RyaWN0KSB7XG4gIGlmIChzdHJpY3QgPT09IHVuZGVmaW5lZCkgc3RyaWN0ID0gdHJ1ZTtcbiAgaWYgKGlucHV0ICYmIHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VPYmplY3QoaW5wdXQsIHN0cmljdCk7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VBcnJheShpbnB1dCwgc3RyaWN0KTtcbiAgfSBlbHNlIGlmIChpc29kYXRlLmlzKGlucHV0LCBzdHJpY3QpKSB7XG4gICAgcmV0dXJuIGlzb2RhdGUucGFyc2UoaW5wdXQpO1xuICB9XG4gIHJldHVybiBpbnB1dDtcbn1cblxuLyoqXG4gKiBPYmplY3QgdHJhdmVyc2VyIGhlbHBlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gb2JqZWN0IHRvIHRyYXZlcnNlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHN0cmljdCAtIG9ubHkgY29udmVydCBzdHJpbmdzIHdpdGggeWVhciwgbW9udGgsIGFuZCBkYXRlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlT2JqZWN0KG9iaiwgc3RyaWN0KSB7XG4gIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBvYmpba2V5XSA9IHRyYXZlcnNlKG9ialtrZXldLCBzdHJpY3QpO1xuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBBcnJheSB0cmF2ZXJzZXIgaGVscGVyIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyIC0gYXJyYXkgdG8gdHJhdmVyc2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0IC0gb25seSBjb252ZXJ0IHN0cmluZ3Mgd2l0aCB5ZWFyLCBtb250aCwgYW5kIGRhdGVcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZUFycmF5KGFyciwgc3RyaWN0KSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgIGFycltpbmRleF0gPSB0cmF2ZXJzZSh2YWx1ZSwgc3RyaWN0KTtcbiAgfSk7XG4gIHJldHVybiBhcnI7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/isodate-traverse/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/isodate/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/isodate/lib/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function(iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) {\n    return new Date(iso);\n  }\n\n  /* eslint-disable no-cond-assign */\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n  /* eslint-enable no-cond-assign */\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8] ? (arr[8] + '00').substring(0, 3) : 0;\n\n  // apply timezone if one exists\n  if (arr[4] === ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if (arr[10] === '+') {\n      offset = 0 - offset;\n    }\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function(string, strict) {\n  if (typeof string !== 'string') {\n    return false;\n  }\n  if (strict && (/^\\d{4}-\\d{2}-\\d{2}/).test(string) === false) {\n    return false;\n  }\n  return matcher.test(string);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvaXNvZGF0ZS9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLGtCQUFrQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxHQUFHLHVCQUF1QixFQUFFLFVBQVUsRUFBRTs7QUFFNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7O0FBRUEsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7O0FBRUEsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDcEM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9pc29kYXRlL2xpYi9pbmRleC5qcz9hYTRjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNYXRjaGVyLCBzbGlnaHRseSBtb2RpZmllZCBmcm9tOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jc25vdmVyL2pzLWlzbzg2MDEvYmxvYi9sYXgvaXNvODYwMS5qc1xuICovXG5cbnZhciBtYXRjaGVyID0gL14oXFxkezR9KSg/Oi0/KFxcZHsyfSkoPzotPyhcXGR7Mn0pKT8pPyg/OihbIFRdKShcXGR7Mn0pOj8oXFxkezJ9KSg/Ojo/KFxcZHsyfSkoPzpbLFxcLl0oXFxkezEsfSkpPyk/KD86KFopfChbK1xcLV0pKFxcZHsyfSkoPzo6PyhcXGR7Mn0pKT8pPyk/JC87XG5cbi8qKlxuICogQ29udmVydCBhbiBJU08gZGF0ZSBzdHJpbmcgdG8gYSBkYXRlLiBGYWxsYmFjayB0byBuYXRpdmUgYERhdGUucGFyc2VgLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jc25vdmVyL2pzLWlzbzg2MDEvYmxvYi9sYXgvaXNvODYwMS5qc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpc29cbiAqIEByZXR1cm4ge0RhdGV9XG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKGlzbykge1xuICB2YXIgbnVtZXJpY0tleXMgPSBbMSwgNSwgNiwgNywgMTEsIDEyXTtcbiAgdmFyIGFyciA9IG1hdGNoZXIuZXhlYyhpc28pO1xuICB2YXIgb2Zmc2V0ID0gMDtcblxuICAvLyBmYWxsYmFjayB0byBuYXRpdmUgcGFyc2luZ1xuICBpZiAoIWFycikge1xuICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgLy8gcmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXNcbiAgZm9yICh2YXIgaSA9IDAsIHZhbDsgdmFsID0gbnVtZXJpY0tleXNbaV07IGkrKykge1xuICAgIGFyclt2YWxdID0gcGFyc2VJbnQoYXJyW3ZhbF0sIDEwKSB8fCAwO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblxuICAvLyBhbGxvdyB1bmRlZmluZWQgZGF5cyBhbmQgbW9udGhzXG4gIGFyclsyXSA9IHBhcnNlSW50KGFyclsyXSwgMTApIHx8IDE7XG4gIGFyclszXSA9IHBhcnNlSW50KGFyclszXSwgMTApIHx8IDE7XG5cbiAgLy8gbW9udGggaXMgMC0xMVxuICBhcnJbMl0tLTtcblxuICAvLyBhbGxvdyBhYml0cmFyeSBzdWItc2Vjb25kIHByZWNpc2lvblxuICBhcnJbOF0gPSBhcnJbOF0gPyAoYXJyWzhdICsgJzAwJykuc3Vic3RyaW5nKDAsIDMpIDogMDtcblxuICAvLyBhcHBseSB0aW1lem9uZSBpZiBvbmUgZXhpc3RzXG4gIGlmIChhcnJbNF0gPT09ICcgJykge1xuICAgIG9mZnNldCA9IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfSBlbHNlIGlmIChhcnJbOV0gIT09ICdaJyAmJiBhcnJbMTBdKSB7XG4gICAgb2Zmc2V0ID0gYXJyWzExXSAqIDYwICsgYXJyWzEyXTtcbiAgICBpZiAoYXJyWzEwXSA9PT0gJysnKSB7XG4gICAgICBvZmZzZXQgPSAwIC0gb2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIHZhciBtaWxsaXMgPSBEYXRlLlVUQyhhcnJbMV0sIGFyclsyXSwgYXJyWzNdLCBhcnJbNV0sIGFycls2XSArIG9mZnNldCwgYXJyWzddLCBhcnJbOF0pO1xuICByZXR1cm4gbmV3IERhdGUobWlsbGlzKTtcbn07XG5cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIGBzdHJpbmdgIGlzIGFuIElTTyBkYXRlIHN0cmluZy4gYHN0cmljdGAgbW9kZSByZXF1aXJlcyB0aGF0XG4gKiB0aGUgZGF0ZSBzdHJpbmcgYXQgbGVhc3QgaGF2ZSBhIHllYXIsIG1vbnRoIGFuZCBkYXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMuaXMgPSBmdW5jdGlvbihzdHJpbmcsIHN0cmljdCkge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHN0cmljdCAmJiAoL15cXGR7NH0tXFxkezJ9LVxcZHsyfS8pLnRlc3Qoc3RyaW5nKSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIG1hdGNoZXIudGVzdChzdHJpbmcpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/isodate/lib/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatch: () => (/* binding */ dispatch),\n/* harmony export */   getDelay: () => (/* binding */ getDelay)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callback */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n\n/* The amount of time in ms to wait before invoking the callback. */\nvar getDelay = function (startTimeInEpochMS, timeoutInMS) {\n    var elapsedTime = Date.now() - startTimeInEpochMS;\n    // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n    return Math.max((timeoutInMS !== null && timeoutInMS !== void 0 ? timeoutInMS : 300) - elapsedTime, 0);\n};\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nfunction dispatch(ctx, queue, emitter, options) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var startTime, dispatched;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitter.emit('dispatch_start', ctx);\n                    startTime = Date.now();\n                    if (!queue.isEmpty()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, queue.dispatchSingle(ctx)];\n                case 1:\n                    dispatched = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, queue.dispatch(ctx)];\n                case 3:\n                    dispatched = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!(options === null || options === void 0 ? void 0 : options.callback)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, (0,_callback__WEBPACK_IMPORTED_MODULE_1__.invokeCallback)(dispatched, options.callback, getDelay(startTime, options.timeout))];\n                case 5:\n                    dispatched = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (options === null || options === void 0 ? void 0 : options.debug) {\n                        dispatched.flush();\n                    }\n                    return [2 /*return*/, dispatched];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dispatch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDRjtBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzPzcyYjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52b2tlQ2FsbGJhY2sgfSBmcm9tICcuLi9jYWxsYmFjayc7XG4vKiBUaGUgYW1vdW50IG9mIHRpbWUgaW4gbXMgdG8gd2FpdCBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrLiAqL1xuZXhwb3J0IHZhciBnZXREZWxheSA9IGZ1bmN0aW9uIChzdGFydFRpbWVJbkVwb2NoTVMsIHRpbWVvdXRJbk1TKSB7XG4gICAgdmFyIGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZUluRXBvY2hNUztcbiAgICAvLyBpbmNyZWFzaW5nIHRoZSB0aW1lb3V0IGluY3JlYXNlcyB0aGUgZGVsYXkgYnkgYWxtb3N0IHRoZSBzYW1lIGFtb3VudCAtLSB0aGlzIGlzIHdlaXJkIGxlZ2FjeSBiZWhhdmlvci5cbiAgICByZXR1cm4gTWF0aC5tYXgoKHRpbWVvdXRJbk1TICE9PSBudWxsICYmIHRpbWVvdXRJbk1TICE9PSB2b2lkIDAgPyB0aW1lb3V0SW5NUyA6IDMwMCkgLSBlbGFwc2VkVGltZSwgMCk7XG59O1xuLyoqXG4gKiBQdXNoIGFuIGV2ZW50IGludG8gdGhlIGRpc3BhdGNoIHF1ZXVlIGFuZCBpbnZva2UgYW55IGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0gZXZlbnQgLSBTZWdtZW50IGV2ZW50IHRvIGVucXVldWUuXG4gKiBAcGFyYW0gcXVldWUgLSBRdWV1ZSB0byBkaXNwYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIGVtaXR0ZXIgLSBUaGlzIGlzIHR5cGljYWxseSBhbiBpbnN0YW5jZSBvZiBcIkFuYWx5dGljc1wiIC0tIHVzZWQgZm9yIG1ldHJpY3MgLyBwcm9ncmVzcyBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSBvcHRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChjdHgsIHF1ZXVlLCBlbWl0dGVyLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhcnRUaW1lLCBkaXNwYXRjaGVkO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Rpc3BhdGNoX3N0YXJ0JywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWV1ZS5pc0VtcHR5KCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBxdWV1ZS5kaXNwYXRjaFNpbmdsZShjdHgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgcXVldWUuZGlzcGF0Y2goY3R4KV07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FsbGJhY2spKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW52b2tlQ2FsbGJhY2soZGlzcGF0Y2hlZCwgb3B0aW9ucy5jYWxsYmFjaywgZ2V0RGVsYXkoc3RhcnRUaW1lLCBvcHRpb25zLnRpbWVvdXQpKV07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRpc3BhdGNoZWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/callback/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeCallback: () => (/* binding */ invokeCallback),\n/* harmony export */   pTimeout: () => (/* binding */ pTimeout),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction pTimeout(promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var timeoutId = setTimeout(function () {\n            reject(Error('Promise timed out'));\n        }, timeout);\n        promise\n            .then(function (val) {\n            clearTimeout(timeoutId);\n            return resolve(val);\n        })\n            .catch(reject);\n    });\n}\nfunction sleep(timeoutInMs) {\n    return new Promise(function (resolve) { return setTimeout(resolve, timeoutInMs); });\n}\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nfunction invokeCallback(ctx, callback, delay) {\n    var cb = function () {\n        try {\n            return Promise.resolve(callback(ctx));\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    };\n    return (sleep(delay)\n        // pTimeout ensures that the callback can't cause the context to hang\n        .then(function () { return pTimeout(cb(), 1000); })\n        .catch(function (err) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.log('warn', 'Callback Error', { error: err });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stats.increment('callback_error');\n    })\n        .then(function () { return ctx; }));\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQLDRDQUE0QywwQ0FBMEM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQSxzRkFBc0YsWUFBWTtBQUNsRztBQUNBLEtBQUs7QUFDTCw0QkFBNEIsYUFBYTtBQUN6QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanM/NTdiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcFRpbWVvdXQocHJvbWlzZSwgdGltZW91dCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdChFcnJvcignUHJvbWlzZSB0aW1lZCBvdXQnKSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzbGVlcCh0aW1lb3V0SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5Ncyk7IH0pO1xufVxuLyoqXG4gKiBAcGFyYW0gY3R4XG4gKiBAcGFyYW0gY2FsbGJhY2sgLSB0aGUgZnVuY3Rpb24gdG8gaW52b2tlXG4gKiBAcGFyYW0gZGVsYXkgLSBha2EgXCJ0aW1lb3V0XCIuIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtcyB0byB3YWl0IGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhjdHgsIGNhbGxiYWNrLCBkZWxheSkge1xuICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FsbGJhY2soY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoc2xlZXAoZGVsYXkpXG4gICAgICAgIC8vIHBUaW1lb3V0IGVuc3VyZXMgdGhhdCB0aGUgY2FsbGJhY2sgY2FuJ3QgY2F1c2UgdGhlIGNvbnRleHQgdG8gaGFuZ1xuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBwVGltZW91dChjYigpLCAxMDAwKTsgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LmxvZygnd2FybicsICdDYWxsYmFjayBFcnJvcicsIHsgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LnN0YXRzLmluY3JlbWVudCgnY2FsbGJhY2tfZXJyb3InKTtcbiAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBjdHg7IH0pKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/context/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextCancelation: () => (/* binding */ ContextCancelation),\n/* harmony export */   CoreContext: () => (/* binding */ CoreContext)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(rsc)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../logger */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stats */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n\n\n\n\nvar ContextCancelation = /** @class */ (function () {\n    function ContextCancelation(options) {\n        var _a, _b, _c;\n        this.retry = (_a = options.retry) !== null && _a !== void 0 ? _a : true;\n        this.type = (_b = options.type) !== null && _b !== void 0 ? _b : 'plugin Error';\n        this.reason = (_c = options.reason) !== null && _c !== void 0 ? _c : '';\n    }\n    return ContextCancelation;\n}());\n\nvar CoreContext = /** @class */ (function () {\n    function CoreContext(event, id, stats, logger) {\n        if (id === void 0) { id = (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(); }\n        if (stats === void 0) { stats = new _stats__WEBPACK_IMPORTED_MODULE_2__.NullStats(); }\n        if (logger === void 0) { logger = new _logger__WEBPACK_IMPORTED_MODULE_3__.CoreLogger(); }\n        this.attempts = 0;\n        this.event = event;\n        this._id = id;\n        this.logger = logger;\n        this.stats = stats;\n    }\n    CoreContext.system = function () {\n        // This should be overridden by the subclass to return an instance of the subclass.\n    };\n    CoreContext.prototype.isSame = function (other) {\n        return other.id === this.id;\n    };\n    CoreContext.prototype.cancel = function (error) {\n        if (error) {\n            throw error;\n        }\n        throw new ContextCancelation({ reason: 'Context Cancel' });\n    };\n    CoreContext.prototype.log = function (level, message, extras) {\n        this.logger.log(level, message, extras);\n    };\n    Object.defineProperty(CoreContext.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreContext.prototype.updateEvent = function (path, val) {\n        var _a;\n        // Don't allow integrations that are set to false to be overwritten with integration settings.\n        if (path.split('.')[0] === 'integrations') {\n            var integrationName = path.split('.')[1];\n            if (((_a = this.event.integrations) === null || _a === void 0 ? void 0 : _a[integrationName]) === false) {\n                return this.event;\n            }\n        }\n        (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(this.event, path, val);\n        return this.event;\n    };\n    CoreContext.prototype.failedDelivery = function () {\n        return this._failedDelivery;\n    };\n    CoreContext.prototype.setFailedDelivery = function (options) {\n        this._failedDelivery = options;\n    };\n    CoreContext.prototype.logs = function () {\n        return this.logger.logs;\n    };\n    CoreContext.prototype.flush = function () {\n        this.logger.flush();\n        this.stats.flush();\n    };\n    CoreContext.prototype.toJSON = function () {\n        return {\n            id: this._id,\n            event: this.event,\n            logs: this.logger.logs,\n            metrics: this.stats.metrics,\n        };\n    };\n    return CoreContext;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFDZDtBQUNXO0FBQ0Y7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNkI7QUFDOUI7QUFDQTtBQUNBLDZCQUE2QixLQUFLLGdEQUFJO0FBQ3RDLGdDQUFnQyxZQUFZLDZDQUFTO0FBQ3JELGlDQUFpQyxhQUFhLCtDQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBCQUEwQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3NCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcz8yOTc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuaW1wb3J0IHsgZHNldCB9IGZyb20gJ2RzZXQnO1xuaW1wb3J0IHsgQ29yZUxvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBOdWxsU3RhdHMgfSBmcm9tICcuLi9zdGF0cyc7XG52YXIgQ29udGV4dENhbmNlbGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRleHRDYW5jZWxhdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnJldHJ5ID0gKF9hID0gb3B0aW9ucy5yZXRyeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZTtcbiAgICAgICAgdGhpcy50eXBlID0gKF9iID0gb3B0aW9ucy50eXBlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAncGx1Z2luIEVycm9yJztcbiAgICAgICAgdGhpcy5yZWFzb24gPSAoX2MgPSBvcHRpb25zLnJlYXNvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgfVxuICAgIHJldHVybiBDb250ZXh0Q2FuY2VsYXRpb247XG59KCkpO1xuZXhwb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH07XG52YXIgQ29yZUNvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUNvbnRleHQoZXZlbnQsIGlkLCBzdGF0cywgbG9nZ2VyKSB7XG4gICAgICAgIGlmIChpZCA9PT0gdm9pZCAwKSB7IGlkID0gdXVpZCgpOyB9XG4gICAgICAgIGlmIChzdGF0cyA9PT0gdm9pZCAwKSB7IHN0YXRzID0gbmV3IE51bGxTdGF0cygpOyB9XG4gICAgICAgIGlmIChsb2dnZXIgPT09IHZvaWQgMCkgeyBsb2dnZXIgPSBuZXcgQ29yZUxvZ2dlcigpOyB9XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLnN0YXRzID0gc3RhdHM7XG4gICAgfVxuICAgIENvcmVDb250ZXh0LnN5c3RlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSB0aGUgc3ViY2xhc3MgdG8gcmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzdWJjbGFzcy5cbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5pc1NhbWUgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLmlkID09PSB0aGlzLmlkO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oeyByZWFzb246ICdDb250ZXh0IENhbmNlbCcgfSk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvcmVDb250ZXh0LnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnVwZGF0ZUV2ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZhbCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIERvbid0IGFsbG93IGludGVncmF0aW9ucyB0aGF0IGFyZSBzZXQgdG8gZmFsc2UgdG8gYmUgb3ZlcndyaXR0ZW4gd2l0aCBpbnRlZ3JhdGlvbiBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHBhdGguc3BsaXQoJy4nKVswXSA9PT0gJ2ludGVncmF0aW9ucycpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbk5hbWUgPSBwYXRoLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbaW50ZWdyYXRpb25OYW1lXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZHNldCh0aGlzLmV2ZW50LCBwYXRoLCB2YWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudDtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5mYWlsZWREZWxpdmVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhaWxlZERlbGl2ZXJ5O1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnNldEZhaWxlZERlbGl2ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZmFpbGVkRGVsaXZlcnkgPSBvcHRpb25zO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmxvZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dlci5sb2dzO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5mbHVzaCgpO1xuICAgICAgICB0aGlzLnN0YXRzLmZsdXNoKCk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgICAgICBsb2dzOiB0aGlzLmxvZ2dlci5sb2dzLFxuICAgICAgICAgICAgbWV0cmljczogdGhpcy5zdGF0cy5tZXRyaWNzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVDb250ZXh0O1xufSgpKTtcbmV4cG9ydCB7IENvcmVDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/events/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventFactory: () => (/* binding */ CoreEventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dset */ \"(rsc)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _utils_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/pick */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\");\n/* harmony import */ var _validation_assertions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validation/assertions */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n\n\n\n\n\n/**\n * Internal settings object that is used internally by the factory\n */\nvar InternalEventFactorySettings = /** @class */ (function () {\n    function InternalEventFactorySettings(settings) {\n        var _a, _b;\n        this.settings = settings;\n        this.createMessageId = settings.createMessageId;\n        this.onEventMethodCall = (_a = settings.onEventMethodCall) !== null && _a !== void 0 ? _a : (function () { });\n        this.onFinishedEvent = (_b = settings.onFinishedEvent) !== null && _b !== void 0 ? _b : (function () { });\n    }\n    return InternalEventFactorySettings;\n}());\nvar CoreEventFactory = /** @class */ (function () {\n    function CoreEventFactory(settings) {\n        this.settings = new InternalEventFactorySettings(settings);\n    }\n    CoreEventFactory.prototype.track = function (event, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'track', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { event: event, type: 'track', properties: properties !== null && properties !== void 0 ? properties : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations) }));\n    };\n    CoreEventFactory.prototype.page = function (category, page, properties, options, globalIntegrations) {\n        var _a;\n        this.settings.onEventMethodCall({ type: 'page', options: options });\n        var event = {\n            type: 'page',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n            event.properties = (_a = event.properties) !== null && _a !== void 0 ? _a : {};\n            event.properties.category = category;\n        }\n        if (page !== null) {\n            event.name = page;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'screen', options: options });\n        var event = {\n            type: 'screen',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n        }\n        if (screen !== null) {\n            event.name = screen;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.identify = function (userId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'identify', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'identify', userId: userId, traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: globalIntegrations }));\n    };\n    CoreEventFactory.prototype.group = function (groupId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'group', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'group', traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations), //\n            groupId: groupId }));\n    };\n    CoreEventFactory.prototype.alias = function (to, from, // TODO: can we make this undefined?\n    options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'alias', options: options });\n        var base = {\n            userId: to,\n            type: 'alias',\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (from !== null) {\n            base.previousId = from;\n        }\n        if (to === undefined) {\n            return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, base), this.baseEvent()));\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), base));\n    };\n    CoreEventFactory.prototype.baseEvent = function () {\n        return {\n            integrations: {},\n            options: {},\n        };\n    };\n    /**\n     * Builds the context part of an event based on \"foreign\" keys that\n     * are provided in the `Options` parameter for an Event\n     */\n    CoreEventFactory.prototype.context = function (options) {\n        var _a;\n        /**\n         * If the event options are known keys from this list, we move them to the top level of the event.\n         * Any other options are moved to context.\n         */\n        var eventOverrideKeys = [\n            'userId',\n            'anonymousId',\n            'timestamp',\n            'messageId',\n        ];\n        delete options['integrations'];\n        var providedOptionsKeys = Object.keys(options);\n        var context = (_a = options.context) !== null && _a !== void 0 ? _a : {};\n        var eventOverrides = {};\n        providedOptionsKeys.forEach(function (key) {\n            if (key === 'context') {\n                return;\n            }\n            if (eventOverrideKeys.includes(key)) {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(eventOverrides, key, options[key]);\n            }\n            else {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(context, key, options[key]);\n            }\n        });\n        return [context, eventOverrides];\n    };\n    CoreEventFactory.prototype.normalize = function (event) {\n        var _a, _b;\n        var integrationBooleans = Object.keys((_a = event.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (integrationNames, name) {\n            var _a;\n            var _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationNames), (_a = {}, _a[name] = Boolean((_b = event.integrations) === null || _b === void 0 ? void 0 : _b[name]), _a));\n        }, {});\n        // filter out any undefined options\n        event.options = (0,_utils_pick__WEBPACK_IMPORTED_MODULE_2__.pickBy)(event.options || {}, function (_, value) {\n            return value !== undefined;\n        });\n        // This is pretty trippy, but here's what's going on:\n        // - a) We don't pass initial integration options as part of the event, only if they're true or false\n        // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n        // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n        var allIntegrations = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationBooleans), (_b = event.options) === null || _b === void 0 ? void 0 : _b.integrations);\n        var _c = event.options\n            ? this.context(event.options)\n            : [], context = _c[0], overrides = _c[1];\n        var options = event.options, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__rest)(event, [\"options\"]);\n        var evt = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ timestamp: new Date() }, rest), { context: context, integrations: allIntegrations }), overrides), { messageId: options.messageId || this.settings.createMessageId() });\n        this.settings.onFinishedEvent(evt);\n        (0,_validation_assertions__WEBPACK_IMPORTED_MODULE_3__.validateEvent)(evt);\n        return evt;\n    };\n    return CoreEventFactory;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ1o7QUFDRDtBQUNXO0FBQ2tCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvSEFBb0g7QUFDcEgsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0UsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyx1QkFBdUIsdUdBQXVHLFdBQVcsK0NBQVEsR0FBRywwQkFBMEIsK0NBQVEsR0FBRyx1QkFBdUI7QUFDbFE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdDQUFnQztBQUMxRTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUNsRDtBQUNBO0FBQ0EsMENBQTBDLGtDQUFrQztBQUM1RTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQSwwQ0FBMEMsb0NBQW9DO0FBQzlFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLDRGQUE0RixXQUFXLCtDQUFRLEdBQUcsOENBQThDO0FBQ3pPO0FBQ0E7QUFDQSwwQ0FBMEMsaUNBQWlDO0FBQzNFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLHlFQUF5RSxXQUFXLCtDQUFRLEdBQUcsMEJBQTBCLCtDQUFRLEdBQUc7QUFDN00sOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDdEQ7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qix1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkc7QUFDM0c7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCO0FBQ3BFLFNBQVMsSUFBSTtBQUNiO0FBQ0Esd0JBQXdCLG1EQUFNLG9CQUFvQjtBQUNsRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDZDQUFNO0FBQ2xELGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLHVCQUF1QixXQUFXLGlEQUFpRCxpQkFBaUIsaUVBQWlFO0FBQzdOO0FBQ0EsUUFBUSxxRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzPzgxM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IGRzZXQgfSBmcm9tICdkc2V0JztcbmltcG9ydCB7IHBpY2tCeSB9IGZyb20gJy4uL3V0aWxzL3BpY2snO1xuaW1wb3J0IHsgdmFsaWRhdGVFdmVudCB9IGZyb20gJy4uL3ZhbGlkYXRpb24vYXNzZXJ0aW9ucyc7XG4vKipcbiAqIEludGVybmFsIHNldHRpbmdzIG9iamVjdCB0aGF0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgZmFjdG9yeVxuICovXG52YXIgSW50ZXJuYWxFdmVudEZhY3RvcnlTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlcm5hbEV2ZW50RmFjdG9yeVNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNzYWdlSWQgPSBzZXR0aW5ncy5jcmVhdGVNZXNzYWdlSWQ7XG4gICAgICAgIHRoaXMub25FdmVudE1ldGhvZENhbGwgPSAoX2EgPSBzZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub25GaW5pc2hlZEV2ZW50ID0gKF9iID0gc2V0dGluZ3Mub25GaW5pc2hlZEV2ZW50KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoZnVuY3Rpb24gKCkgeyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3M7XG59KCkpO1xudmFyIENvcmVFdmVudEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50RmFjdG9yeShzZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gbmV3IEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChldmVudCwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAndHJhY2snLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCB7IGV2ZW50OiBldmVudCwgdHlwZTogJ3RyYWNrJywgcHJvcGVydGllczogcHJvcGVydGllcyAhPT0gbnVsbCAmJiBwcm9wZXJ0aWVzICE9PSB2b2lkIDAgPyBwcm9wZXJ0aWVzIDoge30sIG9wdGlvbnM6IF9fYXNzaWduKHt9LCBvcHRpb25zKSwgaW50ZWdyYXRpb25zOiBfX2Fzc2lnbih7fSwgZ2xvYmFsSW50ZWdyYXRpb25zKSB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ3BhZ2UnLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICB2YXIgZXZlbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiAncGFnZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gKF9hID0gZXZlbnQucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50Lm5hbWUgPSBwYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGV2ZW50KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5zY3JlZW4gPSBmdW5jdGlvbiAoY2F0ZWdvcnksIHNjcmVlbiwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAnc2NyZWVuJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NjcmVlbicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjcmVlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXZlbnQubmFtZSA9IHNjcmVlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCBldmVudCkpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAodXNlcklkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2lkZW50aWZ5Jywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnaWRlbnRpZnknLCB1c2VySWQ6IHVzZXJJZCwgdHJhaXRzOiB0cmFpdHMgIT09IG51bGwgJiYgdHJhaXRzICE9PSB2b2lkIDAgPyB0cmFpdHMgOiB7fSwgb3B0aW9uczogX19hc3NpZ24oe30sIG9wdGlvbnMpLCBpbnRlZ3JhdGlvbnM6IGdsb2JhbEludGVncmF0aW9ucyB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uIChncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2dyb3VwJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnZ3JvdXAnLCB0cmFpdHM6IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucyksIC8vXG4gICAgICAgICAgICBncm91cElkOiBncm91cElkIH0pKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKHRvLCBmcm9tLCAvLyBUT0RPOiBjYW4gd2UgbWFrZSB0aGlzIHVuZGVmaW5lZD9cbiAgICBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCh7IHR5cGU6ICdhbGlhcycsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG4gICAgICAgIHZhciBiYXNlID0ge1xuICAgICAgICAgICAgdXNlcklkOiB0byxcbiAgICAgICAgICAgIHR5cGU6ICdhbGlhcycsXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYmFzZS5wcmV2aW91c0lkID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlKSwgdGhpcy5iYXNlRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGJhc2UpKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmJhc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVncmF0aW9uczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgY29udGV4dCBwYXJ0IG9mIGFuIGV2ZW50IGJhc2VkIG9uIFwiZm9yZWlnblwiIGtleXMgdGhhdFxuICAgICAqIGFyZSBwcm92aWRlZCBpbiB0aGUgYE9wdGlvbnNgIHBhcmFtZXRlciBmb3IgYW4gRXZlbnRcbiAgICAgKi9cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5jb250ZXh0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGV2ZW50IG9wdGlvbnMgYXJlIGtub3duIGtleXMgZnJvbSB0aGlzIGxpc3QsIHdlIG1vdmUgdGhlbSB0byB0aGUgdG9wIGxldmVsIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQW55IG90aGVyIG9wdGlvbnMgYXJlIG1vdmVkIHRvIGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZXZlbnRPdmVycmlkZUtleXMgPSBbXG4gICAgICAgICAgICAndXNlcklkJyxcbiAgICAgICAgICAgICdhbm9ueW1vdXNJZCcsXG4gICAgICAgICAgICAndGltZXN0YW1wJyxcbiAgICAgICAgICAgICdtZXNzYWdlSWQnLFxuICAgICAgICBdO1xuICAgICAgICBkZWxldGUgb3B0aW9uc1snaW50ZWdyYXRpb25zJ107XG4gICAgICAgIHZhciBwcm92aWRlZE9wdGlvbnNLZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gKF9hID0gb3B0aW9ucy5jb250ZXh0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgdmFyIGV2ZW50T3ZlcnJpZGVzID0ge307XG4gICAgICAgIHByb3ZpZGVkT3B0aW9uc0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnY29udGV4dCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnRPdmVycmlkZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGRzZXQoZXZlbnRPdmVycmlkZXMsIGtleSwgb3B0aW9uc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzZXQoY29udGV4dCwga2V5LCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtjb250ZXh0LCBldmVudE92ZXJyaWRlc107XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGludGVncmF0aW9uQm9vbGVhbnMgPSBPYmplY3Qua2V5cygoX2EgPSBldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5yZWR1Y2UoZnVuY3Rpb24gKGludGVncmF0aW9uTmFtZXMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25OYW1lcyksIChfYSA9IHt9LCBfYVtuYW1lXSA9IEJvb2xlYW4oKF9iID0gZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbbmFtZV0pLCBfYSkpO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGZpbHRlciBvdXQgYW55IHVuZGVmaW5lZCBvcHRpb25zXG4gICAgICAgIGV2ZW50Lm9wdGlvbnMgPSBwaWNrQnkoZXZlbnQub3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJldHR5IHRyaXBweSwgYnV0IGhlcmUncyB3aGF0J3MgZ29pbmcgb246XG4gICAgICAgIC8vIC0gYSkgV2UgZG9uJ3QgcGFzcyBpbml0aWFsIGludGVncmF0aW9uIG9wdGlvbnMgYXMgcGFydCBvZiB0aGUgZXZlbnQsIG9ubHkgaWYgdGhleSdyZSB0cnVlIG9yIGZhbHNlXG4gICAgICAgIC8vIC0gYikgV2UgZG8gYWNjZXB0IHBlciBpbnRlZ3JhdGlvbiBvdmVycmlkZXMgKGxpa2UgaW50ZWdyYXRpb25zLkFtcGxpdHVkZS5zZXNzaW9uSWQpIGF0IHRoZSBldmVudCBsZXZlbFxuICAgICAgICAvLyBIZW5jZSB0aGUgbmVlZCB0byBjb252ZXJ0IGJhc2UgaW50ZWdyYXRpb24gb3B0aW9ucyB0byBib29sZWFucywgYnV0IG1haW50YWluIHBlciBldmVudCBpbnRlZ3JhdGlvbiBvdmVycmlkZXNcbiAgICAgICAgdmFyIGFsbEludGVncmF0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbkJvb2xlYW5zKSwgKF9iID0gZXZlbnQub3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmludGVncmF0aW9ucyk7XG4gICAgICAgIHZhciBfYyA9IGV2ZW50Lm9wdGlvbnNcbiAgICAgICAgICAgID8gdGhpcy5jb250ZXh0KGV2ZW50Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IFtdLCBjb250ZXh0ID0gX2NbMF0sIG92ZXJyaWRlcyA9IF9jWzFdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGV2ZW50Lm9wdGlvbnMsIHJlc3QgPSBfX3Jlc3QoZXZlbnQsIFtcIm9wdGlvbnNcIl0pO1xuICAgICAgICB2YXIgZXZ0ID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSwgcmVzdCksIHsgY29udGV4dDogY29udGV4dCwgaW50ZWdyYXRpb25zOiBhbGxJbnRlZ3JhdGlvbnMgfSksIG92ZXJyaWRlcyksIHsgbWVzc2FnZUlkOiBvcHRpb25zLm1lc3NhZ2VJZCB8fCB0aGlzLnNldHRpbmdzLmNyZWF0ZU1lc3NhZ2VJZCgpIH0pO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRmluaXNoZWRFdmVudChldnQpO1xuICAgICAgICB2YWxpZGF0ZUV2ZW50KGV2dCk7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUV2ZW50RmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBDb3JlRXZlbnRGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/logger/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreLogger: () => (/* binding */ CoreLogger)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar CoreLogger = /** @class */ (function () {\n    function CoreLogger() {\n        this._logs = [];\n    }\n    CoreLogger.prototype.log = function (level, message, extras) {\n        var time = new Date();\n        this._logs.push({\n            level: level,\n            message: message,\n            time: time,\n            extras: extras,\n        });\n    };\n    Object.defineProperty(CoreLogger.prototype, \"logs\", {\n        get: function () {\n            return this._logs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreLogger.prototype.flush = function () {\n        if (this.logs.length > 1) {\n            var formatted = this._logs.reduce(function (logs, log) {\n                var _a;\n                var _b, _c;\n                var line = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, log), { json: JSON.stringify(log.extras, null, ' '), extras: log.extras });\n                delete line['time'];\n                var key = (_c = (_b = log.time) === null || _b === void 0 ? void 0 : _b.toISOString()) !== null && _c !== void 0 ? _c : '';\n                if (logs[key]) {\n                    key = \"\".concat(key, \"-\").concat(Math.random());\n                }\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, logs), (_a = {}, _a[key] = line, _a));\n            }, {});\n            // ie doesn't like console.table\n            if (console.table) {\n                console.table(formatted);\n            }\n            else {\n                console.log(formatted);\n            }\n        }\n        else {\n            this.logs.forEach(function (logEntry) {\n                var level = logEntry.level, message = logEntry.message, extras = logEntry.extras;\n                if (level === 'info' || level === 'debug') {\n                    console.log(message, extras !== null && extras !== void 0 ? extras : '');\n                }\n                else {\n                    console[level](message, extras !== null && extras !== void 0 ? extras : '');\n                }\n            });\n        }\n        this._logs = [];\n    };\n    return CoreLogger;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxVQUFVLGlFQUFpRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxpQkFBaUI7QUFDNUQsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3FCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzP2QxMzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbnZhciBDb3JlTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVMb2dnZXIoKSB7XG4gICAgICAgIHRoaXMuX2xvZ3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZUxvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLl9sb2dzLnB1c2goe1xuICAgICAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICBleHRyYXM6IGV4dHJhcyxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29yZUxvZ2dlci5wcm90b3R5cGUsIFwibG9nc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb3JlTG9nZ2VyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5fbG9ncy5yZWR1Y2UoZnVuY3Rpb24gKGxvZ3MsIGxvZykge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvZyksIHsganNvbjogSlNPTi5zdHJpbmdpZnkobG9nLmV4dHJhcywgbnVsbCwgJyAnKSwgZXh0cmFzOiBsb2cuZXh0cmFzIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsaW5lWyd0aW1lJ107XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IChfYyA9IChfYiA9IGxvZy50aW1lKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9JU09TdHJpbmcoKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgICAgICAgICAgICAgaWYgKGxvZ3Nba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlwiLmNvbmNhdChrZXksIFwiLVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG9ncyksIChfYSA9IHt9LCBfYVtrZXldID0gbGluZSwgX2EpKTtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIC8vIGllIGRvZXNuJ3QgbGlrZSBjb25zb2xlLnRhYmxlXG4gICAgICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUudGFibGUoZm9ybWF0dGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuZm9yRWFjaChmdW5jdGlvbiAobG9nRW50cnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSBsb2dFbnRyeS5sZXZlbCwgbWVzc2FnZSA9IGxvZ0VudHJ5Lm1lc3NhZ2UsIGV4dHJhcyA9IGxvZ0VudHJ5LmV4dHJhcztcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT09ICdpbmZvJyB8fCBsZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlW2xldmVsXShtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9ncyA9IFtdO1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVMb2dnZXI7XG59KCkpO1xuZXhwb3J0IHsgQ29yZUxvZ2dlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backoff: () => (/* binding */ backoff)\n/* harmony export */ });\nfunction backoff(params) {\n    var random = Math.random() + 1;\n    var _a = params.minTimeout, minTimeout = _a === void 0 ? 500 : _a, _b = params.factor, factor = _b === void 0 ? 2 : _b, attempt = params.attempt, _c = params.maxTimeout, maxTimeout = _c === void 0 ? Infinity : _c;\n    return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout);\n}\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcz9iMzk2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBiYWNrb2ZmKHBhcmFtcykge1xuICAgIHZhciByYW5kb20gPSBNYXRoLnJhbmRvbSgpICsgMTtcbiAgICB2YXIgX2EgPSBwYXJhbXMubWluVGltZW91dCwgbWluVGltZW91dCA9IF9hID09PSB2b2lkIDAgPyA1MDAgOiBfYSwgX2IgPSBwYXJhbXMuZmFjdG9yLCBmYWN0b3IgPSBfYiA9PT0gdm9pZCAwID8gMiA6IF9iLCBhdHRlbXB0ID0gcGFyYW1zLmF0dGVtcHQsIF9jID0gcGFyYW1zLm1heFRpbWVvdXQsIG1heFRpbWVvdXQgPSBfYyA9PT0gdm9pZCAwID8gSW5maW5pdHkgOiBfYztcbiAgICByZXR1cm4gTWF0aC5taW4ocmFuZG9tICogbWluVGltZW91dCAqIE1hdGgucG93KGZhY3RvciwgYXR0ZW1wdCksIG1heFRpbWVvdXQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFja29mZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ON_REMOVE_FROM_FUTURE: () => (/* binding */ ON_REMOVE_FROM_FUTURE),\n/* harmony export */   PriorityQueue: () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n\n\n\n/**\n * @internal\n */\nvar ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture';\nvar PriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(PriorityQueue, _super);\n    function PriorityQueue(maxAttempts, queue, seen) {\n        var _this = _super.call(this) || this;\n        _this.future = [];\n        _this.maxAttempts = maxAttempts;\n        _this.queue = queue;\n        _this.seen = seen !== null && seen !== void 0 ? seen : {};\n        return _this;\n    }\n    PriorityQueue.prototype.push = function () {\n        var _this = this;\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var accepted = items.map(function (operation) {\n            var attempts = _this.updateAttempts(operation);\n            if (attempts > _this.maxAttempts || _this.includes(operation)) {\n                return false;\n            }\n            _this.queue.push(operation);\n            return true;\n        });\n        this.queue = this.queue.sort(function (a, b) { return _this.getAttempts(a) - _this.getAttempts(b); });\n        return accepted;\n    };\n    PriorityQueue.prototype.pushWithBackoff = function (item, minTimeout) {\n        var _this = this;\n        if (minTimeout === void 0) { minTimeout = 0; }\n        // One immediate retry unless we have a minimum timeout (e.g. for rate limiting)\n        if (minTimeout == 0 && this.getAttempts(item) === 0) {\n            return this.push(item)[0];\n        }\n        var attempt = this.updateAttempts(item);\n        if (attempt > this.maxAttempts || this.includes(item)) {\n            return false;\n        }\n        var timeout = (0,_backoff__WEBPACK_IMPORTED_MODULE_1__.backoff)({ attempt: attempt - 1 });\n        if (minTimeout > 0 && timeout < minTimeout) {\n            timeout = minTimeout;\n        }\n        setTimeout(function () {\n            _this.queue.push(item);\n            // remove from future list\n            _this.future = _this.future.filter(function (f) { return f.id !== item.id; });\n            // Lets listeners know that a 'future' message is now available in the queue\n            _this.emit(ON_REMOVE_FROM_FUTURE);\n        }, timeout);\n        this.future.push(item);\n        return true;\n    };\n    PriorityQueue.prototype.getAttempts = function (item) {\n        var _a;\n        return (_a = this.seen[item.id]) !== null && _a !== void 0 ? _a : 0;\n    };\n    PriorityQueue.prototype.updateAttempts = function (item) {\n        this.seen[item.id] = this.getAttempts(item) + 1;\n        return this.getAttempts(item);\n    };\n    PriorityQueue.prototype.includes = function (item) {\n        return (this.queue.includes(item) ||\n            this.future.includes(item) ||\n            Boolean(this.queue.find(function (i) { return i.id === item.id; })) ||\n            Boolean(this.future.find(function (i) { return i.id === item.id; })));\n    };\n    PriorityQueue.prototype.pop = function () {\n        return this.queue.shift();\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"length\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"todo\", {\n        get: function () {\n            return this.queue.length + this.future.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PriorityQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__.Emitter));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDeUI7QUFDdkI7QUFDcEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdURBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFPLEdBQUcsc0JBQXNCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwwQkFBMEI7QUFDeEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RSxvREFBb0QsMEJBQTBCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDLENBQUMscUVBQU87QUFDZ0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9wcmlvcml0eS1xdWV1ZS9pbmRleC5qcz9hMGVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGJhY2tvZmYgfSBmcm9tICcuL2JhY2tvZmYnO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBPTl9SRU1PVkVfRlJPTV9GVVRVUkUgPSAnb25SZW1vdmVGcm9tRnV0dXJlJztcbnZhciBQcmlvcml0eVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcmlvcml0eVF1ZXVlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIHF1ZXVlLCBzZWVuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZ1dHVyZSA9IFtdO1xuICAgICAgICBfdGhpcy5tYXhBdHRlbXB0cyA9IG1heEF0dGVtcHRzO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBfdGhpcy5zZWVuID0gc2VlbiAhPT0gbnVsbCAmJiBzZWVuICE9PSB2b2lkIDAgPyBzZWVuIDoge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBpdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhY2NlcHRlZCA9IGl0ZW1zLm1hcChmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBfdGhpcy51cGRhdGVBdHRlbXB0cyhvcGVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKGF0dGVtcHRzID4gX3RoaXMubWF4QXR0ZW1wdHMgfHwgX3RoaXMuaW5jbHVkZXMob3BlcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gX3RoaXMuZ2V0QXR0ZW1wdHMoYSkgLSBfdGhpcy5nZXRBdHRlbXB0cyhiKTsgfSk7XG4gICAgICAgIHJldHVybiBhY2NlcHRlZDtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnB1c2hXaXRoQmFja29mZiA9IGZ1bmN0aW9uIChpdGVtLCBtaW5UaW1lb3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChtaW5UaW1lb3V0ID09PSB2b2lkIDApIHsgbWluVGltZW91dCA9IDA7IH1cbiAgICAgICAgLy8gT25lIGltbWVkaWF0ZSByZXRyeSB1bmxlc3Mgd2UgaGF2ZSBhIG1pbmltdW0gdGltZW91dCAoZS5nLiBmb3IgcmF0ZSBsaW1pdGluZylcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPT0gMCAmJiB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGl0ZW0pWzBdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRlbXB0ID0gdGhpcy51cGRhdGVBdHRlbXB0cyhpdGVtKTtcbiAgICAgICAgaWYgKGF0dGVtcHQgPiB0aGlzLm1heEF0dGVtcHRzIHx8IHRoaXMuaW5jbHVkZXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGltZW91dCA9IGJhY2tvZmYoeyBhdHRlbXB0OiBhdHRlbXB0IC0gMSB9KTtcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPiAwICYmIHRpbWVvdXQgPCBtaW5UaW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbWluVGltZW91dDtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBmdXR1cmUgbGlzdFxuICAgICAgICAgICAgX3RoaXMuZnV0dXJlID0gX3RoaXMuZnV0dXJlLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5pZCAhPT0gaXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAvLyBMZXRzIGxpc3RlbmVycyBrbm93IHRoYXQgYSAnZnV0dXJlJyBtZXNzYWdlIGlzIG5vdyBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICBfdGhpcy5lbWl0KE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmZ1dHVyZS5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldEF0dGVtcHRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zZWVuW2l0ZW0uaWRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUudXBkYXRlQXR0ZW1wdHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnNlZW5baXRlbS5pZF0gPSB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoaXRlbSk7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5xdWV1ZS5pbmNsdWRlcyhpdGVtKSB8fFxuICAgICAgICAgICAgdGhpcy5mdXR1cmUuaW5jbHVkZXMoaXRlbSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5xdWV1ZS5maW5kKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlkID09PSBpdGVtLmlkOyB9KSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5mdXR1cmUuZmluZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pZCA9PT0gaXRlbS5pZDsgfSkpKTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJ0b2RvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggKyB0aGlzLmZ1dHVyZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attempt: () => (/* binding */ attempt),\n/* harmony export */   ensure: () => (/* binding */ ensure)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n\n\nfunction tryAsync(fn) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, fn()];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, Promise.reject(err_1)];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction attempt(ctx, plugin) {\n    ctx.log('debug', 'plugin', { plugin: plugin.name });\n    var start = new Date().getTime();\n    var hook = plugin[ctx.event.type];\n    if (hook === undefined) {\n        return Promise.resolve(ctx);\n    }\n    var newCtx = tryAsync(function () { return hook.apply(plugin, [ctx]); })\n        .then(function (ctx) {\n        var done = new Date().getTime() - start;\n        ctx.stats.gauge('plugin_time', done, [\"plugin:\".concat(plugin.name)]);\n        return ctx;\n    })\n        .catch(function (err) {\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation &&\n            err.type === 'middleware_cancellation') {\n            throw err;\n        }\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation) {\n            ctx.log('warn', err.type, {\n                plugin: plugin.name,\n                error: err,\n            });\n            return err;\n        }\n        ctx.log('error', 'plugin Error', {\n            plugin: plugin.name,\n            error: err,\n        });\n        ctx.stats.increment('plugin_error', 1, [\"plugin:\".concat(plugin.name)]);\n        return err;\n    });\n    return newCtx;\n}\nfunction ensure(ctx, plugin) {\n    return attempt(ctx, plugin).then(function (newContext) {\n        if (newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.CoreContext) {\n            return newContext;\n        }\n        ctx.log('debug', 'Context canceled');\n        ctx.stats.increment('context_canceled');\n        ctx.cancel(newContext);\n    });\n}\n//# sourceMappingURL=delivery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNjO0FBQzdEO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxpQ0FBaUMscUJBQXFCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUNBQW1DO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0MsaURBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanM/ZDFiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb3JlQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vY29udGV4dCc7XG5mdW5jdGlvbiB0cnlBc3luYyhmbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVycl8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdChlcnJfMSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRlbXB0KGN0eCwgcGx1Z2luKSB7XG4gICAgY3R4LmxvZygnZGVidWcnLCAncGx1Z2luJywgeyBwbHVnaW46IHBsdWdpbi5uYW1lIH0pO1xuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHZhciBob29rID0gcGx1Z2luW2N0eC5ldmVudC50eXBlXTtcbiAgICBpZiAoaG9vayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTtcbiAgICB9XG4gICAgdmFyIG5ld0N0eCA9IHRyeUFzeW5jKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhvb2suYXBwbHkocGx1Z2luLCBbY3R4XSk7IH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0O1xuICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ3BsdWdpbl90aW1lJywgZG9uZSwgW1wicGx1Z2luOlwiLmNvbmNhdChwbHVnaW4ubmFtZSldKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uICYmXG4gICAgICAgICAgICBlcnIudHlwZSA9PT0gJ21pZGRsZXdhcmVfY2FuY2VsbGF0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDb250ZXh0Q2FuY2VsYXRpb24pIHtcbiAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCBlcnIudHlwZSwge1xuICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdlcnJvcicsICdwbHVnaW4gRXJyb3InLCB7XG4gICAgICAgICAgICBwbHVnaW46IHBsdWdpbi5uYW1lLFxuICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ3BsdWdpbl9lcnJvcicsIDEsIFtcInBsdWdpbjpcIi5jb25jYXQocGx1Z2luLm5hbWUpXSk7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld0N0eDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmUoY3R4LCBwbHVnaW4pIHtcbiAgICByZXR1cm4gYXR0ZW1wdChjdHgsIHBsdWdpbikudGhlbihmdW5jdGlvbiAobmV3Q29udGV4dCkge1xuICAgICAgICBpZiAobmV3Q29udGV4dCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3Q29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdDb250ZXh0IGNhbmNlbGVkJyk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2NvbnRleHRfY2FuY2VsZWQnKTtcbiAgICAgICAgY3R4LmNhbmNlbChuZXdDb250ZXh0KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGl2ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventQueue: () => (/* binding */ CoreEventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _utils_group_by__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/group-by */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\");\n/* harmony import */ var _priority_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../priority-queue */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _task_task_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../task/task-group */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\");\n/* harmony import */ var _delivery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delivery */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n\n\n\n\n\n\n\nvar CoreEventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(CoreEventQueue, _super);\n    function CoreEventQueue(priorityQueue) {\n        var _this = _super.call(this) || this;\n        /**\n         * All event deliveries get suspended until all the tasks in this task group are complete.\n         * For example: a middleware that augments the event object should be loaded safely as a\n         * critical task, this way, event queue will wait for it to be ready before sending events.\n         *\n         * This applies to all the events already in the queue, and the upcoming ones\n         */\n        _this.criticalTasks = (0,_task_task_group__WEBPACK_IMPORTED_MODULE_1__.createTaskGroup)();\n        _this.plugins = [];\n        _this.failedInitializations = [];\n        _this.flushing = false;\n        _this.queue = priorityQueue;\n        _this.queue.on(_priority_queue__WEBPACK_IMPORTED_MODULE_2__.ON_REMOVE_FROM_FUTURE, function () {\n            _this.scheduleFlush(0);\n        });\n        return _this;\n    }\n    CoreEventQueue.prototype.register = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var handleLoadError, err_1;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.plugins.push(plugin);\n                        handleLoadError = function (err) {\n                            _this.failedInitializations.push(plugin.name);\n                            _this.emit('initialization_failure', plugin);\n                            console.warn(plugin.name, err);\n                            ctx.log('warn', 'Failed to load destination', {\n                                plugin: plugin.name,\n                                error: err,\n                            });\n                            // Filter out the failed plugin by excluding it from the list\n                            _this.plugins = _this.plugins.filter(function (p) { return p !== plugin; });\n                        };\n                        if (!(plugin.type === 'destination' && plugin.name !== 'Segment.io')) return [3 /*break*/, 1];\n                        plugin.load(ctx, instance).catch(handleLoadError);\n                        return [3 /*break*/, 4];\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, plugin.load(ctx, instance)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        handleLoadError(err_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.deregister = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var e_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        if (!plugin.unload) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.resolve(plugin.unload(ctx, instance))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.plugins = this.plugins.filter(function (p) { return p.name !== plugin.name; });\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        ctx.log('warn', 'Failed to unload destination', {\n                            plugin: plugin.name,\n                            error: e_1,\n                        });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatch = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var willDeliver;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.push(ctx);\n                willDeliver = this.subscribeToDelivery(ctx);\n                this.scheduleFlush(0);\n                return [2 /*return*/, willDeliver];\n            });\n        });\n    };\n    CoreEventQueue.prototype.subscribeToDelivery = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var onDeliver = function (flushed, delivered) {\n                            if (flushed.isSame(ctx)) {\n                                _this.off('flush', onDeliver);\n                                if (delivered) {\n                                    resolve(flushed);\n                                }\n                                else {\n                                    resolve(flushed);\n                                }\n                            }\n                        };\n                        _this.on('flush', onDeliver);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatchSingle = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.updateAttempts(ctx);\n                ctx.attempts = 1;\n                return [2 /*return*/, this.deliver(ctx).catch(function (err) {\n                        var accepted = _this.enqueuRetry(err, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err });\n                            return ctx;\n                        }\n                        return _this.subscribeToDelivery(ctx);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.isEmpty = function () {\n        return this.queue.length === 0;\n    };\n    CoreEventQueue.prototype.scheduleFlush = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 500; }\n        if (this.flushing) {\n            return;\n        }\n        this.flushing = true;\n        setTimeout(function () {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            _this.flush().then(function () {\n                setTimeout(function () {\n                    _this.flushing = false;\n                    if (_this.queue.length) {\n                        _this.scheduleFlush(0);\n                    }\n                }, 0);\n            });\n        }, timeout);\n    };\n    CoreEventQueue.prototype.deliver = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var start, done, err_2, error;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.criticalTasks.done()];\n                    case 1:\n                        _a.sent();\n                        start = Date.now();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.flushOne(ctx)];\n                    case 3:\n                        ctx = _a.sent();\n                        done = Date.now() - start;\n                        this.emit('delivery_success', ctx);\n                        ctx.stats.gauge('delivered', done);\n                        ctx.log('debug', 'Delivered', ctx.event);\n                        return [2 /*return*/, ctx];\n                    case 4:\n                        err_2 = _a.sent();\n                        error = err_2;\n                        ctx.log('error', 'Failed to deliver', error);\n                        this.emit('delivery_failure', ctx, error);\n                        ctx.stats.increment('delivery_failed');\n                        throw err_2;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.enqueuRetry = function (err, ctx) {\n        var retriable = !(err instanceof _context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation) || err.retry;\n        if (!retriable) {\n            return false;\n        }\n        return this.queue.pushWithBackoff(ctx);\n    };\n    CoreEventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, err_3, accepted;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length === 0) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx = this.queue.pop();\n                        if (!ctx) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx.attempts = this.queue.getAttempts(ctx);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.deliver(ctx)];\n                    case 2:\n                        ctx = _a.sent();\n                        this.emit('flush', ctx, true);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        accepted = this.enqueuRetry(err_3, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err_3 });\n                            this.emit('flush', ctx, false);\n                        }\n                        return [2 /*return*/, []];\n                    case 4: return [2 /*return*/, [ctx]];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.isReady = function () {\n        // return this.plugins.every((p) => p.isLoaded())\n        // should we wait for every plugin to load?\n        return true;\n    };\n    CoreEventQueue.prototype.availableExtensions = function (denyList) {\n        var available = this.plugins.filter(function (p) {\n            var _a, _b, _c;\n            // Only filter out destination plugins or the Segment.io plugin\n            if (p.type !== 'destination' && p.name !== 'Segment.io') {\n                return true;\n            }\n            var alternativeNameMatch = undefined;\n            (_a = p.alternativeNames) === null || _a === void 0 ? void 0 : _a.forEach(function (name) {\n                if (denyList[name] !== undefined) {\n                    alternativeNameMatch = denyList[name];\n                }\n            });\n            // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n            return ((_c = (_b = denyList[p.name]) !== null && _b !== void 0 ? _b : alternativeNameMatch) !== null && _c !== void 0 ? _c : (p.name === 'Segment.io' ? true : denyList.All) !== false);\n        });\n        var _a = (0,_utils_group_by__WEBPACK_IMPORTED_MODULE_4__.groupBy)(available, 'type'), _b = _a.before, before = _b === void 0 ? [] : _b, _c = _a.enrichment, enrichment = _c === void 0 ? [] : _c, _d = _a.destination, destination = _d === void 0 ? [] : _d, _e = _a.after, after = _e === void 0 ? [] : _e;\n        return {\n            before: before,\n            enrichment: enrichment,\n            destinations: destination,\n            after: after,\n        };\n    };\n    CoreEventQueue.prototype.flushOne = function (ctx) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _c, before, enrichment, _i, before_1, beforeWare, temp, _d, enrichment_1, enrichmentWare, temp, _e, destinations, after, afterCalls;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!this.isReady()) {\n                            throw new Error('Not ready');\n                        }\n                        if (ctx.attempts > 1) {\n                            this.emit('delivery_retry', ctx);\n                        }\n                        _c = this.availableExtensions((_a = ctx.event.integrations) !== null && _a !== void 0 ? _a : {}), before = _c.before, enrichment = _c.enrichment;\n                        _i = 0, before_1 = before;\n                        _f.label = 1;\n                    case 1:\n                        if (!(_i < before_1.length)) return [3 /*break*/, 4];\n                        beforeWare = before_1[_i];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.ensure)(ctx, beforeWare)];\n                    case 2:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, beforeWare);\n                        _f.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d = 0, enrichment_1 = enrichment;\n                        _f.label = 5;\n                    case 5:\n                        if (!(_d < enrichment_1.length)) return [3 /*break*/, 8];\n                        enrichmentWare = enrichment_1[_d];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, enrichmentWare)];\n                    case 6:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, enrichmentWare);\n                        _f.label = 7;\n                    case 7:\n                        _d++;\n                        return [3 /*break*/, 5];\n                    case 8:\n                        _e = this.availableExtensions((_b = ctx.event.integrations) !== null && _b !== void 0 ? _b : {}), destinations = _e.destinations, after = _e.after;\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    var attempts = destinations.map(function (destination) {\n                                        return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, destination);\n                                    });\n                                    Promise.all(attempts).then(resolve).catch(reject);\n                                }, 0);\n                            })];\n                    case 9:\n                        _f.sent();\n                        ctx.stats.increment('message_delivered');\n                        this.emit('message_delivered', ctx);\n                        afterCalls = after.map(function (after) { return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, after); });\n                        return [4 /*yield*/, Promise.all(afterCalls)];\n                    case 10:\n                        _f.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    return CoreEventQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.Emitter));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZXZlbnQtcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDZDtBQUNjO0FBQ0c7QUFDRjtBQUNOO0FBQ1I7QUFDN0M7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFxQjtBQUM1QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxnRkFBZ0Ysc0JBQXNCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsZ0NBQWdDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxhQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5Qyx3REFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQix3REFBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SEFBdUg7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBTTtBQUNuRDtBQUNBO0FBQ0EsNENBQTRDLGlEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtEQUFPO0FBQ3BEO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SDtBQUN2SDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0RBQU87QUFDdEQscUNBQXFDO0FBQ3JDO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxPQUFPLGtEQUFPLGVBQWU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMsQ0FBQyxxRUFBTztBQUNpQjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzPzRlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnLi4vdXRpbHMvZ3JvdXAtYnknO1xuaW1wb3J0IHsgT05fUkVNT1ZFX0ZST01fRlVUVVJFIH0gZnJvbSAnLi4vcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgQ29yZUNvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVRhc2tHcm91cCB9IGZyb20gJy4uL3Rhc2svdGFzay1ncm91cCc7XG5pbXBvcnQgeyBhdHRlbXB0LCBlbnN1cmUgfSBmcm9tICcuL2RlbGl2ZXJ5JztcbnZhciBDb3JlRXZlbnRRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29yZUV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGV2ZW50IGRlbGl2ZXJpZXMgZ2V0IHN1c3BlbmRlZCB1bnRpbCBhbGwgdGhlIHRhc2tzIGluIHRoaXMgdGFzayBncm91cCBhcmUgY29tcGxldGUuXG4gICAgICAgICAqIEZvciBleGFtcGxlOiBhIG1pZGRsZXdhcmUgdGhhdCBhdWdtZW50cyB0aGUgZXZlbnQgb2JqZWN0IHNob3VsZCBiZSBsb2FkZWQgc2FmZWx5IGFzIGFcbiAgICAgICAgICogY3JpdGljYWwgdGFzaywgdGhpcyB3YXksIGV2ZW50IHF1ZXVlIHdpbGwgd2FpdCBmb3IgaXQgdG8gYmUgcmVhZHkgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGFwcGxpZXMgdG8gYWxsIHRoZSBldmVudHMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIGFuZCB0aGUgdXBjb21pbmcgb25lc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3JpdGljYWxUYXNrcyA9IGNyZWF0ZVRhc2tHcm91cCgpO1xuICAgICAgICBfdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucyA9IFtdO1xuICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHByaW9yaXR5UXVldWU7XG4gICAgICAgIF90aGlzLnF1ZXVlLm9uKE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGN0eCwgcGx1Z2luLCBpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlTG9hZEVycm9yLCBlcnJfMTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucy5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KCdpbml0aWFsaXphdGlvbl9mYWlsdXJlJywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4ocGx1Z2luLm5hbWUsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnd2FybicsICdGYWlsZWQgdG8gbG9hZCBkZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IHRoZSBmYWlsZWQgcGx1Z2luIGJ5IGV4Y2x1ZGluZyBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGx1Z2lucyA9IF90aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSBwbHVnaW47IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsdWdpbi50eXBlID09PSAnZGVzdGluYXRpb24nICYmIHBsdWdpbi5uYW1lICE9PSAnU2VnbWVudC5pbycpKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpLmNhdGNoKGhhbmRsZUxvYWRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yKGVycl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVyZWdpc3RlciA9IGZ1bmN0aW9uIChjdHgsIHBsdWdpbiwgaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi51bmxvYWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5yZXNvbHZlKHBsdWdpbi51bmxvYWQoY3R4LCBpbnN0YW5jZSkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSB0aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgIT09IHBsdWdpbi5uYW1lOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgJ0ZhaWxlZCB0byB1bmxvYWQgZGVzdGluYXRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lsbERlbGl2ZXI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICB3aWxsRGVsaXZlciA9IHRoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2lsbERlbGl2ZXJdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnN1YnNjcmliZVRvRGVsaXZlcnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25EZWxpdmVyID0gZnVuY3Rpb24gKGZsdXNoZWQsIGRlbGl2ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbHVzaGVkLmlzU2FtZShjdHgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsaXZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZsdXNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbHVzaGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGlzcGF0Y2hTaW5nbGUgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnVwZGF0ZUF0dGVtcHRzKGN0eCk7XG4gICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5kZWxpdmVyKGN0eCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2VwdGVkID0gX3RoaXMuZW5xdWV1UmV0cnkoZXJyLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zZXRGYWlsZWREZWxpdmVyeSh7IHJlYXNvbjogZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoID09PSAwO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7IHRpbWVvdXQgPSA1MDA7IH1cbiAgICAgICAgaWYgKHRoaXMuZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgICAgICBfdGhpcy5mbHVzaCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY2hlZHVsZUZsdXNoKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVsaXZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0LCBkb25lLCBlcnJfMiwgZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY3JpdGljYWxUYXNrcy5kb25lKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZsdXNoT25lKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9zdWNjZXNzJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnZGVsaXZlcmVkJywgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdEZWxpdmVyZWQnLCBjdHguZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ0ZhaWxlZCB0byBkZWxpdmVyJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9mYWlsdXJlJywgY3R4LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdkZWxpdmVyeV9mYWlsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZW5xdWV1UmV0cnkgPSBmdW5jdGlvbiAoZXJyLCBjdHgpIHtcbiAgICAgICAgdmFyIHJldHJpYWJsZSA9ICEoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uKSB8fCBlcnIucmV0cnk7XG4gICAgICAgIGlmICghcmV0cmlhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUucHVzaFdpdGhCYWNrb2ZmKGN0eCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHgsIGVycl8zLCBhY2NlcHRlZDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLnF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gdGhpcy5xdWV1ZS5nZXRBdHRlbXB0cyhjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxpdmVyKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2ZsdXNoJywgY3R4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkID0gdGhpcy5lbnF1ZXVSZXRyeShlcnJfMywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb246IGVycl8zIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmx1c2gnLCBjdHgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtjdHhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMucGx1Z2lucy5ldmVyeSgocCkgPT4gcC5pc0xvYWRlZCgpKVxuICAgICAgICAvLyBzaG91bGQgd2Ugd2FpdCBmb3IgZXZlcnkgcGx1Z2luIHRvIGxvYWQ/XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmF2YWlsYWJsZUV4dGVuc2lvbnMgPSBmdW5jdGlvbiAoZGVueUxpc3QpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgLy8gT25seSBmaWx0ZXIgb3V0IGRlc3RpbmF0aW9uIHBsdWdpbnMgb3IgdGhlIFNlZ21lbnQuaW8gcGx1Z2luXG4gICAgICAgICAgICBpZiAocC50eXBlICE9PSAnZGVzdGluYXRpb24nICYmIHAubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAoX2EgPSBwLmFsdGVybmF0aXZlTmFtZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbnlMaXN0W25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSBkZW55TGlzdFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEV4cGxpY2l0IGludGVncmF0aW9uIG9wdGlvbiB0YWtlcyBwcmVjZWRlbmNlLCBgQWxsOiBmYWxzZWAgZG9lcyBub3QgYXBwbHkgdG8gU2VnbWVudC5pb1xuICAgICAgICAgICAgcmV0dXJuICgoX2MgPSAoX2IgPSBkZW55TGlzdFtwLm5hbWVdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBhbHRlcm5hdGl2ZU5hbWVNYXRjaCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogKHAubmFtZSA9PT0gJ1NlZ21lbnQuaW8nID8gdHJ1ZSA6IGRlbnlMaXN0LkFsbCkgIT09IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfYSA9IGdyb3VwQnkoYXZhaWxhYmxlLCAndHlwZScpLCBfYiA9IF9hLmJlZm9yZSwgYmVmb3JlID0gX2IgPT09IHZvaWQgMCA/IFtdIDogX2IsIF9jID0gX2EuZW5yaWNobWVudCwgZW5yaWNobWVudCA9IF9jID09PSB2b2lkIDAgPyBbXSA6IF9jLCBfZCA9IF9hLmRlc3RpbmF0aW9uLCBkZXN0aW5hdGlvbiA9IF9kID09PSB2b2lkIDAgPyBbXSA6IF9kLCBfZSA9IF9hLmFmdGVyLCBhZnRlciA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiBiZWZvcmUsXG4gICAgICAgICAgICBlbnJpY2htZW50OiBlbnJpY2htZW50LFxuICAgICAgICAgICAgZGVzdGluYXRpb25zOiBkZXN0aW5hdGlvbixcbiAgICAgICAgICAgIGFmdGVyOiBhZnRlcixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5mbHVzaE9uZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9jLCBiZWZvcmUsIGVucmljaG1lbnQsIF9pLCBiZWZvcmVfMSwgYmVmb3JlV2FyZSwgdGVtcCwgX2QsIGVucmljaG1lbnRfMSwgZW5yaWNobWVudFdhcmUsIHRlbXAsIF9lLCBkZXN0aW5hdGlvbnMsIGFmdGVyLCBhZnRlckNhbGxzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2YubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IHJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmF0dGVtcHRzID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVsaXZlcnlfcmV0cnknLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzLmF2YWlsYWJsZUV4dGVuc2lvbnMoKF9hID0gY3R4LmV2ZW50LmludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pLCBiZWZvcmUgPSBfYy5iZWZvcmUsIGVucmljaG1lbnQgPSBfYy5lbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBiZWZvcmVfMSA9IGJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBiZWZvcmVfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVdhcmUgPSBiZWZvcmVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlbnN1cmUoY3R4LCBiZWZvcmVXYXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZV9lbnJpY2hlZCcsIGN0eCwgYmVmb3JlV2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSAwLCBlbnJpY2htZW50XzEgPSBlbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfZCA8IGVucmljaG1lbnRfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVucmljaG1lbnRXYXJlID0gZW5yaWNobWVudF8xW19kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF0dGVtcHQoY3R4LCBlbnJpY2htZW50V2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgaW5zdGFuY2VvZiBDb3JlQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZW5yaWNoZWQnLCBjdHgsIGVucmljaG1lbnRXYXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gNztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZSA9IHRoaXMuYXZhaWxhYmxlRXh0ZW5zaW9ucygoX2IgPSBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSksIGRlc3RpbmF0aW9ucyA9IF9lLmRlc3RpbmF0aW9ucywgYWZ0ZXIgPSBfZS5hZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBkZXN0aW5hdGlvbnMubWFwKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0KGN0eCwgZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChhdHRlbXB0cykudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ21lc3NhZ2VfZGVsaXZlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZGVsaXZlcmVkJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyQ2FsbHMgPSBhZnRlci5tYXAoZnVuY3Rpb24gKGFmdGVyKSB7IHJldHVybiBhdHRlbXB0KGN0eCwgYWZ0ZXIpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGFmdGVyQ2FsbHMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlRXZlbnRRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgQ29yZUV2ZW50UXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/stats/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreStats: () => (/* binding */ CoreStats),\n/* harmony export */   NullStats: () => (/* binding */ NullStats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar compactMetricType = function (type) {\n    var enums = {\n        gauge: 'g',\n        counter: 'c',\n    };\n    return enums[type];\n};\nvar CoreStats = /** @class */ (function () {\n    function CoreStats() {\n        this.metrics = [];\n    }\n    CoreStats.prototype.increment = function (metric, by, tags) {\n        if (by === void 0) { by = 1; }\n        this.metrics.push({\n            metric: metric,\n            value: by,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'counter',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.gauge = function (metric, value, tags) {\n        this.metrics.push({\n            metric: metric,\n            value: value,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'gauge',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.flush = function () {\n        var formatted = this.metrics.map(function (m) { return ((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, m), { tags: m.tags.join(',') })); });\n        // ie doesn't like console.table\n        if (console.table) {\n            console.table(formatted);\n        }\n        else {\n            console.log(formatted);\n        }\n        this.metrics = [];\n    };\n    /**\n     * compact keys for smaller payload\n     */\n    CoreStats.prototype.serialize = function () {\n        return this.metrics.map(function (m) {\n            return {\n                m: m.metric,\n                v: m.value,\n                t: m.tags,\n                k: compactMetricType(m.type),\n                e: m.timestamp,\n            };\n        });\n    };\n    return CoreStats;\n}());\n\nvar NullStats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(NullStats, _super);\n    function NullStats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullStats.prototype.gauge = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.increment = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.flush = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.serialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        return [];\n    };\n    return NullStats;\n}(CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdELFFBQVEsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLFFBQVEsd0JBQXdCLEtBQUs7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanM/NzllNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgY29tcGFjdE1ldHJpY1R5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBlbnVtcyA9IHtcbiAgICAgICAgZ2F1Z2U6ICdnJyxcbiAgICAgICAgY291bnRlcjogJ2MnLFxuICAgIH07XG4gICAgcmV0dXJuIGVudW1zW3R5cGVdO1xufTtcbnZhciBDb3JlU3RhdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZVN0YXRzKCkge1xuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobWV0cmljLCBieSwgdGFncykge1xuICAgICAgICBpZiAoYnkgPT09IHZvaWQgMCkgeyBieSA9IDE7IH1cbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogYnksXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdjb3VudGVyJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLmdhdWdlID0gZnVuY3Rpb24gKG1ldHJpYywgdmFsdWUsIHRhZ3MpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdnYXVnZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMubWV0cmljcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbSksIHsgdGFnczogbS50YWdzLmpvaW4oJywnKSB9KSk7IH0pO1xuICAgICAgICAvLyBpZSBkb2Vzbid0IGxpa2UgY29uc29sZS50YWJsZVxuICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgY29uc29sZS50YWJsZShmb3JtYXR0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybWF0dGVkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGNvbXBhY3Qga2V5cyBmb3Igc21hbGxlciBwYXlsb2FkXG4gICAgICovXG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5zZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldHJpY3MubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG06IG0ubWV0cmljLFxuICAgICAgICAgICAgICAgIHY6IG0udmFsdWUsXG4gICAgICAgICAgICAgICAgdDogbS50YWdzLFxuICAgICAgICAgICAgICAgIGs6IGNvbXBhY3RNZXRyaWNUeXBlKG0udHlwZSksXG4gICAgICAgICAgICAgICAgZTogbS50aW1lc3RhbXAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlU3RhdHM7XG59KCkpO1xuZXhwb3J0IHsgQ29yZVN0YXRzIH07XG52YXIgTnVsbFN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOdWxsU3RhdHMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTnVsbFN0YXRzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuZ2F1Z2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuICAgIHJldHVybiBOdWxsU3RhdHM7XG59KENvcmVTdGF0cykpO1xuZXhwb3J0IHsgTnVsbFN0YXRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/task/task-group.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTaskGroup: () => (/* binding */ createTaskGroup)\n/* harmony export */ });\n/* harmony import */ var _utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-thenable */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\");\n\nvar createTaskGroup = function () {\n    var taskCompletionPromise;\n    var resolvePromise;\n    var count = 0;\n    return {\n        done: function () { return taskCompletionPromise; },\n        run: function (op) {\n            var returnValue = op();\n            if ((0,_utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__.isThenable)(returnValue)) {\n                if (++count === 1) {\n                    taskCompletionPromise = new Promise(function (res) { return (resolvePromise = res); });\n                }\n                returnValue.finally(function () { return --count === 0 && resolvePromise(); });\n            }\n            return returnValue;\n        },\n    };\n};\n//# sourceMappingURL=task-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdGFzay90YXNrLWdyb3VwLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQVU7QUFDMUI7QUFDQSx5RUFBeUUsZ0NBQWdDO0FBQ3pHO0FBQ0Esa0RBQWtELDJDQUEyQztBQUM3RjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3Rhc2svdGFzay1ncm91cC5qcz81Mzg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuLi91dGlscy9pcy10aGVuYWJsZSc7XG5leHBvcnQgdmFyIGNyZWF0ZVRhc2tHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGFza0NvbXBsZXRpb25Qcm9taXNlO1xuICAgIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhc2tDb21wbGV0aW9uUHJvbWlzZTsgfSxcbiAgICAgICAgcnVuOiBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IG9wKCk7XG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZShyZXR1cm5WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKytjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGlvblByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7IHJldHVybiAocmVzb2x2ZVByb21pc2UgPSByZXMpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiAtLWNvdW50ID09PSAwICYmIHJlc29sdmVQcm9taXNlKCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFzay1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: () => (/* binding */ groupBy)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction groupBy(collection, grouper) {\n    var results = {};\n    collection.forEach(function (item) {\n        var _a;\n        var key = undefined;\n        if (typeof grouper === 'string') {\n            var suggestedKey = item[grouper];\n            key =\n                typeof suggestedKey !== 'string'\n                    ? JSON.stringify(suggestedKey)\n                    : suggestedKey;\n        }\n        else if (grouper instanceof Function) {\n            key = grouper(item);\n        }\n        if (key === undefined) {\n            return;\n        }\n        results[key] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], ((_a = results[key]) !== null && _a !== void 0 ? _a : []), true), [item], false);\n    });\n    return results;\n}\n//# sourceMappingURL=group-by.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvZ3JvdXAtYnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDL0I7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFhLENBQUMsb0RBQWE7QUFDbEQsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dyb3VwLWJ5LmpzP2NhOTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnkoY29sbGVjdGlvbiwgZ3JvdXBlcikge1xuICAgIHZhciByZXN1bHRzID0ge307XG4gICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiBncm91cGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIHN1Z2dlc3RlZEtleSA9IGl0ZW1bZ3JvdXBlcl07XG4gICAgICAgICAgICBrZXkgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiBzdWdnZXN0ZWRLZXkgIT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoc3VnZ2VzdGVkS2V5KVxuICAgICAgICAgICAgICAgICAgICA6IHN1Z2dlc3RlZEtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChncm91cGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGtleSA9IGdyb3VwZXIoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0c1trZXldID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCAoKF9hID0gcmVzdWx0c1trZXldKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSksIHRydWUpLCBbaXRlbV0sIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwLWJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvaXMtdGhlbmFibGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9pcy10aGVuYWJsZS5qcz8xYjNjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIENoZWNrIGlmICB0aGVuYWJsZVxuICogIChpbnN0YW5jZW9mIFByb21pc2UgZG9lc24ndCByZXNwZWN0IHJlYWxtcylcbiAqL1xuZXhwb3J0IHZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgJ3RoZW4nIGluIHZhbHVlICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLXRoZW5hYmxlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/pick.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickBy: () => (/* binding */ pickBy)\n/* harmony export */ });\nvar pickBy = function (obj, fn) {\n    return Object.keys(obj)\n        .filter(function (k) { return fn(k, obj[k]); })\n        .reduce(function (acc, key) { return ((acc[key] = obj[key]), acc); }, {});\n};\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvcGljay5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQsc0NBQXNDLHNDQUFzQyxJQUFJO0FBQ2hGO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9waWNrLmpzP2M1ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBwaWNrQnkgPSBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGZuKGssIG9ialtrXSk7IH0pXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoKGFjY1trZXldID0gb2JqW2tleV0pLCBhY2MpOyB9LCB7fSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGljay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEventExists: () => (/* binding */ assertEventExists),\n/* harmony export */   assertEventType: () => (/* binding */ assertEventType),\n/* harmony export */   assertMessageId: () => (/* binding */ assertMessageId),\n/* harmony export */   assertTrackEventName: () => (/* binding */ assertTrackEventName),\n/* harmony export */   assertTrackEventProperties: () => (/* binding */ assertTrackEventProperties),\n/* harmony export */   assertTraits: () => (/* binding */ assertTraits),\n/* harmony export */   assertUserIdentity: () => (/* binding */ assertUserIdentity),\n/* harmony export */   validateEvent: () => (/* binding */ validateEvent)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\nvar stringError = 'is not a string';\nvar objError = 'is not an object';\nvar nilError = 'is nil';\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nfunction assertUserIdentity(event) {\n    var USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId';\n    var getAnyUserId = function (event) { var _a, _b, _c; return (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId; };\n    var id = getAnyUserId(event);\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, nilError);\n    }\n    else if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, stringError);\n    }\n}\nfunction assertEventExists(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', nilError);\n    }\n    if (typeof event !== 'object') {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', objError);\n    }\n}\nfunction assertEventType(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.type)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.type', stringError);\n    }\n}\nfunction assertTrackEventName(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.event', stringError);\n    }\n}\nfunction assertTrackEventProperties(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.properties)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.properties', objError);\n    }\n}\nfunction assertTraits(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.traits)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.traits', objError);\n    }\n}\nfunction assertMessageId(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.messageId)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.messageId', stringError);\n    }\n}\nfunction validateEvent(event) {\n    assertEventExists(event);\n    assertEventType(event);\n    assertMessageId(event);\n    if (event.type === 'track') {\n        assertTrackEventName(event);\n        assertTrackEventProperties(event);\n    }\n    if (['group', 'identify'].includes(event.type)) {\n        assertTraits(event);\n    }\n}\n//# sourceMappingURL=assertions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBLFNBQVMsZ0RBQU07QUFDZixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQSxjQUFjLGtEQUFRO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGdEQUFNO0FBQ2Ysa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzPzQ3NGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzUGxhaW5PYmplY3QsIGV4aXN0cyB9IGZyb20gJy4vaGVscGVycyc7XG52YXIgc3RyaW5nRXJyb3IgPSAnaXMgbm90IGEgc3RyaW5nJztcbnZhciBvYmpFcnJvciA9ICdpcyBub3QgYW4gb2JqZWN0JztcbnZhciBuaWxFcnJvciA9ICdpcyBuaWwnO1xuLy8gdXNlciBpZGVudGl0eSBjaGVjayBjb3VsZCBoeXBvdGhldGljYWxseSBjb3VsZCBiZSB1c2VkIGluIHRoZSBicm93c2VyIGV2ZW50IGZhY3RvcnksIGJ1dCBub3QgMTAwJSBzdXJlIC0tIHNvIHRoaXMgaXMgbm9kZSBvbmx5IGZvciBub3dcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpIHtcbiAgICB2YXIgVVNFUl9GSUVMRF9OQU1FID0gJy51c2VySWQvYW5vbnltb3VzSWQvcHJldmlvdXNJZC9ncm91cElkJztcbiAgICB2YXIgZ2V0QW55VXNlcklkID0gZnVuY3Rpb24gKGV2ZW50KSB7IHZhciBfYSwgX2IsIF9jOyByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gZXZlbnQudXNlcklkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBldmVudC5hbm9ueW1vdXNJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZXZlbnQuZ3JvdXBJZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZXZlbnQucHJldmlvdXNJZDsgfTtcbiAgICB2YXIgaWQgPSBnZXRBbnlVc2VySWQoZXZlbnQpO1xuICAgIGlmICghZXhpc3RzKGlkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFVTRVJfRklFTERfTkFNRSwgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIGlmICghaXNTdHJpbmcoaWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoVVNFUl9GSUVMRF9OQU1FLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KSB7XG4gICAgaWYgKCFleGlzdHMoZXZlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0V2ZW50JywgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFdmVudCcsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC50eXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHlwZScsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50LmV2ZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcuZXZlbnQnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRyYWNrRXZlbnRQcm9wZXJ0aWVzKGV2ZW50KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGV2ZW50LnByb3BlcnRpZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJy5wcm9wZXJ0aWVzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUcmFpdHMoZXZlbnQpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZXZlbnQudHJhaXRzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHJhaXRzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRNZXNzYWdlSWQoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50Lm1lc3NhZ2VJZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLm1lc3NhZ2VJZCcsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFdmVudChldmVudCkge1xuICAgIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KTtcbiAgICBhc3NlcnRFdmVudFR5cGUoZXZlbnQpO1xuICAgIGFzc2VydE1lc3NhZ2VJZChldmVudCk7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpO1xuICAgICAgICBhc3NlcnRUcmFja0V2ZW50UHJvcGVydGllcyhldmVudCk7XG4gICAgfVxuICAgIGlmIChbJ2dyb3VwJywgJ2lkZW50aWZ5J10uaW5jbHVkZXMoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgYXNzZXJ0VHJhaXRzKGV2ZW50KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/errors.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar ValidationError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(ValidationError, _super);\n    function ValidationError(field, message) {\n        var _this = _super.call(this, \"\".concat(field, \" \").concat(message)) || this;\n        _this.field = field;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUMwQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vZXJyb3JzLmpzP2U5ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgVmFsaWRhdGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWYWxpZGF0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKGZpZWxkLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiXCIuY29uY2F0KGZpZWxkLCBcIiBcIikuY29uY2F0KG1lc3NhZ2UpKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWYWxpZGF0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\nfunction exists(val) {\n    return val !== undefined && val !== null;\n}\nfunction isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS92YWxpZGF0aW9uL2hlbHBlcnMuanM/NDViZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4aXN0cyh2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\n/**\n * Return a promise that can be externally resolved\n */\nvar createDeferred = function () {\n    var resolve;\n    var reject;\n    var settled = false;\n    var promise = new Promise(function (_resolve, _reject) {\n        resolve = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _resolve.apply(void 0, args);\n        };\n        reject = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _reject.apply(void 0, args);\n        };\n    });\n    return {\n        resolve: resolve,\n        reject: reject,\n        promise: promise,\n        isSettled: function () { return settled; },\n    };\n};\n//# sourceMappingURL=create-deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vY3JlYXRlLWRlZmVycmVkL2NyZWF0ZS1kZWZlcnJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9jcmVhdGUtZGVmZXJyZWQvY3JlYXRlLWRlZmVycmVkLmpzP2FlZGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgY2FuIGJlIGV4dGVybmFsbHkgcmVzb2x2ZWRcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVEZWZlcnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzb2x2ZTtcbiAgICB2YXIgcmVqZWN0O1xuICAgIHZhciBzZXR0bGVkID0gZmFsc2U7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoX3Jlc29sdmUsIF9yZWplY3QpIHtcbiAgICAgICAgcmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgX3Jlc29sdmUuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICBfcmVqZWN0LmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0OiByZWplY3QsXG4gICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgIGlzU2V0dGxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0dGxlZDsgfSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1kZWZlcnJlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emitter: () => (/* binding */ Emitter)\n/* harmony export */ });\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nvar Emitter = /** @class */ (function () {\n    function Emitter(options) {\n        var _a;\n        this.callbacks = {};\n        this.warned = false;\n        this.maxListeners = (_a = options === null || options === void 0 ? void 0 : options.maxListeners) !== null && _a !== void 0 ? _a : 10;\n    }\n    Emitter.prototype.warnIfPossibleMemoryLeak = function (event) {\n        if (this.warned) {\n            return;\n        }\n        if (this.maxListeners &&\n            this.callbacks[event].length > this.maxListeners) {\n            console.warn(\"Event Emitter: Possible memory leak detected; \".concat(String(event), \" has exceeded \").concat(this.maxListeners, \" listeners.\"));\n            this.warned = true;\n        }\n    };\n    Emitter.prototype.on = function (event, callback) {\n        if (!this.callbacks[event]) {\n            this.callbacks[event] = [callback];\n        }\n        else {\n            this.callbacks[event].push(callback);\n            this.warnIfPossibleMemoryLeak(event);\n        }\n        return this;\n    };\n    Emitter.prototype.once = function (event, callback) {\n        var _this = this;\n        var on = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.off(event, on);\n            callback.apply(_this, args);\n        };\n        this.on(event, on);\n        return this;\n    };\n    Emitter.prototype.off = function (event, callback) {\n        var _a;\n        var fns = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        var without = fns.filter(function (fn) { return fn !== callback; });\n        this.callbacks[event] = without;\n        return this;\n    };\n    Emitter.prototype.emit = function (event) {\n        var _this = this;\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var callbacks = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        callbacks.forEach(function (callback) {\n            callback.apply(_this, args);\n        });\n        return this;\n    };\n    return Emitter;\n}());\n\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vZW1pdHRlci9lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseUJBQXlCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDa0I7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9lbWl0dGVyL2VtaXR0ZXIuanM/ZDBkNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEV2ZW50IEVtaXR0ZXIgdGhhdCB0YWtlcyB0aGUgZXhwZWN0ZWQgY29udHJhY3QgYXMgYSBnZW5lcmljXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqICB0eXBlIENvbnRyYWN0ID0ge1xuICogICAgZGVsaXZlcnlfc3VjY2VzczogW0RlbGl2ZXJ5U3VjY2Vzc1Jlc3BvbnNlLCBNZXRyaWNzXSxcbiAqICAgIGRlbGl2ZXJ5X2ZhaWx1cmU6IFtEZWxpdmVyeUVycm9yXVxuICogfVxuICogIG5ldyBFbWl0dGVyPENvbnRyYWN0PigpXG4gKiAgLm9uKCdkZWxpdmVyeV9zdWNjZXNzJywgKHJlcywgbWV0cmljcykgPT4gLi4uKVxuICogIC5vbignZGVsaXZlcnlfZmFpbHVyZScsIChlcnIpID0+IC4uLilcbiAqIGBgYFxuICovXG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbWl0dGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLndhcm5lZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1heExpc3RlbmVycyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhMaXN0ZW5lcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEwO1xuICAgIH1cbiAgICBFbWl0dGVyLnByb3RvdHlwZS53YXJuSWZQb3NzaWJsZU1lbW9yeUxlYWsgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMud2FybmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4TGlzdGVuZXJzICYmXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ubGVuZ3RoID4gdGhpcy5tYXhMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkV2ZW50IEVtaXR0ZXI6IFBvc3NpYmxlIG1lbW9yeSBsZWFrIGRldGVjdGVkOyBcIi5jb25jYXQoU3RyaW5nKGV2ZW50KSwgXCIgaGFzIGV4Y2VlZGVkIFwiKS5jb25jYXQodGhpcy5tYXhMaXN0ZW5lcnMsIFwiIGxpc3RlbmVycy5cIikpO1xuICAgICAgICAgICAgdGhpcy53YXJuZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbGxiYWNrc1tldmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XSA9IFtjYWxsYmFja107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLndhcm5JZlBvc3NpYmxlTWVtb3J5TGVhayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5vZmYoZXZlbnQsIG9uKTtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbihldmVudCwgb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgZm5zID0gKF9hID0gdGhpcy5jYWxsYmFja3NbZXZlbnRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgdmFyIHdpdGhvdXQgPSBmbnMuZmlsdGVyKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4gIT09IGNhbGxiYWNrOyB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdID0gd2l0aG91dDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IChfYSA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gRW1pdHRlcjtcbn0oKSk7XG5leHBvcnQgeyBFbWl0dGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/browser/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/browser/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsBrowser: () => (/* binding */ AnalyticsBrowser),\n/* harmony export */   loadCDNSettings: () => (/* binding */ loadCDNSettings)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_get_process_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/get-process-env */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../lib/parse-cdn */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/fetch */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _core_analytics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/analytics */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/merged-options */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n/* harmony import */ var _plugins_env_enrichment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../plugins/env-enrichment */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js\");\n/* harmony import */ var _plugins_remote_loader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../plugins/remote-loader */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../plugins/segmentio */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\");\n/* harmony import */ var _core_buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/buffer */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\");\n/* harmony import */ var _core_inspector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/inspector */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js\");\n/* harmony import */ var _core_stats__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../core/stats */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../lib/global-analytics-helper */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction loadCDNSettings(writeKey, baseUrl) {\n    return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetch)(\"\".concat(baseUrl, \"/v1/projects/\").concat(writeKey, \"/settings\"))\n        .then(function (res) {\n        if (!res.ok) {\n            return res.text().then(function (errorResponseMessage) {\n                throw new Error(errorResponseMessage);\n            });\n        }\n        return res.json();\n    })\n        .catch(function (err) {\n        console.error(err.message);\n        throw err;\n    });\n}\nfunction hasLegacyDestinations(settings) {\n    return ((0,_lib_get_process_env__WEBPACK_IMPORTED_MODULE_1__.getProcessEnv)().NODE_ENV !== 'test' &&\n        // just one integration means segmentio\n        Object.keys(settings.integrations).length > 1);\n}\nfunction hasTsubMiddleware(settings) {\n    var _a, _b, _c;\n    return ((0,_lib_get_process_env__WEBPACK_IMPORTED_MODULE_1__.getProcessEnv)().NODE_ENV !== 'test' &&\n        ((_c = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 0);\n}\n/**\n * With AJS classic, we allow users to call setAnonymousId before the library initialization.\n * This is important because some of the destinations will use the anonymousId during the initialization,\n * and if we set anonId afterwards, that wouldn’t impact the destination.\n *\n * Also Ensures events can be registered before library initialization.\n * This is important so users can register to 'initialize' and any events that may fire early during setup.\n */\nfunction flushPreBuffer(analytics, buffer) {\n    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushSetAnonymousID)(analytics, buffer);\n    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushOn)(analytics, buffer);\n}\n/**\n * Finish flushing buffer and cleanup.\n */\nfunction flushFinalBuffer(analytics, buffer) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0: \n                // Call popSnippetWindowBuffer before each flush task since there may be\n                // analytics calls during async function calls.\n                return [4 /*yield*/, (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushAddSourceMiddleware)(analytics, buffer)];\n                case 1:\n                    // Call popSnippetWindowBuffer before each flush task since there may be\n                    // analytics calls during async function calls.\n                    _a.sent();\n                    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushAnalyticsCallsInNewTask)(analytics, buffer);\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction registerPlugins(writeKey, cdnSettings, analytics, options, pluginLikes, legacyIntegrationSources, preInitBuffer) {\n    var _a, _b, _c;\n    if (pluginLikes === void 0) { pluginLikes = []; }\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {\n        var pluginsFromSettings, pluginSources, tsubMiddleware, _d, legacyDestinations, _e, schemaFilter, _f, mergedSettings, remotePlugins, basePlugins, shouldIgnoreSegmentio, _g, _h, ctx;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_j) {\n            switch (_j.label) {\n                case 0:\n                    flushPreBuffer(analytics, preInitBuffer);\n                    pluginsFromSettings = pluginLikes === null || pluginLikes === void 0 ? void 0 : pluginLikes.filter(function (pluginLike) { return typeof pluginLike === 'object'; });\n                    pluginSources = pluginLikes === null || pluginLikes === void 0 ? void 0 : pluginLikes.filter(function (pluginLike) {\n                        return typeof pluginLike === 'function' &&\n                            typeof pluginLike.pluginName === 'string';\n                    });\n                    if (!hasTsubMiddleware(cdnSettings)) return [3 /*break*/, 2];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | tsub-middleware */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/routing-middleware */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js\")).then(function (mod) {\n                            return mod.tsubMiddleware(cdnSettings.middlewareSettings.routingRules);\n                        })];\n                case 1:\n                    _d = _j.sent();\n                    return [3 /*break*/, 3];\n                case 2:\n                    _d = undefined;\n                    _j.label = 3;\n                case 3:\n                    tsubMiddleware = _d;\n                    if (!(hasLegacyDestinations(cdnSettings) || legacyIntegrationSources.length > 0)) return [3 /*break*/, 5];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | ajs-destination */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/ajs-destination */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\")).then(function (mod) {\n                            return mod.ajsDestinations(writeKey, cdnSettings, analytics.integrations, options, tsubMiddleware, legacyIntegrationSources);\n                        })];\n                case 4:\n                    _e = _j.sent();\n                    return [3 /*break*/, 6];\n                case 5:\n                    _e = [];\n                    _j.label = 6;\n                case 6:\n                    legacyDestinations = _e;\n                    if (!cdnSettings.legacyVideoPluginsEnabled) return [3 /*break*/, 8];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | legacyVideos */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/legacy-video-plugins */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js\")).then(function (mod) {\n                            return mod.loadLegacyVideoPlugins(analytics);\n                        })];\n                case 7:\n                    _j.sent();\n                    _j.label = 8;\n                case 8:\n                    if (!((_a = options.plan) === null || _a === void 0 ? void 0 : _a.track)) return [3 /*break*/, 10];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | schemaFilter */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/schema-filter */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js\")).then(function (mod) {\n                            var _a;\n                            return mod.schemaFilter((_a = options.plan) === null || _a === void 0 ? void 0 : _a.track, cdnSettings);\n                        })];\n                case 9:\n                    _f = _j.sent();\n                    return [3 /*break*/, 11];\n                case 10:\n                    _f = undefined;\n                    _j.label = 11;\n                case 11:\n                    schemaFilter = _f;\n                    mergedSettings = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_4__.mergedOptions)(cdnSettings, options);\n                    return [4 /*yield*/, (0,_plugins_remote_loader__WEBPACK_IMPORTED_MODULE_5__.remoteLoader)(cdnSettings, analytics.integrations, mergedSettings, options, tsubMiddleware, pluginSources).catch(function () { return []; })];\n                case 12:\n                    remotePlugins = _j.sent();\n                    basePlugins = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)([_plugins_env_enrichment__WEBPACK_IMPORTED_MODULE_6__.envEnrichment], legacyDestinations, true), remotePlugins, true);\n                    if (schemaFilter) {\n                        basePlugins.push(schemaFilter);\n                    }\n                    shouldIgnoreSegmentio = (((_b = options.integrations) === null || _b === void 0 ? void 0 : _b.All) === false &&\n                        !options.integrations['Segment.io']) ||\n                        (options.integrations && options.integrations['Segment.io'] === false);\n                    if (!!shouldIgnoreSegmentio) return [3 /*break*/, 14];\n                    _h = (_g = basePlugins).push;\n                    return [4 /*yield*/, (0,_plugins_segmentio__WEBPACK_IMPORTED_MODULE_7__.segmentio)(analytics, mergedSettings['Segment.io'], cdnSettings.integrations)];\n                case 13:\n                    _h.apply(_g, [_j.sent()]);\n                    _j.label = 14;\n                case 14: return [4 /*yield*/, analytics.register.apply(analytics, (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__spreadArray)([], basePlugins, false), pluginsFromSettings, false))];\n                case 15:\n                    ctx = _j.sent();\n                    // register user-defined plugins registered via analytics.register()\n                    return [4 /*yield*/, (0,_core_buffer__WEBPACK_IMPORTED_MODULE_2__.flushRegister)(analytics, preInitBuffer)];\n                case 16:\n                    // register user-defined plugins registered via analytics.register()\n                    _j.sent();\n                    if (!Object.entries((_c = cdnSettings.enabledMiddleware) !== null && _c !== void 0 ? _c : {}).some(function (_a) {\n                        var enabled = _a[1];\n                        return enabled;\n                    })) return [3 /*break*/, 18];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | remoteMiddleware */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/remote-middleware */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js\")).then(function (_a) {\n                            var remoteMiddlewares = _a.remoteMiddlewares;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(_this, void 0, void 0, function () {\n                                var middleware, promises;\n                                return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0: return [4 /*yield*/, remoteMiddlewares(ctx, cdnSettings, options.obfuscate)];\n                                        case 1:\n                                            middleware = _b.sent();\n                                            promises = middleware.map(function (mdw) {\n                                                return analytics.addSourceMiddleware(mdw);\n                                            });\n                                            return [2 /*return*/, Promise.all(promises)];\n                                    }\n                                });\n                            });\n                        })];\n                case 17:\n                    _j.sent();\n                    _j.label = 18;\n                case 18: return [2 /*return*/, ctx];\n            }\n        });\n    });\n}\nfunction loadAnalytics(settings, options, preInitBuffer) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    if (options === void 0) { options = {}; }\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {\n        var cdnURL, cdnSettings, _m, disabled, retryQueue, analytics, plugins, classicIntegrations, segmentLoadOptions, ctx, search, hash, term;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_o) {\n            switch (_o.label) {\n                case 0:\n                    // return no-op analytics instance if disabled\n                    if (options.disable === true) {\n                        return [2 /*return*/, [new _core_analytics__WEBPACK_IMPORTED_MODULE_8__.NullAnalytics(), _core_context__WEBPACK_IMPORTED_MODULE_9__.Context.system()]];\n                    }\n                    if (options.globalAnalyticsKey)\n                        (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_10__.setGlobalAnalyticsKey)(options.globalAnalyticsKey);\n                    // this is an ugly side-effect, but it's for the benefits of the plugins that get their cdn via getCDN()\n                    if (settings.cdnURL)\n                        (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_11__.setGlobalCDNUrl)(settings.cdnURL);\n                    if (options.initialPageview) {\n                        // capture the page context early, so it's always up-to-date\n                        preInitBuffer.add(new _core_buffer__WEBPACK_IMPORTED_MODULE_2__.PreInitMethodCall('page', []));\n                    }\n                    cdnURL = (_a = settings.cdnURL) !== null && _a !== void 0 ? _a : (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_11__.getCDN)();\n                    if (!((_b = settings.cdnSettings) !== null && _b !== void 0)) return [3 /*break*/, 1];\n                    _m = _b;\n                    return [3 /*break*/, 3];\n                case 1: return [4 /*yield*/, loadCDNSettings(settings.writeKey, cdnURL)];\n                case 2:\n                    _m = (_o.sent());\n                    _o.label = 3;\n                case 3:\n                    cdnSettings = _m;\n                    if (options.updateCDNSettings) {\n                        cdnSettings = options.updateCDNSettings(cdnSettings);\n                    }\n                    if (!(typeof options.disable === 'function')) return [3 /*break*/, 5];\n                    return [4 /*yield*/, options.disable(cdnSettings)];\n                case 4:\n                    disabled = _o.sent();\n                    if (disabled) {\n                        return [2 /*return*/, [new _core_analytics__WEBPACK_IMPORTED_MODULE_8__.NullAnalytics(), _core_context__WEBPACK_IMPORTED_MODULE_9__.Context.system()]];\n                    }\n                    _o.label = 5;\n                case 5:\n                    retryQueue = (_d = (_c = cdnSettings.integrations['Segment.io']) === null || _c === void 0 ? void 0 : _c.retryQueue) !== null && _d !== void 0 ? _d : true;\n                    options = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({ retryQueue: retryQueue }, options);\n                    analytics = new _core_analytics__WEBPACK_IMPORTED_MODULE_8__.Analytics((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, settings), { cdnSettings: cdnSettings, cdnURL: cdnURL }), options);\n                    (0,_core_inspector__WEBPACK_IMPORTED_MODULE_12__.attachInspector)(analytics);\n                    plugins = (_e = settings.plugins) !== null && _e !== void 0 ? _e : [];\n                    classicIntegrations = (_f = settings.classicIntegrations) !== null && _f !== void 0 ? _f : [];\n                    segmentLoadOptions = (_g = options.integrations) === null || _g === void 0 ? void 0 : _g['Segment.io'];\n                    _core_stats__WEBPACK_IMPORTED_MODULE_13__.Stats.initRemoteMetrics((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, cdnSettings.metrics), { host: (_h = segmentLoadOptions === null || segmentLoadOptions === void 0 ? void 0 : segmentLoadOptions.apiHost) !== null && _h !== void 0 ? _h : (_j = cdnSettings.metrics) === null || _j === void 0 ? void 0 : _j.host, protocol: segmentLoadOptions === null || segmentLoadOptions === void 0 ? void 0 : segmentLoadOptions.protocol }));\n                    return [4 /*yield*/, registerPlugins(settings.writeKey, cdnSettings, analytics, options, plugins, classicIntegrations, preInitBuffer)];\n                case 6:\n                    ctx = _o.sent();\n                    search = (_k = window.location.search) !== null && _k !== void 0 ? _k : '';\n                    hash = (_l = window.location.hash) !== null && _l !== void 0 ? _l : '';\n                    term = search.length ? search : hash.replace(/(?=#).*(?=\\?)/, '');\n                    if (!term.includes('ajs_')) return [3 /*break*/, 8];\n                    return [4 /*yield*/, analytics.queryString(term).catch(console.error)];\n                case 7:\n                    _o.sent();\n                    _o.label = 8;\n                case 8:\n                    analytics.initialized = true;\n                    analytics.emit('initialize', settings, options);\n                    return [4 /*yield*/, flushFinalBuffer(analytics, preInitBuffer)];\n                case 9:\n                    _o.sent();\n                    return [2 /*return*/, [analytics, ctx]];\n            }\n        });\n    });\n}\n/**\n * The public browser interface for Segment Analytics\n *\n * @example\n * ```ts\n *  export const analytics = new AnalyticsBrowser()\n *  analytics.load({ writeKey: 'foo' })\n * ```\n * @link https://github.com/segmentio/analytics-next/#readme\n */\nvar AnalyticsBrowser = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(AnalyticsBrowser, _super);\n    function AnalyticsBrowser() {\n        var _this = this;\n        var _a = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_14__.createDeferred)(), loadStart = _a.promise, resolveLoadStart = _a.resolve;\n        _this = _super.call(this, function (buffer) {\n            return loadStart.then(function (_a) {\n                var settings = _a[0], options = _a[1];\n                return loadAnalytics(settings, options, buffer);\n            });\n        }) || this;\n        _this._resolveLoadStart = function (settings, options) {\n            return resolveLoadStart([settings, options]);\n        };\n        return _this;\n    }\n    /**\n     * Fully initialize an analytics instance, including:\n     *\n     * * Fetching settings from the segment CDN (by default).\n     * * Fetching all remote destinations configured by the user (if applicable).\n     * * Flushing buffered analytics events.\n     * * Loading all middleware.\n     *\n     * Note:️  This method should only be called *once* in your application.\n     *\n     * @example\n     * ```ts\n     * export const analytics = new AnalyticsBrowser()\n     * analytics.load({ writeKey: 'foo' })\n     * ```\n     */\n    AnalyticsBrowser.prototype.load = function (settings, options) {\n        if (options === void 0) { options = {}; }\n        this._resolveLoadStart(settings, options);\n        return this;\n    };\n    /**\n     * Instantiates an object exposing Analytics methods.\n     *\n     * @example\n     * ```ts\n     * const ajs = AnalyticsBrowser.load({ writeKey: '<YOUR_WRITE_KEY>' })\n     *\n     * ajs.track(\"foo\")\n     * ...\n     * ```\n     */\n    AnalyticsBrowser.load = function (settings, options) {\n        if (options === void 0) { options = {}; }\n        return new AnalyticsBrowser().load(settings, options);\n    };\n    AnalyticsBrowser.standalone = function (writeKey, options) {\n        return AnalyticsBrowser.load({ writeKey: writeKey }, options).then(function (res) { return res[0]; });\n    };\n    return AnalyticsBrowser;\n}(_core_buffer__WEBPACK_IMPORTED_MODULE_2__.AnalyticsBuffered));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvYnJvd3Nlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRjtBQUM1QjtBQUNJO0FBQ3RCO0FBQ3dCO0FBQ25CO0FBQ1k7QUFDWTtBQUNSO0FBQ0Q7QUFDUjtBQUMySDtBQUN4SDtBQUNkO0FBQ2lDO0FBQ2hFO0FBQ1AsV0FBVyxpREFBSztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSxtRUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtRUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpRUFBbUI7QUFDdkIsSUFBSSxxREFBTztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0VBQXdCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBFQUE0QjtBQUNoRDtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSwrSUFBK0ksd0NBQXdDO0FBQ3ZMO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHlDQUF5Qyx1UUFDeUQ7QUFDbEc7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGlRQUNzRDtBQUMvRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsd1FBQ3dEO0FBQ2pHO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMFBBQ2lEO0FBQzFGO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxrRUFBYTtBQUNsRCx5Q0FBeUMsb0VBQVksa0hBQWtILFlBQVk7QUFDbkw7QUFDQTtBQUNBLGtDQUFrQyxvREFBYSxDQUFDLG9EQUFhLEVBQUUsa0VBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw2REFBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxrRkFBa0Ysb0RBQWEsQ0FBQyxvREFBYTtBQUM3RztBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMkRBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIseUNBQXlDLHNRQUN5RDtBQUNsRztBQUNBLG1DQUFtQyxnREFBUztBQUM1QztBQUNBLHVDQUF1QyxrREFBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QixXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwREFBYSxJQUFJLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQSx3QkFBd0Isb0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSx3QkFBd0IsZ0VBQWU7QUFDdkM7QUFDQTtBQUNBLDhDQUE4QywyREFBaUI7QUFDL0Q7QUFDQSxxRkFBcUYsdURBQU07QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwREFBYSxJQUFJLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLEdBQUcsd0JBQXdCO0FBQ2pFLG9DQUFvQyxzREFBUyxDQUFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxlQUFlLDBDQUEwQztBQUMzSCxvQkFBb0IsaUVBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUFLLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsMEJBQTBCLHlVQUF5VTtBQUNuYTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsaUZBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsOEJBQThCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsb0JBQW9CLGlDQUFpQyxnQkFBZ0I7QUFDNUc7QUFDQTtBQUNBLENBQUMsQ0FBQywyREFBaUI7QUFDUztBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2Jyb3dzZXIvaW5kZXguanM/ZjIwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBnZXRQcm9jZXNzRW52IH0gZnJvbSAnLi4vbGliL2dldC1wcm9jZXNzLWVudic7XG5pbXBvcnQgeyBnZXRDRE4sIHNldEdsb2JhbENETlVybCB9IGZyb20gJy4uL2xpYi9wYXJzZS1jZG4nO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgQW5hbHl0aWNzLCBOdWxsQW5hbHl0aWNzIH0gZnJvbSAnLi4vY29yZS9hbmFseXRpY3MnO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uL2NvcmUvY29udGV4dCc7XG5pbXBvcnQgeyBtZXJnZWRPcHRpb25zIH0gZnJvbSAnLi4vbGliL21lcmdlZC1vcHRpb25zJztcbmltcG9ydCB7IGNyZWF0ZURlZmVycmVkIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuaW1wb3J0IHsgZW52RW5yaWNobWVudCB9IGZyb20gJy4uL3BsdWdpbnMvZW52LWVucmljaG1lbnQnO1xuaW1wb3J0IHsgcmVtb3RlTG9hZGVyLCB9IGZyb20gJy4uL3BsdWdpbnMvcmVtb3RlLWxvYWRlcic7XG5pbXBvcnQgeyBzZWdtZW50aW8gfSBmcm9tICcuLi9wbHVnaW5zL3NlZ21lbnRpbyc7XG5pbXBvcnQgeyBBbmFseXRpY3NCdWZmZXJlZCwgZmx1c2hBbmFseXRpY3NDYWxsc0luTmV3VGFzaywgZmx1c2hBZGRTb3VyY2VNaWRkbGV3YXJlLCBmbHVzaFNldEFub255bW91c0lELCBmbHVzaE9uLCBQcmVJbml0TWV0aG9kQ2FsbCwgZmx1c2hSZWdpc3RlciwgfSBmcm9tICcuLi9jb3JlL2J1ZmZlcic7XG5pbXBvcnQgeyBhdHRhY2hJbnNwZWN0b3IgfSBmcm9tICcuLi9jb3JlL2luc3BlY3Rvcic7XG5pbXBvcnQgeyBTdGF0cyB9IGZyb20gJy4uL2NvcmUvc3RhdHMnO1xuaW1wb3J0IHsgc2V0R2xvYmFsQW5hbHl0aWNzS2V5IH0gZnJvbSAnLi4vbGliL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyJztcbmV4cG9ydCBmdW5jdGlvbiBsb2FkQ0ROU2V0dGluZ3Mod3JpdGVLZXksIGJhc2VVcmwpIHtcbiAgICByZXR1cm4gZmV0Y2goXCJcIi5jb25jYXQoYmFzZVVybCwgXCIvdjEvcHJvamVjdHMvXCIpLmNvbmNhdCh3cml0ZUtleSwgXCIvc2V0dGluZ3NcIikpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMudGV4dCgpLnRoZW4oZnVuY3Rpb24gKGVycm9yUmVzcG9uc2VNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUmVzcG9uc2VNZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYXNMZWdhY3lEZXN0aW5hdGlvbnMoc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gKGdldFByb2Nlc3NFbnYoKS5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIC8vIGp1c3Qgb25lIGludGVncmF0aW9uIG1lYW5zIHNlZ21lbnRpb1xuICAgICAgICBPYmplY3Qua2V5cyhzZXR0aW5ncy5pbnRlZ3JhdGlvbnMpLmxlbmd0aCA+IDEpO1xufVxuZnVuY3Rpb24gaGFzVHN1Yk1pZGRsZXdhcmUoc2V0dGluZ3MpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKGdldFByb2Nlc3NFbnYoKS5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgICgoX2MgPSAoX2IgPSAoX2EgPSBzZXR0aW5ncy5taWRkbGV3YXJlU2V0dGluZ3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yb3V0aW5nUnVsZXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDApID4gMCk7XG59XG4vKipcbiAqIFdpdGggQUpTIGNsYXNzaWMsIHdlIGFsbG93IHVzZXJzIHRvIGNhbGwgc2V0QW5vbnltb3VzSWQgYmVmb3JlIHRoZSBsaWJyYXJ5IGluaXRpYWxpemF0aW9uLlxuICogVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSBzb21lIG9mIHRoZSBkZXN0aW5hdGlvbnMgd2lsbCB1c2UgdGhlIGFub255bW91c0lkIGR1cmluZyB0aGUgaW5pdGlhbGl6YXRpb24sXG4gKiBhbmQgaWYgd2Ugc2V0IGFub25JZCBhZnRlcndhcmRzLCB0aGF0IHdvdWxkbuKAmXQgaW1wYWN0IHRoZSBkZXN0aW5hdGlvbi5cbiAqXG4gKiBBbHNvIEVuc3VyZXMgZXZlbnRzIGNhbiBiZSByZWdpc3RlcmVkIGJlZm9yZSBsaWJyYXJ5IGluaXRpYWxpemF0aW9uLlxuICogVGhpcyBpcyBpbXBvcnRhbnQgc28gdXNlcnMgY2FuIHJlZ2lzdGVyIHRvICdpbml0aWFsaXplJyBhbmQgYW55IGV2ZW50cyB0aGF0IG1heSBmaXJlIGVhcmx5IGR1cmluZyBzZXR1cC5cbiAqL1xuZnVuY3Rpb24gZmx1c2hQcmVCdWZmZXIoYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICBmbHVzaFNldEFub255bW91c0lEKGFuYWx5dGljcywgYnVmZmVyKTtcbiAgICBmbHVzaE9uKGFuYWx5dGljcywgYnVmZmVyKTtcbn1cbi8qKlxuICogRmluaXNoIGZsdXNoaW5nIGJ1ZmZlciBhbmQgY2xlYW51cC5cbiAqL1xuZnVuY3Rpb24gZmx1c2hGaW5hbEJ1ZmZlcihhbmFseXRpY3MsIGJ1ZmZlcikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBwb3BTbmlwcGV0V2luZG93QnVmZmVyIGJlZm9yZSBlYWNoIGZsdXNoIHRhc2sgc2luY2UgdGhlcmUgbWF5IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5hbHl0aWNzIGNhbGxzIGR1cmluZyBhc3luYyBmdW5jdGlvbiBjYWxscy5cbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbHVzaEFkZFNvdXJjZU1pZGRsZXdhcmUoYW5hbHl0aWNzLCBidWZmZXIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGwgcG9wU25pcHBldFdpbmRvd0J1ZmZlciBiZWZvcmUgZWFjaCBmbHVzaCB0YXNrIHNpbmNlIHRoZXJlIG1heSBiZVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmFseXRpY3MgY2FsbHMgZHVyaW5nIGFzeW5jIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGZsdXNoQW5hbHl0aWNzQ2FsbHNJbk5ld1Rhc2soYW5hbHl0aWNzLCBidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcmVnaXN0ZXJQbHVnaW5zKHdyaXRlS2V5LCBjZG5TZXR0aW5ncywgYW5hbHl0aWNzLCBvcHRpb25zLCBwbHVnaW5MaWtlcywgbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzLCBwcmVJbml0QnVmZmVyKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgaWYgKHBsdWdpbkxpa2VzID09PSB2b2lkIDApIHsgcGx1Z2luTGlrZXMgPSBbXTsgfVxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBsdWdpbnNGcm9tU2V0dGluZ3MsIHBsdWdpblNvdXJjZXMsIHRzdWJNaWRkbGV3YXJlLCBfZCwgbGVnYWN5RGVzdGluYXRpb25zLCBfZSwgc2NoZW1hRmlsdGVyLCBfZiwgbWVyZ2VkU2V0dGluZ3MsIHJlbW90ZVBsdWdpbnMsIGJhc2VQbHVnaW5zLCBzaG91bGRJZ25vcmVTZWdtZW50aW8sIF9nLCBfaCwgY3R4O1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9qKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9qLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBmbHVzaFByZUJ1ZmZlcihhbmFseXRpY3MsIHByZUluaXRCdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zRnJvbVNldHRpbmdzID0gcGx1Z2luTGlrZXMgPT09IG51bGwgfHwgcGx1Z2luTGlrZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbkxpa2VzLmZpbHRlcihmdW5jdGlvbiAocGx1Z2luTGlrZSkgeyByZXR1cm4gdHlwZW9mIHBsdWdpbkxpa2UgPT09ICdvYmplY3QnOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luU291cmNlcyA9IHBsdWdpbkxpa2VzID09PSBudWxsIHx8IHBsdWdpbkxpa2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5MaWtlcy5maWx0ZXIoZnVuY3Rpb24gKHBsdWdpbkxpa2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGx1Z2luTGlrZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBwbHVnaW5MaWtlLnBsdWdpbk5hbWUgPT09ICdzdHJpbmcnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNUc3ViTWlkZGxld2FyZShjZG5TZXR0aW5ncykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcInRzdWItbWlkZGxld2FyZVwiICovICcuLi9wbHVnaW5zL3JvdXRpbmctbWlkZGxld2FyZScpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QudHN1Yk1pZGRsZXdhcmUoY2RuU2V0dGluZ3MubWlkZGxld2FyZVNldHRpbmdzLnJvdXRpbmdSdWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfZCA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgX2oubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdHN1Yk1pZGRsZXdhcmUgPSBfZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaGFzTGVnYWN5RGVzdGluYXRpb25zKGNkblNldHRpbmdzKSB8fCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImFqcy1kZXN0aW5hdGlvblwiICovICcuLi9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbicpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QuYWpzRGVzdGluYXRpb25zKHdyaXRlS2V5LCBjZG5TZXR0aW5ncywgYW5hbHl0aWNzLmludGVncmF0aW9ucywgb3B0aW9ucywgdHN1Yk1pZGRsZXdhcmUsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBfZSA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBfZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBsZWdhY3lEZXN0aW5hdGlvbnMgPSBfZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZG5TZXR0aW5ncy5sZWdhY3lWaWRlb1BsdWdpbnNFbmFibGVkKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJsZWdhY3lWaWRlb3NcIiAqLyAnLi4vcGx1Z2lucy9sZWdhY3ktdmlkZW8tcGx1Z2lucycpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QubG9hZExlZ2FjeVZpZGVvUGx1Z2lucyhhbmFseXRpY3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISgoX2EgPSBvcHRpb25zLnBsYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmFjaykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJzY2hlbWFGaWx0ZXJcIiAqLyAnLi4vcGx1Z2lucy9zY2hlbWEtZmlsdGVyJykudGhlbihmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2Quc2NoZW1hRmlsdGVyKChfYSA9IG9wdGlvbnMucGxhbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRyYWNrLCBjZG5TZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBfZiA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMTFdO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIF9mID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDExO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYUZpbHRlciA9IF9mO1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRTZXR0aW5ncyA9IG1lcmdlZE9wdGlvbnMoY2RuU2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdGVMb2FkZXIoY2RuU2V0dGluZ3MsIGFuYWx5dGljcy5pbnRlZ3JhdGlvbnMsIG1lcmdlZFNldHRpbmdzLCBvcHRpb25zLCB0c3ViTWlkZGxld2FyZSwgcGx1Z2luU291cmNlcykuY2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICByZW1vdGVQbHVnaW5zID0gX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlUGx1Z2lucyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbZW52RW5yaWNobWVudF0sIGxlZ2FjeURlc3RpbmF0aW9ucywgdHJ1ZSksIHJlbW90ZVBsdWdpbnMsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlUGx1Z2lucy5wdXNoKHNjaGVtYUZpbHRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkSWdub3JlU2VnbWVudGlvID0gKCgoX2IgPSBvcHRpb25zLmludGVncmF0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLkFsbCkgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhb3B0aW9ucy5pbnRlZ3JhdGlvbnNbJ1NlZ21lbnQuaW8nXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChvcHRpb25zLmludGVncmF0aW9ucyAmJiBvcHRpb25zLmludGVncmF0aW9uc1snU2VnbWVudC5pbyddID09PSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXNob3VsZElnbm9yZVNlZ21lbnRpbykgcmV0dXJuIFszIC8qYnJlYWsqLywgMTRdO1xuICAgICAgICAgICAgICAgICAgICBfaCA9IChfZyA9IGJhc2VQbHVnaW5zKS5wdXNoO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZWdtZW50aW8oYW5hbHl0aWNzLCBtZXJnZWRTZXR0aW5nc1snU2VnbWVudC5pbyddLCBjZG5TZXR0aW5ncy5pbnRlZ3JhdGlvbnMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBfaC5hcHBseShfZywgW19qLnNlbnQoKV0pO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDE0O1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIGFuYWx5dGljcy5yZWdpc3Rlci5hcHBseShhbmFseXRpY3MsIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgYmFzZVBsdWdpbnMsIGZhbHNlKSwgcGx1Z2luc0Zyb21TZXR0aW5ncywgZmFsc2UpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciB1c2VyLWRlZmluZWQgcGx1Z2lucyByZWdpc3RlcmVkIHZpYSBhbmFseXRpY3MucmVnaXN0ZXIoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbHVzaFJlZ2lzdGVyKGFuYWx5dGljcywgcHJlSW5pdEJ1ZmZlcildO1xuICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHVzZXItZGVmaW5lZCBwbHVnaW5zIHJlZ2lzdGVyZWQgdmlhIGFuYWx5dGljcy5yZWdpc3RlcigpXG4gICAgICAgICAgICAgICAgICAgIF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPYmplY3QuZW50cmllcygoX2MgPSBjZG5TZXR0aW5ncy5lbmFibGVkTWlkZGxld2FyZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30pLnNvbWUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZCA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pKSByZXR1cm4gWzMgLypicmVhayovLCAxOF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwicmVtb3RlTWlkZGxld2FyZVwiICovICcuLi9wbHVnaW5zL3JlbW90ZS1taWRkbGV3YXJlJykudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlTWlkZGxld2FyZXMgPSBfYS5yZW1vdGVNaWRkbGV3YXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWlkZGxld2FyZSwgcHJvbWlzZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW90ZU1pZGRsZXdhcmVzKGN0eCwgY2RuU2V0dGluZ3MsIG9wdGlvbnMub2JmdXNjYXRlKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRkbGV3YXJlID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcyA9IG1pZGRsZXdhcmUubWFwKGZ1bmN0aW9uIChtZHcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmFseXRpY3MuYWRkU291cmNlTWlkZGxld2FyZShtZHcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKHByb21pc2VzKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgIF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2oubGFiZWwgPSAxODtcbiAgICAgICAgICAgICAgICBjYXNlIDE4OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBsb2FkQW5hbHl0aWNzKHNldHRpbmdzLCBvcHRpb25zLCBwcmVJbml0QnVmZmVyKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbDtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNkblVSTCwgY2RuU2V0dGluZ3MsIF9tLCBkaXNhYmxlZCwgcmV0cnlRdWV1ZSwgYW5hbHl0aWNzLCBwbHVnaW5zLCBjbGFzc2ljSW50ZWdyYXRpb25zLCBzZWdtZW50TG9hZE9wdGlvbnMsIGN0eCwgc2VhcmNoLCBoYXNoLCB0ZXJtO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9vKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9vLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gbm8tb3AgYW5hbHl0aWNzIGluc3RhbmNlIGlmIGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbbmV3IE51bGxBbmFseXRpY3MoKSwgQ29udGV4dC5zeXN0ZW0oKV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmdsb2JhbEFuYWx5dGljc0tleSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEdsb2JhbEFuYWx5dGljc0tleShvcHRpb25zLmdsb2JhbEFuYWx5dGljc0tleSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYW4gdWdseSBzaWRlLWVmZmVjdCwgYnV0IGl0J3MgZm9yIHRoZSBiZW5lZml0cyBvZiB0aGUgcGx1Z2lucyB0aGF0IGdldCB0aGVpciBjZG4gdmlhIGdldENETigpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5jZG5VUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRHbG9iYWxDRE5Vcmwoc2V0dGluZ3MuY2RuVVJMKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5pdGlhbFBhZ2V2aWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXB0dXJlIHRoZSBwYWdlIGNvbnRleHQgZWFybHksIHNvIGl0J3MgYWx3YXlzIHVwLXRvLWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZUluaXRCdWZmZXIuYWRkKG5ldyBQcmVJbml0TWV0aG9kQ2FsbCgncGFnZScsIFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2RuVVJMID0gKF9hID0gc2V0dGluZ3MuY2RuVVJMKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBnZXRDRE4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9iID0gc2V0dGluZ3MuY2RuU2V0dGluZ3MpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDApKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgX20gPSBfYjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkQ0ROU2V0dGluZ3Moc2V0dGluZ3Mud3JpdGVLZXksIGNkblVSTCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX20gPSAoX28uc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgX28ubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgY2RuU2V0dGluZ3MgPSBfbTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlQ0ROU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNkblNldHRpbmdzID0gb3B0aW9ucy51cGRhdGVDRE5TZXR0aW5ncyhjZG5TZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIG9wdGlvbnMuZGlzYWJsZSA9PT0gJ2Z1bmN0aW9uJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvcHRpb25zLmRpc2FibGUoY2RuU2V0dGluZ3MpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkID0gX28uc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbbmV3IE51bGxBbmFseXRpY3MoKSwgQ29udGV4dC5zeXN0ZW0oKV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9vLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHJldHJ5UXVldWUgPSAoX2QgPSAoX2MgPSBjZG5TZXR0aW5ncy5pbnRlZ3JhdGlvbnNbJ1NlZ21lbnQuaW8nXSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnJldHJ5UXVldWUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBfX2Fzc2lnbih7IHJldHJ5UXVldWU6IHJldHJ5UXVldWUgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3MoX19hc3NpZ24oX19hc3NpZ24oe30sIHNldHRpbmdzKSwgeyBjZG5TZXR0aW5nczogY2RuU2V0dGluZ3MsIGNkblVSTDogY2RuVVJMIH0pLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoSW5zcGVjdG9yKGFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnMgPSAoX2UgPSBzZXR0aW5ncy5wbHVnaW5zKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NpY0ludGVncmF0aW9ucyA9IChfZiA9IHNldHRpbmdzLmNsYXNzaWNJbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBzZWdtZW50TG9hZE9wdGlvbnMgPSAoX2cgPSBvcHRpb25zLmludGVncmF0aW9ucykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nWydTZWdtZW50LmlvJ107XG4gICAgICAgICAgICAgICAgICAgIFN0YXRzLmluaXRSZW1vdGVNZXRyaWNzKF9fYXNzaWduKF9fYXNzaWduKHt9LCBjZG5TZXR0aW5ncy5tZXRyaWNzKSwgeyBob3N0OiAoX2ggPSBzZWdtZW50TG9hZE9wdGlvbnMgPT09IG51bGwgfHwgc2VnbWVudExvYWRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWdtZW50TG9hZE9wdGlvbnMuYXBpSG9zdCkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogKF9qID0gY2RuU2V0dGluZ3MubWV0cmljcykgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLmhvc3QsIHByb3RvY29sOiBzZWdtZW50TG9hZE9wdGlvbnMgPT09IG51bGwgfHwgc2VnbWVudExvYWRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWdtZW50TG9hZE9wdGlvbnMucHJvdG9jb2wgfSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RlclBsdWdpbnMoc2V0dGluZ3Mud3JpdGVLZXksIGNkblNldHRpbmdzLCBhbmFseXRpY3MsIG9wdGlvbnMsIHBsdWdpbnMsIGNsYXNzaWNJbnRlZ3JhdGlvbnMsIHByZUluaXRCdWZmZXIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IF9vLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoID0gKF9rID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaCkgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoX2wgPSB3aW5kb3cubG9jYXRpb24uaGFzaCkgIT09IG51bGwgJiYgX2wgIT09IHZvaWQgMCA/IF9sIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIHRlcm0gPSBzZWFyY2gubGVuZ3RoID8gc2VhcmNoIDogaGFzaC5yZXBsYWNlKC8oPz0jKS4qKD89XFw/KS8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtLmluY2x1ZGVzKCdhanNfJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhbmFseXRpY3MucXVlcnlTdHJpbmcodGVybSkuY2F0Y2goY29uc29sZS5lcnJvcildO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX28uc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfby5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MuZW1pdCgnaW5pdGlhbGl6ZScsIHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmx1c2hGaW5hbEJ1ZmZlcihhbmFseXRpY3MsIHByZUluaXRCdWZmZXIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIF9vLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFthbmFseXRpY3MsIGN0eF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8qKlxuICogVGhlIHB1YmxpYyBicm93c2VyIGludGVyZmFjZSBmb3IgU2VnbWVudCBBbmFseXRpY3NcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqICBleHBvcnQgY29uc3QgYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljc0Jyb3dzZXIoKVxuICogIGFuYWx5dGljcy5sb2FkKHsgd3JpdGVLZXk6ICdmb28nIH0pXG4gKiBgYGBcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWdtZW50aW8vYW5hbHl0aWNzLW5leHQvI3JlYWRtZVxuICovXG52YXIgQW5hbHl0aWNzQnJvd3NlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQW5hbHl0aWNzQnJvd3NlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmFseXRpY3NCcm93c2VyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSBjcmVhdGVEZWZlcnJlZCgpLCBsb2FkU3RhcnQgPSBfYS5wcm9taXNlLCByZXNvbHZlTG9hZFN0YXJ0ID0gX2EucmVzb2x2ZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZFN0YXJ0LnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gX2FbMF0sIG9wdGlvbnMgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZEFuYWx5dGljcyhzZXR0aW5ncywgb3B0aW9ucywgYnVmZmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fcmVzb2x2ZUxvYWRTdGFydCA9IGZ1bmN0aW9uIChzZXR0aW5ncywgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVMb2FkU3RhcnQoW3NldHRpbmdzLCBvcHRpb25zXSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVsbHkgaW5pdGlhbGl6ZSBhbiBhbmFseXRpY3MgaW5zdGFuY2UsIGluY2x1ZGluZzpcbiAgICAgKlxuICAgICAqICogRmV0Y2hpbmcgc2V0dGluZ3MgZnJvbSB0aGUgc2VnbWVudCBDRE4gKGJ5IGRlZmF1bHQpLlxuICAgICAqICogRmV0Y2hpbmcgYWxsIHJlbW90ZSBkZXN0aW5hdGlvbnMgY29uZmlndXJlZCBieSB0aGUgdXNlciAoaWYgYXBwbGljYWJsZSkuXG4gICAgICogKiBGbHVzaGluZyBidWZmZXJlZCBhbmFseXRpY3MgZXZlbnRzLlxuICAgICAqICogTG9hZGluZyBhbGwgbWlkZGxld2FyZS5cbiAgICAgKlxuICAgICAqIE5vdGU677iPICBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgKm9uY2UqIGluIHlvdXIgYXBwbGljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogZXhwb3J0IGNvbnN0IGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3NCcm93c2VyKClcbiAgICAgKiBhbmFseXRpY3MubG9hZCh7IHdyaXRlS2V5OiAnZm9vJyB9KVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIEFuYWx5dGljc0Jyb3dzZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoc2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy5fcmVzb2x2ZUxvYWRTdGFydChzZXR0aW5ncywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGVzIGFuIG9iamVjdCBleHBvc2luZyBBbmFseXRpY3MgbWV0aG9kcy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBhanMgPSBBbmFseXRpY3NCcm93c2VyLmxvYWQoeyB3cml0ZUtleTogJzxZT1VSX1dSSVRFX0tFWT4nIH0pXG4gICAgICpcbiAgICAgKiBhanMudHJhY2soXCJmb29cIilcbiAgICAgKiAuLi5cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBBbmFseXRpY3NCcm93c2VyLmxvYWQgPSBmdW5jdGlvbiAoc2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgcmV0dXJuIG5ldyBBbmFseXRpY3NCcm93c2VyKCkubG9hZChzZXR0aW5ncywgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCcm93c2VyLnN0YW5kYWxvbmUgPSBmdW5jdGlvbiAod3JpdGVLZXksIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIEFuYWx5dGljc0Jyb3dzZXIubG9hZCh7IHdyaXRlS2V5OiB3cml0ZUtleSB9LCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlc1swXTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQW5hbHl0aWNzQnJvd3Nlcjtcbn0oQW5hbHl0aWNzQnVmZmVyZWQpKTtcbmV4cG9ydCB7IEFuYWx5dGljc0Jyb3dzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/browser/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* binding */ Analytics),\n/* harmony export */   AnalyticsInstanceSettings: () => (/* binding */ AnalyticsInstanceSettings),\n/* harmony export */   NullAnalytics: () => (/* binding */ NullAnalytics)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../arguments-resolver */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js\");\n/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../connection */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../events */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js\");\n/* harmony import */ var _plugin__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../plugin */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js\");\n/* harmony import */ var _queue_event_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queue/event-queue */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../user */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js\");\n/* harmony import */ var _lib_bind_all__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/bind-all */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../generated/version */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_get_global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/get-global */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../lib/global-analytics-helper */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _buffer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../buffer */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../plugins/segmentio */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar deprecationWarning = 'This is being deprecated and will be not be available in future releases of Analytics JS';\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nvar global = (0,_lib_get_global__WEBPACK_IMPORTED_MODULE_0__.getGlobal)();\nvar _analytics = global === null || global === void 0 ? void 0 : global.analytics;\nfunction createDefaultQueue(name, retryQueue, disablePersistance) {\n    if (retryQueue === void 0) { retryQueue = false; }\n    if (disablePersistance === void 0) { disablePersistance = false; }\n    var maxAttempts = retryQueue ? 10 : 1;\n    var priorityQueue = disablePersistance\n        ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_1__.PriorityQueue(maxAttempts, [])\n        : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_2__.PersistedPriorityQueue(maxAttempts, name);\n    return new _queue_event_queue__WEBPACK_IMPORTED_MODULE_3__.EventQueue(priorityQueue);\n}\n/**\n * The public settings that are set on the analytics instance\n */\nvar AnalyticsInstanceSettings = /** @class */ (function () {\n    function AnalyticsInstanceSettings(settings, queue) {\n        var _a;\n        /**\n         * Auto-track specific timeout setting for legacy purposes.\n         */\n        this.timeout = 300;\n        this._getSegmentPluginMetadata = function () { var _a; return (_a = queue.plugins.find(_plugins_segmentio__WEBPACK_IMPORTED_MODULE_4__.isSegmentPlugin)) === null || _a === void 0 ? void 0 : _a.metadata; };\n        this.writeKey = settings.writeKey;\n        this.cdnSettings = (_a = settings.cdnSettings) !== null && _a !== void 0 ? _a : {\n            integrations: {},\n            edgeFunction: {},\n        };\n        this.cdnURL = settings.cdnURL;\n    }\n    Object.defineProperty(AnalyticsInstanceSettings.prototype, \"apiHost\", {\n        get: function () {\n            var _a, _b;\n            return (_b = (_a = this._getSegmentPluginMetadata) === null || _a === void 0 ? void 0 : _a.call(this)) === null || _b === void 0 ? void 0 : _b.apiHost;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AnalyticsInstanceSettings;\n}());\n\n/* analytics-classic stubs */\nfunction _stub() {\n    console.warn(deprecationWarning);\n}\nvar Analytics = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__extends)(Analytics, _super);\n    function Analytics(settings, options, queue, user, group) {\n        var _this = this;\n        var _a, _b;\n        _this = _super.call(this) || this;\n        _this._debug = false;\n        _this.initialized = false;\n        _this.user = function () {\n            return _this._user;\n        };\n        _this.init = _this.initialize.bind(_this);\n        _this.log = _stub;\n        _this.addIntegrationMiddleware = _stub;\n        _this.listeners = _stub;\n        _this.addEventListener = _stub;\n        _this.removeAllListeners = _stub;\n        _this.removeListener = _stub;\n        _this.removeEventListener = _stub;\n        _this.hasListeners = _stub;\n        _this.add = _stub;\n        _this.addIntegration = _stub;\n        var cookieOptions = options === null || options === void 0 ? void 0 : options.cookie;\n        var disablePersistance = (_a = options === null || options === void 0 ? void 0 : options.disableClientPersistence) !== null && _a !== void 0 ? _a : false;\n        _this.queue =\n            queue !== null && queue !== void 0 ? queue : createDefaultQueue(\"\".concat(settings.writeKey, \":event-queue\"), options === null || options === void 0 ? void 0 : options.retryQueue, disablePersistance);\n        _this.settings = new AnalyticsInstanceSettings(settings, _this.queue);\n        var storageSetting = options === null || options === void 0 ? void 0 : options.storage;\n        _this._universalStorage = _this.createStore(disablePersistance, storageSetting, cookieOptions);\n        _this._user =\n            user !== null && user !== void 0 ? user : new _user__WEBPACK_IMPORTED_MODULE_6__.User((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({ persist: !disablePersistance, storage: options === null || options === void 0 ? void 0 : options.storage }, options === null || options === void 0 ? void 0 : options.user), cookieOptions).load();\n        _this._group =\n            group !== null && group !== void 0 ? group : new _user__WEBPACK_IMPORTED_MODULE_6__.Group((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({ persist: !disablePersistance, storage: options === null || options === void 0 ? void 0 : options.storage }, options === null || options === void 0 ? void 0 : options.group), cookieOptions).load();\n        _this.eventFactory = new _events__WEBPACK_IMPORTED_MODULE_7__.EventFactory(_this._user);\n        _this.integrations = (_b = options === null || options === void 0 ? void 0 : options.integrations) !== null && _b !== void 0 ? _b : {};\n        _this.options = options !== null && options !== void 0 ? options : {};\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_this);\n        return _this;\n    }\n    /**\n     * Creates the storage system based on the settings received\n     * @returns Storage\n     */\n    Analytics.prototype.createStore = function (disablePersistance, storageSetting, cookieOptions) {\n        // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n        if (disablePersistance) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_9__.UniversalStorage([new _storage__WEBPACK_IMPORTED_MODULE_10__.MemoryStorage()]);\n        }\n        else {\n            if (storageSetting) {\n                if ((0,_storage__WEBPACK_IMPORTED_MODULE_11__.isArrayOfStoreType)(storageSetting)) {\n                    // We will create the store with the priority for customer settings\n                    return new _storage__WEBPACK_IMPORTED_MODULE_9__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_12__.initializeStorages)((0,_storage__WEBPACK_IMPORTED_MODULE_12__.applyCookieOptions)(storageSetting.stores, cookieOptions)));\n                }\n            }\n        }\n        // We default to our multi storage with priority\n        return new _storage__WEBPACK_IMPORTED_MODULE_9__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_12__.initializeStorages)([\n            _storage__WEBPACK_IMPORTED_MODULE_13__.StoreType.LocalStorage,\n            {\n                name: _storage__WEBPACK_IMPORTED_MODULE_13__.StoreType.Cookie,\n                settings: cookieOptions,\n            },\n            _storage__WEBPACK_IMPORTED_MODULE_13__.StoreType.Memory,\n        ]));\n    };\n    Object.defineProperty(Analytics.prototype, \"storage\", {\n        get: function () {\n            return this._universalStorage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Analytics.prototype.track = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, name, data, opts, cb, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveArguments.apply(void 0, args), name = _a[0], data = _a[1], opts = _a[2], cb = _a[3];\n                segmentEvent = this.eventFactory.track(name, data, opts, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, cb).then(function (ctx) {\n                        _this.emit('track', name, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.page = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, category, page, properties, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolvePageArguments.apply(void 0, args), category = _a[0], page = _a[1], properties = _a[2], options = _a[3], callback = _a[4];\n                segmentEvent = this.eventFactory.page(category, page, properties, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('page', category, page, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.identify = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, id, _traits, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = (0,_arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveUserArguments)(this._user).apply(void 0, args), id = _a[0], _traits = _a[1], options = _a[2], callback = _a[3];\n                this._user.identify(id, _traits);\n                segmentEvent = this.eventFactory.identify(this._user.id(), this._user.traits(), options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('identify', ctx.event.userId, ctx.event.traits, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.group = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n        if (args.length === 0) {\n            return this._group;\n        }\n        var _a = (0,_arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveUserArguments)(this._group).apply(void 0, args), id = _a[0], _traits = _a[1], options = _a[2], callback = _a[3];\n        this._group.identify(id, _traits);\n        var groupId = this._group.id();\n        var groupTraits = this._group.traits();\n        var segmentEvent = this.eventFactory.group(groupId, groupTraits, options, this.integrations, pageCtx);\n        return this._dispatch(segmentEvent, callback).then(function (ctx) {\n            _this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options);\n            return ctx;\n        });\n    };\n    Analytics.prototype.alias = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, to, from, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolveAliasArguments.apply(void 0, args), to = _a[0], from = _a[1], options = _a[2], callback = _a[3];\n                segmentEvent = this.eventFactory.alias(to, from, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('alias', to, from, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.screen = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, category, page, properties, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_14__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_15__.resolvePageArguments.apply(void 0, args), category = _a[0], page = _a[1], properties = _a[2], options = _a[3], callback = _a[4];\n                segmentEvent = this.eventFactory.screen(category, page, properties, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('screen', category, page, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.trackClick = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.link).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackLink = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.link).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackSubmit = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.form).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackForm = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.form).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.register = function () {\n        var plugins = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            plugins[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, registrations;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = _context__WEBPACK_IMPORTED_MODULE_16__.Context.system();\n                        registrations = plugins.map(function (xt) {\n                            return _this.queue.register(ctx, xt, _this);\n                        });\n                        return [4 /*yield*/, Promise.all(registrations)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    Analytics.prototype.deregister = function () {\n        var plugins = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            plugins[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, deregistrations;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = _context__WEBPACK_IMPORTED_MODULE_16__.Context.system();\n                        deregistrations = plugins.map(function (pl) {\n                            var plugin = _this.queue.plugins.find(function (p) { return p.name === pl; });\n                            if (plugin) {\n                                return _this.queue.deregister(ctx, plugin, _this);\n                            }\n                            else {\n                                ctx.log('warn', \"plugin \".concat(pl, \" not found\"));\n                            }\n                        });\n                        return [4 /*yield*/, Promise.all(deregistrations)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    Analytics.prototype.debug = function (toggle) {\n        // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n        if (toggle === false && localStorage.getItem('debug')) {\n            localStorage.removeItem('debug');\n        }\n        this._debug = toggle;\n        return this;\n    };\n    Analytics.prototype.reset = function () {\n        this._user.reset();\n        this._group.reset();\n        this.emit('reset');\n    };\n    Analytics.prototype.timeout = function (timeout) {\n        this.settings.timeout = timeout;\n    };\n    Analytics.prototype._dispatch = function (event, callback) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var ctx;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                ctx = new _context__WEBPACK_IMPORTED_MODULE_16__.Context(event);\n                if ((0,_connection__WEBPACK_IMPORTED_MODULE_17__.isOffline)() && !this.options.retryQueue) {\n                    return [2 /*return*/, ctx];\n                }\n                return [2 /*return*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_18__.dispatch)(ctx, this.queue, this, {\n                        callback: callback,\n                        debug: this._debug,\n                        timeout: this.settings.timeout,\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.addSourceMiddleware = function (fn) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.queue.criticalTasks.run(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(_this, void 0, void 0, function () {\n                            var sourceMiddlewarePlugin, integrations, plugin;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../plugins/middleware */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\"))];\n                                    case 1:\n                                        sourceMiddlewarePlugin = (_a.sent()).sourceMiddlewarePlugin;\n                                        integrations = {};\n                                        this.queue.plugins.forEach(function (plugin) {\n                                            if (plugin.type === 'destination') {\n                                                return (integrations[plugin.name] = true);\n                                            }\n                                        });\n                                        plugin = sourceMiddlewarePlugin(fn, integrations);\n                                        return [4 /*yield*/, this.register(plugin)];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    /* TODO: This does not have to return a promise? */\n    Analytics.prototype.addDestinationMiddleware = function (integrationName) {\n        var middlewares = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            middlewares[_i - 1] = arguments[_i];\n        }\n        this.queue.plugins\n            .filter(_plugin__WEBPACK_IMPORTED_MODULE_19__.isDestinationPluginWithAddMiddleware)\n            .forEach(function (p) {\n            if (integrationName === '*' ||\n                p.name.toLowerCase() === integrationName.toLowerCase()) {\n                p.addMiddleware.apply(p, middlewares);\n            }\n        });\n        return Promise.resolve(this);\n    };\n    Analytics.prototype.setAnonymousId = function (id) {\n        return this._user.anonymousId(id);\n    };\n    Analytics.prototype.queryString = function (query) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var queryString;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.options.useQueryString === false) {\n                            return [2 /*return*/, []];\n                        }\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | queryString */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../query-string */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js\"))];\n                    case 1:\n                        queryString = (_a.sent()).queryString;\n                        return [2 /*return*/, queryString(this, query)];\n                }\n            });\n        });\n    };\n    /**\n     * @deprecated This function does not register a destination plugin.\n     *\n     * Instantiates a legacy Analytics.js destination.\n     *\n     * This function does not register the destination as an Analytics.JS plugin,\n     * all the it does it to invoke the factory function back.\n     */\n    Analytics.prototype.use = function (legacyPluginFactory) {\n        legacyPluginFactory(this);\n        return this;\n    };\n    Analytics.prototype.ready = function (callback) {\n        if (callback === void 0) { callback = function (res) { return res; }; }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                return [2 /*return*/, Promise.all(this.queue.plugins.map(function (i) { return (i.ready ? i.ready() : Promise.resolve()); })).then(function (res) {\n                        callback(res);\n                        return res;\n                    })];\n            });\n        });\n    };\n    // analytics-classic api\n    Analytics.prototype.noConflict = function () {\n        console.warn(deprecationWarning);\n        (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_20__.setGlobalAnalytics)(_analytics !== null && _analytics !== void 0 ? _analytics : this);\n        return this;\n    };\n    Analytics.prototype.normalize = function (msg) {\n        console.warn(deprecationWarning);\n        return this.eventFactory['normalize'](msg);\n    };\n    Object.defineProperty(Analytics.prototype, \"failedInitializations\", {\n        get: function () {\n            console.warn(deprecationWarning);\n            return this.queue.failedInitializations;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Analytics.prototype, \"VERSION\", {\n        get: function () {\n            return _generated_version__WEBPACK_IMPORTED_MODULE_21__.version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /* @deprecated - noop */\n    Analytics.prototype.initialize = function (_settings, _options) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                console.warn(deprecationWarning);\n                return [2 /*return*/, Promise.resolve(this)];\n            });\n        });\n    };\n    Analytics.prototype.pageview = function (url) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.warn(deprecationWarning);\n                        return [4 /*yield*/, this.page({ path: url })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    Object.defineProperty(Analytics.prototype, \"plugins\", {\n        get: function () {\n            var _a;\n            console.warn(deprecationWarning);\n            // @ts-expect-error\n            return (_a = this._plugins) !== null && _a !== void 0 ? _a : {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Analytics.prototype, \"Integrations\", {\n        get: function () {\n            console.warn(deprecationWarning);\n            var integrations = this.queue.plugins\n                .filter(function (plugin) { return plugin.type === 'destination'; })\n                .reduce(function (acc, plugin) {\n                var name = \"\".concat(plugin.name\n                    .toLowerCase()\n                    .replace('.', '')\n                    .split(' ')\n                    .join('-'), \"Integration\");\n                // @ts-expect-error\n                var integration = window[name];\n                if (!integration) {\n                    return acc;\n                }\n                var nested = integration.Integration; // hack - Google Analytics function resides in the \"Integration\" field\n                if (nested) {\n                    acc[plugin.name] = nested;\n                    return acc;\n                }\n                acc[plugin.name] = integration;\n                return acc;\n            }, {});\n            return integrations;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // snippet function\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Analytics.prototype.push = function (args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var an = this;\n        var method = args.shift();\n        if (method) {\n            if (!an[method])\n                return;\n        }\n        an[method].apply(this, args);\n    };\n    return Analytics;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_22__.Emitter));\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nvar NullAnalytics = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__extends)(NullAnalytics, _super);\n    function NullAnalytics() {\n        var _this = _super.call(this, { writeKey: '' }, { disableClientPersistence: true }) || this;\n        _this.initialized = true;\n        return _this;\n    }\n    return NullAnalytics;\n}(Analytics));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hbmFseXRpY3MvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUY7QUFDMEM7QUFDbkY7QUFDTDtBQUNjO0FBQ1E7QUFDakI7QUFDdUI7QUFDZjtBQUNaO0FBQ0k7QUFDa0M7QUFDMUI7QUFDTztBQUNSO0FBQ29GO0FBQzlEO0FBQzVCO0FBQ2dCO0FBQzNEO0FBQ0E7QUFDQSxhQUFhLDBEQUFTO0FBQ3RCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxjQUFjLDhEQUFhO0FBQzNCLGNBQWMsaUZBQXNCO0FBQ3BDLGVBQWUsMERBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxRQUFRLGdDQUFnQywrREFBZTtBQUM5RztBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNvQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHVDQUFJLENBQUMsK0NBQVEsR0FBRywwR0FBMEc7QUFDcEw7QUFDQSw2REFBNkQsd0NBQUssQ0FBQywrQ0FBUSxHQUFHLDBHQUEwRztBQUN4TCxpQ0FBaUMsaURBQVk7QUFDN0M7QUFDQTtBQUNBLFFBQVEseURBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFnQixNQUFNLG9EQUFhO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBa0I7QUFDdEM7QUFDQSwrQkFBK0Isc0RBQWdCLENBQUMsNkRBQWtCLENBQUMsNkRBQWtCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFnQixDQUFDLDZEQUFrQjtBQUN0RCxZQUFZLGdEQUFTO0FBQ3JCO0FBQ0Esc0JBQXNCLGdEQUFTO0FBQy9CO0FBQ0EsYUFBYTtBQUNiLFlBQVksZ0RBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQixrRUFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQixzRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQiwwRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwRUFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLDBCQUEwQix3REFBYztBQUN4QyxxQkFBcUIsdUVBQXFCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLDBCQUEwQix3REFBYztBQUN4QyxxQkFBcUIsc0VBQW9CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELGlPQUM0QjtBQUM3RTtBQUNBO0FBQ0EsbUZBQW1GLG9EQUFhO0FBQ2hHO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQSxpREFBaUQsaU9BQzRCO0FBQzdFO0FBQ0E7QUFDQSxtRkFBbUYsb0RBQWE7QUFDaEc7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBLGlEQUFpRCxpT0FDNEI7QUFDN0U7QUFDQTtBQUNBLG1GQUFtRixvREFBYTtBQUNoRztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELGlPQUM0QjtBQUM3RTtBQUNBO0FBQ0EsbUZBQW1GLG9EQUFhO0FBQ2hHO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBLDhCQUE4Qiw4Q0FBTztBQUNyQztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0EsOEJBQThCLDhDQUFPO0FBQ3JDO0FBQ0EsaUZBQWlGLHVCQUF1QjtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QiwwQkFBMEIsOENBQU87QUFDakMsb0JBQW9CLHVEQUFTO0FBQzdCO0FBQ0E7QUFDQSxzQ0FBc0Msa0VBQVE7QUFDOUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQSw0RkFBNEYsT0FBTyxnREFBUztBQUM1RztBQUNBLG1DQUFtQyxrREFBVztBQUM5QztBQUNBLGlFQUFpRSx5TUFDdUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBFQUFvQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw0T0FDdUM7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNEJBQTRCO0FBQy9ELGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHdGQUF3RixtREFBbUQ7QUFDM0k7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRkFBa0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUJBQW1CLHdEQUFPO0FBQzFCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EseURBQXlELFdBQVc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsdUNBQXVDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMsc0VBQU87QUFDWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBLHdDQUF3QyxjQUFjLElBQUksZ0NBQWdDO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN3QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYW5hbHl0aWNzL2luZGV4LmpzP2ZhNWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19leHRlbmRzLCBfX2dlbmVyYXRvciwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgcmVzb2x2ZUFsaWFzQXJndW1lbnRzLCByZXNvbHZlQXJndW1lbnRzLCByZXNvbHZlUGFnZUFyZ3VtZW50cywgcmVzb2x2ZVVzZXJBcmd1bWVudHMsIH0gZnJvbSAnLi4vYXJndW1lbnRzLXJlc29sdmVyJztcbmltcG9ydCB7IGlzT2ZmbGluZSB9IGZyb20gJy4uL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgZGlzcGF0Y2ggfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuaW1wb3J0IHsgRXZlbnRGYWN0b3J5LCB9IGZyb20gJy4uL2V2ZW50cyc7XG5pbXBvcnQgeyBpc0Rlc3RpbmF0aW9uUGx1Z2luV2l0aEFkZE1pZGRsZXdhcmUgfSBmcm9tICcuLi9wbHVnaW4nO1xuaW1wb3J0IHsgRXZlbnRRdWV1ZSB9IGZyb20gJy4uL3F1ZXVlL2V2ZW50LXF1ZXVlJztcbmltcG9ydCB7IEdyb3VwLCBVc2VyIH0gZnJvbSAnLi4vdXNlcic7XG5pbXBvcnQgYXV0b0JpbmQgZnJvbSAnLi4vLi4vbGliL2JpbmQtYWxsJztcbmltcG9ydCB7IFBlcnNpc3RlZFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvdmVyc2lvbic7XG5pbXBvcnQgeyBQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4uLy4uL2xpYi9nZXQtZ2xvYmFsJztcbmltcG9ydCB7IE1lbW9yeVN0b3JhZ2UsIFVuaXZlcnNhbFN0b3JhZ2UsIFN0b3JlVHlwZSwgYXBwbHlDb29raWVPcHRpb25zLCBpbml0aWFsaXplU3RvcmFnZXMsIGlzQXJyYXlPZlN0b3JlVHlwZSwgfSBmcm9tICcuLi9zdG9yYWdlJztcbmltcG9ydCB7IHNldEdsb2JhbEFuYWx5dGljcyB9IGZyb20gJy4uLy4uL2xpYi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5pbXBvcnQgeyBwb3BQYWdlQ29udGV4dCB9IGZyb20gJy4uL2J1ZmZlcic7XG5pbXBvcnQgeyBpc1NlZ21lbnRQbHVnaW4sIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9zZWdtZW50aW8nO1xudmFyIGRlcHJlY2F0aW9uV2FybmluZyA9ICdUaGlzIGlzIGJlaW5nIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgbm90IGJlIGF2YWlsYWJsZSBpbiBmdXR1cmUgcmVsZWFzZXMgb2YgQW5hbHl0aWNzIEpTJztcbi8vIHJlZmVyZW5jZSBhbnkgcHJlLWV4aXN0aW5nIFwiYW5hbHl0aWNzXCIgb2JqZWN0IHNvIGEgdXNlciBjYW4gcmVzdG9yZSB0aGUgcmVmZXJlbmNlXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG52YXIgX2FuYWx5dGljcyA9IGdsb2JhbCA9PT0gbnVsbCB8fCBnbG9iYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdsb2JhbC5hbmFseXRpY3M7XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0UXVldWUobmFtZSwgcmV0cnlRdWV1ZSwgZGlzYWJsZVBlcnNpc3RhbmNlKSB7XG4gICAgaWYgKHJldHJ5UXVldWUgPT09IHZvaWQgMCkgeyByZXRyeVF1ZXVlID0gZmFsc2U7IH1cbiAgICBpZiAoZGlzYWJsZVBlcnNpc3RhbmNlID09PSB2b2lkIDApIHsgZGlzYWJsZVBlcnNpc3RhbmNlID0gZmFsc2U7IH1cbiAgICB2YXIgbWF4QXR0ZW1wdHMgPSByZXRyeVF1ZXVlID8gMTAgOiAxO1xuICAgIHZhciBwcmlvcml0eVF1ZXVlID0gZGlzYWJsZVBlcnNpc3RhbmNlXG4gICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIFtdKVxuICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKG1heEF0dGVtcHRzLCBuYW1lKTtcbiAgICByZXR1cm4gbmV3IEV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSk7XG59XG4vKipcbiAqIFRoZSBwdWJsaWMgc2V0dGluZ3MgdGhhdCBhcmUgc2V0IG9uIHRoZSBhbmFseXRpY3MgaW5zdGFuY2VcbiAqL1xudmFyIEFuYWx5dGljc0luc3RhbmNlU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQW5hbHl0aWNzSW5zdGFuY2VTZXR0aW5ncyhzZXR0aW5ncywgcXVldWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXV0by10cmFjayBzcGVjaWZpYyB0aW1lb3V0IHNldHRpbmcgZm9yIGxlZ2FjeSBwdXJwb3Nlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGltZW91dCA9IDMwMDtcbiAgICAgICAgdGhpcy5fZ2V0U2VnbWVudFBsdWdpbk1ldGFkYXRhID0gZnVuY3Rpb24gKCkgeyB2YXIgX2E7IHJldHVybiAoX2EgPSBxdWV1ZS5wbHVnaW5zLmZpbmQoaXNTZWdtZW50UGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1ldGFkYXRhOyB9O1xuICAgICAgICB0aGlzLndyaXRlS2V5ID0gc2V0dGluZ3Mud3JpdGVLZXk7XG4gICAgICAgIHRoaXMuY2RuU2V0dGluZ3MgPSAoX2EgPSBzZXR0aW5ncy5jZG5TZXR0aW5ncykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge1xuICAgICAgICAgICAgaW50ZWdyYXRpb25zOiB7fSxcbiAgICAgICAgICAgIGVkZ2VGdW5jdGlvbjoge30sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2RuVVJMID0gc2V0dGluZ3MuY2RuVVJMO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5hbHl0aWNzSW5zdGFuY2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiYXBpSG9zdFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLl9nZXRTZWdtZW50UGx1Z2luTWV0YWRhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRoaXMpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYXBpSG9zdDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBbmFseXRpY3NJbnN0YW5jZVNldHRpbmdzO1xufSgpKTtcbmV4cG9ydCB7IEFuYWx5dGljc0luc3RhbmNlU2V0dGluZ3MgfTtcbi8qIGFuYWx5dGljcy1jbGFzc2ljIHN0dWJzICovXG5mdW5jdGlvbiBfc3R1YigpIHtcbiAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbn1cbnZhciBBbmFseXRpY3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFuYWx5dGljcywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmFseXRpY3Moc2V0dGluZ3MsIG9wdGlvbnMsIHF1ZXVlLCB1c2VyLCBncm91cCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy51c2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl91c2VyO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5pbml0ID0gX3RoaXMuaW5pdGlhbGl6ZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMubG9nID0gX3N0dWI7XG4gICAgICAgIF90aGlzLmFkZEludGVncmF0aW9uTWlkZGxld2FyZSA9IF9zdHViO1xuICAgICAgICBfdGhpcy5saXN0ZW5lcnMgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IF9zdHViO1xuICAgICAgICBfdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMucmVtb3ZlTGlzdGVuZXIgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IF9zdHViO1xuICAgICAgICBfdGhpcy5oYXNMaXN0ZW5lcnMgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMuYWRkID0gX3N0dWI7XG4gICAgICAgIF90aGlzLmFkZEludGVncmF0aW9uID0gX3N0dWI7XG4gICAgICAgIHZhciBjb29raWVPcHRpb25zID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNvb2tpZTtcbiAgICAgICAgdmFyIGRpc2FibGVQZXJzaXN0YW5jZSA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9XG4gICAgICAgICAgICBxdWV1ZSAhPT0gbnVsbCAmJiBxdWV1ZSAhPT0gdm9pZCAwID8gcXVldWUgOiBjcmVhdGVEZWZhdWx0UXVldWUoXCJcIi5jb25jYXQoc2V0dGluZ3Mud3JpdGVLZXksIFwiOmV2ZW50LXF1ZXVlXCIpLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucmV0cnlRdWV1ZSwgZGlzYWJsZVBlcnNpc3RhbmNlKTtcbiAgICAgICAgX3RoaXMuc2V0dGluZ3MgPSBuZXcgQW5hbHl0aWNzSW5zdGFuY2VTZXR0aW5ncyhzZXR0aW5ncywgX3RoaXMucXVldWUpO1xuICAgICAgICB2YXIgc3RvcmFnZVNldHRpbmcgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmFnZTtcbiAgICAgICAgX3RoaXMuX3VuaXZlcnNhbFN0b3JhZ2UgPSBfdGhpcy5jcmVhdGVTdG9yZShkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2VTZXR0aW5nLCBjb29raWVPcHRpb25zKTtcbiAgICAgICAgX3RoaXMuX3VzZXIgPVxuICAgICAgICAgICAgdXNlciAhPT0gbnVsbCAmJiB1c2VyICE9PSB2b2lkIDAgPyB1c2VyIDogbmV3IFVzZXIoX19hc3NpZ24oeyBwZXJzaXN0OiAhZGlzYWJsZVBlcnNpc3RhbmNlLCBzdG9yYWdlOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmFnZSB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudXNlciksIGNvb2tpZU9wdGlvbnMpLmxvYWQoKTtcbiAgICAgICAgX3RoaXMuX2dyb3VwID1cbiAgICAgICAgICAgIGdyb3VwICE9PSBudWxsICYmIGdyb3VwICE9PSB2b2lkIDAgPyBncm91cCA6IG5ldyBHcm91cChfX2Fzc2lnbih7IHBlcnNpc3Q6ICFkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2U6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zdG9yYWdlIH0sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ncm91cCksIGNvb2tpZU9wdGlvbnMpLmxvYWQoKTtcbiAgICAgICAgX3RoaXMuZXZlbnRGYWN0b3J5ID0gbmV3IEV2ZW50RmFjdG9yeShfdGhpcy5fdXNlcik7XG4gICAgICAgIF90aGlzLmludGVncmF0aW9ucyA9IChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9O1xuICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge307XG4gICAgICAgIGF1dG9CaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBzdG9yYWdlIHN5c3RlbSBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgcmVjZWl2ZWRcbiAgICAgKiBAcmV0dXJucyBTdG9yYWdlXG4gICAgICovXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5jcmVhdGVTdG9yZSA9IGZ1bmN0aW9uIChkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2VTZXR0aW5nLCBjb29raWVPcHRpb25zKSB7XG4gICAgICAgIC8vIERpc2FibGVQZXJzaXN0YW5jZSBvcHRpb24gb3ZlcnJpZGVzIGFsbCwgbm8gc3RvcmFnZSB3aWxsIGJlIHVzZWQgb3V0c2lkZSBvZiBtZW1vcnkgZXZlbiBpZiBzcGVjaWZpZWRcbiAgICAgICAgaWYgKGRpc2FibGVQZXJzaXN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxTdG9yYWdlKFtuZXcgTWVtb3J5U3RvcmFnZSgpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3RvcmFnZVNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheU9mU3RvcmVUeXBlKHN0b3JhZ2VTZXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB3aWxsIGNyZWF0ZSB0aGUgc3RvcmUgd2l0aCB0aGUgcHJpb3JpdHkgZm9yIGN1c3RvbWVyIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShpbml0aWFsaXplU3RvcmFnZXMoYXBwbHlDb29raWVPcHRpb25zKHN0b3JhZ2VTZXR0aW5nLnN0b3JlcywgY29va2llT3B0aW9ucykpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgZGVmYXVsdCB0byBvdXIgbXVsdGkgc3RvcmFnZSB3aXRoIHByaW9yaXR5XG4gICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShpbml0aWFsaXplU3RvcmFnZXMoW1xuICAgICAgICAgICAgU3RvcmVUeXBlLkxvY2FsU3RvcmFnZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBTdG9yZVR5cGUuQ29va2llLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiBjb29raWVPcHRpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFN0b3JlVHlwZS5NZW1vcnksXG4gICAgICAgIF0pKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcInN0b3JhZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bml2ZXJzYWxTdG9yYWdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZUN0eCwgX2EsIG5hbWUsIGRhdGEsIG9wdHMsIGNiLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVBcmd1bWVudHMuYXBwbHkodm9pZCAwLCBhcmdzKSwgbmFtZSA9IF9hWzBdLCBkYXRhID0gX2FbMV0sIG9wdHMgPSBfYVsyXSwgY2IgPSBfYVszXTtcbiAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQgPSB0aGlzLmV2ZW50RmFjdG9yeS50cmFjayhuYW1lLCBkYXRhLCBvcHRzLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2IpLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgndHJhY2snLCBuYW1lLCBjdHguZXZlbnQucHJvcGVydGllcywgY3R4LmV2ZW50Lm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgY2F0ZWdvcnksIHBhZ2UsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVQYWdlQXJndW1lbnRzLmFwcGx5KHZvaWQgMCwgYXJncyksIGNhdGVnb3J5ID0gX2FbMF0sIHBhZ2UgPSBfYVsxXSwgcHJvcGVydGllcyA9IF9hWzJdLCBvcHRpb25zID0gX2FbM10sIGNhbGxiYWNrID0gX2FbNF07XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkucGFnZShjYXRlZ29yeSwgcGFnZSwgcHJvcGVydGllcywgb3B0aW9ucywgdGhpcy5pbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKS50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ3BhZ2UnLCBjYXRlZ29yeSwgcGFnZSwgY3R4LmV2ZW50LnByb3BlcnRpZXMsIGN0eC5ldmVudC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VDdHgsIF9hLCBpZCwgX3RyYWl0cywgb3B0aW9ucywgY2FsbGJhY2ssIHNlZ21lbnRFdmVudDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgcGFnZUN0eCA9IHBvcFBhZ2VDb250ZXh0KGFyZ3MpO1xuICAgICAgICAgICAgICAgIF9hID0gcmVzb2x2ZVVzZXJBcmd1bWVudHModGhpcy5fdXNlcikuYXBwbHkodm9pZCAwLCBhcmdzKSwgaWQgPSBfYVswXSwgX3RyYWl0cyA9IF9hWzFdLCBvcHRpb25zID0gX2FbMl0sIGNhbGxiYWNrID0gX2FbM107XG4gICAgICAgICAgICAgICAgdGhpcy5fdXNlci5pZGVudGlmeShpZCwgX3RyYWl0cyk7XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkuaWRlbnRpZnkodGhpcy5fdXNlci5pZCgpLCB0aGlzLl91c2VyLnRyYWl0cygpLCBvcHRpb25zLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnaWRlbnRpZnknLCBjdHguZXZlbnQudXNlcklkLCBjdHguZXZlbnQudHJhaXRzLCBjdHguZXZlbnQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWdlQ3R4ID0gcG9wUGFnZUNvbnRleHQoYXJncyk7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHJlc29sdmVVc2VyQXJndW1lbnRzKHRoaXMuX2dyb3VwKS5hcHBseSh2b2lkIDAsIGFyZ3MpLCBpZCA9IF9hWzBdLCBfdHJhaXRzID0gX2FbMV0sIG9wdGlvbnMgPSBfYVsyXSwgY2FsbGJhY2sgPSBfYVszXTtcbiAgICAgICAgdGhpcy5fZ3JvdXAuaWRlbnRpZnkoaWQsIF90cmFpdHMpO1xuICAgICAgICB2YXIgZ3JvdXBJZCA9IHRoaXMuX2dyb3VwLmlkKCk7XG4gICAgICAgIHZhciBncm91cFRyYWl0cyA9IHRoaXMuX2dyb3VwLnRyYWl0cygpO1xuICAgICAgICB2YXIgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkuZ3JvdXAoZ3JvdXBJZCwgZ3JvdXBUcmFpdHMsIG9wdGlvbnMsIHRoaXMuaW50ZWdyYXRpb25zLCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdCgnZ3JvdXAnLCBjdHguZXZlbnQuZ3JvdXBJZCwgY3R4LmV2ZW50LnRyYWl0cywgY3R4LmV2ZW50Lm9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgdG8sIGZyb20sIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVBbGlhc0FyZ3VtZW50cy5hcHBseSh2b2lkIDAsIGFyZ3MpLCB0byA9IF9hWzBdLCBmcm9tID0gX2FbMV0sIG9wdGlvbnMgPSBfYVsyXSwgY2FsbGJhY2sgPSBfYVszXTtcbiAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQgPSB0aGlzLmV2ZW50RmFjdG9yeS5hbGlhcyh0bywgZnJvbSwgb3B0aW9ucywgdGhpcy5pbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKS50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ2FsaWFzJywgdG8sIGZyb20sIGN0eC5ldmVudC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuc2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgY2F0ZWdvcnksIHBhZ2UsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVQYWdlQXJndW1lbnRzLmFwcGx5KHZvaWQgMCwgYXJncyksIGNhdGVnb3J5ID0gX2FbMF0sIHBhZ2UgPSBfYVsxXSwgcHJvcGVydGllcyA9IF9hWzJdLCBvcHRpb25zID0gX2FbM10sIGNhbGxiYWNrID0gX2FbNF07XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3Rvcnkuc2NyZWVuKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnc2NyZWVuJywgY2F0ZWdvcnksIHBhZ2UsIGN0eC5ldmVudC5wcm9wZXJ0aWVzLCBjdHguZXZlbnQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGF1dG90cmFjaztcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJhdXRvLXRyYWNrXCIgKi8gJy4uL2F1dG8tdHJhY2snKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG90cmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCAoX2EgPSBhdXRvdHJhY2subGluaykuY2FsbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbdGhpc10sIGFyZ3MsIGZhbHNlKSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUudHJhY2tMaW5rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvdHJhY2s7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYXV0by10cmFja1wiICovICcuLi9hdXRvLXRyYWNrJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvdHJhY2sgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gYXV0b3RyYWNrLmxpbmspLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW3RoaXNdLCBhcmdzLCBmYWxzZSkpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrU3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvdHJhY2s7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYXV0by10cmFja1wiICovICcuLi9hdXRvLXRyYWNrJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvdHJhY2sgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gYXV0b3RyYWNrLmZvcm0pLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW3RoaXNdLCBhcmdzLCBmYWxzZSkpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXV0b3RyYWNrO1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImF1dG8tdHJhY2tcIiAqLyAnLi4vYXV0by10cmFjaycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b3RyYWNrID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIChfYSA9IGF1dG90cmFjay5mb3JtKS5jYWxsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFt0aGlzXSwgYXJncywgZmFsc2UpKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBsdWdpbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHBsdWdpbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4LCByZWdpc3RyYXRpb25zO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IENvbnRleHQuc3lzdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25zID0gcGx1Z2lucy5tYXAoZnVuY3Rpb24gKHh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXVlLnJlZ2lzdGVyKGN0eCwgeHQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwocmVnaXN0cmF0aW9ucyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmRlcmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwbHVnaW5zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBwbHVnaW5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCwgZGVyZWdpc3RyYXRpb25zO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IENvbnRleHQuc3lzdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdHJhdGlvbnMgPSBwbHVnaW5zLm1hcChmdW5jdGlvbiAocGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gX3RoaXMucXVldWUucGx1Z2lucy5maW5kKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgPT09IHBsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5xdWV1ZS5kZXJlZ2lzdGVyKGN0eCwgcGx1Z2luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgXCJwbHVnaW4gXCIuY29uY2F0KHBsLCBcIiBub3QgZm91bmRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoZGVyZWdpc3RyYXRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAodG9nZ2xlKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBsZWdhY3kgYWpzIGRlYnVnIGdldHMgdHVybmVkIG9mZiBpZiBpdCB3YXMgZW5hYmxlZCBiZWZvcmUgdXBncmFkaW5nLlxuICAgICAgICBpZiAodG9nZ2xlID09PSBmYWxzZSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVidWcnKSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGVidWcgPSB0b2dnbGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdXNlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9ncm91cC5yZXNldCgpO1xuICAgICAgICB0aGlzLmVtaXQoJ3Jlc2V0Jyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzLnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5fZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4ID0gbmV3IENvbnRleHQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSAmJiAhdGhpcy5vcHRpb25zLnJldHJ5UXVldWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkaXNwYXRjaChjdHgsIHRoaXMucXVldWUsIHRoaXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnOiB0aGlzLl9kZWJ1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuc2V0dGluZ3MudGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5hZGRTb3VyY2VNaWRkbGV3YXJlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVldWUuY3JpdGljYWxUYXNrcy5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNaWRkbGV3YXJlUGx1Z2luLCBpbnRlZ3JhdGlvbnMsIHBsdWdpbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibWlkZGxld2FyZVwiICovICcuLi8uLi9wbHVnaW5zL21pZGRsZXdhcmUnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlTWlkZGxld2FyZVBsdWdpbiA9IChfYS5zZW50KCkpLnNvdXJjZU1pZGRsZXdhcmVQbHVnaW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaW50ZWdyYXRpb25zW3BsdWdpbi5uYW1lXSA9IHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luID0gc291cmNlTWlkZGxld2FyZVBsdWdpbihmbiwgaW50ZWdyYXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZ2lzdGVyKHBsdWdpbildO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKiBUT0RPOiBUaGlzIGRvZXMgbm90IGhhdmUgdG8gcmV0dXJuIGEgcHJvbWlzZT8gKi9cbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmFkZERlc3RpbmF0aW9uTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbk5hbWUpIHtcbiAgICAgICAgdmFyIG1pZGRsZXdhcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBtaWRkbGV3YXJlc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXVlLnBsdWdpbnNcbiAgICAgICAgICAgIC5maWx0ZXIoaXNEZXN0aW5hdGlvblBsdWdpbldpdGhBZGRNaWRkbGV3YXJlKVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIGlmIChpbnRlZ3JhdGlvbk5hbWUgPT09ICcqJyB8fFxuICAgICAgICAgICAgICAgIHAubmFtZS50b0xvd2VyQ2FzZSgpID09PSBpbnRlZ3JhdGlvbk5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIHAuYWRkTWlkZGxld2FyZS5hcHBseShwLCBtaWRkbGV3YXJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5zZXRBbm9ueW1vdXNJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlci5hbm9ueW1vdXNJZChpZCk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUXVlcnlTdHJpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcInF1ZXJ5U3RyaW5nXCIgKi8gJy4uL3F1ZXJ5LXN0cmluZycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSAoX2Euc2VudCgpKS5xdWVyeVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBxdWVyeVN0cmluZyh0aGlzLCBxdWVyeSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmVnaXN0ZXIgYSBkZXN0aW5hdGlvbiBwbHVnaW4uXG4gICAgICpcbiAgICAgKiBJbnN0YW50aWF0ZXMgYSBsZWdhY3kgQW5hbHl0aWNzLmpzIGRlc3RpbmF0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWdpc3RlciB0aGUgZGVzdGluYXRpb24gYXMgYW4gQW5hbHl0aWNzLkpTIHBsdWdpbixcbiAgICAgKiBhbGwgdGhlIGl0IGRvZXMgaXQgdG8gaW52b2tlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uIGJhY2suXG4gICAgICovXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAobGVnYWN5UGx1Z2luRmFjdG9yeSkge1xuICAgICAgICBsZWdhY3lQbHVnaW5GYWN0b3J5KHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUucmVhZHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrID09PSB2b2lkIDApIHsgY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXM7IH07IH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLmFsbCh0aGlzLnF1ZXVlLnBsdWdpbnMubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiAoaS5yZWFkeSA/IGkucmVhZHkoKSA6IFByb21pc2UucmVzb2x2ZSgpKTsgfSkpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIGFuYWx5dGljcy1jbGFzc2ljIGFwaVxuICAgIEFuYWx5dGljcy5wcm90b3R5cGUubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgIHNldEdsb2JhbEFuYWx5dGljcyhfYW5hbHl0aWNzICE9PSBudWxsICYmIF9hbmFseXRpY3MgIT09IHZvaWQgMCA/IF9hbmFseXRpY3MgOiB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RmFjdG9yeVsnbm9ybWFsaXplJ10obXNnKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcImZhaWxlZEluaXRpYWxpemF0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5mYWlsZWRJbml0aWFsaXphdGlvbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5hbHl0aWNzLnByb3RvdHlwZSwgXCJWRVJTSU9OXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qIEBkZXByZWNhdGVkIC0gbm9vcCAqL1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChfc2V0dGluZ3MsIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKHRoaXMpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUucGFnZXZpZXcgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXByZWNhdGlvbldhcm5pbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wYWdlKHsgcGF0aDogdXJsIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcInBsdWdpbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXByZWNhdGlvbldhcm5pbmcpO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuX3BsdWdpbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFuYWx5dGljcy5wcm90b3R5cGUsIFwiSW50ZWdyYXRpb25zXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbnMgPSB0aGlzLnF1ZXVlLnBsdWdpbnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwbHVnaW4pIHsgcmV0dXJuIHBsdWdpbi50eXBlID09PSAnZGVzdGluYXRpb24nOyB9KVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBcIlwiLmNvbmNhdChwbHVnaW4ubmFtZVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnLicsICcnKVxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAgICAgICAgICAgICAuam9pbignLScpLCBcIkludGVncmF0aW9uXCIpO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICB2YXIgaW50ZWdyYXRpb24gPSB3aW5kb3dbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlZ3JhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbmVzdGVkID0gaW50ZWdyYXRpb24uSW50ZWdyYXRpb247IC8vIGhhY2sgLSBHb29nbGUgQW5hbHl0aWNzIGZ1bmN0aW9uIHJlc2lkZXMgaW4gdGhlIFwiSW50ZWdyYXRpb25cIiBmaWVsZFxuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW3BsdWdpbi5uYW1lXSA9IG5lc3RlZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWNjW3BsdWdpbi5uYW1lXSA9IGludGVncmF0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdyYXRpb25zO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLy8gc25pcHBldCBmdW5jdGlvblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdmFyIGFuID0gdGhpcztcbiAgICAgICAgdmFyIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcbiAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgaWYgKCFhblttZXRob2RdKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhblttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIEFuYWx5dGljcztcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgQW5hbHl0aWNzIH07XG4vKipcbiAqIEByZXR1cm5zIGEgbm8tb3AgYW5hbHl0aWNzIGluc3RhbmNlIHRoYXQgZG9lcyBub3QgY3JlYXRlIGNvb2tpZXMgb3IgbG9jYWxzdG9yYWdlLCBvciBzZW5kIGFueSBldmVudHMgdG8gc2VnbWVudC5cbiAqL1xudmFyIE51bGxBbmFseXRpY3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE51bGxBbmFseXRpY3MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTnVsbEFuYWx5dGljcygpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgeyB3cml0ZUtleTogJycgfSwgeyBkaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2U6IHRydWUgfSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBOdWxsQW5hbHl0aWNzO1xufShBbmFseXRpY3MpKTtcbmV4cG9ydCB7IE51bGxBbmFseXRpY3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resolveAliasArguments: () => (/* binding */ resolveAliasArguments),\n/* harmony export */   resolveArguments: () => (/* binding */ resolveArguments),\n/* harmony export */   resolvePageArguments: () => (/* binding */ resolvePageArguments),\n/* harmony export */   resolveUserArguments: () => (/* binding */ resolveUserArguments)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n/**\n * Helper for the track method\n */\nfunction resolveArguments(eventName, properties, options, callback) {\n    var _a;\n    var args = [eventName, properties, options, callback];\n    var name = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName) ? eventName.event : eventName;\n    if (!name || !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString)(name)) {\n        throw new Error('Event missing');\n    }\n    var data = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName)\n        ? (_a = eventName.properties) !== null && _a !== void 0 ? _a : {}\n        : (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(properties)\n            ? properties\n            : {};\n    var opts = {};\n    if (!(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(options)) {\n        opts = options !== null && options !== void 0 ? options : {};\n    }\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName) && !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(properties)) {\n        opts = properties !== null && properties !== void 0 ? properties : {};\n    }\n    var cb = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    return [name, data, opts, cb];\n}\n/**\n * Helper for page, screen methods\n */\nfunction resolvePageArguments(category, name, properties, options, callback) {\n    var _a, _b;\n    var resolvedCategory = null;\n    var resolvedName = null;\n    var args = [category, name, properties, options, callback];\n    var strings = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString);\n    if (strings[0] !== undefined && strings[1] !== undefined) {\n        resolvedCategory = strings[0];\n        resolvedName = strings[1];\n    }\n    if (strings.length === 1) {\n        resolvedCategory = null;\n        resolvedName = strings[0];\n    }\n    var resolvedCallback = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    var objects = args.filter(function (obj) {\n        if (resolvedName === null) {\n            return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(obj);\n        }\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(obj) || obj === null;\n    });\n    var resolvedProperties = ((_a = objects[0]) !== null && _a !== void 0 ? _a : {});\n    var resolvedOptions = ((_b = objects[1]) !== null && _b !== void 0 ? _b : {});\n    return [\n        resolvedCategory,\n        resolvedName,\n        resolvedProperties,\n        resolvedOptions,\n        resolvedCallback,\n    ];\n}\n/**\n * Helper for group, identify methods\n */\nvar resolveUserArguments = function (user) {\n    return function () {\n        var _a, _b, _c;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values = {};\n        // It's a stack so it's reversed so that we go through each of the expected arguments\n        var orderStack = [\n            'callback',\n            'options',\n            'traits',\n            'id',\n        ];\n        // Read each argument and eval the possible values here\n        for (var _d = 0, args_1 = args; _d < args_1.length; _d++) {\n            var arg = args_1[_d];\n            var current = orderStack.pop();\n            if (current === 'id') {\n                if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString)(arg) || (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(arg)) {\n                    values.id = arg.toString();\n                    continue;\n                }\n                if (arg === null || arg === undefined) {\n                    continue;\n                }\n                // First argument should always be the id, if it is not a valid value we can skip it\n                current = orderStack.pop();\n            }\n            // Traits and Options\n            if ((current === 'traits' || current === 'options') &&\n                (arg === null || arg === undefined || (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(arg))) {\n                values[current] = arg;\n            }\n            // Callback\n            if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(arg)) {\n                values.callback = arg;\n                break; // This is always the last argument\n            }\n        }\n        return [\n            (_a = values.id) !== null && _a !== void 0 ? _a : user.id(),\n            ((_b = values.traits) !== null && _b !== void 0 ? _b : {}),\n            (_c = values.options) !== null && _c !== void 0 ? _c : {},\n            values.callback,\n        ];\n    };\n};\n/**\n * Helper for alias method\n */\nfunction resolveAliasArguments(to, from, options, callback) {\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(to))\n        to = to.toString(); // Legacy behaviour - allow integers for alias calls\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(from))\n        from = from.toString();\n    var args = [to, from, options, callback];\n    var _a = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString), _b = _a[0], aliasTo = _b === void 0 ? to : _b, _c = _a[1], aliasFrom = _c === void 0 ? null : _c;\n    var _d = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)[0], opts = _d === void 0 ? {} : _d;\n    var resolvedCallback = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    return [aliasTo, aliasFrom, opts, resolvedCallback];\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hcmd1bWVudHMtcmVzb2x2ZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUY7QUFDekY7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsZUFBZSxzRUFBYTtBQUM1QixrQkFBa0IsaUVBQVE7QUFDMUI7QUFDQTtBQUNBLGVBQWUsc0VBQWE7QUFDNUI7QUFDQSxVQUFVLHNFQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUVBQVU7QUFDbkI7QUFDQTtBQUNBLFFBQVEsc0VBQWEsZ0JBQWdCLG1FQUFVO0FBQy9DO0FBQ0E7QUFDQSx1QkFBdUIsK0RBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNkRBQVE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywrREFBVTtBQUMvQztBQUNBO0FBQ0EsbUJBQW1CLHNFQUFhO0FBQ2hDO0FBQ0EsZUFBZSxzRUFBYTtBQUM1QixLQUFLO0FBQ0wsbUZBQW1GO0FBQ25GLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msb0JBQW9CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBUSxTQUFTLGlFQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0VBQWE7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFVO0FBQzFCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSxpRUFBUTtBQUNoQiw0QkFBNEI7QUFDNUIsUUFBUSxpRUFBUTtBQUNoQjtBQUNBO0FBQ0EseUJBQXlCLDZEQUFRO0FBQ2pDLHlCQUF5QixrRUFBYSxnQ0FBZ0M7QUFDdEUscUNBQXFDLCtEQUFVO0FBQy9DO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYXJndW1lbnRzLXJlc29sdmVyL2luZGV4LmpzP2VjN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNGdW5jdGlvbiwgaXNQbGFpbk9iamVjdCwgaXNTdHJpbmcsIGlzTnVtYmVyLCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbi8qKlxuICogSGVscGVyIGZvciB0aGUgdHJhY2sgbWV0aG9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQXJndW1lbnRzKGV2ZW50TmFtZSwgcHJvcGVydGllcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGFyZ3MgPSBbZXZlbnROYW1lLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBjYWxsYmFja107XG4gICAgdmFyIG5hbWUgPSBpc1BsYWluT2JqZWN0KGV2ZW50TmFtZSkgPyBldmVudE5hbWUuZXZlbnQgOiBldmVudE5hbWU7XG4gICAgaWYgKCFuYW1lIHx8ICFpc1N0cmluZyhuYW1lKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IG1pc3NpbmcnKTtcbiAgICB9XG4gICAgdmFyIGRhdGEgPSBpc1BsYWluT2JqZWN0KGV2ZW50TmFtZSlcbiAgICAgICAgPyAoX2EgPSBldmVudE5hbWUucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge31cbiAgICAgICAgOiBpc1BsYWluT2JqZWN0KHByb3BlcnRpZXMpXG4gICAgICAgICAgICA/IHByb3BlcnRpZXNcbiAgICAgICAgICAgIDoge307XG4gICAgdmFyIG9wdHMgPSB7fTtcbiAgICBpZiAoIWlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgb3B0cyA9IG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9O1xuICAgIH1cbiAgICBpZiAoaXNQbGFpbk9iamVjdChldmVudE5hbWUpICYmICFpc0Z1bmN0aW9uKHByb3BlcnRpZXMpKSB7XG4gICAgICAgIG9wdHMgPSBwcm9wZXJ0aWVzICE9PSBudWxsICYmIHByb3BlcnRpZXMgIT09IHZvaWQgMCA/IHByb3BlcnRpZXMgOiB7fTtcbiAgICB9XG4gICAgdmFyIGNiID0gYXJncy5maW5kKGlzRnVuY3Rpb24pO1xuICAgIHJldHVybiBbbmFtZSwgZGF0YSwgb3B0cywgY2JdO1xufVxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhZ2UsIHNjcmVlbiBtZXRob2RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGFnZUFyZ3VtZW50cyhjYXRlZ29yeSwgbmFtZSwgcHJvcGVydGllcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHZhciByZXNvbHZlZENhdGVnb3J5ID0gbnVsbDtcbiAgICB2YXIgcmVzb2x2ZWROYW1lID0gbnVsbDtcbiAgICB2YXIgYXJncyA9IFtjYXRlZ29yeSwgbmFtZSwgcHJvcGVydGllcywgb3B0aW9ucywgY2FsbGJhY2tdO1xuICAgIHZhciBzdHJpbmdzID0gYXJncy5maWx0ZXIoaXNTdHJpbmcpO1xuICAgIGlmIChzdHJpbmdzWzBdICE9PSB1bmRlZmluZWQgJiYgc3RyaW5nc1sxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlc29sdmVkQ2F0ZWdvcnkgPSBzdHJpbmdzWzBdO1xuICAgICAgICByZXNvbHZlZE5hbWUgPSBzdHJpbmdzWzFdO1xuICAgIH1cbiAgICBpZiAoc3RyaW5ncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmVzb2x2ZWRDYXRlZ29yeSA9IG51bGw7XG4gICAgICAgIHJlc29sdmVkTmFtZSA9IHN0cmluZ3NbMF07XG4gICAgfVxuICAgIHZhciByZXNvbHZlZENhbGxiYWNrID0gYXJncy5maW5kKGlzRnVuY3Rpb24pO1xuICAgIHZhciBvYmplY3RzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAocmVzb2x2ZWROYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNQbGFpbk9iamVjdChvYmopO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc1BsYWluT2JqZWN0KG9iaikgfHwgb2JqID09PSBudWxsO1xuICAgIH0pO1xuICAgIHZhciByZXNvbHZlZFByb3BlcnRpZXMgPSAoKF9hID0gb2JqZWN0c1swXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pO1xuICAgIHZhciByZXNvbHZlZE9wdGlvbnMgPSAoKF9iID0gb2JqZWN0c1sxXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pO1xuICAgIHJldHVybiBbXG4gICAgICAgIHJlc29sdmVkQ2F0ZWdvcnksXG4gICAgICAgIHJlc29sdmVkTmFtZSxcbiAgICAgICAgcmVzb2x2ZWRQcm9wZXJ0aWVzLFxuICAgICAgICByZXNvbHZlZE9wdGlvbnMsXG4gICAgICAgIHJlc29sdmVkQ2FsbGJhY2ssXG4gICAgXTtcbn1cbi8qKlxuICogSGVscGVyIGZvciBncm91cCwgaWRlbnRpZnkgbWV0aG9kc1xuICovXG5leHBvcnQgdmFyIHJlc29sdmVVc2VyQXJndW1lbnRzID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmFsdWVzID0ge307XG4gICAgICAgIC8vIEl0J3MgYSBzdGFjayBzbyBpdCdzIHJldmVyc2VkIHNvIHRoYXQgd2UgZ28gdGhyb3VnaCBlYWNoIG9mIHRoZSBleHBlY3RlZCBhcmd1bWVudHNcbiAgICAgICAgdmFyIG9yZGVyU3RhY2sgPSBbXG4gICAgICAgICAgICAnY2FsbGJhY2snLFxuICAgICAgICAgICAgJ29wdGlvbnMnLFxuICAgICAgICAgICAgJ3RyYWl0cycsXG4gICAgICAgICAgICAnaWQnLFxuICAgICAgICBdO1xuICAgICAgICAvLyBSZWFkIGVhY2ggYXJndW1lbnQgYW5kIGV2YWwgdGhlIHBvc3NpYmxlIHZhbHVlcyBoZXJlXG4gICAgICAgIGZvciAodmFyIF9kID0gMCwgYXJnc18xID0gYXJnczsgX2QgPCBhcmdzXzEubGVuZ3RoOyBfZCsrKSB7XG4gICAgICAgICAgICB2YXIgYXJnID0gYXJnc18xW19kXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gb3JkZXJTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSAnaWQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGFyZykgfHwgaXNOdW1iZXIoYXJnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuaWQgPSBhcmcudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcmcgPT09IG51bGwgfHwgYXJnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IGFyZ3VtZW50IHNob3VsZCBhbHdheXMgYmUgdGhlIGlkLCBpZiBpdCBpcyBub3QgYSB2YWxpZCB2YWx1ZSB3ZSBjYW4gc2tpcCBpdFxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBvcmRlclN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJhaXRzIGFuZCBPcHRpb25zXG4gICAgICAgICAgICBpZiAoKGN1cnJlbnQgPT09ICd0cmFpdHMnIHx8IGN1cnJlbnQgPT09ICdvcHRpb25zJykgJiZcbiAgICAgICAgICAgICAgICAoYXJnID09PSBudWxsIHx8IGFyZyA9PT0gdW5kZWZpbmVkIHx8IGlzUGxhaW5PYmplY3QoYXJnKSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbY3VycmVudF0gPSBhcmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDYWxsYmFja1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYXJnKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5jYWxsYmFjayA9IGFyZztcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gVGhpcyBpcyBhbHdheXMgdGhlIGxhc3QgYXJndW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgKF9hID0gdmFsdWVzLmlkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1c2VyLmlkKCksXG4gICAgICAgICAgICAoKF9iID0gdmFsdWVzLnRyYWl0cykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pLFxuICAgICAgICAgICAgKF9jID0gdmFsdWVzLm9wdGlvbnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHt9LFxuICAgICAgICAgICAgdmFsdWVzLmNhbGxiYWNrLFxuICAgICAgICBdO1xuICAgIH07XG59O1xuLyoqXG4gKiBIZWxwZXIgZm9yIGFsaWFzIG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUFsaWFzQXJndW1lbnRzKHRvLCBmcm9tLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGlmIChpc051bWJlcih0bykpXG4gICAgICAgIHRvID0gdG8udG9TdHJpbmcoKTsgLy8gTGVnYWN5IGJlaGF2aW91ciAtIGFsbG93IGludGVnZXJzIGZvciBhbGlhcyBjYWxsc1xuICAgIGlmIChpc051bWJlcihmcm9tKSlcbiAgICAgICAgZnJvbSA9IGZyb20udG9TdHJpbmcoKTtcbiAgICB2YXIgYXJncyA9IFt0bywgZnJvbSwgb3B0aW9ucywgY2FsbGJhY2tdO1xuICAgIHZhciBfYSA9IGFyZ3MuZmlsdGVyKGlzU3RyaW5nKSwgX2IgPSBfYVswXSwgYWxpYXNUbyA9IF9iID09PSB2b2lkIDAgPyB0byA6IF9iLCBfYyA9IF9hWzFdLCBhbGlhc0Zyb20gPSBfYyA9PT0gdm9pZCAwID8gbnVsbCA6IF9jO1xuICAgIHZhciBfZCA9IGFyZ3MuZmlsdGVyKGlzUGxhaW5PYmplY3QpWzBdLCBvcHRzID0gX2QgPT09IHZvaWQgMCA/IHt9IDogX2Q7XG4gICAgdmFyIHJlc29sdmVkQ2FsbGJhY2sgPSBhcmdzLmZpbmQoaXNGdW5jdGlvbik7XG4gICAgcmV0dXJuIFthbGlhc1RvLCBhbGlhc0Zyb20sIG9wdHMsIHJlc29sdmVkQ2FsbGJhY2tdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   form: () => (/* binding */ form),\n/* harmony export */   link: () => (/* binding */ link)\n/* harmony export */ });\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callback */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n// Check if a user is opening the link in a new tab\nfunction userNewTab(event) {\n    var typedEvent = event;\n    if (typedEvent.ctrlKey ||\n        typedEvent.shiftKey ||\n        typedEvent.metaKey ||\n        (typedEvent.button && typedEvent.button == 1)) {\n        return true;\n    }\n    return false;\n}\n// Check if the link opens in new tab\nfunction linkNewTab(element, href) {\n    if (element.target === '_blank' && href) {\n        return true;\n    }\n    return false;\n}\nfunction link(links, event, properties, options) {\n    var _this = this;\n    var elements = [];\n    // always arrays, handles jquery\n    if (!links) {\n        return this;\n    }\n    if (links instanceof Element) {\n        elements = [links];\n    }\n    else if ('toArray' in links) {\n        elements = links.toArray();\n    }\n    else {\n        elements = links;\n    }\n    elements.forEach(function (el) {\n        el.addEventListener('click', function (elementEvent) {\n            var _a, _b;\n            var ev = event instanceof Function ? event(el) : event;\n            var props = properties instanceof Function ? properties(el) : properties;\n            var href = el.getAttribute('href') ||\n                el.getAttributeNS('http://www.w3.org/1999/xlink', 'href') ||\n                el.getAttribute('xlink:href') ||\n                ((_a = el.getElementsByTagName('a')[0]) === null || _a === void 0 ? void 0 : _a.getAttribute('href'));\n            var trackEvent = (0,_callback__WEBPACK_IMPORTED_MODULE_0__.pTimeout)(_this.track(ev, props, options !== null && options !== void 0 ? options : {}), (_b = _this.settings.timeout) !== null && _b !== void 0 ? _b : 500);\n            if (!linkNewTab(el, href) &&\n                !userNewTab(elementEvent)) {\n                if (href) {\n                    elementEvent.preventDefault\n                        ? elementEvent.preventDefault()\n                        : (elementEvent.returnValue = false);\n                    trackEvent\n                        .catch(console.error)\n                        .then(function () {\n                        window.location.href = href;\n                    })\n                        .catch(console.error);\n                }\n            }\n        }, false);\n    });\n    return this;\n}\nfunction form(forms, event, properties, options) {\n    var _this = this;\n    // always arrays, handles jquery\n    if (!forms)\n        return this;\n    if (forms instanceof HTMLFormElement)\n        forms = [forms];\n    var elements = forms;\n    elements.forEach(function (el) {\n        if (!(el instanceof Element))\n            throw new TypeError('Must pass HTMLElement to trackForm/trackSubmit.');\n        var handler = function (elementEvent) {\n            var _a;\n            elementEvent.preventDefault\n                ? elementEvent.preventDefault()\n                : (elementEvent.returnValue = false);\n            var ev = event instanceof Function ? event(el) : event;\n            var props = properties instanceof Function ? properties(el) : properties;\n            var trackEvent = (0,_callback__WEBPACK_IMPORTED_MODULE_0__.pTimeout)(_this.track(ev, props, options !== null && options !== void 0 ? options : {}), (_a = _this.settings.timeout) !== null && _a !== void 0 ? _a : 500);\n            trackEvent\n                .catch(console.error)\n                .then(function () {\n                el.submit();\n            })\n                .catch(console.error);\n        };\n        // Support the events happening through jQuery or Zepto instead of through\n        // the normal DOM API, because `el.submit` doesn't bubble up events...\n        var $ = window.jQuery || window.Zepto;\n        if ($) {\n            $(el).submit(handler);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-misused-promises\n            el.addEventListener('submit', handler, false);\n        }\n    });\n    return this;\n}\n//# sourceMappingURL=auto-track.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hdXRvLXRyYWNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtREFBUSw2RUFBNkU7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFRLDZFQUE2RTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hdXRvLXRyYWNrLmpzPzU5MjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcFRpbWVvdXQgfSBmcm9tICcuL2NhbGxiYWNrJztcbi8vIENoZWNrIGlmIGEgdXNlciBpcyBvcGVuaW5nIHRoZSBsaW5rIGluIGEgbmV3IHRhYlxuZnVuY3Rpb24gdXNlck5ld1RhYihldmVudCkge1xuICAgIHZhciB0eXBlZEV2ZW50ID0gZXZlbnQ7XG4gICAgaWYgKHR5cGVkRXZlbnQuY3RybEtleSB8fFxuICAgICAgICB0eXBlZEV2ZW50LnNoaWZ0S2V5IHx8XG4gICAgICAgIHR5cGVkRXZlbnQubWV0YUtleSB8fFxuICAgICAgICAodHlwZWRFdmVudC5idXR0b24gJiYgdHlwZWRFdmVudC5idXR0b24gPT0gMSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIENoZWNrIGlmIHRoZSBsaW5rIG9wZW5zIGluIG5ldyB0YWJcbmZ1bmN0aW9uIGxpbmtOZXdUYWIoZWxlbWVudCwgaHJlZikge1xuICAgIGlmIChlbGVtZW50LnRhcmdldCA9PT0gJ19ibGFuaycgJiYgaHJlZikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxpbmsobGlua3MsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICAvLyBhbHdheXMgYXJyYXlzLCBoYW5kbGVzIGpxdWVyeVxuICAgIGlmICghbGlua3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmIChsaW5rcyBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudHMgPSBbbGlua3NdO1xuICAgIH1cbiAgICBlbHNlIGlmICgndG9BcnJheScgaW4gbGlua3MpIHtcbiAgICAgICAgZWxlbWVudHMgPSBsaW5rcy50b0FycmF5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50cyA9IGxpbmtzO1xuICAgIH1cbiAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlbGVtZW50RXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICB2YXIgZXYgPSBldmVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gZXZlbnQoZWwpIDogZXZlbnQ7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBwcm9wZXJ0aWVzIGluc3RhbmNlb2YgRnVuY3Rpb24gPyBwcm9wZXJ0aWVzKGVsKSA6IHByb3BlcnRpZXM7XG4gICAgICAgICAgICB2YXIgaHJlZiA9IGVsLmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8XG4gICAgICAgICAgICAgICAgZWwuZ2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCAnaHJlZicpIHx8XG4gICAgICAgICAgICAgICAgZWwuZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykgfHxcbiAgICAgICAgICAgICAgICAoKF9hID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKVswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEF0dHJpYnV0ZSgnaHJlZicpKTtcbiAgICAgICAgICAgIHZhciB0cmFja0V2ZW50ID0gcFRpbWVvdXQoX3RoaXMudHJhY2soZXYsIHByb3BzLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSksIChfYiA9IF90aGlzLnNldHRpbmdzLnRpbWVvdXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDUwMCk7XG4gICAgICAgICAgICBpZiAoIWxpbmtOZXdUYWIoZWwsIGhyZWYpICYmXG4gICAgICAgICAgICAgICAgIXVzZXJOZXdUYWIoZWxlbWVudEV2ZW50KSkge1xuICAgICAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRFdmVudC5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBlbGVtZW50RXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoZWxlbWVudEV2ZW50LnJldHVyblZhbHVlID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0cmFja0V2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtKGZvcm1zLCBldmVudCwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgLy8gYWx3YXlzIGFycmF5cywgaGFuZGxlcyBqcXVlcnlcbiAgICBpZiAoIWZvcm1zKVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoZm9ybXMgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpXG4gICAgICAgIGZvcm1zID0gW2Zvcm1zXTtcbiAgICB2YXIgZWxlbWVudHMgPSBmb3JtcztcbiAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBpZiAoIShlbCBpbnN0YW5jZW9mIEVsZW1lbnQpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwYXNzIEhUTUxFbGVtZW50IHRvIHRyYWNrRm9ybS90cmFja1N1Ym1pdC4nKTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZWxlbWVudEV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBlbGVtZW50RXZlbnQucHJldmVudERlZmF1bHRcbiAgICAgICAgICAgICAgICA/IGVsZW1lbnRFdmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgOiAoZWxlbWVudEV2ZW50LnJldHVyblZhbHVlID0gZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGV2ID0gZXZlbnQgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IGV2ZW50KGVsKSA6IGV2ZW50O1xuICAgICAgICAgICAgdmFyIHByb3BzID0gcHJvcGVydGllcyBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gcHJvcGVydGllcyhlbCkgOiBwcm9wZXJ0aWVzO1xuICAgICAgICAgICAgdmFyIHRyYWNrRXZlbnQgPSBwVGltZW91dChfdGhpcy50cmFjayhldiwgcHJvcHMsIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KSwgKF9hID0gX3RoaXMuc2V0dGluZ3MudGltZW91dCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogNTAwKTtcbiAgICAgICAgICAgIHRyYWNrRXZlbnRcbiAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWwuc3VibWl0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gU3VwcG9ydCB0aGUgZXZlbnRzIGhhcHBlbmluZyB0aHJvdWdoIGpRdWVyeSBvciBaZXB0byBpbnN0ZWFkIG9mIHRocm91Z2hcbiAgICAgICAgLy8gdGhlIG5vcm1hbCBET00gQVBJLCBiZWNhdXNlIGBlbC5zdWJtaXRgIGRvZXNuJ3QgYnViYmxlIHVwIGV2ZW50cy4uLlxuICAgICAgICB2YXIgJCA9IHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvO1xuICAgICAgICBpZiAoJCkge1xuICAgICAgICAgICAgJChlbCkuc3VibWl0KGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dG8tdHJhY2suanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsBuffered: () => (/* binding */ AnalyticsBuffered),\n/* harmony export */   PreInitMethodCall: () => (/* binding */ PreInitMethodCall),\n/* harmony export */   PreInitMethodCallBuffer: () => (/* binding */ PreInitMethodCallBuffer),\n/* harmony export */   callAnalyticsMethod: () => (/* binding */ callAnalyticsMethod),\n/* harmony export */   flushAddSourceMiddleware: () => (/* binding */ flushAddSourceMiddleware),\n/* harmony export */   flushAnalyticsCallsInNewTask: () => (/* binding */ flushAnalyticsCallsInNewTask),\n/* harmony export */   flushOn: () => (/* binding */ flushOn),\n/* harmony export */   flushRegister: () => (/* binding */ flushRegister),\n/* harmony export */   flushSetAnonymousID: () => (/* binding */ flushSetAnonymousID),\n/* harmony export */   hasBufferedPageContextAsLastArg: () => (/* binding */ hasBufferedPageContextAsLastArg),\n/* harmony export */   popPageContext: () => (/* binding */ popPageContext)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_is_thenable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/is-thenable */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../generated/version */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/global-analytics-helper */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../page */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/version-type */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n\n\n\n\n\n\nvar flushSyncAnalyticsCalls = function (name, analytics, buffer) {\n    buffer.getAndRemove(name).forEach(function (c) {\n        // While the underlying methods are synchronous, the callAnalyticsMethod returns a promise,\n        // which normalizes success and error states between async and non-async methods, with no perf penalty.\n        callAnalyticsMethod(analytics, c).catch(console.error);\n    });\n};\nvar flushAddSourceMiddleware = function (analytics, buffer) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var _i, _a, c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _i = 0, _a = buffer.getAndRemove('addSourceMiddleware');\n                _b.label = 1;\n            case 1:\n                if (!(_i < _a.length)) return [3 /*break*/, 4];\n                c = _a[_i];\n                return [4 /*yield*/, callAnalyticsMethod(analytics, c).catch(console.error)];\n            case 2:\n                _b.sent();\n                _b.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\n/**\n *  Flush register plugin\n */\nvar flushRegister = function (analytics, buffer) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var _i, _a, c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _i = 0, _a = buffer.getAndRemove('register');\n                _b.label = 1;\n            case 1:\n                if (!(_i < _a.length)) return [3 /*break*/, 4];\n                c = _a[_i];\n                return [4 /*yield*/, callAnalyticsMethod(analytics, c).catch(console.error)];\n            case 2:\n                _b.sent();\n                _b.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\nvar flushOn = flushSyncAnalyticsCalls.bind(undefined, 'on');\nvar flushSetAnonymousID = flushSyncAnalyticsCalls.bind(undefined, 'setAnonymousId');\nvar flushAnalyticsCallsInNewTask = function (analytics, buffer) {\n    ;\n    Object.keys(buffer.calls).forEach(function (m) {\n        buffer.getAndRemove(m).forEach(function (c) {\n            // No one remembers why this event loop optimization is/was neccessary. Lost to history.\n            setTimeout(function () {\n                callAnalyticsMethod(analytics, c).catch(console.error);\n            }, 0);\n        });\n    });\n};\nvar popPageContext = function (args) {\n    if (hasBufferedPageContextAsLastArg(args)) {\n        var ctx = args.pop();\n        return (0,_page__WEBPACK_IMPORTED_MODULE_1__.createPageContext)(ctx);\n    }\n};\nvar hasBufferedPageContextAsLastArg = function (args) {\n    var lastArg = args[args.length - 1];\n    return (0,_page__WEBPACK_IMPORTED_MODULE_1__.isBufferedPageContext)(lastArg);\n};\n/**\n *  Represents a buffered method call that occurred before initialization.\n */\nvar PreInitMethodCall = /** @class */ (function () {\n    function PreInitMethodCall(method, args, resolve, reject) {\n        if (resolve === void 0) { resolve = function () { }; }\n        if (reject === void 0) { reject = console.error; }\n        this.method = method;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.called = false;\n        this.args = args;\n    }\n    return PreInitMethodCall;\n}());\n\n/**\n *  Represents any and all the buffered method calls that occurred before initialization.\n */\nvar PreInitMethodCallBuffer = /** @class */ (function () {\n    function PreInitMethodCallBuffer() {\n        var calls = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            calls[_i] = arguments[_i];\n        }\n        this._callMap = {};\n        this.add.apply(this, calls);\n    }\n    Object.defineProperty(PreInitMethodCallBuffer.prototype, \"calls\", {\n        /**\n         * Pull any buffered method calls from the window object, and use them to hydrate the instance buffer.\n         */\n        get: function () {\n            this._pushSnippetWindowBuffer();\n            return this._callMap;\n        },\n        set: function (calls) {\n            this._callMap = calls;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PreInitMethodCallBuffer.prototype.get = function (methodName) {\n        var _a;\n        return ((_a = this.calls[methodName]) !== null && _a !== void 0 ? _a : []);\n    };\n    /**\n     * Get all buffered method calls for a given method name, and clear them from the buffer.\n     */\n    PreInitMethodCallBuffer.prototype.getAndRemove = function (methodName) {\n        var calls = this.get(methodName);\n        this.calls[methodName] = [];\n        return calls;\n    };\n    PreInitMethodCallBuffer.prototype.add = function () {\n        var _this = this;\n        var calls = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            calls[_i] = arguments[_i];\n        }\n        calls.forEach(function (call) {\n            var eventsExpectingPageContext = [\n                'track',\n                'screen',\n                'alias',\n                'group',\n                'page',\n                'identify',\n            ];\n            if (eventsExpectingPageContext.includes(call.method) &&\n                !hasBufferedPageContextAsLastArg(call.args)) {\n                call.args = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], call.args, true), [(0,_page__WEBPACK_IMPORTED_MODULE_1__.getDefaultBufferedPageContext)()], false);\n            }\n            if (_this.calls[call.method]) {\n                _this.calls[call.method].push(call);\n            }\n            else {\n                _this.calls[call.method] = [call];\n            }\n        });\n    };\n    PreInitMethodCallBuffer.prototype.clear = function () {\n        // clear calls in the global snippet buffered array.\n        this._pushSnippetWindowBuffer();\n        // clear calls in this instance\n        this.calls = {};\n    };\n    PreInitMethodCallBuffer.prototype.toArray = function () {\n        var _a;\n        return (_a = []).concat.apply(_a, Object.values(this.calls));\n    };\n    /**\n     * Fetch the buffered method calls from the window object,\n     * normalize them, and use them to hydrate the buffer.\n     * This removes existing buffered calls from the window object.\n     */\n    PreInitMethodCallBuffer.prototype._pushSnippetWindowBuffer = function () {\n        // if this is the npm version, we don't want to read from the window object.\n        // This avoids namespace conflicts if there is a seperate analytics library on the page.\n        if ((0,_lib_version_type__WEBPACK_IMPORTED_MODULE_2__.getVersionType)() === 'npm') {\n            return undefined;\n        }\n        var wa = (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_3__.getGlobalAnalytics)();\n        if (!Array.isArray(wa))\n            return undefined;\n        var buffered = wa.splice(0, wa.length);\n        var calls = buffered.map(function (_a) {\n            var methodName = _a[0], args = _a.slice(1);\n            return new PreInitMethodCall(methodName, args);\n        });\n        this.add.apply(this, calls);\n    };\n    return PreInitMethodCallBuffer;\n}());\n\n/**\n *  Call method and mark as \"called\"\n *  This function should never throw an error\n */\nfunction callAnalyticsMethod(analytics, call) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var result, err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 3, , 4]);\n                    if (call.called) {\n                        return [2 /*return*/, undefined];\n                    }\n                    call.called = true;\n                    result = analytics[call.method].apply(analytics, call.args);\n                    if (!(0,_lib_is_thenable__WEBPACK_IMPORTED_MODULE_4__.isThenable)(result)) return [3 /*break*/, 2];\n                    // do not defer for non-async methods\n                    return [4 /*yield*/, result];\n                case 1:\n                    // do not defer for non-async methods\n                    _a.sent();\n                    _a.label = 2;\n                case 2:\n                    call.resolve(result);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    call.reject(err_1);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nvar AnalyticsBuffered = /** @class */ (function () {\n    function AnalyticsBuffered(loader) {\n        var _this = this;\n        this.trackSubmit = this._createMethod('trackSubmit');\n        this.trackClick = this._createMethod('trackClick');\n        this.trackLink = this._createMethod('trackLink');\n        this.pageView = this._createMethod('pageview');\n        this.identify = this._createMethod('identify');\n        this.reset = this._createMethod('reset');\n        this.group = this._createMethod('group');\n        this.track = this._createMethod('track');\n        this.ready = this._createMethod('ready');\n        this.alias = this._createMethod('alias');\n        this.debug = this._createChainableMethod('debug');\n        this.page = this._createMethod('page');\n        this.once = this._createChainableMethod('once');\n        this.off = this._createChainableMethod('off');\n        this.on = this._createChainableMethod('on');\n        this.addSourceMiddleware = this._createMethod('addSourceMiddleware');\n        this.setAnonymousId = this._createMethod('setAnonymousId');\n        this.addDestinationMiddleware = this._createMethod('addDestinationMiddleware');\n        this.screen = this._createMethod('screen');\n        this.register = this._createMethod('register');\n        this.deregister = this._createMethod('deregister');\n        this.user = this._createMethod('user');\n        this.VERSION = _generated_version__WEBPACK_IMPORTED_MODULE_5__.version;\n        this._preInitBuffer = new PreInitMethodCallBuffer();\n        this._promise = loader(this._preInitBuffer);\n        this._promise\n            .then(function (_a) {\n            var ajs = _a[0], ctx = _a[1];\n            _this.instance = ajs;\n            _this.ctx = ctx;\n        })\n            .catch(function () {\n            // intentionally do nothing...\n            // this result of this promise will be caught by the 'catch' block on this class.\n        });\n    }\n    AnalyticsBuffered.prototype.then = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).then.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype.catch = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).catch.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype.finally = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).finally.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype._createMethod = function (methodName) {\n        var _this = this;\n        return function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.instance) {\n                var result = (_a = _this.instance)[methodName].apply(_a, args);\n                return Promise.resolve(result);\n            }\n            return new Promise(function (resolve, reject) {\n                _this._preInitBuffer.add(new PreInitMethodCall(methodName, args, resolve, reject));\n            });\n        };\n    };\n    /**\n     *  These are for methods that where determining when the method gets \"flushed\" is not important.\n     *  These methods will resolve when analytics is fully initialized, and return type (other than Analytics)will not be available.\n     */\n    AnalyticsBuffered.prototype._createChainableMethod = function (methodName) {\n        var _this = this;\n        return function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.instance) {\n                void (_a = _this.instance)[methodName].apply(_a, args);\n                return _this;\n            }\n            else {\n                _this._preInitBuffer.add(new PreInitMethodCall(methodName, args));\n            }\n            return _this;\n        };\n    };\n    return AnalyticsBuffered;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9idWZmZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDWDtBQUNEO0FBQ3FCO0FBQzRCO0FBQzNDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTyw4REFBOEQsT0FBTyxnREFBUztBQUNyRjtBQUNBLFdBQVcsa0RBQVc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNPLG1EQUFtRCxPQUFPLGdEQUFTO0FBQzFFO0FBQ0EsV0FBVyxrREFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ00sMkNBQTJDLFNBQUk7QUFDL0MsdURBQXVELFNBQUk7QUFDM0Q7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsd0RBQWlCO0FBQ2hDO0FBQ0E7QUFDTztBQUNQO0FBQ0EsV0FBVyw0REFBcUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0RBQWEsQ0FBQyxvREFBYSx3QkFBd0Isb0VBQTZCO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBYztBQUMxQjtBQUNBO0FBQ0EsaUJBQWlCLGdGQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNrQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw0REFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2J1ZmZlci9pbmRleC5qcz9iNDQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuLi8uLi9saWIvaXMtdGhlbmFibGUnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGdldEdsb2JhbEFuYWx5dGljcyB9IGZyb20gJy4uLy4uL2xpYi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5pbXBvcnQgeyBpc0J1ZmZlcmVkUGFnZUNvbnRleHQsIGdldERlZmF1bHRCdWZmZXJlZFBhZ2VDb250ZXh0LCBjcmVhdGVQYWdlQ29udGV4dCwgfSBmcm9tICcuLi9wYWdlJztcbmltcG9ydCB7IGdldFZlcnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vbGliL3ZlcnNpb24tdHlwZSc7XG52YXIgZmx1c2hTeW5jQW5hbHl0aWNzQ2FsbHMgPSBmdW5jdGlvbiAobmFtZSwgYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICBidWZmZXIuZ2V0QW5kUmVtb3ZlKG5hbWUpLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgLy8gV2hpbGUgdGhlIHVuZGVybHlpbmcgbWV0aG9kcyBhcmUgc3luY2hyb25vdXMsIHRoZSBjYWxsQW5hbHl0aWNzTWV0aG9kIHJldHVybnMgYSBwcm9taXNlLFxuICAgICAgICAvLyB3aGljaCBub3JtYWxpemVzIHN1Y2Nlc3MgYW5kIGVycm9yIHN0YXRlcyBiZXR3ZWVuIGFzeW5jIGFuZCBub24tYXN5bmMgbWV0aG9kcywgd2l0aCBubyBwZXJmIHBlbmFsdHkuXG4gICAgICAgIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBjKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9KTtcbn07XG5leHBvcnQgdmFyIGZsdXNoQWRkU291cmNlTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChhbmFseXRpY3MsIGJ1ZmZlcikgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2ksIF9hLCBjO1xuICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF9pID0gMCwgX2EgPSBidWZmZXIuZ2V0QW5kUmVtb3ZlKCdhZGRTb3VyY2VNaWRkbGV3YXJlJyk7XG4gICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICghKF9pIDwgX2EubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgYyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjYWxsQW5hbHl0aWNzTWV0aG9kKGFuYWx5dGljcywgYykuY2F0Y2goY29uc29sZS5lcnJvcildO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDM7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgX2krKztcbiAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICB9XG4gICAgfSk7XG59KTsgfTtcbi8qKlxuICogIEZsdXNoIHJlZ2lzdGVyIHBsdWdpblxuICovXG5leHBvcnQgdmFyIGZsdXNoUmVnaXN0ZXIgPSBmdW5jdGlvbiAoYW5hbHl0aWNzLCBidWZmZXIpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9pLCBfYSwgYztcbiAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfaSA9IDAsIF9hID0gYnVmZmVyLmdldEFuZFJlbW92ZSgncmVnaXN0ZXInKTtcbiAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBfYS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBjKS5jYXRjaChjb25zb2xlLmVycm9yKV07XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBfaSsrO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICB9KTtcbn0pOyB9O1xuZXhwb3J0IHZhciBmbHVzaE9uID0gZmx1c2hTeW5jQW5hbHl0aWNzQ2FsbHMuYmluZCh0aGlzLCAnb24nKTtcbmV4cG9ydCB2YXIgZmx1c2hTZXRBbm9ueW1vdXNJRCA9IGZsdXNoU3luY0FuYWx5dGljc0NhbGxzLmJpbmQodGhpcywgJ3NldEFub255bW91c0lkJyk7XG5leHBvcnQgdmFyIGZsdXNoQW5hbHl0aWNzQ2FsbHNJbk5ld1Rhc2sgPSBmdW5jdGlvbiAoYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICA7XG4gICAgT2JqZWN0LmtleXMoYnVmZmVyLmNhbGxzKS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIGJ1ZmZlci5nZXRBbmRSZW1vdmUobSkuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgLy8gTm8gb25lIHJlbWVtYmVycyB3aHkgdGhpcyBldmVudCBsb29wIG9wdGltaXphdGlvbiBpcy93YXMgbmVjY2Vzc2FyeS4gTG9zdCB0byBoaXN0b3J5LlxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2FsbEFuYWx5dGljc01ldGhvZChhbmFseXRpY3MsIGMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydCB2YXIgcG9wUGFnZUNvbnRleHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIGlmIChoYXNCdWZmZXJlZFBhZ2VDb250ZXh0QXNMYXN0QXJnKGFyZ3MpKSB7XG4gICAgICAgIHZhciBjdHggPSBhcmdzLnBvcCgpO1xuICAgICAgICByZXR1cm4gY3JlYXRlUGFnZUNvbnRleHQoY3R4KTtcbiAgICB9XG59O1xuZXhwb3J0IHZhciBoYXNCdWZmZXJlZFBhZ2VDb250ZXh0QXNMYXN0QXJnID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICB2YXIgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gaXNCdWZmZXJlZFBhZ2VDb250ZXh0KGxhc3RBcmcpO1xufTtcbi8qKlxuICogIFJlcHJlc2VudHMgYSBidWZmZXJlZCBtZXRob2QgY2FsbCB0aGF0IG9jY3VycmVkIGJlZm9yZSBpbml0aWFsaXphdGlvbi5cbiAqL1xudmFyIFByZUluaXRNZXRob2RDYWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByZUluaXRNZXRob2RDYWxsKG1ldGhvZCwgYXJncywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChyZXNvbHZlID09PSB2b2lkIDApIHsgcmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHsgfTsgfVxuICAgICAgICBpZiAocmVqZWN0ID09PSB2b2lkIDApIHsgcmVqZWN0ID0gY29uc29sZS5lcnJvcjsgfVxuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIHRoaXMuY2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgfVxuICAgIHJldHVybiBQcmVJbml0TWV0aG9kQ2FsbDtcbn0oKSk7XG5leHBvcnQgeyBQcmVJbml0TWV0aG9kQ2FsbCB9O1xuLyoqXG4gKiAgUmVwcmVzZW50cyBhbnkgYW5kIGFsbCB0aGUgYnVmZmVyZWQgbWV0aG9kIGNhbGxzIHRoYXQgb2NjdXJyZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uLlxuICovXG52YXIgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIoKSB7XG4gICAgICAgIHZhciBjYWxscyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY2FsbHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWxsTWFwID0ge307XG4gICAgICAgIHRoaXMuYWRkLmFwcGx5KHRoaXMsIGNhbGxzKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByZUluaXRNZXRob2RDYWxsQnVmZmVyLnByb3RvdHlwZSwgXCJjYWxsc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQdWxsIGFueSBidWZmZXJlZCBtZXRob2QgY2FsbHMgZnJvbSB0aGUgd2luZG93IG9iamVjdCwgYW5kIHVzZSB0aGVtIHRvIGh5ZHJhdGUgdGhlIGluc3RhbmNlIGJ1ZmZlci5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fcHVzaFNuaXBwZXRXaW5kb3dCdWZmZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsTWFwO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYWxscykge1xuICAgICAgICAgICAgdGhpcy5fY2FsbE1hcCA9IGNhbGxzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmNhbGxzW21ldGhvZE5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGJ1ZmZlcmVkIG1ldGhvZCBjYWxscyBmb3IgYSBnaXZlbiBtZXRob2QgbmFtZSwgYW5kIGNsZWFyIHRoZW0gZnJvbSB0aGUgYnVmZmVyLlxuICAgICAqL1xuICAgIFByZUluaXRNZXRob2RDYWxsQnVmZmVyLnByb3RvdHlwZS5nZXRBbmRSZW1vdmUgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgY2FsbHMgPSB0aGlzLmdldChtZXRob2ROYW1lKTtcbiAgICAgICAgdGhpcy5jYWxsc1ttZXRob2ROYW1lXSA9IFtdO1xuICAgICAgICByZXR1cm4gY2FsbHM7XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2FsbHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGNhbGxzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgY2FsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50c0V4cGVjdGluZ1BhZ2VDb250ZXh0ID0gW1xuICAgICAgICAgICAgICAgICd0cmFjaycsXG4gICAgICAgICAgICAgICAgJ3NjcmVlbicsXG4gICAgICAgICAgICAgICAgJ2FsaWFzJyxcbiAgICAgICAgICAgICAgICAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICdwYWdlJyxcbiAgICAgICAgICAgICAgICAnaWRlbnRpZnknLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChldmVudHNFeHBlY3RpbmdQYWdlQ29udGV4dC5pbmNsdWRlcyhjYWxsLm1ldGhvZCkgJiZcbiAgICAgICAgICAgICAgICAhaGFzQnVmZmVyZWRQYWdlQ29udGV4dEFzTGFzdEFyZyhjYWxsLmFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgY2FsbC5hcmdzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBjYWxsLmFyZ3MsIHRydWUpLCBbZ2V0RGVmYXVsdEJ1ZmZlcmVkUGFnZUNvbnRleHQoKV0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5jYWxsc1tjYWxsLm1ldGhvZF0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYWxsc1tjYWxsLm1ldGhvZF0ucHVzaChjYWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbGxzW2NhbGwubWV0aG9kXSA9IFtjYWxsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNsZWFyIGNhbGxzIGluIHRoZSBnbG9iYWwgc25pcHBldCBidWZmZXJlZCBhcnJheS5cbiAgICAgICAgdGhpcy5fcHVzaFNuaXBwZXRXaW5kb3dCdWZmZXIoKTtcbiAgICAgICAgLy8gY2xlYXIgY2FsbHMgaW4gdGhpcyBpbnN0YW5jZVxuICAgICAgICB0aGlzLmNhbGxzID0ge307XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gW10pLmNvbmNhdC5hcHBseShfYSwgT2JqZWN0LnZhbHVlcyh0aGlzLmNhbGxzKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgYnVmZmVyZWQgbWV0aG9kIGNhbGxzIGZyb20gdGhlIHdpbmRvdyBvYmplY3QsXG4gICAgICogbm9ybWFsaXplIHRoZW0sIGFuZCB1c2UgdGhlbSB0byBoeWRyYXRlIHRoZSBidWZmZXIuXG4gICAgICogVGhpcyByZW1vdmVzIGV4aXN0aW5nIGJ1ZmZlcmVkIGNhbGxzIGZyb20gdGhlIHdpbmRvdyBvYmplY3QuXG4gICAgICovXG4gICAgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIucHJvdG90eXBlLl9wdXNoU25pcHBldFdpbmRvd0J1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgbnBtIHZlcnNpb24sIHdlIGRvbid0IHdhbnQgdG8gcmVhZCBmcm9tIHRoZSB3aW5kb3cgb2JqZWN0LlxuICAgICAgICAvLyBUaGlzIGF2b2lkcyBuYW1lc3BhY2UgY29uZmxpY3RzIGlmIHRoZXJlIGlzIGEgc2VwZXJhdGUgYW5hbHl0aWNzIGxpYnJhcnkgb24gdGhlIHBhZ2UuXG4gICAgICAgIGlmIChnZXRWZXJzaW9uVHlwZSgpID09PSAnbnBtJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2EgPSBnZXRHbG9iYWxBbmFseXRpY3MoKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHdhKSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBidWZmZXJlZCA9IHdhLnNwbGljZSgwLCB3YS5sZW5ndGgpO1xuICAgICAgICB2YXIgY2FsbHMgPSBidWZmZXJlZC5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IF9hWzBdLCBhcmdzID0gX2Euc2xpY2UoMSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByZUluaXRNZXRob2RDYWxsKG1ldGhvZE5hbWUsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGQuYXBwbHkodGhpcywgY2FsbHMpO1xuICAgIH07XG4gICAgcmV0dXJuIFByZUluaXRNZXRob2RDYWxsQnVmZmVyO1xufSgpKTtcbmV4cG9ydCB7IFByZUluaXRNZXRob2RDYWxsQnVmZmVyIH07XG4vKipcbiAqICBDYWxsIG1ldGhvZCBhbmQgbWFyayBhcyBcImNhbGxlZFwiXG4gKiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbmV2ZXIgdGhyb3cgYW4gZXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBjYWxsKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0LCBlcnJfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGwuY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdW5kZWZpbmVkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsLmNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFuYWx5dGljc1tjYWxsLm1ldGhvZF0uYXBwbHkoYW5hbHl0aWNzLCBjYWxsLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGhlbmFibGUocmVzdWx0KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkZWZlciBmb3Igbm9uLWFzeW5jIG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzdWx0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkZWZlciBmb3Igbm9uLWFzeW5jIG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBjYWxsLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbC5yZWplY3QoZXJyXzEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG52YXIgQW5hbHl0aWNzQnVmZmVyZWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQW5hbHl0aWNzQnVmZmVyZWQobG9hZGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJhY2tTdWJtaXQgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3RyYWNrU3VibWl0Jyk7XG4gICAgICAgIHRoaXMudHJhY2tDbGljayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2tDbGljaycpO1xuICAgICAgICB0aGlzLnRyYWNrTGluayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2tMaW5rJyk7XG4gICAgICAgIHRoaXMucGFnZVZpZXcgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3BhZ2V2aWV3Jyk7XG4gICAgICAgIHRoaXMuaWRlbnRpZnkgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2lkZW50aWZ5Jyk7XG4gICAgICAgIHRoaXMucmVzZXQgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3Jlc2V0Jyk7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2dyb3VwJyk7XG4gICAgICAgIHRoaXMudHJhY2sgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3RyYWNrJyk7XG4gICAgICAgIHRoaXMucmVhZHkgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3JlYWR5Jyk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2FsaWFzJyk7XG4gICAgICAgIHRoaXMuZGVidWcgPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ2RlYnVnJyk7XG4gICAgICAgIHRoaXMucGFnZSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgncGFnZScpO1xuICAgICAgICB0aGlzLm9uY2UgPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ29uY2UnKTtcbiAgICAgICAgdGhpcy5vZmYgPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ29mZicpO1xuICAgICAgICB0aGlzLm9uID0gdGhpcy5fY3JlYXRlQ2hhaW5hYmxlTWV0aG9kKCdvbicpO1xuICAgICAgICB0aGlzLmFkZFNvdXJjZU1pZGRsZXdhcmUgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2FkZFNvdXJjZU1pZGRsZXdhcmUnKTtcbiAgICAgICAgdGhpcy5zZXRBbm9ueW1vdXNJZCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnc2V0QW5vbnltb3VzSWQnKTtcbiAgICAgICAgdGhpcy5hZGREZXN0aW5hdGlvbk1pZGRsZXdhcmUgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ2FkZERlc3RpbmF0aW9uTWlkZGxld2FyZScpO1xuICAgICAgICB0aGlzLnNjcmVlbiA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnc2NyZWVuJyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3JlZ2lzdGVyJyk7XG4gICAgICAgIHRoaXMuZGVyZWdpc3RlciA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnZGVyZWdpc3RlcicpO1xuICAgICAgICB0aGlzLnVzZXIgPSB0aGlzLl9jcmVhdGVNZXRob2QoJ3VzZXInKTtcbiAgICAgICAgdGhpcy5WRVJTSU9OID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5fcHJlSW5pdEJ1ZmZlciA9IG5ldyBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gbG9hZGVyKHRoaXMuX3ByZUluaXRCdWZmZXIpO1xuICAgICAgICB0aGlzLl9wcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBhanMgPSBfYVswXSwgY3R4ID0gX2FbMV07XG4gICAgICAgICAgICBfdGhpcy5pbnN0YW5jZSA9IGFqcztcbiAgICAgICAgICAgIF90aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGRvIG5vdGhpbmcuLi5cbiAgICAgICAgICAgIC8vIHRoaXMgcmVzdWx0IG9mIHRoaXMgcHJvbWlzZSB3aWxsIGJlIGNhdWdodCBieSB0aGUgJ2NhdGNoJyBibG9jayBvbiB0aGlzIGNsYXNzLlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcHJvbWlzZSkudGhlbi5hcHBseShfYSwgYXJncyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCdWZmZXJlZC5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcHJvbWlzZSkuY2F0Y2guYXBwbHkoX2EsIGFyZ3MpO1xuICAgIH07XG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcHJvbWlzZSkuZmluYWxseS5hcHBseShfYSwgYXJncyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCdWZmZXJlZC5wcm90b3R5cGUuX2NyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKF9hID0gX3RoaXMuaW5zdGFuY2UpW21ldGhvZE5hbWVdLmFwcGx5KF9hLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wcmVJbml0QnVmZmVyLmFkZChuZXcgUHJlSW5pdE1ldGhvZENhbGwobWV0aG9kTmFtZSwgYXJncywgcmVzb2x2ZSwgcmVqZWN0KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqICBUaGVzZSBhcmUgZm9yIG1ldGhvZHMgdGhhdCB3aGVyZSBkZXRlcm1pbmluZyB3aGVuIHRoZSBtZXRob2QgZ2V0cyBcImZsdXNoZWRcIiBpcyBub3QgaW1wb3J0YW50LlxuICAgICAqICBUaGVzZSBtZXRob2RzIHdpbGwgcmVzb2x2ZSB3aGVuIGFuYWx5dGljcyBpcyBmdWxseSBpbml0aWFsaXplZCwgYW5kIHJldHVybiB0eXBlIChvdGhlciB0aGFuIEFuYWx5dGljcyl3aWxsIG5vdCBiZSBhdmFpbGFibGUuXG4gICAgICovXG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLl9jcmVhdGVDaGFpbmFibGVNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdm9pZCAoX2EgPSBfdGhpcy5pbnN0YW5jZSlbbWV0aG9kTmFtZV0uYXBwbHkoX2EsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wcmVJbml0QnVmZmVyLmFkZChuZXcgUHJlSW5pdE1ldGhvZENhbGwobWV0aG9kTmFtZSwgYXJncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIEFuYWx5dGljc0J1ZmZlcmVkO1xufSgpKTtcbmV4cG9ydCB7IEFuYWx5dGljc0J1ZmZlcmVkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isOffline: () => (/* binding */ isOffline),\n/* harmony export */   isOnline: () => (/* binding */ isOnline)\n/* harmony export */ });\n/* harmony import */ var _environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../environment */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n\nfunction isOnline() {\n    if ((0,_environment__WEBPACK_IMPORTED_MODULE_0__.isBrowser)()) {\n        return window.navigator.onLine;\n    }\n    return true;\n}\nfunction isOffline() {\n    return !isOnline();\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb25uZWN0aW9uL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNwQztBQUNQLFFBQVEsdURBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvY29ubmVjdGlvbi9pbmRleC5qcz85ODk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQnJvd3NlciB9IGZyb20gJy4uL2Vudmlyb25tZW50JztcbmV4cG9ydCBmdW5jdGlvbiBpc09ubGluZSgpIHtcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09mZmxpbmUoKSB7XG4gICAgcmV0dXJuICFpc09ubGluZSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SEGMENT_API_HOST: () => (/* binding */ SEGMENT_API_HOST)\n/* harmony export */ });\nvar SEGMENT_API_HOST = 'api.segment.io/v1';\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb25zdGFudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2NvbnN0YW50cy9pbmRleC5qcz8xMmM3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgU0VHTUVOVF9BUElfSE9TVCA9ICdhcGkuc2VnbWVudC5pby92MSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context),\n/* harmony export */   ContextCancelation: () => (/* reexport safe */ _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.ContextCancelation)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stats */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\");\n\n\n\nvar Context = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Context, _super);\n    function Context(event, id) {\n        return _super.call(this, event, id, new _stats__WEBPACK_IMPORTED_MODULE_1__.Stats()) || this;\n    }\n    Context.system = function () {\n        return new this({ type: 'track', event: 'system' });\n    };\n    return Context;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.CoreContext));\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb250ZXh0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtDO0FBQ3lDO0FBQzFDO0FBQ2pDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0EsZ0RBQWdELHlDQUFLO0FBQ3JEO0FBQ0E7QUFDQSwwQkFBMEIsZ0NBQWdDO0FBQzFEO0FBQ0E7QUFDQSxDQUFDLENBQUMsZ0VBQVc7QUFDTTtBQUNXO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb250ZXh0L2luZGV4LmpzPzQ3Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb3JlQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uLCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IFN0YXRzIH0gZnJvbSAnLi4vc3RhdHMnO1xudmFyIENvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbnRleHQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29udGV4dChldmVudCwgaWQpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGV2ZW50LCBpZCwgbmV3IFN0YXRzKCkpIHx8IHRoaXM7XG4gICAgfVxuICAgIENvbnRleHQuc3lzdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoeyB0eXBlOiAndHJhY2snLCBldmVudDogJ3N5c3RlbScgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udGV4dDtcbn0oQ29yZUNvbnRleHQpKTtcbmV4cG9ydCB7IENvbnRleHQgfTtcbmV4cG9ydCB7IENvbnRleHRDYW5jZWxhdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isServer: () => (/* binding */ isServer)\n/* harmony export */ });\nfunction isBrowser() {\n    return typeof window !== 'undefined';\n}\nfunction isServer() {\n    return !isBrowser();\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9lbnZpcm9ubWVudC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9lbnZpcm9ubWVudC9pbmRleC5qcz80Y2Q5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2VydmVyKCkge1xuICAgIHJldHVybiAhaXNCcm93c2VyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventFactory: () => (/* binding */ EventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../page */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\");\n\n\n\n\n\nvar EventFactory = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(EventFactory, _super);\n    function EventFactory(user) {\n        var _this = _super.call(this, {\n            createMessageId: function () { return \"ajs-next-\".concat(Date.now(), \"-\").concat((0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)()); },\n            onEventMethodCall: function (_a) {\n                var options = _a.options;\n                _this.maybeUpdateAnonId(options);\n            },\n            onFinishedEvent: function (event) {\n                _this.addIdentity(event);\n                return event;\n            },\n        }) || this;\n        _this.user = user;\n        return _this;\n    }\n    /**\n     * Updates the anonymousId *globally* if it's provided in the options.\n     * This should generally be done in the identify method, but some customers rely on this.\n     */\n    EventFactory.prototype.maybeUpdateAnonId = function (options) {\n        (options === null || options === void 0 ? void 0 : options.anonymousId) && this.user.anonymousId(options.anonymousId);\n    };\n    /**\n     * add user id / anonymous id to the event\n     */\n    EventFactory.prototype.addIdentity = function (event) {\n        if (this.user.id()) {\n            event.userId = this.user.id();\n        }\n        if (this.user.anonymousId()) {\n            event.anonymousId = this.user.anonymousId();\n        }\n    };\n    EventFactory.prototype.track = function (event, properties, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.track.call(this, event, properties, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.page = function (category, page, properties, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.page.call(this, category, page, properties, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.screen.call(this, category, screen, properties, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.identify = function (userId, traits, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.identify.call(this, userId, traits, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.group = function (groupId, traits, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.group.call(this, groupId, traits, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    EventFactory.prototype.alias = function (to, from, options, globalIntegrations, pageCtx) {\n        var ev = _super.prototype.alias.call(this, to, from, options, globalIntegrations);\n        (0,_page__WEBPACK_IMPORTED_MODULE_2__.addPageContext)(ev, pageCtx);\n        return ev;\n    };\n    return EventFactory;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.CoreEventFactory));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9ldmVudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDUTtBQUNEO0FBQ2tCO0FBQzlCO0FBQzdCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSwyQ0FBMkMsa0RBQWtELGdEQUFJLE1BQU07QUFDdkc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMscUVBQWdCO0FBQ007QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2V2ZW50cy9pbmRleC5qcz8xYzNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ0BsdWtlZWQvdXVpZCc7XG5pbXBvcnQgeyBhZGRQYWdlQ29udGV4dCB9IGZyb20gJy4uL3BhZ2UnO1xuaW1wb3J0IHsgQ29yZUV2ZW50RmFjdG9yeSB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlcyc7XG52YXIgRXZlbnRGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFdmVudEZhY3RvcnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXZlbnRGYWN0b3J5KHVzZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY3JlYXRlTWVzc2FnZUlkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBcImFqcy1uZXh0LVwiLmNvbmNhdChEYXRlLm5vdygpLCBcIi1cIikuY29uY2F0KHV1aWQoKSk7IH0sXG4gICAgICAgICAgICBvbkV2ZW50TWV0aG9kQ2FsbDogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBfYS5vcHRpb25zO1xuICAgICAgICAgICAgICAgIF90aGlzLm1heWJlVXBkYXRlQW5vbklkKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRmluaXNoZWRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWRkSWRlbnRpdHkoZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBldmVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnVzZXIgPSB1c2VyO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGFub255bW91c0lkICpnbG9iYWxseSogaWYgaXQncyBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucy5cbiAgICAgKiBUaGlzIHNob3VsZCBnZW5lcmFsbHkgYmUgZG9uZSBpbiB0aGUgaWRlbnRpZnkgbWV0aG9kLCBidXQgc29tZSBjdXN0b21lcnMgcmVseSBvbiB0aGlzLlxuICAgICAqL1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUubWF5YmVVcGRhdGVBbm9uSWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmFub255bW91c0lkKSAmJiB0aGlzLnVzZXIuYW5vbnltb3VzSWQob3B0aW9ucy5hbm9ueW1vdXNJZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBhZGQgdXNlciBpZCAvIGFub255bW91cyBpZCB0byB0aGUgZXZlbnRcbiAgICAgKi9cbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLmFkZElkZW50aXR5ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnVzZXIuaWQoKSkge1xuICAgICAgICAgICAgZXZlbnQudXNlcklkID0gdGhpcy51c2VyLmlkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXNlci5hbm9ueW1vdXNJZCgpKSB7XG4gICAgICAgICAgICBldmVudC5hbm9ueW1vdXNJZCA9IHRoaXMudXNlci5hbm9ueW1vdXNJZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpIHtcbiAgICAgICAgdmFyIGV2ID0gX3N1cGVyLnByb3RvdHlwZS50cmFjay5jYWxsKHRoaXMsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpO1xuICAgICAgICBhZGRQYWdlQ29udGV4dChldiwgcGFnZUN0eCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9O1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSwgcGFnZSwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUucGFnZS5jYWxsKHRoaXMsIGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpO1xuICAgICAgICBhZGRQYWdlQ29udGV4dChldiwgcGFnZUN0eCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9O1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUuc2NyZWVuID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBzY3JlZW4sIHByb3BlcnRpZXMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucywgcGFnZUN0eCkge1xuICAgICAgICB2YXIgZXYgPSBfc3VwZXIucHJvdG90eXBlLnNjcmVlbi5jYWxsKHRoaXMsIGNhdGVnb3J5LCBzY3JlZW4sIHByb3BlcnRpZXMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucyk7XG4gICAgICAgIGFkZFBhZ2VDb250ZXh0KGV2LCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIGV2O1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uICh1c2VySWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUuaWRlbnRpZnkuY2FsbCh0aGlzLCB1c2VySWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKTtcbiAgICAgICAgYWRkUGFnZUNvbnRleHQoZXYsIHBhZ2VDdHgpO1xuICAgICAgICByZXR1cm4gZXY7XG4gICAgfTtcbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKGdyb3VwSWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUuZ3JvdXAuY2FsbCh0aGlzLCBncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucyk7XG4gICAgICAgIGFkZFBhZ2VDb250ZXh0KGV2LCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIGV2O1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uICh0bywgZnJvbSwgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBldiA9IF9zdXBlci5wcm90b3R5cGUuYWxpYXMuY2FsbCh0aGlzLCB0bywgZnJvbSwgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKTtcbiAgICAgICAgYWRkUGFnZUNvbnRleHQoZXYsIHBhZ2VDdHgpO1xuICAgICAgICByZXR1cm4gZXY7XG4gICAgfTtcbiAgICByZXR1cm4gRXZlbnRGYWN0b3J5O1xufShDb3JlRXZlbnRGYWN0b3J5KSk7XG5leHBvcnQgeyBFdmVudEZhY3RvcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/events/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attachInspector: () => (/* binding */ attachInspector)\n/* harmony export */ });\n/* harmony import */ var _lib_get_global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/get-global */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\nvar _a;\nvar _b;\n\nvar env = (0,_lib_get_global__WEBPACK_IMPORTED_MODULE_0__.getGlobal)();\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nvar inspectorHost = ((_a = (_b = env)['__SEGMENT_INSPECTOR__']) !== null && _a !== void 0 ? _a : (_b['__SEGMENT_INSPECTOR__'] = {}));\nvar attachInspector = function (analytics) { var _a; return (_a = inspectorHost.attach) === null || _a === void 0 ? void 0 : _a.call(inspectorHost, analytics); };\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9pbnNwZWN0b3IvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ2lEO0FBQ2pELFVBQVUsMERBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0Esa0lBQWtJO0FBQzNILDZDQUE2QyxRQUFRO0FBQzVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9pbnNwZWN0b3IvaW5kZXguanM/YmVkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2E7XG52YXIgX2I7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuLi8uLi9saWIvZ2V0LWdsb2JhbCc7XG52YXIgZW52ID0gZ2V0R2xvYmFsKCk7XG4vLyBUaGUgY29kZSBiZWxvdyBhc3N1bWVzIHRoZSBpbnNwZWN0b3IgZXh0ZW5zaW9uIHdpbGwgdXNlIE9iamVjdC5hc3NpZ25cbi8vIHRvIGFkZCB0aGUgaW5zcGVjdCBpbnRlcmZhY2Ugb24gdG8gdGhpcyBvYmplY3QgcmVmZXJlbmNlICh1bmxlc3MgdGhlXG4vLyBleHRlbnNpb24gY29kZSByYW4gZmlyc3QgYW5kIGhhcyBhbHJlYWR5IHNldCB1cCB0aGUgdmFyaWFibGUpXG52YXIgaW5zcGVjdG9ySG9zdCA9ICgoX2EgPSAoX2IgPSBlbnYpWydfX1NFR01FTlRfSU5TUEVDVE9SX18nXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iWydfX1NFR01FTlRfSU5TUEVDVE9SX18nXSA9IHt9KSk7XG5leHBvcnQgdmFyIGF0dGFjaEluc3BlY3RvciA9IGZ1bmN0aW9uIChhbmFseXRpY3MpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gaW5zcGVjdG9ySG9zdC5hdHRhY2gpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKGluc3BlY3Rvckhvc3QsIGFuYWx5dGljcyk7IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPageContext: () => (/* binding */ addPageContext)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_pick__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/pick */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js\");\n/* harmony import */ var _get_page_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./get-page-context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\");\n\n\n\n/**\n * Augments a segment event with information about the current page.\n * Page information like URL changes frequently, so this is meant to be captured as close to the event call as possible.\n * Things like `userAgent` do not change, so they can be added later in the flow.\n * We prefer not to add this information to this function, as it increases the main bundle size.\n */\nvar addPageContext = function (event, pageCtx) {\n    if (pageCtx === void 0) { pageCtx = (0,_get_page_context__WEBPACK_IMPORTED_MODULE_0__.getDefaultPageContext)(); }\n    var evtCtx = event.context; // Context should be set earlier in the flow\n    var pageContextFromEventProps;\n    if (event.type === 'page') {\n        pageContextFromEventProps =\n            event.properties && (0,_lib_pick__WEBPACK_IMPORTED_MODULE_1__.pick)(event.properties, Object.keys(pageCtx));\n        event.properties = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, pageCtx), event.properties), (event.name ? { name: event.name } : {}));\n    }\n    evtCtx.page = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, pageCtx), pageContextFromEventProps), evtCtx.page);\n};\n//# sourceMappingURL=add-page-context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2FkZC1wYWdlLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNLO0FBQ3FCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsOEJBQThCLFVBQVUsd0VBQXFCO0FBQzdELGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0NBQUk7QUFDcEMsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLCtDQUErQyxtQkFBbUIsSUFBSTtBQUM5SDtBQUNBLGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMvQztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2FkZC1wYWdlLWNvbnRleHQuanM/M2U3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgcGljayB9IGZyb20gJy4uLy4uL2xpYi9waWNrJztcbmltcG9ydCB7IGdldERlZmF1bHRQYWdlQ29udGV4dCB9IGZyb20gJy4vZ2V0LXBhZ2UtY29udGV4dCc7XG4vKipcbiAqIEF1Z21lbnRzIGEgc2VnbWVudCBldmVudCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IHBhZ2UuXG4gKiBQYWdlIGluZm9ybWF0aW9uIGxpa2UgVVJMIGNoYW5nZXMgZnJlcXVlbnRseSwgc28gdGhpcyBpcyBtZWFudCB0byBiZSBjYXB0dXJlZCBhcyBjbG9zZSB0byB0aGUgZXZlbnQgY2FsbCBhcyBwb3NzaWJsZS5cbiAqIFRoaW5ncyBsaWtlIGB1c2VyQWdlbnRgIGRvIG5vdCBjaGFuZ2UsIHNvIHRoZXkgY2FuIGJlIGFkZGVkIGxhdGVyIGluIHRoZSBmbG93LlxuICogV2UgcHJlZmVyIG5vdCB0byBhZGQgdGhpcyBpbmZvcm1hdGlvbiB0byB0aGlzIGZ1bmN0aW9uLCBhcyBpdCBpbmNyZWFzZXMgdGhlIG1haW4gYnVuZGxlIHNpemUuXG4gKi9cbmV4cG9ydCB2YXIgYWRkUGFnZUNvbnRleHQgPSBmdW5jdGlvbiAoZXZlbnQsIHBhZ2VDdHgpIHtcbiAgICBpZiAocGFnZUN0eCA9PT0gdm9pZCAwKSB7IHBhZ2VDdHggPSBnZXREZWZhdWx0UGFnZUNvbnRleHQoKTsgfVxuICAgIHZhciBldnRDdHggPSBldmVudC5jb250ZXh0OyAvLyBDb250ZXh0IHNob3VsZCBiZSBzZXQgZWFybGllciBpbiB0aGUgZmxvd1xuICAgIHZhciBwYWdlQ29udGV4dEZyb21FdmVudFByb3BzO1xuICAgIGlmIChldmVudC50eXBlID09PSAncGFnZScpIHtcbiAgICAgICAgcGFnZUNvbnRleHRGcm9tRXZlbnRQcm9wcyA9XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzICYmIHBpY2soZXZlbnQucHJvcGVydGllcywgT2JqZWN0LmtleXMocGFnZUN0eCkpO1xuICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIHBhZ2VDdHgpLCBldmVudC5wcm9wZXJ0aWVzKSwgKGV2ZW50Lm5hbWUgPyB7IG5hbWU6IGV2ZW50Lm5hbWUgfSA6IHt9KSk7XG4gICAgfVxuICAgIGV2dEN0eC5wYWdlID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIHBhZ2VDdHgpLCBwYWdlQ29udGV4dEZyb21FdmVudFByb3BzKSwgZXZ0Q3R4LnBhZ2UpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZC1wYWdlLWNvbnRleHQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BufferedPageContextDiscriminant: () => (/* binding */ BufferedPageContextDiscriminant),\n/* harmony export */   createBufferedPageContext: () => (/* binding */ createBufferedPageContext),\n/* harmony export */   createPageContext: () => (/* binding */ createPageContext),\n/* harmony export */   getDefaultBufferedPageContext: () => (/* binding */ getDefaultBufferedPageContext),\n/* harmony export */   getDefaultPageContext: () => (/* binding */ getDefaultPageContext),\n/* harmony export */   isBufferedPageContext: () => (/* binding */ isBufferedPageContext)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\nvar BufferedPageContextDiscriminant = 'bpc';\n/**\n * `BufferedPageContext` object builder\n */\nvar createBufferedPageContext = function (url, canonicalUrl, search, path, title, referrer) { return ({\n    __t: BufferedPageContextDiscriminant,\n    c: canonicalUrl,\n    p: path,\n    u: url,\n    s: search,\n    t: title,\n    r: referrer,\n}); };\n// my clever/dubious way of making sure this type guard does not get out sync with the type definition\nvar BUFFERED_PAGE_CONTEXT_KEYS = Object.keys(createBufferedPageContext('', '', '', '', '', ''));\nfunction isBufferedPageContext(bufferedPageCtx) {\n    if (!(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(bufferedPageCtx))\n        return false;\n    if (bufferedPageCtx.__t !== BufferedPageContextDiscriminant)\n        return false;\n    // ensure obj has all the keys we expect, and none we don't.\n    for (var k in bufferedPageCtx) {\n        if (!BUFFERED_PAGE_CONTEXT_KEYS.includes(k)) {\n            return false;\n        }\n    }\n    return true;\n}\n//  Legacy logic: we are we appending search parameters to the canonical URL -- I guess the canonical URL is  \"not canonical enough\" (lol)\nvar createCanonicalURL = function (canonicalUrl, searchParams) {\n    return canonicalUrl.indexOf('?') > -1\n        ? canonicalUrl\n        : canonicalUrl + searchParams;\n};\n/**\n * Strips hash from URL.\n * http://www.segment.local#test -> http://www.segment.local\n */\nvar removeHash = function (href) {\n    var hashIdx = href.indexOf('#');\n    return hashIdx === -1 ? href : href.slice(0, hashIdx);\n};\nvar parseCanonicalPath = function (canonicalUrl) {\n    try {\n        return new URL(canonicalUrl).pathname;\n    }\n    catch (_e) {\n        // this is classic behavior -- we assume that if the canonical URL is invalid, it's a raw path.\n        return canonicalUrl[0] === '/' ? canonicalUrl : '/' + canonicalUrl;\n    }\n};\n/**\n * Create a `PageContext` from a `BufferedPageContext`.\n * `BufferedPageContext` keys are minified to save bytes in the snippet.\n */\nvar createPageContext = function (_a) {\n    var canonicalUrl = _a.c, pathname = _a.p, search = _a.s, url = _a.u, referrer = _a.r, title = _a.t;\n    var newPath = canonicalUrl ? parseCanonicalPath(canonicalUrl) : pathname;\n    var newUrl = canonicalUrl\n        ? createCanonicalURL(canonicalUrl, search)\n        : removeHash(url);\n    return {\n        path: newPath,\n        referrer: referrer,\n        search: search,\n        title: title,\n        url: newUrl,\n    };\n};\n/**\n * Get page properties from the browser window/document.\n */\nvar getDefaultBufferedPageContext = function () {\n    var c = document.querySelector(\"link[rel='canonical']\");\n    return createBufferedPageContext(location.href, (c && c.getAttribute('href')) || undefined, location.search, location.pathname, document.title, document.referrer);\n};\n/**\n * Get page properties from the browser window/document.\n */\nvar getDefaultPageContext = function () {\n    return createPageContext(getDefaultBufferedPageContext());\n};\n//# sourceMappingURL=get-page-context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2dldC1wYWdlLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3RDtBQUNqRDtBQUNQO0FBQ0E7QUFDQTtBQUNPLDhGQUE4RjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ087QUFDUCxTQUFTLHNFQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcGFnZS9nZXQtcGFnZS1jb250ZXh0LmpzPzY5NTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCB2YXIgQnVmZmVyZWRQYWdlQ29udGV4dERpc2NyaW1pbmFudCA9ICdicGMnO1xuLyoqXG4gKiBgQnVmZmVyZWRQYWdlQ29udGV4dGAgb2JqZWN0IGJ1aWxkZXJcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVCdWZmZXJlZFBhZ2VDb250ZXh0ID0gZnVuY3Rpb24gKHVybCwgY2Fub25pY2FsVXJsLCBzZWFyY2gsIHBhdGgsIHRpdGxlLCByZWZlcnJlcikgeyByZXR1cm4gKHtcbiAgICBfX3Q6IEJ1ZmZlcmVkUGFnZUNvbnRleHREaXNjcmltaW5hbnQsXG4gICAgYzogY2Fub25pY2FsVXJsLFxuICAgIHA6IHBhdGgsXG4gICAgdTogdXJsLFxuICAgIHM6IHNlYXJjaCxcbiAgICB0OiB0aXRsZSxcbiAgICByOiByZWZlcnJlcixcbn0pOyB9O1xuLy8gbXkgY2xldmVyL2R1YmlvdXMgd2F5IG9mIG1ha2luZyBzdXJlIHRoaXMgdHlwZSBndWFyZCBkb2VzIG5vdCBnZXQgb3V0IHN5bmMgd2l0aCB0aGUgdHlwZSBkZWZpbml0aW9uXG52YXIgQlVGRkVSRURfUEFHRV9DT05URVhUX0tFWVMgPSBPYmplY3Qua2V5cyhjcmVhdGVCdWZmZXJlZFBhZ2VDb250ZXh0KCcnLCAnJywgJycsICcnLCAnJywgJycpKTtcbmV4cG9ydCBmdW5jdGlvbiBpc0J1ZmZlcmVkUGFnZUNvbnRleHQoYnVmZmVyZWRQYWdlQ3R4KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGJ1ZmZlcmVkUGFnZUN0eCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYnVmZmVyZWRQYWdlQ3R4Ll9fdCAhPT0gQnVmZmVyZWRQYWdlQ29udGV4dERpc2NyaW1pbmFudClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGVuc3VyZSBvYmogaGFzIGFsbCB0aGUga2V5cyB3ZSBleHBlY3QsIGFuZCBub25lIHdlIGRvbid0LlxuICAgIGZvciAodmFyIGsgaW4gYnVmZmVyZWRQYWdlQ3R4KSB7XG4gICAgICAgIGlmICghQlVGRkVSRURfUEFHRV9DT05URVhUX0tFWVMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vICBMZWdhY3kgbG9naWM6IHdlIGFyZSB3ZSBhcHBlbmRpbmcgc2VhcmNoIHBhcmFtZXRlcnMgdG8gdGhlIGNhbm9uaWNhbCBVUkwgLS0gSSBndWVzcyB0aGUgY2Fub25pY2FsIFVSTCBpcyAgXCJub3QgY2Fub25pY2FsIGVub3VnaFwiIChsb2wpXG52YXIgY3JlYXRlQ2Fub25pY2FsVVJMID0gZnVuY3Rpb24gKGNhbm9uaWNhbFVybCwgc2VhcmNoUGFyYW1zKSB7XG4gICAgcmV0dXJuIGNhbm9uaWNhbFVybC5pbmRleE9mKCc/JykgPiAtMVxuICAgICAgICA/IGNhbm9uaWNhbFVybFxuICAgICAgICA6IGNhbm9uaWNhbFVybCArIHNlYXJjaFBhcmFtcztcbn07XG4vKipcbiAqIFN0cmlwcyBoYXNoIGZyb20gVVJMLlxuICogaHR0cDovL3d3dy5zZWdtZW50LmxvY2FsI3Rlc3QgLT4gaHR0cDovL3d3dy5zZWdtZW50LmxvY2FsXG4gKi9cbnZhciByZW1vdmVIYXNoID0gZnVuY3Rpb24gKGhyZWYpIHtcbiAgICB2YXIgaGFzaElkeCA9IGhyZWYuaW5kZXhPZignIycpO1xuICAgIHJldHVybiBoYXNoSWR4ID09PSAtMSA/IGhyZWYgOiBocmVmLnNsaWNlKDAsIGhhc2hJZHgpO1xufTtcbnZhciBwYXJzZUNhbm9uaWNhbFBhdGggPSBmdW5jdGlvbiAoY2Fub25pY2FsVXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBVUkwoY2Fub25pY2FsVXJsKS5wYXRobmFtZTtcbiAgICB9XG4gICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgY2xhc3NpYyBiZWhhdmlvciAtLSB3ZSBhc3N1bWUgdGhhdCBpZiB0aGUgY2Fub25pY2FsIFVSTCBpcyBpbnZhbGlkLCBpdCdzIGEgcmF3IHBhdGguXG4gICAgICAgIHJldHVybiBjYW5vbmljYWxVcmxbMF0gPT09ICcvJyA/IGNhbm9uaWNhbFVybCA6ICcvJyArIGNhbm9uaWNhbFVybDtcbiAgICB9XG59O1xuLyoqXG4gKiBDcmVhdGUgYSBgUGFnZUNvbnRleHRgIGZyb20gYSBgQnVmZmVyZWRQYWdlQ29udGV4dGAuXG4gKiBgQnVmZmVyZWRQYWdlQ29udGV4dGAga2V5cyBhcmUgbWluaWZpZWQgdG8gc2F2ZSBieXRlcyBpbiB0aGUgc25pcHBldC5cbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVQYWdlQ29udGV4dCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjYW5vbmljYWxVcmwgPSBfYS5jLCBwYXRobmFtZSA9IF9hLnAsIHNlYXJjaCA9IF9hLnMsIHVybCA9IF9hLnUsIHJlZmVycmVyID0gX2EuciwgdGl0bGUgPSBfYS50O1xuICAgIHZhciBuZXdQYXRoID0gY2Fub25pY2FsVXJsID8gcGFyc2VDYW5vbmljYWxQYXRoKGNhbm9uaWNhbFVybCkgOiBwYXRobmFtZTtcbiAgICB2YXIgbmV3VXJsID0gY2Fub25pY2FsVXJsXG4gICAgICAgID8gY3JlYXRlQ2Fub25pY2FsVVJMKGNhbm9uaWNhbFVybCwgc2VhcmNoKVxuICAgICAgICA6IHJlbW92ZUhhc2godXJsKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiBuZXdQYXRoLFxuICAgICAgICByZWZlcnJlcjogcmVmZXJyZXIsXG4gICAgICAgIHNlYXJjaDogc2VhcmNoLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHVybDogbmV3VXJsLFxuICAgIH07XG59O1xuLyoqXG4gKiBHZXQgcGFnZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGJyb3dzZXIgd2luZG93L2RvY3VtZW50LlxuICovXG5leHBvcnQgdmFyIGdldERlZmF1bHRCdWZmZXJlZFBhZ2VDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImxpbmtbcmVsPSdjYW5vbmljYWwnXVwiKTtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyZWRQYWdlQ29udGV4dChsb2NhdGlvbi5ocmVmLCAoYyAmJiBjLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB8fCB1bmRlZmluZWQsIGxvY2F0aW9uLnNlYXJjaCwgbG9jYXRpb24ucGF0aG5hbWUsIGRvY3VtZW50LnRpdGxlLCBkb2N1bWVudC5yZWZlcnJlcik7XG59O1xuLyoqXG4gKiBHZXQgcGFnZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGJyb3dzZXIgd2luZG93L2RvY3VtZW50LlxuICovXG5leHBvcnQgdmFyIGdldERlZmF1bHRQYWdlQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY3JlYXRlUGFnZUNvbnRleHQoZ2V0RGVmYXVsdEJ1ZmZlcmVkUGFnZUNvbnRleHQoKSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LXBhZ2UtY29udGV4dC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDestinationPluginWithAddMiddleware: () => (/* binding */ isDestinationPluginWithAddMiddleware)\n/* harmony export */ });\nvar isDestinationPluginWithAddMiddleware = function (plugin) {\n    // FYI: segment's plugin does not currently have an 'addMiddleware' method\n    return 'addMiddleware' in plugin && plugin.type === 'destination';\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wbHVnaW4vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3BsdWdpbi9pbmRleC5qcz9mN2U4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgaXNEZXN0aW5hdGlvblBsdWdpbldpdGhBZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgIC8vIEZZSTogc2VnbWVudCdzIHBsdWdpbiBkb2VzIG5vdCBjdXJyZW50bHkgaGF2ZSBhbiAnYWRkTWlkZGxld2FyZScgbWV0aG9kXG4gICAgcmV0dXJuICdhZGRNaWRkbGV3YXJlJyBpbiBwbHVnaW4gJiYgcGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbic7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gracefulDecodeURIComponent: () => (/* binding */ gracefulDecodeURIComponent)\n/* harmony export */ });\n/**\n * Tries to gets the unencoded version of an encoded component of a\n * Uniform Resource Identifier (URI). If input string is malformed,\n * returns it back as-is.\n *\n * Note: All occurences of the `+` character become ` ` (spaces).\n **/\nfunction gracefulDecodeURIComponent(encodedURIComponent) {\n    try {\n        return decodeURIComponent(encodedURIComponent.replace(/\\+/g, ' '));\n    }\n    catch (_a) {\n        return encodedURIComponent;\n    }\n}\n//# sourceMappingURL=gracefulDecodeURIComponent.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQuanM/N2Y0MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRyaWVzIHRvIGdldHMgdGhlIHVuZW5jb2RlZCB2ZXJzaW9uIG9mIGFuIGVuY29kZWQgY29tcG9uZW50IG9mIGFcbiAqIFVuaWZvcm0gUmVzb3VyY2UgSWRlbnRpZmllciAoVVJJKS4gSWYgaW5wdXQgc3RyaW5nIGlzIG1hbGZvcm1lZCxcbiAqIHJldHVybnMgaXQgYmFjayBhcy1pcy5cbiAqXG4gKiBOb3RlOiBBbGwgb2NjdXJlbmNlcyBvZiB0aGUgYCtgIGNoYXJhY3RlciBiZWNvbWUgYCBgIChzcGFjZXMpLlxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRVUklDb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRVUklDb21wb25lbnQucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZWRVUklDb21wb25lbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryString: () => (/* binding */ queryString)\n/* harmony export */ });\n/* harmony import */ var _pickPrefix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pickPrefix */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js\");\n/* harmony import */ var _gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gracefulDecodeURIComponent */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\n\nfunction queryString(analytics, query) {\n    var a = document.createElement('a');\n    a.href = query;\n    var parsed = a.search.slice(1);\n    var params = parsed.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], v = _a[1];\n        acc[k] = (0,_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_0__.gracefulDecodeURIComponent)(v);\n        return acc;\n    }, {});\n    var calls = [];\n    var ajs_uid = params.ajs_uid, ajs_event = params.ajs_event, ajs_aid = params.ajs_aid;\n    var _a = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(analytics.options.useQueryString)\n        ? analytics.options.useQueryString\n        : {}, _b = _a.aid, aidPattern = _b === void 0 ? /.+/ : _b, _c = _a.uid, uidPattern = _c === void 0 ? /.+/ : _c;\n    if (ajs_aid) {\n        var anonId = Array.isArray(params.ajs_aid)\n            ? params.ajs_aid[0]\n            : params.ajs_aid;\n        if (aidPattern.test(anonId)) {\n            analytics.setAnonymousId(anonId);\n        }\n    }\n    if (ajs_uid) {\n        var uid = Array.isArray(params.ajs_uid)\n            ? params.ajs_uid[0]\n            : params.ajs_uid;\n        if (uidPattern.test(uid)) {\n            var traits = (0,_pickPrefix__WEBPACK_IMPORTED_MODULE_2__.pickPrefix)('ajs_trait_', params);\n            calls.push(analytics.identify(uid, traits));\n        }\n    }\n    if (ajs_event) {\n        var event_1 = Array.isArray(params.ajs_event)\n            ? params.ajs_event[0]\n            : params.ajs_event;\n        var props = (0,_pickPrefix__WEBPACK_IMPORTED_MODULE_2__.pickPrefix)('ajs_prop_', params);\n        calls.push(analytics.track(event_1, props));\n    }\n    return Promise.all(calls);\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQztBQUNnQztBQUNsQjtBQUNqRDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUZBQTBCO0FBQzNDO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBLGFBQWEsc0VBQWE7QUFDMUI7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdURBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVlcnktc3RyaW5nL2luZGV4LmpzPzRhNTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGlja1ByZWZpeCB9IGZyb20gJy4vcGlja1ByZWZpeCc7XG5pbXBvcnQgeyBncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudCB9IGZyb20gJy4vZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQnO1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCBmdW5jdGlvbiBxdWVyeVN0cmluZyhhbmFseXRpY3MsIHF1ZXJ5KSB7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gcXVlcnk7XG4gICAgdmFyIHBhcnNlZCA9IGEuc2VhcmNoLnNsaWNlKDEpO1xuICAgIHZhciBwYXJhbXMgPSBwYXJzZWQuc3BsaXQoJyYnKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgc3RyKSB7XG4gICAgICAgIHZhciBfYSA9IHN0ci5zcGxpdCgnPScpLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgYWNjW2tdID0gZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQodik7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIHZhciBjYWxscyA9IFtdO1xuICAgIHZhciBhanNfdWlkID0gcGFyYW1zLmFqc191aWQsIGFqc19ldmVudCA9IHBhcmFtcy5hanNfZXZlbnQsIGFqc19haWQgPSBwYXJhbXMuYWpzX2FpZDtcbiAgICB2YXIgX2EgPSBpc1BsYWluT2JqZWN0KGFuYWx5dGljcy5vcHRpb25zLnVzZVF1ZXJ5U3RyaW5nKVxuICAgICAgICA/IGFuYWx5dGljcy5vcHRpb25zLnVzZVF1ZXJ5U3RyaW5nXG4gICAgICAgIDoge30sIF9iID0gX2EuYWlkLCBhaWRQYXR0ZXJuID0gX2IgPT09IHZvaWQgMCA/IC8uKy8gOiBfYiwgX2MgPSBfYS51aWQsIHVpZFBhdHRlcm4gPSBfYyA9PT0gdm9pZCAwID8gLy4rLyA6IF9jO1xuICAgIGlmIChhanNfYWlkKSB7XG4gICAgICAgIHZhciBhbm9uSWQgPSBBcnJheS5pc0FycmF5KHBhcmFtcy5hanNfYWlkKVxuICAgICAgICAgICAgPyBwYXJhbXMuYWpzX2FpZFswXVxuICAgICAgICAgICAgOiBwYXJhbXMuYWpzX2FpZDtcbiAgICAgICAgaWYgKGFpZFBhdHRlcm4udGVzdChhbm9uSWQpKSB7XG4gICAgICAgICAgICBhbmFseXRpY3Muc2V0QW5vbnltb3VzSWQoYW5vbklkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWpzX3VpZCkge1xuICAgICAgICB2YXIgdWlkID0gQXJyYXkuaXNBcnJheShwYXJhbXMuYWpzX3VpZClcbiAgICAgICAgICAgID8gcGFyYW1zLmFqc191aWRbMF1cbiAgICAgICAgICAgIDogcGFyYW1zLmFqc191aWQ7XG4gICAgICAgIGlmICh1aWRQYXR0ZXJuLnRlc3QodWlkKSkge1xuICAgICAgICAgICAgdmFyIHRyYWl0cyA9IHBpY2tQcmVmaXgoJ2Fqc190cmFpdF8nLCBwYXJhbXMpO1xuICAgICAgICAgICAgY2FsbHMucHVzaChhbmFseXRpY3MuaWRlbnRpZnkodWlkLCB0cmFpdHMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWpzX2V2ZW50KSB7XG4gICAgICAgIHZhciBldmVudF8xID0gQXJyYXkuaXNBcnJheShwYXJhbXMuYWpzX2V2ZW50KVxuICAgICAgICAgICAgPyBwYXJhbXMuYWpzX2V2ZW50WzBdXG4gICAgICAgICAgICA6IHBhcmFtcy5hanNfZXZlbnQ7XG4gICAgICAgIHZhciBwcm9wcyA9IHBpY2tQcmVmaXgoJ2Fqc19wcm9wXycsIHBhcmFtcyk7XG4gICAgICAgIGNhbGxzLnB1c2goYW5hbHl0aWNzLnRyYWNrKGV2ZW50XzEsIHByb3BzKSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChjYWxscyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickPrefix: () => (/* binding */ pickPrefix)\n/* harmony export */ });\n/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nfunction pickPrefix(prefix, object) {\n    return Object.keys(object).reduce(function (acc, key) {\n        if (key.startsWith(prefix)) {\n            var field = key.substr(prefix.length);\n            acc[field] = object[key];\n        }\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=pickPrefix.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvcGlja1ByZWZpeC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDhCQUE4QjtBQUM3RCxpQkFBaUI7QUFDakI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3F1ZXJ5LXN0cmluZy9waWNrUHJlZml4LmpzP2Y1ZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIG9ubHkgdGhlIHByb3BlcnRpZXMgcHJlZml4ZWQgYnkgdGhlIGlucHV0XG4gKiBzdHJpbmcuXG4gKiBFeDogcHJlZml4KCdhanNfdHJhaXRzXycsIHsgYWpzX3RyYWl0c19hZGRyZXNzOiAnMTIzIFN0JyB9KVxuICogd2lsbCByZXR1cm4geyBhZGRyZXNzOiAnMTIzIFN0JyB9XG4gKiovXG5leHBvcnQgZnVuY3Rpb24gcGlja1ByZWZpeChwcmVmaXgsIG9iamVjdCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmplY3QpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGtleS5zdWJzdHIocHJlZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICBhY2NbZmllbGRdID0gb2JqZWN0W2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waWNrUHJlZml4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventQueue: () => (/* binding */ EventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\");\n/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../connection */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n\n\n\n\nvar EventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(EventQueue, _super);\n    function EventQueue(nameOrQueue) {\n        return _super.call(this, typeof nameOrQueue === 'string'\n            ? new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__.PersistedPriorityQueue(4, nameOrQueue)\n            : nameOrQueue) || this;\n    }\n    EventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                if ((0,_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)())\n                    return [2 /*return*/, []];\n                return [2 /*return*/, _super.prototype.flush.call(this)];\n            });\n        });\n    };\n    return EventQueue;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.CoreEventQueue));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWV1ZS9ldmVudC1xdWV1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwRDtBQUNrQjtBQUNuQjtBQUNmO0FBQzFDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSxrQkFBa0IsaUZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLG9CQUFvQixzREFBUztBQUM3QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQyxDQUFDLG1FQUFjO0FBQ007QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzPzJkNzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZCc7XG5pbXBvcnQgeyBDb3JlRXZlbnRRdWV1ZSB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IGlzT2ZmbGluZSB9IGZyb20gJy4uL2Nvbm5lY3Rpb24nO1xudmFyIEV2ZW50UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXZlbnRRdWV1ZShuYW1lT3JRdWV1ZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgdHlwZW9mIG5hbWVPclF1ZXVlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBuZXcgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSg0LCBuYW1lT3JRdWV1ZSlcbiAgICAgICAgICAgIDogbmFtZU9yUXVldWUpIHx8IHRoaXM7XG4gICAgfVxuICAgIEV2ZW50UXVldWUucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzT2ZmbGluZSgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBfc3VwZXIucHJvdG90eXBlLmZsdXNoLmNhbGwodGhpcyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50UXVldWU7XG59KENvcmVFdmVudFF1ZXVlKSk7XG5leHBvcnQgeyBFdmVudFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC1xdWV1ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Stats: () => (/* binding */ Stats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n/* harmony import */ var _remote_metrics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./remote-metrics */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js\");\n\n\n\nvar remoteMetrics;\nvar Stats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Stats, _super);\n    function Stats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Stats.initRemoteMetrics = function (options) {\n        remoteMetrics = new _remote_metrics__WEBPACK_IMPORTED_MODULE_1__.RemoteMetrics(options);\n    };\n    Stats.prototype.increment = function (metric, by, tags) {\n        _super.prototype.increment.call(this, metric, by, tags);\n        remoteMetrics === null || remoteMetrics === void 0 ? void 0 : remoteMetrics.increment(metric, tags !== null && tags !== void 0 ? tags : []);\n    };\n    return Stats;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtDO0FBQ2tCO0FBQ0g7QUFDakQ7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwREFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMsOERBQVM7QUFDTTtBQUNqQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RhdHMvaW5kZXguanM/ZTlhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IENvcmVTdGF0cyB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IFJlbW90ZU1ldHJpY3MgfSBmcm9tICcuL3JlbW90ZS1tZXRyaWNzJztcbnZhciByZW1vdGVNZXRyaWNzO1xudmFyIFN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdGF0cywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTdGF0cy5pbml0UmVtb3RlTWV0cmljcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJlbW90ZU1ldHJpY3MgPSBuZXcgUmVtb3RlTWV0cmljcyhvcHRpb25zKTtcbiAgICB9O1xuICAgIFN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobWV0cmljLCBieSwgdGFncykge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluY3JlbWVudC5jYWxsKHRoaXMsIG1ldHJpYywgYnksIHRhZ3MpO1xuICAgICAgICByZW1vdGVNZXRyaWNzID09PSBudWxsIHx8IHJlbW90ZU1ldHJpY3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlbW90ZU1ldHJpY3MuaW5jcmVtZW50KG1ldHJpYywgdGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB2b2lkIDAgPyB0YWdzIDogW10pO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRzO1xufShDb3JlU3RhdHMpKTtcbmV4cG9ydCB7IFN0YXRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   recordIntegrationMetric: () => (/* binding */ recordIntegrationMetric)\n/* harmony export */ });\nfunction recordIntegrationMetric(ctx, _a) {\n    var methodName = _a.methodName, integrationName = _a.integrationName, type = _a.type, _b = _a.didError, didError = _b === void 0 ? false : _b;\n    ctx.stats.increment(\"analytics_js.integration.invoke\".concat(didError ? '.error' : ''), 1, [\n        \"method:\".concat(methodName),\n        \"integration_name:\".concat(integrationName),\n        \"type:\".concat(type),\n    ]);\n}\n//# sourceMappingURL=metric-helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycy5qcz8xZDE0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIF9hKSB7XG4gICAgdmFyIG1ldGhvZE5hbWUgPSBfYS5tZXRob2ROYW1lLCBpbnRlZ3JhdGlvbk5hbWUgPSBfYS5pbnRlZ3JhdGlvbk5hbWUsIHR5cGUgPSBfYS50eXBlLCBfYiA9IF9hLmRpZEVycm9yLCBkaWRFcnJvciA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iO1xuICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoXCJhbmFseXRpY3NfanMuaW50ZWdyYXRpb24uaW52b2tlXCIuY29uY2F0KGRpZEVycm9yID8gJy5lcnJvcicgOiAnJyksIDEsIFtcbiAgICAgICAgXCJtZXRob2Q6XCIuY29uY2F0KG1ldGhvZE5hbWUpLFxuICAgICAgICBcImludGVncmF0aW9uX25hbWU6XCIuY29uY2F0KGludGVncmF0aW9uTmFtZSksXG4gICAgICAgIFwidHlwZTpcIi5jb25jYXQodHlwZSksXG4gICAgXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRyaWMtaGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoteMetrics: () => (/* binding */ RemoteMetrics)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/fetch */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/version */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/version-type */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\");\n\n\n\n\n\nvar createRemoteMetric = function (metric, tags, versionType) {\n    var formattedTags = tags.reduce(function (acc, t) {\n        var _a = t.split(':'), k = _a[0], v = _a[1];\n        acc[k] = v;\n        return acc;\n    }, {});\n    return {\n        type: 'Counter',\n        metric: metric,\n        value: 1,\n        tags: (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, formattedTags), { library: 'analytics.js', library_version: versionType === 'web' ? \"next-\".concat(_generated_version__WEBPACK_IMPORTED_MODULE_1__.version) : \"npm:next-\".concat(_generated_version__WEBPACK_IMPORTED_MODULE_1__.version) }),\n    };\n};\nfunction logError(err) {\n    console.error('Error sending segment performance metrics', err);\n}\nvar RemoteMetrics = /** @class */ (function () {\n    function RemoteMetrics(options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        this.host = (_a = options === null || options === void 0 ? void 0 : options.host) !== null && _a !== void 0 ? _a : _constants__WEBPACK_IMPORTED_MODULE_2__.SEGMENT_API_HOST;\n        this.sampleRate = (_b = options === null || options === void 0 ? void 0 : options.sampleRate) !== null && _b !== void 0 ? _b : 1;\n        this.flushTimer = (_c = options === null || options === void 0 ? void 0 : options.flushTimer) !== null && _c !== void 0 ? _c : 30 * 1000; /* 30s */\n        this.maxQueueSize = (_d = options === null || options === void 0 ? void 0 : options.maxQueueSize) !== null && _d !== void 0 ? _d : 20;\n        this.protocol = (_e = options === null || options === void 0 ? void 0 : options.protocol) !== null && _e !== void 0 ? _e : 'https';\n        this.queue = [];\n        if (this.sampleRate > 0) {\n            var flushing_1 = false;\n            var run_1 = function () {\n                if (flushing_1) {\n                    return;\n                }\n                flushing_1 = true;\n                _this.flush().catch(logError);\n                flushing_1 = false;\n                setTimeout(run_1, _this.flushTimer);\n            };\n            run_1();\n        }\n    }\n    RemoteMetrics.prototype.increment = function (metric, tags) {\n        // All metrics are part of an allow list in Tracking API\n        if (!metric.includes('analytics_js.')) {\n            return;\n        }\n        // /m doesn't like empty tags\n        if (tags.length === 0) {\n            return;\n        }\n        if (Math.random() > this.sampleRate) {\n            return;\n        }\n        if (this.queue.length >= this.maxQueueSize) {\n            return;\n        }\n        var remoteMetric = createRemoteMetric(metric, tags, (0,_lib_version_type__WEBPACK_IMPORTED_MODULE_3__.getVersionType)());\n        this.queue.push(remoteMetric);\n        if (metric.includes('error')) {\n            this.flush().catch(logError);\n        }\n    };\n    RemoteMetrics.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length <= 0) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.send().catch(function (error) {\n                                logError(error);\n                                _this.sampleRate = 0;\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    RemoteMetrics.prototype.send = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var payload, headers, url;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                payload = { series: this.queue };\n                this.queue = [];\n                headers = { 'Content-Type': 'text/plain' };\n                url = \"\".concat(this.protocol, \"://\").concat(this.host, \"/m\");\n                return [2 /*return*/, (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_4__.fetch)(url, {\n                        headers: headers,\n                        body: JSON.stringify(payload),\n                        method: 'POST',\n                    })];\n            });\n        });\n    };\n    return RemoteMetrics;\n}());\n\n//# sourceMappingURL=remote-metrics.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9yZW1vdGUtbWV0cmljcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUQ7QUFDakI7QUFDVTtBQUNNO0FBQ1I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsb0JBQW9CLGlGQUFpRix1REFBTyx1QkFBdUIsdURBQU8sR0FBRztBQUMvSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwySEFBMkgsd0RBQWdCO0FBQzNJO0FBQ0Esa0pBQWtKO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaUVBQWM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5Qiw0QkFBNEI7QUFDNUI7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQSxzQ0FBc0MsaURBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0YXRzL3JlbW90ZS1tZXRyaWNzLmpzP2MyYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnLi4vLi4vbGliL2ZldGNoJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvdmVyc2lvbic7XG5pbXBvcnQgeyBnZXRWZXJzaW9uVHlwZSB9IGZyb20gJy4uLy4uL2xpYi92ZXJzaW9uLXR5cGUnO1xuaW1wb3J0IHsgU0VHTUVOVF9BUElfSE9TVCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG52YXIgY3JlYXRlUmVtb3RlTWV0cmljID0gZnVuY3Rpb24gKG1ldHJpYywgdGFncywgdmVyc2lvblR5cGUpIHtcbiAgICB2YXIgZm9ybWF0dGVkVGFncyA9IHRhZ3MucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHQpIHtcbiAgICAgICAgdmFyIF9hID0gdC5zcGxpdCgnOicpLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgYWNjW2tdID0gdjtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ0NvdW50ZXInLFxuICAgICAgICBtZXRyaWM6IG1ldHJpYyxcbiAgICAgICAgdmFsdWU6IDEsXG4gICAgICAgIHRhZ3M6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBmb3JtYXR0ZWRUYWdzKSwgeyBsaWJyYXJ5OiAnYW5hbHl0aWNzLmpzJywgbGlicmFyeV92ZXJzaW9uOiB2ZXJzaW9uVHlwZSA9PT0gJ3dlYicgPyBcIm5leHQtXCIuY29uY2F0KHZlcnNpb24pIDogXCJucG06bmV4dC1cIi5jb25jYXQodmVyc2lvbikgfSksXG4gICAgfTtcbn07XG5mdW5jdGlvbiBsb2dFcnJvcihlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHNlZ21lbnQgcGVyZm9ybWFuY2UgbWV0cmljcycsIGVycik7XG59XG52YXIgUmVtb3RlTWV0cmljcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZW1vdGVNZXRyaWNzKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgdGhpcy5ob3N0ID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhvc3QpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFNFR01FTlRfQVBJX0hPU1Q7XG4gICAgICAgIHRoaXMuc2FtcGxlUmF0ZSA9IChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zYW1wbGVSYXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAxO1xuICAgICAgICB0aGlzLmZsdXNoVGltZXIgPSAoX2MgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZmx1c2hUaW1lcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMzAgKiAxMDAwOyAvKiAzMHMgKi9cbiAgICAgICAgdGhpcy5tYXhRdWV1ZVNpemUgPSAoX2QgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWF4UXVldWVTaXplKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAyMDtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IChfZSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wcm90b2NvbCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogJ2h0dHBzJztcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICBpZiAodGhpcy5zYW1wbGVSYXRlID4gMCkge1xuICAgICAgICAgICAgdmFyIGZsdXNoaW5nXzEgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBydW5fMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmx1c2hpbmdfMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZsdXNoaW5nXzEgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmZsdXNoKCkuY2F0Y2gobG9nRXJyb3IpO1xuICAgICAgICAgICAgICAgIGZsdXNoaW5nXzEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bl8xLCBfdGhpcy5mbHVzaFRpbWVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5fMSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJlbW90ZU1ldHJpY3MucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uIChtZXRyaWMsIHRhZ3MpIHtcbiAgICAgICAgLy8gQWxsIG1ldHJpY3MgYXJlIHBhcnQgb2YgYW4gYWxsb3cgbGlzdCBpbiBUcmFja2luZyBBUElcbiAgICAgICAgaWYgKCFtZXRyaWMuaW5jbHVkZXMoJ2FuYWx5dGljc19qcy4nKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIC9tIGRvZXNuJ3QgbGlrZSBlbXB0eSB0YWdzXG4gICAgICAgIGlmICh0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gdGhpcy5zYW1wbGVSYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID49IHRoaXMubWF4UXVldWVTaXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbW90ZU1ldHJpYyA9IGNyZWF0ZVJlbW90ZU1ldHJpYyhtZXRyaWMsIHRhZ3MsIGdldFZlcnNpb25UeXBlKCkpO1xuICAgICAgICB0aGlzLnF1ZXVlLnB1c2gocmVtb3RlTWV0cmljKTtcbiAgICAgICAgaWYgKG1ldHJpYy5pbmNsdWRlcygnZXJyb3InKSkge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpLmNhdGNoKGxvZ0Vycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVtb3RlTWV0cmljcy5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2VuZCgpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNhbXBsZVJhdGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlbW90ZU1ldHJpY3MucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkLCBoZWFkZXJzLCB1cmw7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZCA9IHsgc2VyaWVzOiB0aGlzLnF1ZXVlIH07XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbicgfTtcbiAgICAgICAgICAgICAgICB1cmwgPSBcIlwiLmNvbmNhdCh0aGlzLnByb3RvY29sLCBcIjovL1wiKS5jb25jYXQodGhpcy5ob3N0LCBcIi9tXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVtb3RlTWV0cmljcztcbn0oKSk7XG5leHBvcnQgeyBSZW1vdGVNZXRyaWNzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW1vdGUtbWV0cmljcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CookieStorage: () => (/* binding */ CookieStorage)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(rsc)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _user_tld__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user/tld */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\");\n\n\n\nvar ONE_YEAR = 365;\n/**\n * Data storage using browser cookies\n */\nvar CookieStorage = /** @class */ (function () {\n    function CookieStorage(options) {\n        if (options === void 0) { options = CookieStorage.defaults; }\n        this.options = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, CookieStorage.defaults), options);\n    }\n    Object.defineProperty(CookieStorage, \"defaults\", {\n        get: function () {\n            return {\n                maxage: ONE_YEAR,\n                domain: (0,_user_tld__WEBPACK_IMPORTED_MODULE_2__.tld)(window.location.href),\n                path: '/',\n                sameSite: 'Lax',\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CookieStorage.prototype.opts = function () {\n        return {\n            sameSite: this.options.sameSite,\n            expires: this.options.maxage,\n            domain: this.options.domain,\n            path: this.options.path,\n            secure: this.options.secure,\n        };\n    };\n    CookieStorage.prototype.get = function (key) {\n        var _a;\n        try {\n            var value = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(key);\n            if (value === undefined || value === null) {\n                return null;\n            }\n            try {\n                return (_a = JSON.parse(value)) !== null && _a !== void 0 ? _a : null;\n            }\n            catch (e) {\n                return (value !== null && value !== void 0 ? value : null);\n            }\n        }\n        catch (e) {\n            return null;\n        }\n    };\n    CookieStorage.prototype.set = function (key, value) {\n        if (typeof value === 'string') {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(key, value, this.opts());\n        }\n        else if (value === null) {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(key, this.opts());\n        }\n        else {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(key, JSON.stringify(value), this.opts());\n        }\n    };\n    CookieStorage.prototype.remove = function (key) {\n        return js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(key, this.opts());\n    };\n    return CookieStorage;\n}());\n\n//# sourceMappingURL=cookieStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2Nvb2tpZVN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNMO0FBQ007QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLHVCQUF1QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaURBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFHO0FBQ2Y7QUFDQTtBQUNBLFlBQVksaURBQUc7QUFDZjtBQUNBO0FBQ0EsWUFBWSxpREFBRztBQUNmO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaURBQUc7QUFDbEI7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvY29va2llU3RvcmFnZS5qcz84NDIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgamFyIGZyb20gJ2pzLWNvb2tpZSc7XG5pbXBvcnQgeyB0bGQgfSBmcm9tICcuLi91c2VyL3RsZCc7XG52YXIgT05FX1lFQVIgPSAzNjU7XG4vKipcbiAqIERhdGEgc3RvcmFnZSB1c2luZyBicm93c2VyIGNvb2tpZXNcbiAqL1xudmFyIENvb2tpZVN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29va2llU3RvcmFnZShvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IENvb2tpZVN0b3JhZ2UuZGVmYXVsdHM7IH1cbiAgICAgICAgdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIENvb2tpZVN0b3JhZ2UuZGVmYXVsdHMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvb2tpZVN0b3JhZ2UsIFwiZGVmYXVsdHNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWF4YWdlOiBPTkVfWUVBUixcbiAgICAgICAgICAgICAgICBkb21haW46IHRsZCh3aW5kb3cubG9jYXRpb24uaHJlZiksXG4gICAgICAgICAgICAgICAgcGF0aDogJy8nLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiAnTGF4JyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb29raWVTdG9yYWdlLnByb3RvdHlwZS5vcHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2FtZVNpdGU6IHRoaXMub3B0aW9ucy5zYW1lU2l0ZSxcbiAgICAgICAgICAgIGV4cGlyZXM6IHRoaXMub3B0aW9ucy5tYXhhZ2UsXG4gICAgICAgICAgICBkb21haW46IHRoaXMub3B0aW9ucy5kb21haW4sXG4gICAgICAgICAgICBwYXRoOiB0aGlzLm9wdGlvbnMucGF0aCxcbiAgICAgICAgICAgIHNlY3VyZTogdGhpcy5vcHRpb25zLnNlY3VyZSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvb2tpZVN0b3JhZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gamFyLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IEpTT04ucGFyc2UodmFsdWUpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDAgPyB2YWx1ZSA6IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29va2llU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGphci5zZXQoa2V5LCB2YWx1ZSwgdGhpcy5vcHRzKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBqYXIucmVtb3ZlKGtleSwgdGhpcy5vcHRzKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgamFyLnNldChrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgdGhpcy5vcHRzKCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb29raWVTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBqYXIucmVtb3ZlKGtleSwgdGhpcy5vcHRzKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIENvb2tpZVN0b3JhZ2U7XG59KCkpO1xuZXhwb3J0IHsgQ29va2llU3RvcmFnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29va2llU3RvcmFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CookieStorage: () => (/* reexport safe */ _cookieStorage__WEBPACK_IMPORTED_MODULE_2__.CookieStorage),\n/* harmony export */   LocalStorage: () => (/* reexport safe */ _localStorage__WEBPACK_IMPORTED_MODULE_1__.LocalStorage),\n/* harmony export */   MemoryStorage: () => (/* reexport safe */ _memoryStorage__WEBPACK_IMPORTED_MODULE_3__.MemoryStorage),\n/* harmony export */   StoreType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_0__.StoreType),\n/* harmony export */   UniversalStorage: () => (/* reexport safe */ _universalStorage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage),\n/* harmony export */   applyCookieOptions: () => (/* binding */ applyCookieOptions),\n/* harmony export */   initializeStorages: () => (/* binding */ initializeStorages),\n/* harmony export */   isArrayOfStoreType: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_5__.isArrayOfStoreType),\n/* harmony export */   isStoreTypeWithSettings: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_5__.isStoreTypeWithSettings)\n/* harmony export */ });\n/* harmony import */ var _cookieStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cookieStorage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\");\n/* harmony import */ var _localStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localStorage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js\");\n/* harmony import */ var _memoryStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./memoryStorage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _universalStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./universalStorage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nfunction initializeStorages(args) {\n    var storages = args.map(function (s) {\n        var type;\n        var settings;\n        if ((0,_settings__WEBPACK_IMPORTED_MODULE_5__.isStoreTypeWithSettings)(s)) {\n            type = s.name;\n            settings = s.settings;\n        }\n        else {\n            type = s;\n        }\n        switch (type) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Cookie:\n                return new _cookieStorage__WEBPACK_IMPORTED_MODULE_2__.CookieStorage(settings);\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.LocalStorage:\n                return new _localStorage__WEBPACK_IMPORTED_MODULE_1__.LocalStorage();\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Memory:\n                return new _memoryStorage__WEBPACK_IMPORTED_MODULE_3__.MemoryStorage();\n            default:\n                throw new Error(\"Unknown Store Type: \".concat(s));\n        }\n    });\n    return storages;\n}\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nfunction applyCookieOptions(storeTypes, cookieOptions) {\n    return storeTypes.map(function (s) {\n        if (cookieOptions && s === _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Cookie) {\n            return {\n                name: s,\n                settings: cookieOptions,\n            };\n        }\n        return s;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNGO0FBQ0U7QUFDSztBQUNqQjtBQUNaO0FBQ087QUFDQztBQUNBO0FBQ0c7QUFDUjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtFQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2Q0FBUztBQUMxQiwyQkFBMkIseURBQWE7QUFDeEMsaUJBQWlCLDZDQUFTO0FBQzFCLDJCQUEyQix1REFBWTtBQUN2QyxpQkFBaUIsNkNBQVM7QUFDMUIsMkJBQTJCLHlEQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLG1DQUFtQyw2Q0FBUztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9pbmRleC5qcz9lMGQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvb2tpZVN0b3JhZ2UgfSBmcm9tICcuL2Nvb2tpZVN0b3JhZ2UnO1xuaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSAnLi9sb2NhbFN0b3JhZ2UnO1xuaW1wb3J0IHsgTWVtb3J5U3RvcmFnZSB9IGZyb20gJy4vbWVtb3J5U3RvcmFnZSc7XG5pbXBvcnQgeyBpc1N0b3JlVHlwZVdpdGhTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgU3RvcmVUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCAqIGZyb20gJy4vbG9jYWxTdG9yYWdlJztcbmV4cG9ydCAqIGZyb20gJy4vY29va2llU3RvcmFnZSc7XG5leHBvcnQgKiBmcm9tICcuL21lbW9yeVN0b3JhZ2UnO1xuZXhwb3J0ICogZnJvbSAnLi91bml2ZXJzYWxTdG9yYWdlJztcbmV4cG9ydCAqIGZyb20gJy4vc2V0dGluZ3MnO1xuLyoqXG4gKiBDcmVhdGVzIG11bHRpcGxlIHN0b3JhZ2Ugc3lzdGVtcyBmcm9tIGFuIGFycmF5IG9mIFN0b3JlVHlwZSBhbmQgb3B0aW9uc1xuICogQHBhcmFtIGFyZ3MgU3RvcmVUeXBlIGFuZCBvcHRpb25zXG4gKiBAcmV0dXJucyBTdG9yYWdlIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplU3RvcmFnZXMoYXJncykge1xuICAgIHZhciBzdG9yYWdlcyA9IGFyZ3MubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciB0eXBlO1xuICAgICAgICB2YXIgc2V0dGluZ3M7XG4gICAgICAgIGlmIChpc1N0b3JlVHlwZVdpdGhTZXR0aW5ncyhzKSkge1xuICAgICAgICAgICAgdHlwZSA9IHMubmFtZTtcbiAgICAgICAgICAgIHNldHRpbmdzID0gcy5zZXR0aW5ncztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHR5cGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdG9yZVR5cGUuQ29va2llOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29va2llU3RvcmFnZShzZXR0aW5ncyk7XG4gICAgICAgICAgICBjYXNlIFN0b3JlVHlwZS5Mb2NhbFN0b3JhZ2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgICAgIGNhc2UgU3RvcmVUeXBlLk1lbW9yeTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lbW9yeVN0b3JhZ2UoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBTdG9yZSBUeXBlOiBcIi5jb25jYXQocykpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0b3JhZ2VzO1xufVxuLyoqXG4gKiBJbmplY3RzIHRoZSBDb29raWVPcHRpb25zIGludG8gYSB0aGUgYXJndW1lbnRzIGZvciBpbml0aWFsaXplU3RvcmFnZVxuICogQHBhcmFtIHN0b3JlVHlwZXMgbGlzdCBvZiBzdG9yZVR5cGVcbiAqIEBwYXJhbSBjb29raWVPcHRpb25zIGNvb2tpZSBPcHRpb25zXG4gKiBAcmV0dXJucyBhcmd1bWVudHMgZm9yIGluaXRpYWxpemVTdG9yYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUNvb2tpZU9wdGlvbnMoc3RvcmVUeXBlcywgY29va2llT3B0aW9ucykge1xuICAgIHJldHVybiBzdG9yZVR5cGVzLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICBpZiAoY29va2llT3B0aW9ucyAmJiBzID09PSBTdG9yZVR5cGUuQ29va2llKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHMsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IGNvb2tpZU9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalStorage: () => (/* binding */ LocalStorage)\n/* harmony export */ });\n/**\n * Data storage using browser's localStorage\n */\nvar LocalStorage = /** @class */ (function () {\n    function LocalStorage() {\n    }\n    LocalStorage.prototype.localStorageWarning = function (key, state) {\n        console.warn(\"Unable to access \".concat(key, \", localStorage may be \").concat(state));\n    };\n    LocalStorage.prototype.get = function (key) {\n        var _a;\n        try {\n            var val = localStorage.getItem(key);\n            if (val === null) {\n                return null;\n            }\n            try {\n                return (_a = JSON.parse(val)) !== null && _a !== void 0 ? _a : null;\n            }\n            catch (e) {\n                return (val !== null && val !== void 0 ? val : null);\n            }\n        }\n        catch (err) {\n            this.localStorageWarning(key, 'unavailable');\n            return null;\n        }\n    };\n    LocalStorage.prototype.set = function (key, value) {\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n        }\n        catch (_a) {\n            this.localStorageWarning(key, 'full');\n        }\n    };\n    LocalStorage.prototype.remove = function (key) {\n        try {\n            return localStorage.removeItem(key);\n        }\n        catch (err) {\n            this.localStorageWarning(key, 'unavailable');\n        }\n    };\n    return LocalStorage;\n}());\n\n//# sourceMappingURL=localStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2xvY2FsU3RvcmFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN1QjtBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9sb2NhbFN0b3JhZ2UuanM/NTY2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhdGEgc3RvcmFnZSB1c2luZyBicm93c2VyJ3MgbG9jYWxTdG9yYWdlXG4gKi9cbnZhciBMb2NhbFN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9jYWxTdG9yYWdlKCkge1xuICAgIH1cbiAgICBMb2NhbFN0b3JhZ2UucHJvdG90eXBlLmxvY2FsU3RvcmFnZVdhcm5pbmcgPSBmdW5jdGlvbiAoa2V5LCBzdGF0ZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gYWNjZXNzIFwiLmNvbmNhdChrZXksIFwiLCBsb2NhbFN0b3JhZ2UgbWF5IGJlIFwiKS5jb25jYXQoc3RhdGUpKTtcbiAgICB9O1xuICAgIExvY2FsU3RvcmFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IEpTT04ucGFyc2UodmFsKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWwgIT09IG51bGwgJiYgdmFsICE9PSB2b2lkIDAgPyB2YWwgOiBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmFnZVdhcm5pbmcoa2V5LCAndW5hdmFpbGFibGUnKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMb2NhbFN0b3JhZ2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmFnZVdhcm5pbmcoa2V5LCAnZnVsbCcpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMb2NhbFN0b3JhZ2UucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yYWdlV2FybmluZyhrZXksICd1bmF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTG9jYWxTdG9yYWdlO1xufSgpKTtcbmV4cG9ydCB7IExvY2FsU3RvcmFnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9jYWxTdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MemoryStorage: () => (/* binding */ MemoryStorage)\n/* harmony export */ });\n/**\n * Data Storage using in memory object\n */\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n        this.cache = {};\n    }\n    MemoryStorage.prototype.get = function (key) {\n        var _a;\n        return ((_a = this.cache[key]) !== null && _a !== void 0 ? _a : null);\n    };\n    MemoryStorage.prototype.set = function (key, value) {\n        this.cache[key] = value;\n    };\n    MemoryStorage.prototype.remove = function (key) {\n        delete this.cache[key];\n    };\n    return MemoryStorage;\n}());\n\n//# sourceMappingURL=memoryStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL21lbW9yeVN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvbWVtb3J5U3RvcmFnZS5qcz9kYzUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YSBTdG9yYWdlIHVzaW5nIGluIG1lbW9yeSBvYmplY3RcbiAqL1xudmFyIE1lbW9yeVN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVtb3J5U3RvcmFnZSgpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgIH1cbiAgICBNZW1vcnlTdG9yYWdlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmNhY2hlW2tleV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGwpO1xuICAgIH07XG4gICAgTWVtb3J5U3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgICBNZW1vcnlTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlW2tleV07XG4gICAgfTtcbiAgICByZXR1cm4gTWVtb3J5U3RvcmFnZTtcbn0oKSk7XG5leHBvcnQgeyBNZW1vcnlTdG9yYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZW1vcnlTdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isArrayOfStoreType: () => (/* binding */ isArrayOfStoreType),\n/* harmony export */   isStoreTypeWithSettings: () => (/* binding */ isStoreTypeWithSettings)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n\nfunction isArrayOfStoreType(s) {\n    return (s &&\n        s.stores &&\n        Array.isArray(s.stores) &&\n        s.stores.every(function (e) { return Object.values(_types__WEBPACK_IMPORTED_MODULE_0__.StoreType).includes(e); }));\n}\nfunction isStoreTypeWithSettings(s) {\n    return typeof s === 'object' && s.name !== undefined;\n}\n//# sourceMappingURL=settings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3NldHRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvQztBQUM3QjtBQUNQO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQkFBcUIsNkNBQVMsZ0JBQWdCO0FBQ3BGO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2Uvc2V0dGluZ3MuanM/ZjY0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9yZVR5cGUgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5T2ZTdG9yZVR5cGUocykge1xuICAgIHJldHVybiAocyAmJlxuICAgICAgICBzLnN0b3JlcyAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHMuc3RvcmVzKSAmJlxuICAgICAgICBzLnN0b3Jlcy5ldmVyeShmdW5jdGlvbiAoZSkgeyByZXR1cm4gT2JqZWN0LnZhbHVlcyhTdG9yZVR5cGUpLmluY2x1ZGVzKGUpOyB9KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTdG9yZVR5cGVXaXRoU2V0dGluZ3Mocykge1xuICAgIHJldHVybiB0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5uYW1lICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXR0aW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreType: () => (/* binding */ StoreType)\n/* harmony export */ });\nvar StoreType = {\n    Cookie: 'cookie',\n    LocalStorage: 'localStorage',\n    Memory: 'memory',\n};\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3R5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvdHlwZXMuanM/NTFlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdmFyIFN0b3JlVHlwZSA9IHtcbiAgICBDb29raWU6ICdjb29raWUnLFxuICAgIExvY2FsU3RvcmFnZTogJ2xvY2FsU3RvcmFnZScsXG4gICAgTWVtb3J5OiAnbWVtb3J5Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UniversalStorage: () => (/* binding */ UniversalStorage)\n/* harmony export */ });\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nvar _logStoreKeyError = function (store, action, key, err) {\n    console.warn(\"\".concat(store.constructor.name, \": Can't \").concat(action, \" key \\\"\").concat(key, \"\\\" | Err: \").concat(err));\n};\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nvar UniversalStorage = /** @class */ (function () {\n    function UniversalStorage(stores) {\n        this.stores = stores;\n    }\n    UniversalStorage.prototype.get = function (key) {\n        var val = null;\n        for (var _i = 0, _a = this.stores; _i < _a.length; _i++) {\n            var store = _a[_i];\n            try {\n                val = store.get(key);\n                if (val !== undefined && val !== null) {\n                    return val;\n                }\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'get', key, e);\n            }\n        }\n        return null;\n    };\n    UniversalStorage.prototype.set = function (key, value) {\n        this.stores.forEach(function (store) {\n            try {\n                store.set(key, value);\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'set', key, e);\n            }\n        });\n    };\n    UniversalStorage.prototype.clear = function (key) {\n        this.stores.forEach(function (store) {\n            try {\n                store.remove(key);\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'remove', key, e);\n            }\n        });\n    };\n    /*\n      This is to support few scenarios where:\n      - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n      - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n    */\n    UniversalStorage.prototype.getAndSync = function (key) {\n        var val = this.get(key);\n        // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n        var coercedValue = (typeof val === 'number' ? val.toString() : val);\n        this.set(key, coercedValue);\n        return coercedValue;\n    };\n    return UniversalStorage;\n}());\n\n//# sourceMappingURL=universalStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3VuaXZlcnNhbFN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdCQUFnQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL3VuaXZlcnNhbFN0b3JhZ2UuanM/YjkzMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBub3QgYWRkaW5nIHRvIHByaXZhdGUgbWV0aG9kIGJlY2F1c2UgdGhvc2UgbWV0aG9kIG5hbWVzIGRvIG5vdCBnZXQgbWluaWZpZWQgYXRtLCBhbmQgZG9lcyBub3QgdXNlICd0aGlzJ1xudmFyIF9sb2dTdG9yZUtleUVycm9yID0gZnVuY3Rpb24gKHN0b3JlLCBhY3Rpb24sIGtleSwgZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFwiXCIuY29uY2F0KHN0b3JlLmNvbnN0cnVjdG9yLm5hbWUsIFwiOiBDYW4ndCBcIikuY29uY2F0KGFjdGlvbiwgXCIga2V5IFxcXCJcIikuY29uY2F0KGtleSwgXCJcXFwiIHwgRXJyOiBcIikuY29uY2F0KGVycikpO1xufTtcbi8qKlxuICogVXNlcyBtdWx0aXBsZSBzdG9yYWdlcyBpbiBhIHByaW9yaXR5IGxpc3QgdG8gZ2V0L3NldCB2YWx1ZXMgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIHNwZWNpZmllZC5cbiAqL1xudmFyIFVuaXZlcnNhbFN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVW5pdmVyc2FsU3RvcmFnZShzdG9yZXMpIHtcbiAgICAgICAgdGhpcy5zdG9yZXMgPSBzdG9yZXM7XG4gICAgfVxuICAgIFVuaXZlcnNhbFN0b3JhZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN0b3JlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IF9hW19pXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsID0gc3RvcmUuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgX2xvZ1N0b3JlS2V5RXJyb3Ioc3RvcmUsICdnZXQnLCBrZXksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgVW5pdmVyc2FsU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdG9yZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RvcmUuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfbG9nU3RvcmVLZXlFcnJvcihzdG9yZSwgJ3NldCcsIGtleSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVW5pdmVyc2FsU3RvcmFnZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRoaXMuc3RvcmVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0b3JlLnJlbW92ZShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfbG9nU3RvcmVLZXlFcnJvcihzdG9yZSwgJ3JlbW92ZScsIGtleSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLypcbiAgICAgIFRoaXMgaXMgdG8gc3VwcG9ydCBmZXcgc2NlbmFyaW9zIHdoZXJlOlxuICAgICAgLSB2YWx1ZSBleGlzdCBpbiBvbmUgb2YgdGhlIHN0b3JlcyAoIGFzIGEgcmVzdWx0IG9mIG90aGVyIHN0b3JlcyBiZWluZyBjbGVhcmVkIGZyb20gYnJvd3NlciApIGFuZCB3ZSB3YW50IHRvIHJlc3luYyB0aGVtXG4gICAgICAtIHJlYWQgdmFsdWVzIGluIEFKUyAxLjAgZm9ybWF0ICggZm9yIGN1c3RvbWVycyBhZnRlciAxLjAgLS0+IDIuMCBtaWdyYXRpb24gKSBhbmQgdGhlbiByZS13cml0ZSB0aGVtIGluIEFKUyAyLjAgZm9ybWF0XG4gICAgKi9cbiAgICBVbml2ZXJzYWxTdG9yYWdlLnByb3RvdHlwZS5nZXRBbmRTeW5jID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5nZXQoa2V5KTtcbiAgICAgICAgLy8gbGVnYWN5IGJlaGF2aW9yLCBnZXRBbmRTeW5jIGNhbiBjaGFuZ2UgdGhlIHR5cGUgb2YgYSB2YWx1ZSBmcm9tIG51bWJlciB0byBzdHJpbmcgKEFKUyAxLjAgc3RvcmVzIG51bWVyaWNhbCB2YWx1ZXMgYXMgYSBudW1iZXIpXG4gICAgICAgIHZhciBjb2VyY2VkVmFsdWUgPSAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicgPyB2YWwudG9TdHJpbmcoKSA6IHZhbCk7XG4gICAgICAgIHRoaXMuc2V0KGtleSwgY29lcmNlZFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvZXJjZWRWYWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiBVbml2ZXJzYWxTdG9yYWdlO1xufSgpKTtcbmV4cG9ydCB7IFVuaXZlcnNhbFN0b3JhZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaXZlcnNhbFN0b3JhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group: () => (/* binding */ Group),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var _lib_bind_all__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/bind-all */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\");\n\n\n\n\nvar defaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_user_id',\n        oldKey: 'ajs_user',\n    },\n    localStorage: {\n        key: 'ajs_user_traits',\n    },\n};\nvar User = /** @class */ (function () {\n    function User(options, cookieOptions) {\n        if (options === void 0) { options = defaults; }\n        var _this = this;\n        var _a, _b, _c, _d;\n        this.options = {};\n        this.id = function (id) {\n            if (_this.options.disable) {\n                return null;\n            }\n            var prevId = _this.identityStore.getAndSync(_this.idKey);\n            if (id !== undefined) {\n                _this.identityStore.set(_this.idKey, id);\n                var changingIdentity = id !== prevId && prevId !== null && id !== null;\n                if (changingIdentity) {\n                    _this.anonymousId(null);\n                }\n            }\n            var retId = _this.identityStore.getAndSync(_this.idKey);\n            if (retId)\n                return retId;\n            var retLeg = _this.legacyUserStore.get(defaults.cookie.oldKey);\n            return retLeg ? (typeof retLeg === 'object' ? retLeg.id : retLeg) : null;\n        };\n        this.anonymousId = function (id) {\n            var _a, _b;\n            if (_this.options.disable) {\n                return null;\n            }\n            if (id === undefined) {\n                var val = (_a = _this.identityStore.getAndSync(_this.anonKey)) !== null && _a !== void 0 ? _a : (_b = _this.legacySIO()) === null || _b === void 0 ? void 0 : _b[0];\n                if (val) {\n                    return val;\n                }\n            }\n            if (id === null) {\n                _this.identityStore.set(_this.anonKey, null);\n                return _this.identityStore.getAndSync(_this.anonKey);\n            }\n            _this.identityStore.set(_this.anonKey, id !== null && id !== void 0 ? id : (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)());\n            return _this.identityStore.getAndSync(_this.anonKey);\n        };\n        this.traits = function (traits) {\n            var _a;\n            if (_this.options.disable) {\n                return;\n            }\n            if (traits === null) {\n                traits = {};\n            }\n            if (traits) {\n                _this.traitsStore.set(_this.traitsKey, traits !== null && traits !== void 0 ? traits : {});\n            }\n            return (_a = _this.traitsStore.get(_this.traitsKey)) !== null && _a !== void 0 ? _a : {};\n        };\n        this.options = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, defaults), options);\n        this.cookieOptions = cookieOptions;\n        this.idKey = (_b = (_a = options.cookie) === null || _a === void 0 ? void 0 : _a.key) !== null && _b !== void 0 ? _b : defaults.cookie.key;\n        this.traitsKey = (_d = (_c = options.localStorage) === null || _c === void 0 ? void 0 : _c.key) !== null && _d !== void 0 ? _d : defaults.localStorage.key;\n        this.anonKey = 'ajs_anonymous_id';\n        this.identityStore = this.createStorage(this.options, cookieOptions);\n        // using only cookies for legacy user store\n        this.legacyUserStore = this.createStorage(this.options, cookieOptions, function (s) { return s === _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie; });\n        // using only localStorage / memory for traits store\n        this.traitsStore = this.createStorage(this.options, cookieOptions, function (s) { return s !== _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie; });\n        var legacyUser = this.legacyUserStore.get(defaults.cookie.oldKey);\n        if (legacyUser && typeof legacyUser === 'object') {\n            legacyUser.id && this.id(legacyUser.id);\n            legacyUser.traits && this.traits(legacyUser.traits);\n        }\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this);\n    }\n    User.prototype.legacySIO = function () {\n        var val = this.legacyUserStore.get('_sio');\n        if (!val) {\n            return null;\n        }\n        var _a = val.split('----'), anon = _a[0], user = _a[1];\n        return [anon, user];\n    };\n    User.prototype.identify = function (id, traits) {\n        if (this.options.disable) {\n            return;\n        }\n        traits = traits !== null && traits !== void 0 ? traits : {};\n        var currentId = this.id();\n        if (currentId === null || currentId === id) {\n            traits = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.traits()), traits);\n        }\n        if (id) {\n            this.id(id);\n        }\n        this.traits(traits);\n    };\n    User.prototype.logout = function () {\n        this.anonymousId(null);\n        this.id(null);\n        this.traits({});\n    };\n    User.prototype.reset = function () {\n        this.logout();\n        this.identityStore.clear(this.idKey);\n        this.identityStore.clear(this.anonKey);\n        this.traitsStore.clear(this.traitsKey);\n    };\n    User.prototype.load = function () {\n        return new User(this.options, this.cookieOptions);\n    };\n    User.prototype.save = function () {\n        return true;\n    };\n    /**\n     * Creates the right storage system applying all the user options, cookie options and particular filters\n     * @param options UserOptions\n     * @param cookieOpts CookieOptions\n     * @param filterStores filter function to apply to any StoreTypes (skipped if options specify using a custom storage)\n     * @returns a Storage object\n     */\n    User.prototype.createStorage = function (options, cookieOpts, filterStores) {\n        var stores = [\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.LocalStorage,\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie,\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Memory,\n        ];\n        // If disabled we won't have any storage functionality\n        if (options.disable) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage([]);\n        }\n        // If persistance is disabled we will always fallback to Memory Storage\n        if (!options.persist) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage([new _storage__WEBPACK_IMPORTED_MODULE_5__.MemoryStorage()]);\n        }\n        if (options.storage !== undefined && options.storage !== null) {\n            if ((0,_storage__WEBPACK_IMPORTED_MODULE_6__.isArrayOfStoreType)(options.storage)) {\n                // If the user only specified order of stores we will still apply filters and transformations e.g. not using localStorage if localStorageFallbackDisabled\n                stores = options.storage.stores;\n            }\n        }\n        // Disable LocalStorage\n        if (options.localStorageFallbackDisabled) {\n            stores = stores.filter(function (s) { return s !== _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.LocalStorage; });\n        }\n        // Apply Additional filters\n        if (filterStores) {\n            stores = stores.filter(filterStores);\n        }\n        return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_7__.initializeStorages)((0,_storage__WEBPACK_IMPORTED_MODULE_7__.applyCookieOptions)(stores, cookieOpts)));\n    };\n    User.defaults = defaults;\n    return User;\n}());\n\nvar groupDefaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_group_id',\n    },\n    localStorage: {\n        key: 'ajs_group_properties',\n    },\n};\nvar Group = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(Group, _super);\n    function Group(options, cookie) {\n        if (options === void 0) { options = groupDefaults; }\n        var _this = _super.call(this, (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, groupDefaults), options), cookie) || this;\n        _this.anonymousId = function (_id) {\n            return undefined;\n        };\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this);\n        return _this;\n    }\n    return Group;\n}(User));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS91c2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDRjtBQUNBO0FBQzJGO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLGdEQUFJO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5R0FBeUc7QUFDekc7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsYUFBYSwrQ0FBUyxVQUFVO0FBQzlIO0FBQ0EsMEZBQTBGLGFBQWEsK0NBQVMsVUFBVTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQ0FBUztBQUNyQixZQUFZLCtDQUFTO0FBQ3JCLFlBQVksK0NBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQWdCLE1BQU0sbURBQWE7QUFDMUQ7QUFDQTtBQUNBLGdCQUFnQiw0REFBa0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGFBQWEsK0NBQVMsZ0JBQWdCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQWdCLENBQUMsNERBQWtCLENBQUMsNERBQWtCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDZTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQSxrQ0FBa0M7QUFDbEMsc0NBQXNDLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMxRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDZ0I7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3VzZXIvaW5kZXguanM/YWI5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAnQGx1a2VlZC91dWlkJztcbmltcG9ydCBhdXRvQmluZCBmcm9tICcuLi8uLi9saWIvYmluZC1hbGwnO1xuaW1wb3J0IHsgVW5pdmVyc2FsU3RvcmFnZSwgTWVtb3J5U3RvcmFnZSwgU3RvcmVUeXBlLCBhcHBseUNvb2tpZU9wdGlvbnMsIGluaXRpYWxpemVTdG9yYWdlcywgaXNBcnJheU9mU3RvcmVUeXBlLCB9IGZyb20gJy4uL3N0b3JhZ2UnO1xudmFyIGRlZmF1bHRzID0ge1xuICAgIHBlcnNpc3Q6IHRydWUsXG4gICAgY29va2llOiB7XG4gICAgICAgIGtleTogJ2Fqc191c2VyX2lkJyxcbiAgICAgICAgb2xkS2V5OiAnYWpzX3VzZXInLFxuICAgIH0sXG4gICAgbG9jYWxTdG9yYWdlOiB7XG4gICAgICAgIGtleTogJ2Fqc191c2VyX3RyYWl0cycsXG4gICAgfSxcbn07XG52YXIgVXNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVc2VyKG9wdGlvbnMsIGNvb2tpZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gZGVmYXVsdHM7IH1cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5pZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZJZCA9IF90aGlzLmlkZW50aXR5U3RvcmUuZ2V0QW5kU3luYyhfdGhpcy5pZEtleSk7XG4gICAgICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmlkZW50aXR5U3RvcmUuc2V0KF90aGlzLmlkS2V5LCBpZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5naW5nSWRlbnRpdHkgPSBpZCAhPT0gcHJldklkICYmIHByZXZJZCAhPT0gbnVsbCAmJiBpZCAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdpbmdJZGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbm9ueW1vdXNJZChudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmV0SWQgPSBfdGhpcy5pZGVudGl0eVN0b3JlLmdldEFuZFN5bmMoX3RoaXMuaWRLZXkpO1xuICAgICAgICAgICAgaWYgKHJldElkKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRJZDtcbiAgICAgICAgICAgIHZhciByZXRMZWcgPSBfdGhpcy5sZWdhY3lVc2VyU3RvcmUuZ2V0KGRlZmF1bHRzLmNvb2tpZS5vbGRLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHJldExlZyA/ICh0eXBlb2YgcmV0TGVnID09PSAnb2JqZWN0JyA/IHJldExlZy5pZCA6IHJldExlZykgOiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFub255bW91c0lkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gKF9hID0gX3RoaXMuaWRlbnRpdHlTdG9yZS5nZXRBbmRTeW5jKF90aGlzLmFub25LZXkpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSBfdGhpcy5sZWdhY3lTSU8oKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iWzBdO1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pZGVudGl0eVN0b3JlLnNldChfdGhpcy5hbm9uS2V5LCBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaWRlbnRpdHlTdG9yZS5nZXRBbmRTeW5jKF90aGlzLmFub25LZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuaWRlbnRpdHlTdG9yZS5zZXQoX3RoaXMuYW5vbktleSwgaWQgIT09IG51bGwgJiYgaWQgIT09IHZvaWQgMCA/IGlkIDogdXVpZCgpKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pZGVudGl0eVN0b3JlLmdldEFuZFN5bmMoX3RoaXMuYW5vbktleSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhaXRzID0gZnVuY3Rpb24gKHRyYWl0cykge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFpdHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0cmFpdHMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFpdHMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy50cmFpdHNTdG9yZS5zZXQoX3RoaXMudHJhaXRzS2V5LCB0cmFpdHMgIT09IG51bGwgJiYgdHJhaXRzICE9PSB2b2lkIDAgPyB0cmFpdHMgOiB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKF9hID0gX3RoaXMudHJhaXRzU3RvcmUuZ2V0KF90aGlzLnRyYWl0c0tleSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGVmYXVsdHMpLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb29raWVPcHRpb25zID0gY29va2llT3B0aW9ucztcbiAgICAgICAgdGhpcy5pZEtleSA9IChfYiA9IChfYSA9IG9wdGlvbnMuY29va2llKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eua2V5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBkZWZhdWx0cy5jb29raWUua2V5O1xuICAgICAgICB0aGlzLnRyYWl0c0tleSA9IChfZCA9IChfYyA9IG9wdGlvbnMubG9jYWxTdG9yYWdlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Mua2V5KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBkZWZhdWx0cy5sb2NhbFN0b3JhZ2Uua2V5O1xuICAgICAgICB0aGlzLmFub25LZXkgPSAnYWpzX2Fub255bW91c19pZCc7XG4gICAgICAgIHRoaXMuaWRlbnRpdHlTdG9yZSA9IHRoaXMuY3JlYXRlU3RvcmFnZSh0aGlzLm9wdGlvbnMsIGNvb2tpZU9wdGlvbnMpO1xuICAgICAgICAvLyB1c2luZyBvbmx5IGNvb2tpZXMgZm9yIGxlZ2FjeSB1c2VyIHN0b3JlXG4gICAgICAgIHRoaXMubGVnYWN5VXNlclN0b3JlID0gdGhpcy5jcmVhdGVTdG9yYWdlKHRoaXMub3B0aW9ucywgY29va2llT3B0aW9ucywgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgPT09IFN0b3JlVHlwZS5Db29raWU7IH0pO1xuICAgICAgICAvLyB1c2luZyBvbmx5IGxvY2FsU3RvcmFnZSAvIG1lbW9yeSBmb3IgdHJhaXRzIHN0b3JlXG4gICAgICAgIHRoaXMudHJhaXRzU3RvcmUgPSB0aGlzLmNyZWF0ZVN0b3JhZ2UodGhpcy5vcHRpb25zLCBjb29raWVPcHRpb25zLCBmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gU3RvcmVUeXBlLkNvb2tpZTsgfSk7XG4gICAgICAgIHZhciBsZWdhY3lVc2VyID0gdGhpcy5sZWdhY3lVc2VyU3RvcmUuZ2V0KGRlZmF1bHRzLmNvb2tpZS5vbGRLZXkpO1xuICAgICAgICBpZiAobGVnYWN5VXNlciAmJiB0eXBlb2YgbGVnYWN5VXNlciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGxlZ2FjeVVzZXIuaWQgJiYgdGhpcy5pZChsZWdhY3lVc2VyLmlkKTtcbiAgICAgICAgICAgIGxlZ2FjeVVzZXIudHJhaXRzICYmIHRoaXMudHJhaXRzKGxlZ2FjeVVzZXIudHJhaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBhdXRvQmluZCh0aGlzKTtcbiAgICB9XG4gICAgVXNlci5wcm90b3R5cGUubGVnYWN5U0lPID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5sZWdhY3lVc2VyU3RvcmUuZ2V0KCdfc2lvJyk7XG4gICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB2YWwuc3BsaXQoJy0tLS0nKSwgYW5vbiA9IF9hWzBdLCB1c2VyID0gX2FbMV07XG4gICAgICAgIHJldHVybiBbYW5vbiwgdXNlcl07XG4gICAgfTtcbiAgICBVc2VyLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChpZCwgdHJhaXRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyYWl0cyA9IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9O1xuICAgICAgICB2YXIgY3VycmVudElkID0gdGhpcy5pZCgpO1xuICAgICAgICBpZiAoY3VycmVudElkID09PSBudWxsIHx8IGN1cnJlbnRJZCA9PT0gaWQpIHtcbiAgICAgICAgICAgIHRyYWl0cyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnRyYWl0cygpKSwgdHJhaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIHRoaXMuaWQoaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhaXRzKHRyYWl0cyk7XG4gICAgfTtcbiAgICBVc2VyLnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYW5vbnltb3VzSWQobnVsbCk7XG4gICAgICAgIHRoaXMuaWQobnVsbCk7XG4gICAgICAgIHRoaXMudHJhaXRzKHt9KTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICB0aGlzLmlkZW50aXR5U3RvcmUuY2xlYXIodGhpcy5pZEtleSk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHlTdG9yZS5jbGVhcih0aGlzLmFub25LZXkpO1xuICAgICAgICB0aGlzLnRyYWl0c1N0b3JlLmNsZWFyKHRoaXMudHJhaXRzS2V5KTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXNlcih0aGlzLm9wdGlvbnMsIHRoaXMuY29va2llT3B0aW9ucyk7XG4gICAgfTtcbiAgICBVc2VyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIHJpZ2h0IHN0b3JhZ2Ugc3lzdGVtIGFwcGx5aW5nIGFsbCB0aGUgdXNlciBvcHRpb25zLCBjb29raWUgb3B0aW9ucyBhbmQgcGFydGljdWxhciBmaWx0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVXNlck9wdGlvbnNcbiAgICAgKiBAcGFyYW0gY29va2llT3B0cyBDb29raWVPcHRpb25zXG4gICAgICogQHBhcmFtIGZpbHRlclN0b3JlcyBmaWx0ZXIgZnVuY3Rpb24gdG8gYXBwbHkgdG8gYW55IFN0b3JlVHlwZXMgKHNraXBwZWQgaWYgb3B0aW9ucyBzcGVjaWZ5IHVzaW5nIGEgY3VzdG9tIHN0b3JhZ2UpXG4gICAgICogQHJldHVybnMgYSBTdG9yYWdlIG9iamVjdFxuICAgICAqL1xuICAgIFVzZXIucHJvdG90eXBlLmNyZWF0ZVN0b3JhZ2UgPSBmdW5jdGlvbiAob3B0aW9ucywgY29va2llT3B0cywgZmlsdGVyU3RvcmVzKSB7XG4gICAgICAgIHZhciBzdG9yZXMgPSBbXG4gICAgICAgICAgICBTdG9yZVR5cGUuTG9jYWxTdG9yYWdlLFxuICAgICAgICAgICAgU3RvcmVUeXBlLkNvb2tpZSxcbiAgICAgICAgICAgIFN0b3JlVHlwZS5NZW1vcnksXG4gICAgICAgIF07XG4gICAgICAgIC8vIElmIGRpc2FibGVkIHdlIHdvbid0IGhhdmUgYW55IHN0b3JhZ2UgZnVuY3Rpb25hbGl0eVxuICAgICAgICBpZiAob3B0aW9ucy5kaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuaXZlcnNhbFN0b3JhZ2UoW10pO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHBlcnNpc3RhbmNlIGlzIGRpc2FibGVkIHdlIHdpbGwgYWx3YXlzIGZhbGxiYWNrIHRvIE1lbW9yeSBTdG9yYWdlXG4gICAgICAgIGlmICghb3B0aW9ucy5wZXJzaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuaXZlcnNhbFN0b3JhZ2UoW25ldyBNZW1vcnlTdG9yYWdlKCldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdG9yYWdlICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5zdG9yYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheU9mU3RvcmVUeXBlKG9wdGlvbnMuc3RvcmFnZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBvbmx5IHNwZWNpZmllZCBvcmRlciBvZiBzdG9yZXMgd2Ugd2lsbCBzdGlsbCBhcHBseSBmaWx0ZXJzIGFuZCB0cmFuc2Zvcm1hdGlvbnMgZS5nLiBub3QgdXNpbmcgbG9jYWxTdG9yYWdlIGlmIGxvY2FsU3RvcmFnZUZhbGxiYWNrRGlzYWJsZWRcbiAgICAgICAgICAgICAgICBzdG9yZXMgPSBvcHRpb25zLnN0b3JhZ2Uuc3RvcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIERpc2FibGUgTG9jYWxTdG9yYWdlXG4gICAgICAgIGlmIChvcHRpb25zLmxvY2FsU3RvcmFnZUZhbGxiYWNrRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHN0b3JlcyA9IHN0b3Jlcy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgIT09IFN0b3JlVHlwZS5Mb2NhbFN0b3JhZ2U7IH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGx5IEFkZGl0aW9uYWwgZmlsdGVyc1xuICAgICAgICBpZiAoZmlsdGVyU3RvcmVzKSB7XG4gICAgICAgICAgICBzdG9yZXMgPSBzdG9yZXMuZmlsdGVyKGZpbHRlclN0b3Jlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxTdG9yYWdlKGluaXRpYWxpemVTdG9yYWdlcyhhcHBseUNvb2tpZU9wdGlvbnMoc3RvcmVzLCBjb29raWVPcHRzKSkpO1xuICAgIH07XG4gICAgVXNlci5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgIHJldHVybiBVc2VyO1xufSgpKTtcbmV4cG9ydCB7IFVzZXIgfTtcbnZhciBncm91cERlZmF1bHRzID0ge1xuICAgIHBlcnNpc3Q6IHRydWUsXG4gICAgY29va2llOiB7XG4gICAgICAgIGtleTogJ2Fqc19ncm91cF9pZCcsXG4gICAgfSxcbiAgICBsb2NhbFN0b3JhZ2U6IHtcbiAgICAgICAga2V5OiAnYWpzX2dyb3VwX3Byb3BlcnRpZXMnLFxuICAgIH0sXG59O1xudmFyIEdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cChvcHRpb25zLCBjb29raWUpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gZ3JvdXBEZWZhdWx0czsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZ3JvdXBEZWZhdWx0cyksIG9wdGlvbnMpLCBjb29raWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmFub255bW91c0lkID0gZnVuY3Rpb24gKF9pZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgYXV0b0JpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBHcm91cDtcbn0oVXNlcikpO1xuZXhwb3J0IHsgR3JvdXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tld: () => (/* binding */ tld)\n/* harmony export */ });\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(rsc)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\");\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url) {\n    var host = url.hostname;\n    var parts = host.split('.');\n    var last = parts[parts.length - 1];\n    var levels = [];\n    // Ip address.\n    if (parts.length === 4 && parseInt(last, 10) > 0) {\n        return levels;\n    }\n    // Localhost.\n    if (parts.length <= 1) {\n        return levels;\n    }\n    // Create levels.\n    for (var i = parts.length - 2; i >= 0; --i) {\n        levels.push(parts.slice(i).join('.'));\n    }\n    return levels;\n}\nfunction parseUrl(url) {\n    try {\n        return new URL(url);\n    }\n    catch (_a) {\n        return;\n    }\n}\nfunction tld(url) {\n    var parsedUrl = parseUrl(url);\n    if (!parsedUrl)\n        return;\n    var lvls = levels(parsedUrl);\n    // Lookup the real top level one.\n    for (var i = 0; i < lvls.length; ++i) {\n        var cname = '__tld__';\n        var domain = lvls[i];\n        var opts = { domain: '.' + domain };\n        try {\n            // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(cname, '1', opts);\n            if (js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(cname)) {\n                js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(cname, opts);\n                return domain;\n            }\n        }\n        catch (_) {\n            return;\n        }\n    }\n}\n//# sourceMappingURL=tld.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS91c2VyL3RsZC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxZQUFZLGlEQUFNO0FBQ2xCLGdCQUFnQixpREFBTTtBQUN0QixnQkFBZ0IsaURBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS91c2VyL3RsZC5qcz83OTE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb29raWUgZnJvbSAnanMtY29va2llJztcbi8qKlxuICogTGV2ZWxzIHJldHVybnMgYWxsIGxldmVscyBvZiB0aGUgZ2l2ZW4gdXJsLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gbGV2ZWxzKHVybCkge1xuICAgIHZhciBob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgIHZhciBwYXJ0cyA9IGhvc3Quc3BsaXQoJy4nKTtcbiAgICB2YXIgbGFzdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBsZXZlbHMgPSBbXTtcbiAgICAvLyBJcCBhZGRyZXNzLlxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDQgJiYgcGFyc2VJbnQobGFzdCwgMTApID4gMCkge1xuICAgICAgICByZXR1cm4gbGV2ZWxzO1xuICAgIH1cbiAgICAvLyBMb2NhbGhvc3QuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHJldHVybiBsZXZlbHM7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBsZXZlbHMuXG4gICAgZm9yICh2YXIgaSA9IHBhcnRzLmxlbmd0aCAtIDI7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGxldmVscy5wdXNoKHBhcnRzLnNsaWNlKGkpLmpvaW4oJy4nKSk7XG4gICAgfVxuICAgIHJldHVybiBsZXZlbHM7XG59XG5mdW5jdGlvbiBwYXJzZVVybCh1cmwpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IFVSTCh1cmwpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0bGQodXJsKSB7XG4gICAgdmFyIHBhcnNlZFVybCA9IHBhcnNlVXJsKHVybCk7XG4gICAgaWYgKCFwYXJzZWRVcmwpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbHZscyA9IGxldmVscyhwYXJzZWRVcmwpO1xuICAgIC8vIExvb2t1cCB0aGUgcmVhbCB0b3AgbGV2ZWwgb25lLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbHZscy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY25hbWUgPSAnX190bGRfXyc7XG4gICAgICAgIHZhciBkb21haW4gPSBsdmxzW2ldO1xuICAgICAgICB2YXIgb3B0cyA9IHsgZG9tYWluOiAnLicgKyBkb21haW4gfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGNvb2tpZSBhY2Nlc3MgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGxpYnJhcnkgaXMgcmFuIGluc2lkZSBhIHNhbmRib3hlZCBlbnZpcm9ubWVudCAoZS5nLiBzYW5kYm94ZWQgaWZyYW1lKVxuICAgICAgICAgICAgY29va2llLnNldChjbmFtZSwgJzEnLCBvcHRzKTtcbiAgICAgICAgICAgIGlmIChjb29raWUuZ2V0KGNuYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvb2tpZS5yZW1vdmUoY25hbWUsIG9wdHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkb21haW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRsZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/generated/version.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n// This file is generated.\nvar version = '1.75.0';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvZ2VuZXJhdGVkL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2dlbmVyYXRlZC92ZXJzaW9uLmpzPzUwODMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGdlbmVyYXRlZC5cbmV4cG9ydCB2YXIgdmVyc2lvbiA9ICcxLjc1LjAnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ bindAll)\n/* harmony export */ });\nfunction bindAll(obj) {\n    var proto = obj.constructor.prototype;\n    for (var _i = 0, _a = Object.getOwnPropertyNames(proto); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key !== 'constructor') {\n            var desc = Object.getOwnPropertyDescriptor(obj.constructor.prototype, key);\n            if (!!desc && typeof desc.value === 'function') {\n                obj[key] = obj[key].bind(obj);\n            }\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=bind-all.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2JpbmQtYWxsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZTtBQUNmO0FBQ0EsNkRBQTZELGdCQUFnQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2JpbmQtYWxsLmpzPzg3ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmluZEFsbChvYmopIHtcbiAgICB2YXIgcHJvdG8gPSBvYmouY29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90byk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgIGlmIChrZXkgIT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBrZXkpO1xuICAgICAgICAgICAgaWYgKCEhZGVzYyAmJiB0eXBlb2YgZGVzYy52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9ialtrZXldID0gb2JqW2tleV0uYmluZChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kLWFsbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientHints: () => (/* binding */ clientHints)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction clientHints(hints) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var userAgentData;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            userAgentData = navigator.userAgentData;\n            if (!userAgentData)\n                return [2 /*return*/, undefined];\n            if (!hints)\n                return [2 /*return*/, userAgentData.toJSON()];\n            return [2 /*return*/, userAgentData\n                    .getHighEntropyValues(hints)\n                    .catch(function () { return userAgentData.toJSON(); })];\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2NsaWVudC1oaW50cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUN4QztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGdDQUFnQztBQUN6RSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvY2xpZW50LWhpbnRzL2luZGV4LmpzPzQ3ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGNsaWVudEhpbnRzKGhpbnRzKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXNlckFnZW50RGF0YTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdXNlckFnZW50RGF0YSA9IG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xuICAgICAgICAgICAgaWYgKCF1c2VyQWdlbnREYXRhKVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1bmRlZmluZWRdO1xuICAgICAgICAgICAgaWYgKCFoaW50cylcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXNlckFnZW50RGF0YS50b0pTT04oKV07XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXNlckFnZW50RGF0YVxuICAgICAgICAgICAgICAgICAgICAuZ2V0SGlnaEVudHJvcHlWYWx1ZXMoaGludHMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB1c2VyQWdlbnREYXRhLnRvSlNPTigpOyB9KV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embeddedWriteKey: () => (/* binding */ embeddedWriteKey)\n/* harmony export */ });\n// This variable is used as an optional fallback for when customers\n// host or proxy their own analytics.js.\ntry {\n    window.analyticsWriteKey = '__WRITE_KEY__';\n}\ncatch (_) {\n    // @ eslint-disable-next-line\n}\nfunction embeddedWriteKey() {\n    if (window.analyticsWriteKey === undefined) {\n        return undefined;\n    }\n    // this is done so that we don't accidentally override every reference to __write_key__\n    return window.analyticsWriteKey !== ['__', 'WRITE', '_', 'KEY', '__'].join('')\n        ? window.analyticsWriteKey\n        : undefined;\n}\n//# sourceMappingURL=embedded-write-key.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2VtYmVkZGVkLXdyaXRlLWtleS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2VtYmVkZGVkLXdyaXRlLWtleS5qcz80ODM4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgdmFyaWFibGUgaXMgdXNlZCBhcyBhbiBvcHRpb25hbCBmYWxsYmFjayBmb3Igd2hlbiBjdXN0b21lcnNcbi8vIGhvc3Qgb3IgcHJveHkgdGhlaXIgb3duIGFuYWx5dGljcy5qcy5cbnRyeSB7XG4gICAgd2luZG93LmFuYWx5dGljc1dyaXRlS2V5ID0gJ19fV1JJVEVfS0VZX18nO1xufVxuY2F0Y2ggKF8pIHtcbiAgICAvLyBAIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxufVxuZXhwb3J0IGZ1bmN0aW9uIGVtYmVkZGVkV3JpdGVLZXkoKSB7XG4gICAgaWYgKHdpbmRvdy5hbmFseXRpY3NXcml0ZUtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIHRoaXMgaXMgZG9uZSBzbyB0aGF0IHdlIGRvbid0IGFjY2lkZW50YWxseSBvdmVycmlkZSBldmVyeSByZWZlcmVuY2UgdG8gX193cml0ZV9rZXlfX1xuICAgIHJldHVybiB3aW5kb3cuYW5hbHl0aWNzV3JpdGVLZXkgIT09IFsnX18nLCAnV1JJVEUnLCAnXycsICdLRVknLCAnX18nXS5qb2luKCcnKVxuICAgICAgICA/IHdpbmRvdy5hbmFseXRpY3NXcml0ZUtleVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtYmVkZGVkLXdyaXRlLWtleS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\n/* harmony import */ var unfetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! unfetch */ \"(rsc)/./node_modules/unfetch/dist/unfetch.module.js\");\n/* harmony import */ var _get_global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-global */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\n\n\n/**\n * Wrapper around native `fetch` containing `unfetch` fallback.\n */\nvar fetch = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var global = (0,_get_global__WEBPACK_IMPORTED_MODULE_1__.getGlobal)();\n    return ((global && global.fetch) || unfetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"]).apply(void 0, args);\n};\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUNXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVM7QUFDMUIsd0NBQXdDLCtDQUFPO0FBQy9DO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvZmV0Y2guanM/ZDQ3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdW5mZXRjaCBmcm9tICd1bmZldGNoJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4vZ2V0LWdsb2JhbCc7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIG5hdGl2ZSBgZmV0Y2hgIGNvbnRhaW5pbmcgYHVuZmV0Y2hgIGZhbGxiYWNrLlxuICovXG5leHBvcnQgdmFyIGZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG4gICAgcmV0dXJuICgoZ2xvYmFsICYmIGdsb2JhbC5mZXRjaCkgfHwgdW5mZXRjaCkuYXBwbHkodm9pZCAwLCBhcmdzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobal: () => (/* binding */ getGlobal)\n/* harmony export */ });\n// This an imperfect polyfill for globalThis\nvar getGlobal = function () {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return null;\n};\n//# sourceMappingURL=get-global.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dldC1nbG9iYWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvZ2V0LWdsb2JhbC5qcz8xZGUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgYW4gaW1wZXJmZWN0IHBvbHlmaWxsIGZvciBnbG9iYWxUaGlzXG5leHBvcnQgdmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1nbG9iYWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProcessEnv: () => (/* binding */ getProcessEnv)\n/* harmony export */ });\n/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nfunction getProcessEnv() {\n    if (typeof process === 'undefined' || !process.env) {\n        return {};\n    }\n    return process.env;\n}\n//# sourceMappingURL=get-process-env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dldC1wcm9jZXNzLWVudi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9nZXQtcHJvY2Vzcy1lbnYuanM/MjQ1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJldHVybnMgYHByb2Nlc3MuZW52YCBpZiBpdCBpcyBhdmFpbGFibGUgaW4gdGhlIGVudmlyb25tZW50LlxuICogQWx3YXlzIHJldHVybnMgYW4gb2JqZWN0IG1ha2UgaXQgc2ltaWxhcmx5IGVhc3kgdG8gdXNlIGFzIGBwcm9jZXNzLmVudmAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9jZXNzRW52KCkge1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXByb2Nlc3MuZW52KSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LXByb2Nlc3MtZW52LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalAnalytics: () => (/* binding */ getGlobalAnalytics),\n/* harmony export */   setGlobalAnalytics: () => (/* binding */ setGlobalAnalytics),\n/* harmony export */   setGlobalAnalyticsKey: () => (/* binding */ setGlobalAnalyticsKey)\n/* harmony export */ });\n/**\n * Stores the global window analytics key\n */\nvar _globalAnalyticsKey = 'analytics';\n/**\n * Gets the global analytics/buffer\n * @param key name of the window property where the buffer is stored (default: analytics)\n * @returns AnalyticsSnippet\n */\nfunction getGlobalAnalytics() {\n    return window[_globalAnalyticsKey];\n}\n/**\n * Replaces the global window key for the analytics/buffer object\n * @param key key name\n */\nfunction setGlobalAnalyticsKey(key) {\n    _globalAnalyticsKey = key;\n}\n/**\n * Sets the global analytics object\n * @param analytics analytics snippet\n */\nfunction setGlobalAnalytics(analytics) {\n    ;\n    window[_globalAnalyticsKey] = analytics;\n}\n//# sourceMappingURL=global-analytics-helper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyLmpzPzE1YzgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdG9yZXMgdGhlIGdsb2JhbCB3aW5kb3cgYW5hbHl0aWNzIGtleVxuICovXG52YXIgX2dsb2JhbEFuYWx5dGljc0tleSA9ICdhbmFseXRpY3MnO1xuLyoqXG4gKiBHZXRzIHRoZSBnbG9iYWwgYW5hbHl0aWNzL2J1ZmZlclxuICogQHBhcmFtIGtleSBuYW1lIG9mIHRoZSB3aW5kb3cgcHJvcGVydHkgd2hlcmUgdGhlIGJ1ZmZlciBpcyBzdG9yZWQgKGRlZmF1bHQ6IGFuYWx5dGljcylcbiAqIEByZXR1cm5zIEFuYWx5dGljc1NuaXBwZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbEFuYWx5dGljcygpIHtcbiAgICByZXR1cm4gd2luZG93W19nbG9iYWxBbmFseXRpY3NLZXldO1xufVxuLyoqXG4gKiBSZXBsYWNlcyB0aGUgZ2xvYmFsIHdpbmRvdyBrZXkgZm9yIHRoZSBhbmFseXRpY3MvYnVmZmVyIG9iamVjdFxuICogQHBhcmFtIGtleSBrZXkgbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0R2xvYmFsQW5hbHl0aWNzS2V5KGtleSkge1xuICAgIF9nbG9iYWxBbmFseXRpY3NLZXkgPSBrZXk7XG59XG4vKipcbiAqIFNldHMgdGhlIGdsb2JhbCBhbmFseXRpY3Mgb2JqZWN0XG4gKiBAcGFyYW0gYW5hbHl0aWNzIGFuYWx5dGljcyBzbmlwcGV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRHbG9iYWxBbmFseXRpY3MoYW5hbHl0aWNzKSB7XG4gICAgO1xuICAgIHdpbmRvd1tfZ2xvYmFsQW5hbHl0aWNzS2V5XSA9IGFuYWx5dGljcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbC1hbmFseXRpY3MtaGVscGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPlanEventEnabled: () => (/* binding */ isPlanEventEnabled)\n/* harmony export */ });\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nfunction isPlanEventEnabled(plan, planEvent) {\n    var _a, _b;\n    // Always prioritize the event's `enabled` status\n    if (typeof (planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) === 'boolean') {\n        return planEvent.enabled;\n    }\n    // Assume absence of a tracking plan means events are enabled\n    return (_b = (_a = plan === null || plan === void 0 ? void 0 : plan.__default) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n}\n//# sourceMappingURL=is-plan-event-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvaXMtcGxhbi1ldmVudC1lbmFibGVkLmpzPzI4ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSB0cmFjayBldmVudCBpcyBhbGxvd2VkIHRvIGJlIHNlbnQgYmFzZWQgb24gdGhlXG4gKiB1c2VyJ3MgdHJhY2tpbmcgcGxhbi5cbiAqIElmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSB0cmFja2luZyBwbGFuIG9yIHRoZSBldmVudCBpcyBhbGxvd2VkIGJhc2VkXG4gKiBvbiB0aGUgdHJhY2tpbmcgcGxhbiBjb25maWd1cmF0aW9uLCByZXR1cm5zIHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYW5FdmVudEVuYWJsZWQocGxhbiwgcGxhbkV2ZW50KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAvLyBBbHdheXMgcHJpb3JpdGl6ZSB0aGUgZXZlbnQncyBgZW5hYmxlZGAgc3RhdHVzXG4gICAgaWYgKHR5cGVvZiAocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmVuYWJsZWQpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIHBsYW5FdmVudC5lbmFibGVkO1xuICAgIH1cbiAgICAvLyBBc3N1bWUgYWJzZW5jZSBvZiBhIHRyYWNraW5nIHBsYW4gbWVhbnMgZXZlbnRzIGFyZSBlbmFibGVkXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IHBsYW4gPT09IG51bGwgfHwgcGxhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbi5fX2RlZmF1bHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbmFibGVkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtcGxhbi1ldmVudC1lbmFibGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXRoZW5hYmxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXRoZW5hYmxlLmpzP2QzMDgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQ2hlY2sgaWYgIHRoZW5hYmxlXG4gKiAgKGluc3RhbmNlb2YgUHJvbWlzZSBkb2Vzbid0IHJlc3BlY3QgcmVhbG1zKVxuICovXG5leHBvcnQgdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAndGhlbicgaW4gdmFsdWUgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtdGhlbmFibGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadScript: () => (/* binding */ loadScript),\n/* harmony export */   unloadScript: () => (/* binding */ unloadScript)\n/* harmony export */ });\nfunction findScript(src) {\n    var scripts = Array.prototype.slice.call(window.document.querySelectorAll('script'));\n    return scripts.find(function (s) { return s.src === src; });\n}\n/**\n * Load a script from a URL and append it to the document.\n */\nfunction loadScript(src, attributes) {\n    var found = findScript(src);\n    if (found !== undefined) {\n        var status_1 = found === null || found === void 0 ? void 0 : found.getAttribute('status');\n        if (status_1 === 'loaded') {\n            return Promise.resolve(found);\n        }\n        if (status_1 === 'loading') {\n            return new Promise(function (resolve, reject) {\n                found.addEventListener('load', function () { return resolve(found); });\n                found.addEventListener('error', function (err) { return reject(err); });\n            });\n        }\n    }\n    return new Promise(function (resolve, reject) {\n        var _a;\n        var script = window.document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = src;\n        script.async = true;\n        script.setAttribute('status', 'loading');\n        for (var _i = 0, _b = Object.entries(attributes !== null && attributes !== void 0 ? attributes : {}); _i < _b.length; _i++) {\n            var _c = _b[_i], k = _c[0], v = _c[1];\n            script.setAttribute(k, v);\n        }\n        script.onload = function () {\n            script.onerror = script.onload = null;\n            script.setAttribute('status', 'loaded');\n            resolve(script);\n        };\n        script.onerror = function () {\n            script.onerror = script.onload = null;\n            script.setAttribute('status', 'error');\n            reject(new Error(\"Failed to load \".concat(src)));\n        };\n        var firstExistingScript = window.document.querySelector('script');\n        if (!firstExistingScript) {\n            window.document.head.appendChild(script);\n        }\n        else {\n            (_a = firstExistingScript.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(script, firstExistingScript);\n        }\n    });\n}\nfunction unloadScript(src) {\n    var found = findScript(src);\n    if (found !== undefined) {\n        found.remove();\n    }\n    return Promise.resolve();\n}\n//# sourceMappingURL=load-script.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2xvYWQtc2NyaXB0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBLHVDQUF1Qyx1QkFBdUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsd0JBQXdCO0FBQ3JGLGlFQUFpRSxxQkFBcUI7QUFDdEYsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJHQUEyRyxHQUFHLGdCQUFnQjtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9sb2FkLXNjcmlwdC5qcz9mODgwIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZpbmRTY3JpcHQoc3JjKSB7XG4gICAgdmFyIHNjcmlwdHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykpO1xuICAgIHJldHVybiBzY3JpcHRzLmZpbmQoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc3JjID09PSBzcmM7IH0pO1xufVxuLyoqXG4gKiBMb2FkIGEgc2NyaXB0IGZyb20gYSBVUkwgYW5kIGFwcGVuZCBpdCB0byB0aGUgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU2NyaXB0KHNyYywgYXR0cmlidXRlcykge1xuICAgIHZhciBmb3VuZCA9IGZpbmRTY3JpcHQoc3JjKTtcbiAgICBpZiAoZm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgc3RhdHVzXzEgPSBmb3VuZCA9PT0gbnVsbCB8fCBmb3VuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZm91bmQuZ2V0QXR0cmlidXRlKCdzdGF0dXMnKTtcbiAgICAgICAgaWYgKHN0YXR1c18xID09PSAnbG9hZGVkJykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1c18xID09PSAnbG9hZGluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgZm91bmQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoZm91bmQpOyB9KTtcbiAgICAgICAgICAgICAgICBmb3VuZC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHNjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3RhdHVzJywgJ2xvYWRpbmcnKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMgIT09IG51bGwgJiYgYXR0cmlidXRlcyAhPT0gdm9pZCAwID8gYXR0cmlidXRlcyA6IHt9KTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBfYyA9IF9iW19pXSwgayA9IF9jWzBdLCB2ID0gX2NbMV07XG4gICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKGssIHYpO1xuICAgICAgICB9XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3RhdHVzJywgJ2xvYWRlZCcpO1xuICAgICAgICAgICAgcmVzb2x2ZShzY3JpcHQpO1xuICAgICAgICB9O1xuICAgICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG4gICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzdGF0dXMnLCAnZXJyb3InKTtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBcIi5jb25jYXQoc3JjKSkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmlyc3RFeGlzdGluZ1NjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHQnKTtcbiAgICAgICAgaWYgKCFmaXJzdEV4aXN0aW5nU2NyaXB0KSB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgKF9hID0gZmlyc3RFeGlzdGluZ1NjcmlwdC5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RFeGlzdGluZ1NjcmlwdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bmxvYWRTY3JpcHQoc3JjKSB7XG4gICAgdmFyIGZvdW5kID0gZmluZFNjcmlwdChzcmMpO1xuICAgIGlmIChmb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvdW5kLnJlbW92ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkLXNjcmlwdC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergedOptions: () => (/* binding */ mergedOptions)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\n/**\n * Merge legacy settings and initialized Integration option overrides.\n *\n * This will merge any options that were passed from initialization into\n * overrides for settings that are returned by the Segment CDN.\n *\n * i.e. this allows for passing options directly into destinations from\n * the Analytics constructor.\n */\nfunction mergedOptions(cdnSettings, options) {\n    var _a;\n    var optionOverrides = Object.entries((_a = options.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (overrides, _a) {\n        var _b, _c;\n        var integration = _a[0], options = _a[1];\n        if (typeof options === 'object') {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, overrides), (_b = {}, _b[integration] = options, _b));\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, overrides), (_c = {}, _c[integration] = {}, _c));\n    }, {});\n    return Object.entries(cdnSettings.integrations).reduce(function (integrationSettings, _a) {\n        var _b;\n        var integration = _a[0], settings = _a[1];\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, integrationSettings), (_b = {}, _b[integration] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, settings), optionOverrides[integration]), _b));\n    }, {});\n}\n//# sourceMappingURL=merged-options.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL21lcmdlZC1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx3R0FBd0c7QUFDeEc7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxzQkFBc0I7QUFDN0Q7QUFDQSxlQUFlLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxzQkFBc0Isc0JBQXNCO0FBQy9FLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLGdDQUFnQyxvQkFBb0IsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQzNHLEtBQUssSUFBSTtBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvbWVyZ2VkLW9wdGlvbnMuanM/NDA5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuLyoqXG4gKiBNZXJnZSBsZWdhY3kgc2V0dGluZ3MgYW5kIGluaXRpYWxpemVkIEludGVncmF0aW9uIG9wdGlvbiBvdmVycmlkZXMuXG4gKlxuICogVGhpcyB3aWxsIG1lcmdlIGFueSBvcHRpb25zIHRoYXQgd2VyZSBwYXNzZWQgZnJvbSBpbml0aWFsaXphdGlvbiBpbnRvXG4gKiBvdmVycmlkZXMgZm9yIHNldHRpbmdzIHRoYXQgYXJlIHJldHVybmVkIGJ5IHRoZSBTZWdtZW50IENETi5cbiAqXG4gKiBpLmUuIHRoaXMgYWxsb3dzIGZvciBwYXNzaW5nIG9wdGlvbnMgZGlyZWN0bHkgaW50byBkZXN0aW5hdGlvbnMgZnJvbVxuICogdGhlIEFuYWx5dGljcyBjb25zdHJ1Y3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlZE9wdGlvbnMoY2RuU2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIG9wdGlvbk92ZXJyaWRlcyA9IE9iamVjdC5lbnRyaWVzKChfYSA9IG9wdGlvbnMuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkucmVkdWNlKGZ1bmN0aW9uIChvdmVycmlkZXMsIF9hKSB7XG4gICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgIHZhciBpbnRlZ3JhdGlvbiA9IF9hWzBdLCBvcHRpb25zID0gX2FbMV07XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3ZlcnJpZGVzKSwgKF9iID0ge30sIF9iW2ludGVncmF0aW9uXSA9IG9wdGlvbnMsIF9iKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvdmVycmlkZXMpLCAoX2MgPSB7fSwgX2NbaW50ZWdyYXRpb25dID0ge30sIF9jKSk7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhjZG5TZXR0aW5ncy5pbnRlZ3JhdGlvbnMpLnJlZHVjZShmdW5jdGlvbiAoaW50ZWdyYXRpb25TZXR0aW5ncywgX2EpIHtcbiAgICAgICAgdmFyIF9iO1xuICAgICAgICB2YXIgaW50ZWdyYXRpb24gPSBfYVswXSwgc2V0dGluZ3MgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvblNldHRpbmdzKSwgKF9iID0ge30sIF9iW2ludGVncmF0aW9uXSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBzZXR0aW5ncyksIG9wdGlvbk92ZXJyaWRlc1tpbnRlZ3JhdGlvbl0pLCBfYikpO1xuICAgIH0sIHt9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlZC1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onPageChange: () => (/* binding */ onPageChange)\n/* harmony export */ });\n/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nvar onPageChange = function (cb) {\n    var unloaded = false; // prevents double firing if both are supported\n    window.addEventListener('pagehide', function () {\n        if (unloaded)\n            return;\n        unloaded = true;\n        cb(unloaded);\n    });\n    // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n    document.addEventListener('visibilitychange', function () {\n        if (document.visibilityState == 'hidden') {\n            if (unloaded)\n                return;\n            unloaded = true;\n        }\n        else {\n            unloaded = false;\n        }\n        cb(unloaded);\n    });\n};\n//# sourceMappingURL=on-page-change.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL29uLXBhZ2UtY2hhbmdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9vbi1wYWdlLWNoYW5nZS5qcz8yMzkxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXIgb24gZG9jdW1lbnQgdGhhdCBmaXJlcyB3aGVuOlxuICogKiB0YWIgY2hhbmdlIG9yIHRhYiBjbG9zZSAoaW4gbW9iaWxlIG9yIGRlc2t0b3ApXG4gKiAqIGNsaWNrIGJhY2sgLyBmb3J3YXJkIGJ1dHRvblxuICogKiBjbGljayBhbnkgbGluayBvciBwZXJmb3JtIGFueSBvdGhlciBuYXZpZ2F0aW9uIGFjdGlvblxuICogKiBzb2Z0IHJlZnJlc2ggLyBoYXJkIHJlZnJlc2hcbiAqXG4gKiBhZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzIzOTgzNC93aW5kb3ctb25iZWZvcmV1bmxvYWQtbm90LXdvcmtpbmctb24tdGhlLWlwYWQvNTI4NjQ1MDgjNTI4NjQ1MDgsXG4gKi9cbmV4cG9ydCB2YXIgb25QYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgdmFyIHVubG9hZGVkID0gZmFsc2U7IC8vIHByZXZlbnRzIGRvdWJsZSBmaXJpbmcgaWYgYm90aCBhcmUgc3VwcG9ydGVkXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodW5sb2FkZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgY2IodW5sb2FkZWQpO1xuICAgIH0pO1xuICAgIC8vIHVzaW5nIGRvY3VtZW50IGluc3RlYWQgb2Ygd2luZG93IGJlY2F1c2Ugb2YgYnVnIGFmZmVjdGluZyBicm93c2VycyBiZWZvcmUgc2FmYXJpIDE0IChkZXRhaWwgaW4gZm9vdG5vdGVzIGh0dHBzOi8vY2FuaXVzZS5jb20vP3NlYXJjaD12aXNpYmlsaXR5Y2hhbmdlKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgIGlmICh1bmxvYWRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB1bmxvYWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1bmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNiKHVubG9hZGVkKTtcbiAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vbi1wYWdlLWNoYW5nZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pWhile: () => (/* binding */ pWhile)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar pWhile = function (condition, action) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var loop;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n        loop = function (actionResult) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!condition(actionResult)) return [3 /*break*/, 2];\n                        _a = loop;\n                        return [4 /*yield*/, action()];\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); };\n        return [2 /*return*/, loop(undefined)];\n    });\n}); };\n//# sourceMappingURL=p-while.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3Atd2hpbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDeEMsNENBQTRDLE9BQU8sZ0RBQVM7QUFDbkU7QUFDQSxXQUFXLGtEQUFXO0FBQ3RCLHlDQUF5QyxPQUFPLGdEQUFTO0FBQ3pEO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wLXdoaWxlLmpzPzFhZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IHZhciBwV2hpbGUgPSBmdW5jdGlvbiAoY29uZGl0aW9uLCBhY3Rpb24pIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxvb3A7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBsb29wID0gZnVuY3Rpb24gKGFjdGlvblJlc3VsdCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZGl0aW9uKGFjdGlvblJlc3VsdCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBsb29wO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYWN0aW9uKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5hcHBseSh2b2lkIDAsIFtfYi5zZW50KCldKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGxvb3AodW5kZWZpbmVkKV07XG4gICAgfSk7XG59KTsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXAtd2hpbGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCDN: () => (/* binding */ getCDN),\n/* harmony export */   getLegacyAJSPath: () => (/* binding */ getLegacyAJSPath),\n/* harmony export */   getNextIntegrationsURL: () => (/* binding */ getNextIntegrationsURL),\n/* harmony export */   setGlobalCDNUrl: () => (/* binding */ setGlobalCDNUrl)\n/* harmony export */ });\n/* harmony import */ var _global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./global-analytics-helper */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _embedded_write_key__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embedded-write-key */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js\");\n\n\nvar analyticsScriptRegex = /(https:\\/\\/.*)\\/analytics\\.js\\/v1\\/(?:.*?)\\/(?:platform|analytics.*)?/;\nvar getCDNUrlFromScriptTag = function () {\n    var cdn;\n    var scripts = Array.prototype.slice.call(document.querySelectorAll('script'));\n    scripts.forEach(function (s) {\n        var _a;\n        var src = (_a = s.getAttribute('src')) !== null && _a !== void 0 ? _a : '';\n        var result = analyticsScriptRegex.exec(src);\n        if (result && result[1]) {\n            cdn = result[1];\n        }\n    });\n    return cdn;\n};\nvar _globalCDN; // set globalCDN as in-memory singleton\nvar getGlobalCDNUrl = function () {\n    var _a;\n    var result = _globalCDN !== null && _globalCDN !== void 0 ? _globalCDN : (_a = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)()) === null || _a === void 0 ? void 0 : _a._cdn;\n    return result;\n};\nvar setGlobalCDNUrl = function (cdn) {\n    var globalAnalytics = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)();\n    if (globalAnalytics) {\n        globalAnalytics._cdn = cdn;\n    }\n    _globalCDN = cdn;\n};\nvar getCDN = function () {\n    var globalCdnUrl = getGlobalCDNUrl();\n    if (globalCdnUrl)\n        return globalCdnUrl;\n    var cdnFromScriptTag = getCDNUrlFromScriptTag();\n    if (cdnFromScriptTag) {\n        return cdnFromScriptTag;\n    }\n    else {\n        // it's possible that the CDN is not found in the page because:\n        // - the script is loaded through a proxy\n        // - the script is removed after execution\n        // in this case, we fall back to the default Segment CDN\n        return \"https://cdn.segment.com\";\n    }\n};\nvar getNextIntegrationsURL = function () {\n    var cdn = getCDN();\n    return \"\".concat(cdn, \"/next-integrations\");\n};\n/**\n * Replaces the CDN URL in the script tag with the one from Analytics.js 1.0\n *\n * @returns the path to Analytics JS 1.0\n **/\nfunction getLegacyAJSPath() {\n    var _a, _b, _c;\n    var writeKey = (_a = (0,_embedded_write_key__WEBPACK_IMPORTED_MODULE_1__.embeddedWriteKey)()) !== null && _a !== void 0 ? _a : (_b = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)()) === null || _b === void 0 ? void 0 : _b._writeKey;\n    var scripts = Array.prototype.slice.call(document.querySelectorAll('script'));\n    var path = undefined;\n    for (var _i = 0, scripts_1 = scripts; _i < scripts_1.length; _i++) {\n        var s = scripts_1[_i];\n        var src = (_c = s.getAttribute('src')) !== null && _c !== void 0 ? _c : '';\n        var result = analyticsScriptRegex.exec(src);\n        if (result && result[1]) {\n            path = src;\n            break;\n        }\n    }\n    if (path) {\n        return path.replace('analytics.min.js', 'analytics.classic.js');\n    }\n    return \"https://cdn.segment.com/analytics.js/v1/\".concat(writeKey, \"/analytics.classic.js\");\n}\n//# sourceMappingURL=parse-cdn.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3BhcnNlLWNkbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0Q7QUFDUDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLG1GQUFtRiw0RUFBa0I7QUFDckc7QUFDQTtBQUNPO0FBQ1AsMEJBQTBCLDRFQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EseUJBQXlCLHFFQUFnQiwyQ0FBMkMsNEVBQWtCO0FBQ3RHO0FBQ0E7QUFDQSwwQ0FBMEMsdUJBQXVCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvcGFyc2UtY2RuLmpzPzFhYmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0R2xvYmFsQW5hbHl0aWNzIH0gZnJvbSAnLi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5pbXBvcnQgeyBlbWJlZGRlZFdyaXRlS2V5IH0gZnJvbSAnLi9lbWJlZGRlZC13cml0ZS1rZXknO1xudmFyIGFuYWx5dGljc1NjcmlwdFJlZ2V4ID0gLyhodHRwczpcXC9cXC8uKilcXC9hbmFseXRpY3NcXC5qc1xcL3YxXFwvKD86Lio/KVxcLyg/OnBsYXRmb3JtfGFuYWx5dGljcy4qKT8vO1xudmFyIGdldENETlVybEZyb21TY3JpcHRUYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNkbjtcbiAgICB2YXIgc2NyaXB0cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKTtcbiAgICBzY3JpcHRzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgc3JjID0gKF9hID0gcy5nZXRBdHRyaWJ1dGUoJ3NyYycpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJztcbiAgICAgICAgdmFyIHJlc3VsdCA9IGFuYWx5dGljc1NjcmlwdFJlZ2V4LmV4ZWMoc3JjKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHRbMV0pIHtcbiAgICAgICAgICAgIGNkbiA9IHJlc3VsdFsxXTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjZG47XG59O1xudmFyIF9nbG9iYWxDRE47IC8vIHNldCBnbG9iYWxDRE4gYXMgaW4tbWVtb3J5IHNpbmdsZXRvblxudmFyIGdldEdsb2JhbENETlVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHJlc3VsdCA9IF9nbG9iYWxDRE4gIT09IG51bGwgJiYgX2dsb2JhbENETiAhPT0gdm9pZCAwID8gX2dsb2JhbENETiA6IChfYSA9IGdldEdsb2JhbEFuYWx5dGljcygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2NkbjtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbmV4cG9ydCB2YXIgc2V0R2xvYmFsQ0ROVXJsID0gZnVuY3Rpb24gKGNkbikge1xuICAgIHZhciBnbG9iYWxBbmFseXRpY3MgPSBnZXRHbG9iYWxBbmFseXRpY3MoKTtcbiAgICBpZiAoZ2xvYmFsQW5hbHl0aWNzKSB7XG4gICAgICAgIGdsb2JhbEFuYWx5dGljcy5fY2RuID0gY2RuO1xuICAgIH1cbiAgICBfZ2xvYmFsQ0ROID0gY2RuO1xufTtcbmV4cG9ydCB2YXIgZ2V0Q0ROID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBnbG9iYWxDZG5VcmwgPSBnZXRHbG9iYWxDRE5VcmwoKTtcbiAgICBpZiAoZ2xvYmFsQ2RuVXJsKVxuICAgICAgICByZXR1cm4gZ2xvYmFsQ2RuVXJsO1xuICAgIHZhciBjZG5Gcm9tU2NyaXB0VGFnID0gZ2V0Q0ROVXJsRnJvbVNjcmlwdFRhZygpO1xuICAgIGlmIChjZG5Gcm9tU2NyaXB0VGFnKSB7XG4gICAgICAgIHJldHVybiBjZG5Gcm9tU2NyaXB0VGFnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBDRE4gaXMgbm90IGZvdW5kIGluIHRoZSBwYWdlIGJlY2F1c2U6XG4gICAgICAgIC8vIC0gdGhlIHNjcmlwdCBpcyBsb2FkZWQgdGhyb3VnaCBhIHByb3h5XG4gICAgICAgIC8vIC0gdGhlIHNjcmlwdCBpcyByZW1vdmVkIGFmdGVyIGV4ZWN1dGlvblxuICAgICAgICAvLyBpbiB0aGlzIGNhc2UsIHdlIGZhbGwgYmFjayB0byB0aGUgZGVmYXVsdCBTZWdtZW50IENETlxuICAgICAgICByZXR1cm4gXCJodHRwczovL2Nkbi5zZWdtZW50LmNvbVwiO1xuICAgIH1cbn07XG5leHBvcnQgdmFyIGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNkbiA9IGdldENETigpO1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChjZG4sIFwiL25leHQtaW50ZWdyYXRpb25zXCIpO1xufTtcbi8qKlxuICogUmVwbGFjZXMgdGhlIENETiBVUkwgaW4gdGhlIHNjcmlwdCB0YWcgd2l0aCB0aGUgb25lIGZyb20gQW5hbHl0aWNzLmpzIDEuMFxuICpcbiAqIEByZXR1cm5zIHRoZSBwYXRoIHRvIEFuYWx5dGljcyBKUyAxLjBcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZWdhY3lBSlNQYXRoKCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIHZhciB3cml0ZUtleSA9IChfYSA9IGVtYmVkZGVkV3JpdGVLZXkoKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iID0gZ2V0R2xvYmFsQW5hbHl0aWNzKCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5fd3JpdGVLZXk7XG4gICAgdmFyIHNjcmlwdHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKSk7XG4gICAgdmFyIHBhdGggPSB1bmRlZmluZWQ7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBzY3JpcHRzXzEgPSBzY3JpcHRzOyBfaSA8IHNjcmlwdHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIHMgPSBzY3JpcHRzXzFbX2ldO1xuICAgICAgICB2YXIgc3JjID0gKF9jID0gcy5nZXRBdHRyaWJ1dGUoJ3NyYycpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJztcbiAgICAgICAgdmFyIHJlc3VsdCA9IGFuYWx5dGljc1NjcmlwdFJlZ2V4LmV4ZWMoc3JjKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHRbMV0pIHtcbiAgICAgICAgICAgIHBhdGggPSBzcmM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKCdhbmFseXRpY3MubWluLmpzJywgJ2FuYWx5dGljcy5jbGFzc2ljLmpzJyk7XG4gICAgfVxuICAgIHJldHVybiBcImh0dHBzOi8vY2RuLnNlZ21lbnQuY29tL2FuYWx5dGljcy5qcy92MS9cIi5jb25jYXQod3JpdGVLZXksIFwiL2FuYWx5dGljcy5jbGFzc2ljLmpzXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2UtY2RuLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pick: () => (/* binding */ pick)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nfunction pick(object, keys) {\n    return Object.assign.apply(Object, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([{}], keys.map(function (key) {\n        var _a;\n        if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n            return _a = {}, _a[key] = object[key], _a;\n        }\n    }), false));\n}\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3BpY2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDdEM7QUFDQTtBQUNBLFVBQVUsMEJBQTBCO0FBQ3BDLFFBQVE7QUFDUjtBQUNPO0FBQ1AsdUNBQXVDLG9EQUFhLElBQUk7QUFDeEQ7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3BpY2suanM/NWI0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG4vKipcbiAqIEBleGFtcGxlXG4gKiBwaWNrKHsgJ2EnOiAxLCAnYic6ICcyJywgJ2MnOiAzIH0sIFsnYScsICdjJ10pXG4gKiA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpY2sob2JqZWN0LCBrZXlzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBfX3NwcmVhZEFycmF5KFt7fV0sIGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfYSA9IHt9LCBfYVtrZXldID0gb2JqZWN0W2tleV0sIF9hO1xuICAgICAgICB9XG4gICAgfSksIGZhbHNlKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waWNrLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/pick.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PersistedPriorityQueue: () => (/* binding */ PersistedPriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/environment */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n\n\n\n\nvar loc = {\n    getItem: function () { },\n    setItem: function () { },\n    removeItem: function () { },\n};\ntry {\n    loc = (0,_core_environment__WEBPACK_IMPORTED_MODULE_0__.isBrowser)() && window.localStorage ? window.localStorage : loc;\n}\ncatch (err) {\n    console.warn('Unable to access localStorage', err);\n}\nfunction persisted(key) {\n    var items = loc.getItem(key);\n    return (items ? JSON.parse(items) : []).map(function (p) { return new _core_context__WEBPACK_IMPORTED_MODULE_1__.Context(p.event, p.id); });\n}\nfunction persistItems(key, items) {\n    var existing = persisted(key);\n    var all = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], items, true), existing, true);\n    var merged = all.reduce(function (acc, item) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, acc), (_a = {}, _a[item.id] = item, _a));\n    }, {});\n    loc.setItem(key, JSON.stringify(Object.values(merged)));\n}\nfunction seen(key) {\n    var stored = loc.getItem(key);\n    return stored ? JSON.parse(stored) : {};\n}\nfunction persistSeen(key, memory) {\n    var stored = seen(key);\n    loc.setItem(key, JSON.stringify((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, stored), memory)));\n}\nfunction remove(key) {\n    loc.removeItem(key);\n}\nvar now = function () { return new Date().getTime(); };\nfunction mutex(key, onUnlock, attempt) {\n    if (attempt === void 0) { attempt = 0; }\n    var lockTimeout = 50;\n    var lockKey = \"persisted-queue:v1:\".concat(key, \":lock\");\n    var expired = function (lock) { return new Date().getTime() > lock; };\n    var rawLock = loc.getItem(lockKey);\n    var lock = rawLock ? JSON.parse(rawLock) : null;\n    var allowed = lock === null || expired(lock);\n    if (allowed) {\n        loc.setItem(lockKey, JSON.stringify(now() + lockTimeout));\n        onUnlock();\n        loc.removeItem(lockKey);\n        return;\n    }\n    if (!allowed && attempt < 3) {\n        setTimeout(function () {\n            mutex(key, onUnlock, attempt + 1);\n        }, lockTimeout);\n    }\n    else {\n        console.error('Unable to retrieve lock');\n    }\n}\nvar PersistedPriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__extends)(PersistedPriorityQueue, _super);\n    function PersistedPriorityQueue(maxAttempts, key) {\n        var _this = _super.call(this, maxAttempts, []) || this;\n        var itemsKey = \"persisted-queue:v1:\".concat(key, \":items\");\n        var seenKey = \"persisted-queue:v1:\".concat(key, \":seen\");\n        var saved = [];\n        var lastSeen = {};\n        mutex(key, function () {\n            try {\n                saved = persisted(itemsKey);\n                lastSeen = seen(seenKey);\n                remove(itemsKey);\n                remove(seenKey);\n                _this.queue = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], saved, true), _this.queue, true);\n                _this.seen = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, lastSeen), _this.seen);\n            }\n            catch (err) {\n                console.error(err);\n            }\n        });\n        window.addEventListener('pagehide', function () {\n            // we deliberately want to use the less powerful 'pagehide' API to only persist on events where the analytics instance gets destroyed, and not on tab away.\n            if (_this.todo > 0) {\n                var items_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], _this.queue, true), _this.future, true);\n                try {\n                    mutex(key, function () {\n                        persistItems(itemsKey, items_1);\n                        persistSeen(seenKey, _this.seen);\n                    });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        });\n        return _this;\n    }\n    return PersistedPriorityQueue;\n}(___WEBPACK_IMPORTED_MODULE_3__.PriorityQueue));\n\n//# sourceMappingURL=persisted.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyRDtBQUN6QjtBQUNXO0FBQ007QUFDbkQ7QUFDQSw0QkFBNEI7QUFDNUIsNEJBQTRCO0FBQzVCLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0EsVUFBVSw0REFBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsV0FBVyxrREFBTyxrQkFBa0I7QUFDbkc7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvREFBYSxDQUFDLG9EQUFhO0FBQ3pDO0FBQ0E7QUFDQSxlQUFlLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxnQkFBZ0I7QUFDbkQsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBYSxDQUFDLG9EQUFhO0FBQ3pELDZCQUE2QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG9EQUFhLENBQUMsb0RBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxDQUFDLENBQUMsNENBQWE7QUFDbUI7QUFDbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkLmpzP2Y0MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fZXh0ZW5kcywgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4nO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uLy4uL2NvcmUvY29udGV4dCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tICcuLi8uLi9jb3JlL2Vudmlyb25tZW50JztcbnZhciBsb2MgPSB7XG4gICAgZ2V0SXRlbTogZnVuY3Rpb24gKCkgeyB9LFxuICAgIHNldEl0ZW06IGZ1bmN0aW9uICgpIHsgfSxcbiAgICByZW1vdmVJdGVtOiBmdW5jdGlvbiAoKSB7IH0sXG59O1xudHJ5IHtcbiAgICBsb2MgPSBpc0Jyb3dzZXIoKSAmJiB3aW5kb3cubG9jYWxTdG9yYWdlID8gd2luZG93LmxvY2FsU3RvcmFnZSA6IGxvYztcbn1cbmNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBhY2Nlc3MgbG9jYWxTdG9yYWdlJywgZXJyKTtcbn1cbmZ1bmN0aW9uIHBlcnNpc3RlZChrZXkpIHtcbiAgICB2YXIgaXRlbXMgPSBsb2MuZ2V0SXRlbShrZXkpO1xuICAgIHJldHVybiAoaXRlbXMgPyBKU09OLnBhcnNlKGl0ZW1zKSA6IFtdKS5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIG5ldyBDb250ZXh0KHAuZXZlbnQsIHAuaWQpOyB9KTtcbn1cbmZ1bmN0aW9uIHBlcnNpc3RJdGVtcyhrZXksIGl0ZW1zKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gcGVyc2lzdGVkKGtleSk7XG4gICAgdmFyIGFsbCA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgaXRlbXMsIHRydWUpLCBleGlzdGluZywgdHJ1ZSk7XG4gICAgdmFyIG1lcmdlZCA9IGFsbC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaXRlbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYWNjKSwgKF9hID0ge30sIF9hW2l0ZW0uaWRdID0gaXRlbSwgX2EpKTtcbiAgICB9LCB7fSk7XG4gICAgbG9jLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShPYmplY3QudmFsdWVzKG1lcmdlZCkpKTtcbn1cbmZ1bmN0aW9uIHNlZW4oa2V5KSB7XG4gICAgdmFyIHN0b3JlZCA9IGxvYy5nZXRJdGVtKGtleSk7XG4gICAgcmV0dXJuIHN0b3JlZCA/IEpTT04ucGFyc2Uoc3RvcmVkKSA6IHt9O1xufVxuZnVuY3Rpb24gcGVyc2lzdFNlZW4oa2V5LCBtZW1vcnkpIHtcbiAgICB2YXIgc3RvcmVkID0gc2VlbihrZXkpO1xuICAgIGxvYy5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoX19hc3NpZ24oX19hc3NpZ24oe30sIHN0b3JlZCksIG1lbW9yeSkpKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICBsb2MucmVtb3ZlSXRlbShrZXkpO1xufVxudmFyIG5vdyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyB9O1xuZnVuY3Rpb24gbXV0ZXgoa2V5LCBvblVubG9jaywgYXR0ZW1wdCkge1xuICAgIGlmIChhdHRlbXB0ID09PSB2b2lkIDApIHsgYXR0ZW1wdCA9IDA7IH1cbiAgICB2YXIgbG9ja1RpbWVvdXQgPSA1MDtcbiAgICB2YXIgbG9ja0tleSA9IFwicGVyc2lzdGVkLXF1ZXVlOnYxOlwiLmNvbmNhdChrZXksIFwiOmxvY2tcIik7XG4gICAgdmFyIGV4cGlyZWQgPSBmdW5jdGlvbiAobG9jaykgeyByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPiBsb2NrOyB9O1xuICAgIHZhciByYXdMb2NrID0gbG9jLmdldEl0ZW0obG9ja0tleSk7XG4gICAgdmFyIGxvY2sgPSByYXdMb2NrID8gSlNPTi5wYXJzZShyYXdMb2NrKSA6IG51bGw7XG4gICAgdmFyIGFsbG93ZWQgPSBsb2NrID09PSBudWxsIHx8IGV4cGlyZWQobG9jayk7XG4gICAgaWYgKGFsbG93ZWQpIHtcbiAgICAgICAgbG9jLnNldEl0ZW0obG9ja0tleSwgSlNPTi5zdHJpbmdpZnkobm93KCkgKyBsb2NrVGltZW91dCkpO1xuICAgICAgICBvblVubG9jaygpO1xuICAgICAgICBsb2MucmVtb3ZlSXRlbShsb2NrS2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWFsbG93ZWQgJiYgYXR0ZW1wdCA8IDMpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtdXRleChrZXksIG9uVW5sb2NrLCBhdHRlbXB0ICsgMSk7XG4gICAgICAgIH0sIGxvY2tUaW1lb3V0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byByZXRyaWV2ZSBsb2NrJyk7XG4gICAgfVxufVxudmFyIFBlcnNpc3RlZFByaW9yaXR5UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBlcnNpc3RlZFByaW9yaXR5UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZShtYXhBdHRlbXB0cywga2V5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1heEF0dGVtcHRzLCBbXSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGl0ZW1zS2V5ID0gXCJwZXJzaXN0ZWQtcXVldWU6djE6XCIuY29uY2F0KGtleSwgXCI6aXRlbXNcIik7XG4gICAgICAgIHZhciBzZWVuS2V5ID0gXCJwZXJzaXN0ZWQtcXVldWU6djE6XCIuY29uY2F0KGtleSwgXCI6c2VlblwiKTtcbiAgICAgICAgdmFyIHNhdmVkID0gW107XG4gICAgICAgIHZhciBsYXN0U2VlbiA9IHt9O1xuICAgICAgICBtdXRleChrZXksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2F2ZWQgPSBwZXJzaXN0ZWQoaXRlbXNLZXkpO1xuICAgICAgICAgICAgICAgIGxhc3RTZWVuID0gc2VlbihzZWVuS2V5KTtcbiAgICAgICAgICAgICAgICByZW1vdmUoaXRlbXNLZXkpO1xuICAgICAgICAgICAgICAgIHJlbW92ZShzZWVuS2V5KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZSA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgc2F2ZWQsIHRydWUpLCBfdGhpcy5xdWV1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VlbiA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBsYXN0U2VlbiksIF90aGlzLnNlZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlaGlkZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHdlIGRlbGliZXJhdGVseSB3YW50IHRvIHVzZSB0aGUgbGVzcyBwb3dlcmZ1bCAncGFnZWhpZGUnIEFQSSB0byBvbmx5IHBlcnNpc3Qgb24gZXZlbnRzIHdoZXJlIHRoZSBhbmFseXRpY3MgaW5zdGFuY2UgZ2V0cyBkZXN0cm95ZWQsIGFuZCBub3Qgb24gdGFiIGF3YXkuXG4gICAgICAgICAgICBpZiAoX3RoaXMudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXNfMSA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX3RoaXMucXVldWUsIHRydWUpLCBfdGhpcy5mdXR1cmUsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG11dGV4KGtleSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdEl0ZW1zKGl0ZW1zS2V5LCBpdGVtc18xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RTZWVuKHNlZW5LZXksIF90aGlzLnNlZW4pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuZXhwb3J0IHsgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGVyc2lzdGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toFacade: () => (/* binding */ toFacade)\n/* harmony export */ });\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(rsc)/./node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction toFacade(evt, options) {\n    var fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Facade(evt, options);\n    if (evt.type === 'track') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track(evt, options);\n    }\n    if (evt.type === 'identify') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify(evt, options);\n    }\n    if (evt.type === 'page') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page(evt, options);\n    }\n    if (evt.type === 'alias') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias(evt, options);\n    }\n    if (evt.type === 'group') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group(evt, options);\n    }\n    if (evt.type === 'screen') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Screen(evt, options);\n    }\n    Object.defineProperty(fcd, 'obj', {\n        value: evt,\n        writable: true,\n    });\n    return fcd;\n}\n//# sourceMappingURL=to-facade.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3RvLWZhY2FkZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUY7QUFDaEY7QUFDUCxrQkFBa0IsbURBQU07QUFDeEI7QUFDQSxrQkFBa0Isa0RBQUs7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixxREFBUTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFJO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQUs7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixrREFBSztBQUN2QjtBQUNBO0FBQ0Esa0JBQWtCLG1EQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi90by1mYWNhZGUuanM/M2U1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbGlhcywgRmFjYWRlLCBHcm91cCwgSWRlbnRpZnksIFBhZ2UsIFNjcmVlbiwgVHJhY2ssIH0gZnJvbSAnQHNlZ21lbnQvZmFjYWRlJztcbmV4cG9ydCBmdW5jdGlvbiB0b0ZhY2FkZShldnQsIG9wdGlvbnMpIHtcbiAgICB2YXIgZmNkID0gbmV3IEZhY2FkZShldnQsIG9wdGlvbnMpO1xuICAgIGlmIChldnQudHlwZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICBmY2QgPSBuZXcgVHJhY2soZXZ0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKGV2dC50eXBlID09PSAnaWRlbnRpZnknKSB7XG4gICAgICAgIGZjZCA9IG5ldyBJZGVudGlmeShldnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdwYWdlJykge1xuICAgICAgICBmY2QgPSBuZXcgUGFnZShldnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdhbGlhcycpIHtcbiAgICAgICAgZmNkID0gbmV3IEFsaWFzKGV2dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChldnQudHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBmY2QgPSBuZXcgR3JvdXAoZXZ0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKGV2dC50eXBlID09PSAnc2NyZWVuJykge1xuICAgICAgICBmY2QgPSBuZXcgU2NyZWVuKGV2dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmY2QsICdvYmonLCB7XG4gICAgICAgIHZhbHVlOiBldnQsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIH0pO1xuICAgIHJldHVybiBmY2Q7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10by1mYWNhZGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVersionType: () => (/* binding */ getVersionType),\n/* harmony export */   setVersionType: () => (/* binding */ setVersionType)\n/* harmony export */ });\n// Default value will be updated to 'web' in `bundle-umd.ts` for web build.\nvar _version = 'npm';\nfunction setVersionType(version) {\n    _version = version;\n}\nfunction getVersionType() {\n    return _version;\n}\n//# sourceMappingURL=version-type.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3ZlcnNpb24tdHlwZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi92ZXJzaW9uLXR5cGUuanM/NmMwZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXBkYXRlZCB0byAnd2ViJyBpbiBgYnVuZGxlLXVtZC50c2AgZm9yIHdlYiBidWlsZC5cbnZhciBfdmVyc2lvbiA9ICducG0nO1xuZXhwb3J0IGZ1bmN0aW9uIHNldFZlcnNpb25UeXBlKHZlcnNpb24pIHtcbiAgICBfdmVyc2lvbiA9IHZlcnNpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVyc2lvblR5cGUoKSB7XG4gICAgcmV0dXJuIF92ZXJzaW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi10eXBlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LegacyDestination: () => (/* binding */ LegacyDestination),\n/* harmony export */   ajsDestinations: () => (/* binding */ ajsDestinations)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(rsc)/./node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/connection */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../core/environment */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../lib/merged-options */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/p-while */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../middleware */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loader */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_3__.pWhile)(function () { return queue.length > 0 && (0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOnline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_5__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nvar LegacyDestination = /** @class */ (function () {\n    function LegacyDestination(name, version, writeKey, settings, options, integrationSource) {\n        if (settings === void 0) { settings = {}; }\n        var _this = this;\n        this.options = {};\n        this.type = 'destination';\n        this.middleware = [];\n        this.initializePromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.createDeferred)();\n        this.flushing = false;\n        this.name = name;\n        this.version = version;\n        this.settings = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, settings);\n        this.disableAutoISOConversion = options.disableAutoISOConversion || false;\n        this.integrationSource = integrationSource;\n        // AJS-Renderer sets an extraneous `type` setting that clobbers\n        // existing type defaults. We need to remove it if it's present\n        if (this.settings['type'] && this.settings['type'] === 'browser') {\n            delete this.settings['type'];\n        }\n        this.initializePromise.promise.then(function (isInitialized) { return (_this._initialized = isInitialized); }, function () { });\n        this.options = options;\n        this.buffer = options.disableClientPersistence\n            ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__.PriorityQueue(4, [])\n            : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__.PersistedPriorityQueue(4, \"\".concat(writeKey, \":dest-\").concat(name));\n        this.scheduleFlush();\n    }\n    LegacyDestination.prototype.isLoaded = function () {\n        return !!this._ready;\n    };\n    LegacyDestination.prototype.ready = function () {\n        var _this = this;\n        return this.initializePromise.promise.then(function () { var _a; return (_a = _this.onReady) !== null && _a !== void 0 ? _a : Promise.resolve(); });\n    };\n    LegacyDestination.prototype.load = function (ctx, analyticsInstance) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var integrationSource, _b;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this._ready || this.onReady !== undefined) {\n                            return [2 /*return*/];\n                        }\n                        if (!((_a = this.integrationSource) !== null && _a !== void 0)) return [3 /*break*/, 1];\n                        _b = _a;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, (0,_loader__WEBPACK_IMPORTED_MODULE_9__.loadIntegration)(ctx, this.name, this.version, this.options.obfuscate)];\n                    case 2:\n                        _b = (_c.sent());\n                        _c.label = 3;\n                    case 3:\n                        integrationSource = _b;\n                        this.integration = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.buildIntegration)(integrationSource, this.settings, analyticsInstance);\n                        this.onReady = new Promise(function (resolve) {\n                            var onReadyFn = function () {\n                                _this._ready = true;\n                                resolve(true);\n                            };\n                            _this.integration.once('ready', onReadyFn);\n                        });\n                        this.integration.on('initialize', function () {\n                            _this.initializePromise.resolve(true);\n                        });\n                        try {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                            });\n                            this.integration.initialize();\n                        }\n                        catch (error) {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                                didError: true,\n                            });\n                            this.initializePromise.resolve(false);\n                            throw error;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.unload = function (_ctx, _analyticsInstance) {\n        return (0,_loader__WEBPACK_IMPORTED_MODULE_9__.unloadIntegration)(this.name, this.version, this.options.obfuscate);\n    };\n    LegacyDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        this.middleware = (_a = this.middleware).concat.apply(_a, fn);\n    };\n    LegacyDestination.prototype.shouldBuffer = function (ctx) {\n        return (\n        // page events can't be buffered because of destinations that automatically add page views\n        ctx.event.type !== 'page' &&\n            ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready !== true || this._initialized !== true));\n    };\n    LegacyDestination.prototype.send = function (ctx, clz, eventType) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var plan, ev, planEvent, afterMiddleware, event, err_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.shouldBuffer(ctx)) {\n                            this.buffer.push(ctx);\n                            this.scheduleFlush();\n                            return [2 /*return*/, ctx];\n                        }\n                        plan = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.plan) === null || _b === void 0 ? void 0 : _b.track;\n                        ev = ctx.event.event;\n                        if (plan && ev && this.name !== 'Segment.io') {\n                            planEvent = plan[ev];\n                            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__.isPlanEventEnabled)(plan, planEvent)) {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                            }\n                            else {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations));\n                            }\n                            if ((planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) && (planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations[this.name]) === false) {\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                            }\n                        }\n                        return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_13__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        afterMiddleware = _c.sent();\n                        if (afterMiddleware === null) {\n                            return [2 /*return*/, ctx];\n                        }\n                        event = new clz(afterMiddleware, {\n                            traverse: !this.disableAutoISOConversion,\n                        });\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                        });\n                        _c.label = 2;\n                    case 2:\n                        _c.trys.push([2, 5, , 6]);\n                        if (!this.integration) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.integration.invoke.call(this.integration, eventType, event)];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                            didError: true,\n                        });\n                        throw err_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.track = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track, 'track')];\n            });\n        });\n    };\n    LegacyDestination.prototype.page = function (ctx) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (((_a = this.integration) === null || _a === void 0 ? void 0 : _a._assumesPageview) && !this._initialized) {\n                            this.integration.initialize();\n                        }\n                        return [4 /*yield*/, this.initializePromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page, 'page')];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.identify = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify, 'identify')];\n            });\n        });\n    };\n    LegacyDestination.prototype.alias = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias, 'alias')];\n            });\n        });\n    };\n    LegacyDestination.prototype.group = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group, 'group')];\n            });\n        });\n    };\n    LegacyDestination.prototype.scheduleFlush = function () {\n        var _this = this;\n        if (this.flushing) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready !== true || this._initialized !== true) {\n                            this.scheduleFlush();\n                            return [2 /*return*/];\n                        }\n                        this.flushing = true;\n                        _a = this;\n                        return [4 /*yield*/, flushQueue(this, this.buffer)];\n                    case 1:\n                        _a.buffer = _b.sent();\n                        this.flushing = false;\n                        if (this.buffer.todo > 0) {\n                            this.scheduleFlush();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); }, Math.random() * 5000);\n    };\n    return LegacyDestination;\n}());\n\nfunction ajsDestinations(writeKey, settings, globalIntegrations, options, routingMiddleware, legacyIntegrationSources) {\n    var _a, _b;\n    if (globalIntegrations === void 0) { globalIntegrations = {}; }\n    if (options === void 0) { options = {}; }\n    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_14__.isServer)()) {\n        return [];\n    }\n    if (settings.plan) {\n        options = options !== null && options !== void 0 ? options : {};\n        options.plan = settings.plan;\n    }\n    var routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n    var remoteIntegrationsConfig = settings.integrations;\n    var localIntegrationsConfig = options.integrations;\n    // merged remote CDN settings with user provided options\n    var integrationOptions = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_15__.mergedOptions)(settings, options !== null && options !== void 0 ? options : {});\n    var adhocIntegrationSources = legacyIntegrationSources === null || legacyIntegrationSources === void 0 ? void 0 : legacyIntegrationSources.reduce(function (acc, integrationSource) {\n        var _a;\n        return ((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, acc), (_a = {}, _a[(0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveIntegrationNameFromSource)(integrationSource)] = integrationSource, _a)));\n    }, {});\n    var installableIntegrations = new Set((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)([], Object.keys(remoteIntegrationsConfig).filter(function (name) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_16__.isInstallableIntegration)(name, remoteIntegrationsConfig[name]);\n    }), true), Object.keys(adhocIntegrationSources || {}).filter(function (name) {\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(remoteIntegrationsConfig[name]) ||\n            (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(localIntegrationsConfig === null || localIntegrationsConfig === void 0 ? void 0 : localIntegrationsConfig[name]);\n    }), true));\n    return Array.from(installableIntegrations)\n        .filter(function (name) { return !(0,_utils__WEBPACK_IMPORTED_MODULE_16__.isDisabledIntegration)(name, globalIntegrations); })\n        .map(function (name) {\n        var integrationSettings = remoteIntegrationsConfig[name];\n        var version = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveVersion)(integrationSettings);\n        var destination = new LegacyDestination(name, version, writeKey, integrationOptions[name], options, adhocIntegrationSources === null || adhocIntegrationSources === void 0 ? void 0 : adhocIntegrationSources[name]);\n        var routing = routingRules.filter(function (rule) { return rule.destinationName === name; });\n        if (routing.length > 0 && routingMiddleware) {\n            destination.addMiddleware(routingMiddleware);\n        }\n        return destination;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ0Y7QUFDVjtBQUNLO0FBQ2Y7QUFDQTtBQUNtQjtBQUNaO0FBQ2Q7QUFDYztBQUNtQjtBQUNoQjtBQUN1RTtBQUMzRTtBQUM0QztBQUMxQjtBQUNSO0FBQ2xFO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkRBQVM7QUFDakM7QUFDQTtBQUNBLHlDQUF5QyxvREFBTSxlQUFlLDJCQUEyQiwwREFBUSxLQUFLLGdCQUFnQixPQUFPLGdEQUFTO0FBQ3RJO0FBQ0EsbUNBQW1DLGtEQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRUFBTztBQUNwRTtBQUNBO0FBQ0Esb0VBQW9FLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1Q0FBdUM7QUFDL0Y7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGdGQUFjO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBUSxHQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDhDQUE4QyxpQkFBaUI7QUFDdEk7QUFDQTtBQUNBLGtCQUFrQiw4REFBYTtBQUMvQixrQkFBa0IsaUZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFFBQVEsaUZBQWlGO0FBQzFKO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHdEQUFlO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMseURBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsNEJBQTRCLG9GQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9GQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSwwREFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJEQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrRUFBa0I7QUFDbkQsZ0VBQWdFLCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIsZ0NBQWdDO0FBQ2pKLCtDQUErQyw4REFBa0I7QUFDakU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxnRUFBZ0UsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ3BGO0FBQ0E7QUFDQSwrQ0FBK0MsOERBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsNkNBQTZDLHdFQUEwQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qix3QkFBd0Isb0ZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQsa0RBQUs7QUFDMUQsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGlEQUFJO0FBQ2pFO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUIscURBQXFELHFEQUFRO0FBQzdELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxrREFBSztBQUMxRCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQsa0RBQUs7QUFDMUQsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxPQUFPLGdEQUFTO0FBQ2pEO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQVM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0EsQ0FBQztBQUM0QjtBQUN0QjtBQUNQO0FBQ0EseUNBQXlDO0FBQ3pDLDhCQUE4QjtBQUM5QixRQUFRLDREQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1FQUFhLGdFQUFnRTtBQUMxRztBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxnQkFBZ0IsS0FBSyx5RUFBZ0M7QUFDekYsS0FBSyxJQUFJO0FBQ1QsMENBQTBDLG9EQUFhLENBQUMsb0RBQWE7QUFDckUsZUFBZSxpRUFBd0I7QUFDdkMsS0FBSyxtREFBbUQ7QUFDeEQsZUFBZSx1RUFBYTtBQUM1QixZQUFZLHVFQUFhO0FBQ3pCLEtBQUs7QUFDTDtBQUNBLGtDQUFrQyxRQUFRLDhEQUFxQiw2QkFBNkI7QUFDNUY7QUFDQTtBQUNBLHNCQUFzQix1REFBYztBQUNwQztBQUNBLDREQUE0RCx1Q0FBdUM7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2luZGV4LmpzPzk2YTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEFsaWFzLCBHcm91cCwgSWRlbnRpZnksIFBhZ2UsIFRyYWNrIH0gZnJvbSAnQHNlZ21lbnQvZmFjYWRlJztcbmltcG9ydCB7IGlzT2ZmbGluZSwgaXNPbmxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSAnLi4vLi4vY29yZS9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBhdHRlbXB0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgaXNQbGFuRXZlbnRFbmFibGVkIH0gZnJvbSAnLi4vLi4vbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZCc7XG5pbXBvcnQgeyBtZXJnZWRPcHRpb25zIH0gZnJvbSAnLi4vLi4vbGliL21lcmdlZC1vcHRpb25zJztcbmltcG9ydCB7IHBXaGlsZSB9IGZyb20gJy4uLy4uL2xpYi9wLXdoaWxlJztcbmltcG9ydCB7IFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZS9wZXJzaXN0ZWQnO1xuaW1wb3J0IHsgYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUsIH0gZnJvbSAnLi4vbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBidWlsZEludGVncmF0aW9uLCBsb2FkSW50ZWdyYXRpb24sIHJlc29sdmVJbnRlZ3JhdGlvbk5hbWVGcm9tU291cmNlLCByZXNvbHZlVmVyc2lvbiwgdW5sb2FkSW50ZWdyYXRpb24sIH0gZnJvbSAnLi9sb2FkZXInO1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IGlzRGlzYWJsZWRJbnRlZ3JhdGlvbiBhcyBzaG91bGRTa2lwSW50ZWdyYXRpb24sIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbiwgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IHJlY29yZEludGVncmF0aW9uTWV0cmljIH0gZnJvbSAnLi4vLi4vY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmZ1bmN0aW9uIGZsdXNoUXVldWUoeHQsIHF1ZXVlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmFpbGVkUXVldWU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwV2hpbGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUubGVuZ3RoID4gMCAmJiBpc09ubGluZSgpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCwgcmVzdWx0LCBzdWNjZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXR0ZW1wdChjdHgsIHh0KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSByZXN1bHQgaW5zdGFuY2VvZiBDb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZS5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1hZGQgZmFpbGVkIHRhc2tzXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCBmYWlsZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHsgcmV0dXJuIHF1ZXVlLnB1c2hXaXRoQmFja29mZihmYWlsZWQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG52YXIgTGVnYWN5RGVzdGluYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTGVnYWN5RGVzdGluYXRpb24obmFtZSwgdmVyc2lvbiwgd3JpdGVLZXksIHNldHRpbmdzLCBvcHRpb25zLCBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICBpZiAoc2V0dGluZ3MgPT09IHZvaWQgMCkgeyBzZXR0aW5ncyA9IHt9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnR5cGUgPSAnZGVzdGluYXRpb24nO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplUHJvbWlzZSA9IGNyZWF0ZURlZmVycmVkKCk7XG4gICAgICAgIHRoaXMuZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IF9fYXNzaWduKHt9LCBzZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uID0gb3B0aW9ucy5kaXNhYmxlQXV0b0lTT0NvbnZlcnNpb24gfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb25Tb3VyY2UgPSBpbnRlZ3JhdGlvblNvdXJjZTtcbiAgICAgICAgLy8gQUpTLVJlbmRlcmVyIHNldHMgYW4gZXh0cmFuZW91cyBgdHlwZWAgc2V0dGluZyB0aGF0IGNsb2JiZXJzXG4gICAgICAgIC8vIGV4aXN0aW5nIHR5cGUgZGVmYXVsdHMuIFdlIG5lZWQgdG8gcmVtb3ZlIGl0IGlmIGl0J3MgcHJlc2VudFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc1sndHlwZSddICYmIHRoaXMuc2V0dGluZ3NbJ3R5cGUnXSA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zZXR0aW5nc1sndHlwZSddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChpc0luaXRpYWxpemVkKSB7IHJldHVybiAoX3RoaXMuX2luaXRpYWxpemVkID0gaXNJbml0aWFsaXplZCk7IH0sIGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gb3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2VcbiAgICAgICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUoNCwgW10pXG4gICAgICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKDQsIFwiXCIuY29uY2F0KHdyaXRlS2V5LCBcIjpkZXN0LVwiKS5jb25jYXQobmFtZSkpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmlzTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9yZWFkeTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gX3RoaXMub25SZWFkeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogUHJvbWlzZS5yZXNvbHZlKCk7IH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoY3R4LCBhbmFseXRpY3NJbnN0YW5jZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvblNvdXJjZSwgX2I7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWR5IHx8IHRoaXMub25SZWFkeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gdGhpcy5pbnRlZ3JhdGlvblNvdXJjZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRJbnRlZ3JhdGlvbihjdHgsIHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMub2JmdXNjYXRlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gKF9jLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uU291cmNlID0gX2I7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uID0gYnVpbGRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvblNvdXJjZSwgdGhpcy5zZXR0aW5ncywgYW5hbHl0aWNzSW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlYWR5ID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25SZWFkeUZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW50ZWdyYXRpb24ub25jZSgncmVhZHknLCBvblJlYWR5Rm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLm9uKCdpbml0aWFsaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnaW5pdGlhbGl6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogJ2luaXRpYWxpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2xhc3NpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uIChfY3R4LCBfYW5hbHl0aWNzSW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHVubG9hZEludGVncmF0aW9uKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMub2JmdXNjYXRlKTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5hZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZm5bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSAoX2EgPSB0aGlzLm1pZGRsZXdhcmUpLmNvbmNhdC5hcHBseShfYSwgZm4pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnNob3VsZEJ1ZmZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLy8gcGFnZSBldmVudHMgY2FuJ3QgYmUgYnVmZmVyZWQgYmVjYXVzZSBvZiBkZXN0aW5hdGlvbnMgdGhhdCBhdXRvbWF0aWNhbGx5IGFkZCBwYWdlIHZpZXdzXG4gICAgICAgIGN0eC5ldmVudC50eXBlICE9PSAncGFnZScgJiZcbiAgICAgICAgICAgIChpc09mZmxpbmUoKSB8fCB0aGlzLl9yZWFkeSAhPT0gdHJ1ZSB8fCB0aGlzLl9pbml0aWFsaXplZCAhPT0gdHJ1ZSkpO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoY3R4LCBjbHosIGV2ZW50VHlwZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGxhbiwgZXYsIHBsYW5FdmVudCwgYWZ0ZXJNaWRkbGV3YXJlLCBldmVudCwgZXJyXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG91bGRCdWZmZXIoY3R4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYW4gPSAoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wbGFuKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBldiA9IGN0eC5ldmVudC5ldmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGFuICYmIGV2ICYmIHRoaXMubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhbkV2ZW50ID0gcGxhbltldl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1BsYW5FdmVudEVuYWJsZWQocGxhbiwgcGxhbkV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgudXBkYXRlRXZlbnQoJ2ludGVncmF0aW9ucycsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSwgeyBBbGw6IGZhbHNlLCAnU2VnbWVudC5pbyc6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FuY2VsKG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkV2ZW50IFwiLmNvbmNhdChldiwgXCIgZGlzYWJsZWQgZm9yIGludGVncmF0aW9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiBpbiB0cmFja2luZyBwbGFuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0Ryb3BwZWQgYnkgcGxhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC51cGRhdGVFdmVudCgnaW50ZWdyYXRpb25zJywgX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpLCBwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmVuYWJsZWQpICYmIChwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zW3RoaXMubmFtZV0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FuY2VsKG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkV2ZW50IFwiLmNvbmNhdChldiwgXCIgZGlzYWJsZWQgZm9yIGludGVncmF0aW9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiBpbiB0cmFja2luZyBwbGFuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0Ryb3BwZWQgYnkgcGxhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhcHBseURlc3RpbmF0aW9uTWlkZGxld2FyZSh0aGlzLm5hbWUsIGN0eC5ldmVudCwgdGhpcy5taWRkbGV3YXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyTWlkZGxld2FyZSA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZnRlck1pZGRsZXdhcmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gbmV3IGNseihhZnRlck1pZGRsZXdhcmUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogIXRoaXMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW50ZWdyYXRpb24pIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbnRlZ3JhdGlvbi5pbnZva2UuY2FsbCh0aGlzLmludGVncmF0aW9uLCBldmVudFR5cGUsIGV2ZW50KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgVHJhY2ssICd0cmFjaycpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5pbnRlZ3JhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9hc3N1bWVzUGFnZXZpZXcpICYmICF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb24uaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIFBhZ2UsICdwYWdlJyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBJZGVudGlmeSwgJ2lkZW50aWZ5JyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIEFsaWFzLCAnYWxpYXMnKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgR3JvdXAsICdncm91cCcpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5zY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5mbHVzaGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWlzdXNlZC1wcm9taXNlc1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSB8fCB0aGlzLl9yZWFkeSAhPT0gdHJ1ZSB8fCB0aGlzLl9pbml0aWFsaXplZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmx1c2hRdWV1ZSh0aGlzLCB0aGlzLmJ1ZmZlcildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5idWZmZXIgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idWZmZXIudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0sIE1hdGgucmFuZG9tKCkgKiA1MDAwKTtcbiAgICB9O1xuICAgIHJldHVybiBMZWdhY3lEZXN0aW5hdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBMZWdhY3lEZXN0aW5hdGlvbiB9O1xuZXhwb3J0IGZ1bmN0aW9uIGFqc0Rlc3RpbmF0aW9ucyh3cml0ZUtleSwgc2V0dGluZ3MsIGdsb2JhbEludGVncmF0aW9ucywgb3B0aW9ucywgcm91dGluZ01pZGRsZXdhcmUsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKGdsb2JhbEludGVncmF0aW9ucyA9PT0gdm9pZCAwKSB7IGdsb2JhbEludGVncmF0aW9ucyA9IHt9OyB9XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICBpZiAoaXNTZXJ2ZXIoKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmIChzZXR0aW5ncy5wbGFuKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fTtcbiAgICAgICAgb3B0aW9ucy5wbGFuID0gc2V0dGluZ3MucGxhbjtcbiAgICB9XG4gICAgdmFyIHJvdXRpbmdSdWxlcyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgdmFyIHJlbW90ZUludGVncmF0aW9uc0NvbmZpZyA9IHNldHRpbmdzLmludGVncmF0aW9ucztcbiAgICB2YXIgbG9jYWxJbnRlZ3JhdGlvbnNDb25maWcgPSBvcHRpb25zLmludGVncmF0aW9ucztcbiAgICAvLyBtZXJnZWQgcmVtb3RlIENETiBzZXR0aW5ncyB3aXRoIHVzZXIgcHJvdmlkZWQgb3B0aW9uc1xuICAgIHZhciBpbnRlZ3JhdGlvbk9wdGlvbnMgPSBtZXJnZWRPcHRpb25zKHNldHRpbmdzLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSk7XG4gICAgdmFyIGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID0gbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzID09PSBudWxsIHx8IGxlZ2FjeUludGVncmF0aW9uU291cmNlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGFjYyksIChfYSA9IHt9LCBfYVtyZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZShpbnRlZ3JhdGlvblNvdXJjZSldID0gaW50ZWdyYXRpb25Tb3VyY2UsIF9hKSkpO1xuICAgIH0sIHt9KTtcbiAgICB2YXIgaW5zdGFsbGFibGVJbnRlZ3JhdGlvbnMgPSBuZXcgU2V0KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgT2JqZWN0LmtleXMocmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnKS5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbihuYW1lLCByZW1vdGVJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pO1xuICAgIH0pLCB0cnVlKSwgT2JqZWN0LmtleXMoYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgfHwge30pLmZpbHRlcihmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gaXNQbGFpbk9iamVjdChyZW1vdGVJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pIHx8XG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID09PSBudWxsIHx8IGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbEludGVncmF0aW9uc0NvbmZpZ1tuYW1lXSk7XG4gICAgfSksIHRydWUpKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnN0YWxsYWJsZUludGVncmF0aW9ucylcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gIXNob3VsZFNraXBJbnRlZ3JhdGlvbihuYW1lLCBnbG9iYWxJbnRlZ3JhdGlvbnMpOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBpbnRlZ3JhdGlvblNldHRpbmdzID0gcmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdO1xuICAgICAgICB2YXIgdmVyc2lvbiA9IHJlc29sdmVWZXJzaW9uKGludGVncmF0aW9uU2V0dGluZ3MpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSBuZXcgTGVnYWN5RGVzdGluYXRpb24obmFtZSwgdmVyc2lvbiwgd3JpdGVLZXksIGludGVncmF0aW9uT3B0aW9uc1tuYW1lXSwgb3B0aW9ucywgYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgPT09IG51bGwgfHwgYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzW25hbWVdKTtcbiAgICAgICAgdmFyIHJvdXRpbmcgPSByb3V0aW5nUnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7IHJldHVybiBydWxlLmRlc3RpbmF0aW9uTmFtZSA9PT0gbmFtZTsgfSk7XG4gICAgICAgIGlmIChyb3V0aW5nLmxlbmd0aCA+IDAgJiYgcm91dGluZ01pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZE1pZGRsZXdhcmUocm91dGluZ01pZGRsZXdhcmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIntegration: () => (/* binding */ buildIntegration),\n/* harmony export */   loadIntegration: () => (/* binding */ loadIntegration),\n/* harmony export */   resolveIntegrationNameFromSource: () => (/* binding */ resolveIntegrationNameFromSource),\n/* harmony export */   resolveVersion: () => (/* binding */ resolveVersion),\n/* harmony export */   unloadIntegration: () => (/* binding */ unloadIntegration)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/load-script */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n\n\n\nfunction normalizeName(name) {\n    return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-');\n}\nfunction obfuscatePathName(pathName, obfuscate) {\n    if (obfuscate === void 0) { obfuscate = false; }\n    return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined;\n}\nfunction resolveIntegrationNameFromSource(integrationSource) {\n    return ('Integration' in integrationSource\n        ? integrationSource.Integration\n        : integrationSource).prototype.name;\n}\nfunction recordLoadMetrics(fullPath, ctx, name) {\n    var _a, _b;\n    try {\n        var metric = ((_b = (_a = window === null || window === void 0 ? void 0 : window.performance) === null || _a === void 0 ? void 0 : _a.getEntriesByName(fullPath, 'resource')) !== null && _b !== void 0 ? _b : [])[0];\n        // we assume everything that took under 100ms is cached\n        metric &&\n            ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([\n                name\n            ], (metric.duration < 100 ? ['cached'] : []), true));\n    }\n    catch (_) {\n        // not available\n    }\n}\nfunction buildIntegration(integrationSource, integrationSettings, analyticsInstance) {\n    var integrationCtr;\n    // GA and Appcues use a different interface to instantiating integrations\n    if ('Integration' in integrationSource) {\n        var analyticsStub = {\n            user: function () { return analyticsInstance.user(); },\n            addIntegration: function () { },\n        };\n        integrationSource(analyticsStub);\n        integrationCtr = integrationSource.Integration;\n    }\n    else {\n        integrationCtr = integrationSource;\n    }\n    var integration = new integrationCtr(integrationSettings);\n    integration.analytics = analyticsInstance;\n    return integration;\n}\nfunction loadIntegration(ctx, name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var pathName, obfuscatedPathName, path, fullPath, err_1, deps;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    pathName = normalizeName(name);\n                    obfuscatedPathName = obfuscatePathName(pathName, obfuscate);\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n                    fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(fullPath)];\n                case 2:\n                    _a.sent();\n                    recordLoadMetrics(fullPath, ctx, name);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    ctx.stats.gauge('legacy_destination_time', -1, [\"plugin:\".concat(name), \"failed\"]);\n                    throw err_1;\n                case 4:\n                    deps = window[\"\".concat(pathName, \"Deps\")];\n                    return [4 /*yield*/, Promise.all(deps.map(function (dep) { return (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(path + dep + '.gz'); }))\n                        // @ts-ignore\n                    ];\n                case 5:\n                    _a.sent();\n                    // @ts-ignore\n                    window[\"\".concat(pathName, \"Loader\")]();\n                    return [2 /*return*/, window[\n                        // @ts-ignore\n                        \"\".concat(pathName, \"Integration\")]];\n            }\n        });\n    });\n}\nfunction unloadIntegration(name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, pathName, obfuscatedPathName, fullPath;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n            pathName = normalizeName(name);\n            obfuscatedPathName = obfuscatePathName(name, obfuscate);\n            fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n            return [2 /*return*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.unloadScript)(fullPath)];\n        });\n    });\n}\nfunction resolveVersion(integrationConfig) {\n    var _a, _b, _c, _d;\n    return ((_d = (_b = (_a = integrationConfig === null || integrationConfig === void 0 ? void 0 : integrationConfig.versionSettings) === null || _a === void 0 ? void 0 : _a.override) !== null && _b !== void 0 ? _b : (_c = integrationConfig === null || integrationConfig === void 0 ? void 0 : integrationConfig.versionSettings) === null || _c === void 0 ? void 0 : _c.version) !== null && _d !== void 0 ? _d : 'latest');\n}\n//# sourceMappingURL=loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vbG9hZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThEO0FBQ0Q7QUFDSTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixvREFBYTtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDO0FBQ2xFLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzRUFBc0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsT0FBTyw0REFBVSx1QkFBdUI7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQixtQkFBbUIsc0VBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw4REFBWTtBQUM5QyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2xvYWRlci5qcz83ODYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGxvYWRTY3JpcHQsIHVubG9hZFNjcmlwdCB9IGZyb20gJy4uLy4uL2xpYi9sb2FkLXNjcmlwdCc7XG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJy4nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xufVxuZnVuY3Rpb24gb2JmdXNjYXRlUGF0aE5hbWUocGF0aE5hbWUsIG9iZnVzY2F0ZSkge1xuICAgIGlmIChvYmZ1c2NhdGUgPT09IHZvaWQgMCkgeyBvYmZ1c2NhdGUgPSBmYWxzZTsgfVxuICAgIHJldHVybiBvYmZ1c2NhdGUgPyBidG9hKHBhdGhOYW1lKS5yZXBsYWNlKC89L2csICcnKSA6IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZShpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgIHJldHVybiAoJ0ludGVncmF0aW9uJyBpbiBpbnRlZ3JhdGlvblNvdXJjZVxuICAgICAgICA/IGludGVncmF0aW9uU291cmNlLkludGVncmF0aW9uXG4gICAgICAgIDogaW50ZWdyYXRpb25Tb3VyY2UpLnByb3RvdHlwZS5uYW1lO1xufVxuZnVuY3Rpb24gcmVjb3JkTG9hZE1ldHJpY3MoZnVsbFBhdGgsIGN0eCwgbmFtZSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIG1ldHJpYyA9ICgoX2IgPSAoX2EgPSB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cucGVyZm9ybWFuY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRFbnRyaWVzQnlOYW1lKGZ1bGxQYXRoLCAncmVzb3VyY2UnKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pWzBdO1xuICAgICAgICAvLyB3ZSBhc3N1bWUgZXZlcnl0aGluZyB0aGF0IHRvb2sgdW5kZXIgMTAwbXMgaXMgY2FjaGVkXG4gICAgICAgIG1ldHJpYyAmJlxuICAgICAgICAgICAgY3R4LnN0YXRzLmdhdWdlKCdsZWdhY3lfZGVzdGluYXRpb25fdGltZScsIE1hdGgucm91bmQobWV0cmljLmR1cmF0aW9uKSwgX19zcHJlYWRBcnJheShbXG4gICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgXSwgKG1ldHJpYy5kdXJhdGlvbiA8IDEwMCA/IFsnY2FjaGVkJ10gOiBbXSksIHRydWUpKTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgLy8gbm90IGF2YWlsYWJsZVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEludGVncmF0aW9uKGludGVncmF0aW9uU291cmNlLCBpbnRlZ3JhdGlvblNldHRpbmdzLCBhbmFseXRpY3NJbnN0YW5jZSkge1xuICAgIHZhciBpbnRlZ3JhdGlvbkN0cjtcbiAgICAvLyBHQSBhbmQgQXBwY3VlcyB1c2UgYSBkaWZmZXJlbnQgaW50ZXJmYWNlIHRvIGluc3RhbnRpYXRpbmcgaW50ZWdyYXRpb25zXG4gICAgaWYgKCdJbnRlZ3JhdGlvbicgaW4gaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICAgICAgdmFyIGFuYWx5dGljc1N0dWIgPSB7XG4gICAgICAgICAgICB1c2VyOiBmdW5jdGlvbiAoKSB7IHJldHVybiBhbmFseXRpY3NJbnN0YW5jZS51c2VyKCk7IH0sXG4gICAgICAgICAgICBhZGRJbnRlZ3JhdGlvbjogZnVuY3Rpb24gKCkgeyB9LFxuICAgICAgICB9O1xuICAgICAgICBpbnRlZ3JhdGlvblNvdXJjZShhbmFseXRpY3NTdHViKTtcbiAgICAgICAgaW50ZWdyYXRpb25DdHIgPSBpbnRlZ3JhdGlvblNvdXJjZS5JbnRlZ3JhdGlvbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGludGVncmF0aW9uQ3RyID0gaW50ZWdyYXRpb25Tb3VyY2U7XG4gICAgfVxuICAgIHZhciBpbnRlZ3JhdGlvbiA9IG5ldyBpbnRlZ3JhdGlvbkN0cihpbnRlZ3JhdGlvblNldHRpbmdzKTtcbiAgICBpbnRlZ3JhdGlvbi5hbmFseXRpY3MgPSBhbmFseXRpY3NJbnN0YW5jZTtcbiAgICByZXR1cm4gaW50ZWdyYXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gbG9hZEludGVncmF0aW9uKGN0eCwgbmFtZSwgdmVyc2lvbiwgb2JmdXNjYXRlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aE5hbWUsIG9iZnVzY2F0ZWRQYXRoTmFtZSwgcGF0aCwgZnVsbFBhdGgsIGVycl8xLCBkZXBzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBwYXRoTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRQYXRoTmFtZSA9IG9iZnVzY2F0ZVBhdGhOYW1lKHBhdGhOYW1lLCBvYmZ1c2NhdGUpO1xuICAgICAgICAgICAgICAgICAgICBwYXRoID0gZ2V0TmV4dEludGVncmF0aW9uc1VSTCgpO1xuICAgICAgICAgICAgICAgICAgICBmdWxsUGF0aCA9IFwiXCIuY29uY2F0KHBhdGgsIFwiL2ludGVncmF0aW9ucy9cIikuY29uY2F0KG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gbnVsbCAmJiBvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IHZvaWQgMCA/IG9iZnVzY2F0ZWRQYXRoTmFtZSA6IHBhdGhOYW1lLCBcIi9cIikuY29uY2F0KHZlcnNpb24sIFwiL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiLmR5bmFtaWMuanMuZ3pcIik7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRTY3JpcHQoZnVsbFBhdGgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkTG9hZE1ldHJpY3MoZnVsbFBhdGgsIGN0eCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnbGVnYWN5X2Rlc3RpbmF0aW9uX3RpbWUnLCAtMSwgW1wicGx1Z2luOlwiLmNvbmNhdChuYW1lKSwgXCJmYWlsZWRcIl0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGRlcHMgPSB3aW5kb3dbXCJcIi5jb25jYXQocGF0aE5hbWUsIFwiRGVwc1wiKV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGRlcHMubWFwKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGxvYWRTY3JpcHQocGF0aCArIGRlcCArICcuZ3onKTsgfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgd2luZG93W1wiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkxvYWRlclwiKV0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHdpbmRvd1tcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkludGVncmF0aW9uXCIpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubG9hZEludGVncmF0aW9uKG5hbWUsIHZlcnNpb24sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGgsIHBhdGhOYW1lLCBvYmZ1c2NhdGVkUGF0aE5hbWUsIGZ1bGxQYXRoO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBwYXRoID0gZ2V0TmV4dEludGVncmF0aW9uc1VSTCgpO1xuICAgICAgICAgICAgcGF0aE5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgb2JmdXNjYXRlZFBhdGhOYW1lID0gb2JmdXNjYXRlUGF0aE5hbWUobmFtZSwgb2JmdXNjYXRlKTtcbiAgICAgICAgICAgIGZ1bGxQYXRoID0gXCJcIi5jb25jYXQocGF0aCwgXCIvaW50ZWdyYXRpb25zL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiL1wiKS5jb25jYXQodmVyc2lvbiwgXCIvXCIpLmNvbmNhdChvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IG51bGwgJiYgb2JmdXNjYXRlZFBhdGhOYW1lICE9PSB2b2lkIDAgPyBvYmZ1c2NhdGVkUGF0aE5hbWUgOiBwYXRoTmFtZSwgXCIuZHluYW1pYy5qcy5nelwiKTtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1bmxvYWRTY3JpcHQoZnVsbFBhdGgpXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVZlcnNpb24oaW50ZWdyYXRpb25Db25maWcpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgcmV0dXJuICgoX2QgPSAoX2IgPSAoX2EgPSBpbnRlZ3JhdGlvbkNvbmZpZyA9PT0gbnVsbCB8fCBpbnRlZ3JhdGlvbkNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW50ZWdyYXRpb25Db25maWcudmVyc2lvblNldHRpbmdzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3ZlcnJpZGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IChfYyA9IGludGVncmF0aW9uQ29uZmlnID09PSBudWxsIHx8IGludGVncmF0aW9uQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbnRlZ3JhdGlvbkNvbmZpZy52ZXJzaW9uU2V0dGluZ3MpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy52ZXJzaW9uKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnbGF0ZXN0Jyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDisabledIntegration: () => (/* binding */ isDisabledIntegration),\n/* harmony export */   isInstallableIntegration: () => (/* binding */ isInstallableIntegration)\n/* harmony export */ });\nvar isInstallableIntegration = function (name, integrationSettings) {\n    var _a;\n    var type = integrationSettings.type, bundlingStatus = integrationSettings.bundlingStatus, versionSettings = integrationSettings.versionSettings;\n    // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n    // destinations without a defined value for `bundlingStatus`\n    var deviceMode = bundlingStatus !== 'unbundled' &&\n        (type === 'browser' || ((_a = versionSettings === null || versionSettings === void 0 ? void 0 : versionSettings.componentTypes) === null || _a === void 0 ? void 0 : _a.includes('browser')));\n    // checking for iterable is a quick fix we need in place to prevent\n    // errors showing Iterable as a failed destiantion. Ideally, we should\n    // fix the Iterable metadata instead, but that's a longer process.\n    return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode;\n};\nvar isDisabledIntegration = function (integrationName, globalIntegrations) {\n    var allDisableAndNotDefined = globalIntegrations.All === false &&\n        globalIntegrations[integrationName] === undefined;\n    return (globalIntegrations[integrationName] === false || allDisableAndNotDefined);\n};\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi91dGlscy5qcz85Y2QyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgaXNJbnN0YWxsYWJsZUludGVncmF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIGludGVncmF0aW9uU2V0dGluZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHR5cGUgPSBpbnRlZ3JhdGlvblNldHRpbmdzLnR5cGUsIGJ1bmRsaW5nU3RhdHVzID0gaW50ZWdyYXRpb25TZXR0aW5ncy5idW5kbGluZ1N0YXR1cywgdmVyc2lvblNldHRpbmdzID0gaW50ZWdyYXRpb25TZXR0aW5ncy52ZXJzaW9uU2V0dGluZ3M7XG4gICAgLy8gV2UgdXNlIGAhPT0gJ3VuYnVuZGxlZCdgICh2ZXJzdXMgYD09PSAnYnVuZGxlZCdgKSB0byBiZSBpbmNsdXNpdmUgb2ZcbiAgICAvLyBkZXN0aW5hdGlvbnMgd2l0aG91dCBhIGRlZmluZWQgdmFsdWUgZm9yIGBidW5kbGluZ1N0YXR1c2BcbiAgICB2YXIgZGV2aWNlTW9kZSA9IGJ1bmRsaW5nU3RhdHVzICE9PSAndW5idW5kbGVkJyAmJlxuICAgICAgICAodHlwZSA9PT0gJ2Jyb3dzZXInIHx8ICgoX2EgPSB2ZXJzaW9uU2V0dGluZ3MgPT09IG51bGwgfHwgdmVyc2lvblNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2ZXJzaW9uU2V0dGluZ3MuY29tcG9uZW50VHlwZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygnYnJvd3NlcicpKSk7XG4gICAgLy8gY2hlY2tpbmcgZm9yIGl0ZXJhYmxlIGlzIGEgcXVpY2sgZml4IHdlIG5lZWQgaW4gcGxhY2UgdG8gcHJldmVudFxuICAgIC8vIGVycm9ycyBzaG93aW5nIEl0ZXJhYmxlIGFzIGEgZmFpbGVkIGRlc3RpYW50aW9uLiBJZGVhbGx5LCB3ZSBzaG91bGRcbiAgICAvLyBmaXggdGhlIEl0ZXJhYmxlIG1ldGFkYXRhIGluc3RlYWQsIGJ1dCB0aGF0J3MgYSBsb25nZXIgcHJvY2Vzcy5cbiAgICByZXR1cm4gIW5hbWUuc3RhcnRzV2l0aCgnU2VnbWVudCcpICYmIG5hbWUgIT09ICdJdGVyYWJsZScgJiYgZGV2aWNlTW9kZTtcbn07XG5leHBvcnQgdmFyIGlzRGlzYWJsZWRJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbk5hbWUsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgIHZhciBhbGxEaXNhYmxlQW5kTm90RGVmaW5lZCA9IGdsb2JhbEludGVncmF0aW9ucy5BbGwgPT09IGZhbHNlICYmXG4gICAgICAgIGdsb2JhbEludGVncmF0aW9uc1tpbnRlZ3JhdGlvbk5hbWVdID09PSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIChnbG9iYWxJbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25OYW1lXSA9PT0gZmFsc2UgfHwgYWxsRGlzYWJsZUFuZE5vdERlZmluZWQpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ampId: () => (/* binding */ ampId),\n/* harmony export */   envEnrichment: () => (/* binding */ envEnrichment),\n/* harmony export */   utm: () => (/* binding */ utm)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(rsc)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../generated/version */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/version-type */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n/* harmony import */ var _core_user_tld__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/user/tld */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\");\n/* harmony import */ var _core_query_string_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/query-string/gracefulDecodeURIComponent */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\");\n/* harmony import */ var _core_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _core_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/storage */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\");\n/* harmony import */ var _lib_client_hints__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/client-hints */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js\");\n\n\n\n\n\n\n\n\nvar cookieOptions;\nfunction getCookieOptions() {\n    if (cookieOptions) {\n        return cookieOptions;\n    }\n    var domain = (0,_core_user_tld__WEBPACK_IMPORTED_MODULE_1__.tld)(window.location.href);\n    cookieOptions = {\n        expires: 31536000000,\n        secure: false,\n        path: '/',\n    };\n    if (domain) {\n        cookieOptions.domain = domain;\n    }\n    return cookieOptions;\n}\nfunction ads(query) {\n    var queryIds = {\n        btid: 'dataxu',\n        urid: 'millennial-media',\n    };\n    if (query.startsWith('?')) {\n        query = query.substring(1);\n    }\n    query = query.replace(/\\?/g, '&');\n    var parts = query.split('&');\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        var _a = part.split('='), k = _a[0], v = _a[1];\n        if (queryIds[k]) {\n            return {\n                id: v,\n                type: queryIds[k],\n            };\n        }\n    }\n}\nfunction utm(query) {\n    if (query.startsWith('?')) {\n        query = query.substring(1);\n    }\n    query = query.replace(/\\?/g, '&');\n    return query.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], _b = _a[1], v = _b === void 0 ? '' : _b;\n        if (k.includes('utm_') && k.length > 4) {\n            var utmParam = k.slice(4);\n            if (utmParam === 'campaign') {\n                utmParam = 'name';\n            }\n            acc[utmParam] = (0,_core_query_string_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_2__.gracefulDecodeURIComponent)(v);\n        }\n        return acc;\n    }, {});\n}\nfunction ampId() {\n    var ampId = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('_ga');\n    if (ampId && ampId.startsWith('amp')) {\n        return ampId;\n    }\n}\nfunction referrerId(query, ctx, disablePersistance) {\n    var _a;\n    var storage = new _core_storage__WEBPACK_IMPORTED_MODULE_3__.UniversalStorage(disablePersistance ? [] : [new _core_storage__WEBPACK_IMPORTED_MODULE_4__.CookieStorage(getCookieOptions())]);\n    var stored = storage.get('s:context.referrer');\n    var ad = (_a = ads(query)) !== null && _a !== void 0 ? _a : stored;\n    if (!ad) {\n        return;\n    }\n    if (ctx) {\n        ctx.referrer = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({}, ctx.referrer), ad);\n    }\n    storage.set('s:context.referrer', ad);\n}\n/**\n *\n * @param obj e.g. { foo: 'b', bar: 'd', baz: ['123', '456']}\n * @returns e.g. 'foo=b&bar=d&baz=123&baz=456'\n */\nvar objectToQueryString = function (obj) {\n    try {\n        var searchParams_1 = new URLSearchParams();\n        Object.entries(obj).forEach(function (_a) {\n            var k = _a[0], v = _a[1];\n            if (Array.isArray(v)) {\n                v.forEach(function (value) { return searchParams_1.append(k, value); });\n            }\n            else {\n                searchParams_1.append(k, v);\n            }\n        });\n        return searchParams_1.toString();\n    }\n    catch (_a) {\n        return '';\n    }\n};\nvar EnvironmentEnrichmentPlugin = /** @class */ (function () {\n    function EnvironmentEnrichmentPlugin() {\n        var _this = this;\n        this.name = 'Page Enrichment';\n        this.type = 'before';\n        this.version = '0.1.0';\n        this.isLoaded = function () { return true; };\n        this.load = function (_ctx, instance) { return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(_this, void 0, void 0, function () {\n            var _a, _1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.instance = instance;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        _a = this;\n                        return [4 /*yield*/, (0,_lib_client_hints__WEBPACK_IMPORTED_MODULE_6__.clientHints)(this.instance.options.highEntropyValuesClientHints)];\n                    case 2:\n                        _a.userAgentData = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        _1 = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, Promise.resolve()];\n                }\n            });\n        }); };\n        this.enrich = function (ctx) {\n            var _a, _b;\n            // Note: Types are off - context should never be undefined here, since it is set as part of event creation.\n            var evtCtx = ctx.event.context;\n            var search = evtCtx.page.search || '';\n            var query = typeof search === 'object' ? objectToQueryString(search) : search;\n            evtCtx.userAgent = navigator.userAgent;\n            evtCtx.userAgentData = _this.userAgentData;\n            // @ts-ignore\n            var locale = navigator.userLanguage || navigator.language;\n            if (typeof evtCtx.locale === 'undefined' && typeof locale !== 'undefined') {\n                evtCtx.locale = locale;\n            }\n            (_a = evtCtx.library) !== null && _a !== void 0 ? _a : (evtCtx.library = {\n                name: 'analytics.js',\n                version: \"\".concat((0,_lib_version_type__WEBPACK_IMPORTED_MODULE_7__.getVersionType)() === 'web' ? 'next' : 'npm:next', \"-\").concat(_generated_version__WEBPACK_IMPORTED_MODULE_8__.version),\n            });\n            if (query && !evtCtx.campaign) {\n                evtCtx.campaign = utm(query);\n            }\n            var amp = ampId();\n            if (amp) {\n                evtCtx.amp = { id: amp };\n            }\n            referrerId(query, evtCtx, (_b = _this.instance.options.disableClientPersistence) !== null && _b !== void 0 ? _b : false);\n            try {\n                evtCtx.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            }\n            catch (_) {\n                // If browser doesn't have support leave timezone undefined\n            }\n            return ctx;\n        };\n        this.track = this.enrich;\n        this.identify = this.enrich;\n        this.page = this.enrich;\n        this.group = this.enrich;\n        this.alias = this.enrich;\n        this.screen = this.enrich;\n    }\n    return EnvironmentEnrichmentPlugin;\n}());\nvar envEnrichment = new EnvironmentEnrichmentPlugin();\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9lbnYtZW5yaWNobWVudC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDN0I7QUFDc0I7QUFDTTtBQUNkO0FBQ3NEO0FBQzNCO0FBQ2hCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbURBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQkFBcUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUdBQTBCO0FBQ3REO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNPO0FBQ1AsZ0JBQWdCLGlEQUFHO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBZ0IsZ0NBQWdDLHdEQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHlDQUF5QztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsZ0RBQWdELE9BQU8sZ0RBQVM7QUFDaEU7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsOERBQVc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlFQUFjLGdEQUFnRCx1REFBTztBQUN4RyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvZW52LWVucmljaG1lbnQvaW5kZXguanM/YTJlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IGphciBmcm9tICdqcy1jb29raWUnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGdldFZlcnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vbGliL3ZlcnNpb24tdHlwZSc7XG5pbXBvcnQgeyB0bGQgfSBmcm9tICcuLi8uLi9jb3JlL3VzZXIvdGxkJztcbmltcG9ydCB7IGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9xdWVyeS1zdHJpbmcvZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQnO1xuaW1wb3J0IHsgQ29va2llU3RvcmFnZSwgVW5pdmVyc2FsU3RvcmFnZSB9IGZyb20gJy4uLy4uL2NvcmUvc3RvcmFnZSc7XG5pbXBvcnQgeyBjbGllbnRIaW50cyB9IGZyb20gJy4uLy4uL2xpYi9jbGllbnQtaGludHMnO1xudmFyIGNvb2tpZU9wdGlvbnM7XG5mdW5jdGlvbiBnZXRDb29raWVPcHRpb25zKCkge1xuICAgIGlmIChjb29raWVPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBjb29raWVPcHRpb25zO1xuICAgIH1cbiAgICB2YXIgZG9tYWluID0gdGxkKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICBjb29raWVPcHRpb25zID0ge1xuICAgICAgICBleHBpcmVzOiAzMTUzNjAwMDAwMCxcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgICAgcGF0aDogJy8nLFxuICAgIH07XG4gICAgaWYgKGRvbWFpbikge1xuICAgICAgICBjb29raWVPcHRpb25zLmRvbWFpbiA9IGRvbWFpbjtcbiAgICB9XG4gICAgcmV0dXJuIGNvb2tpZU9wdGlvbnM7XG59XG5mdW5jdGlvbiBhZHMocXVlcnkpIHtcbiAgICB2YXIgcXVlcnlJZHMgPSB7XG4gICAgICAgIGJ0aWQ6ICdkYXRheHUnLFxuICAgICAgICB1cmlkOiAnbWlsbGVubmlhbC1tZWRpYScsXG4gICAgfTtcbiAgICBpZiAocXVlcnkuc3RhcnRzV2l0aCgnPycpKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL1xcPy9nLCAnJicpO1xuICAgIHZhciBwYXJ0cyA9IHF1ZXJ5LnNwbGl0KCcmJyk7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBwYXJ0c18xID0gcGFydHM7IF9pIDwgcGFydHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c18xW19pXTtcbiAgICAgICAgdmFyIF9hID0gcGFydC5zcGxpdCgnPScpLCBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgaWYgKHF1ZXJ5SWRzW2tdKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiB2LFxuICAgICAgICAgICAgICAgIHR5cGU6IHF1ZXJ5SWRzW2tdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB1dG0ocXVlcnkpIHtcbiAgICBpZiAocXVlcnkuc3RhcnRzV2l0aCgnPycpKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL1xcPy9nLCAnJicpO1xuICAgIHJldHVybiBxdWVyeS5zcGxpdCgnJicpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzdHIpIHtcbiAgICAgICAgdmFyIF9hID0gc3RyLnNwbGl0KCc9JyksIGsgPSBfYVswXSwgX2IgPSBfYVsxXSwgdiA9IF9iID09PSB2b2lkIDAgPyAnJyA6IF9iO1xuICAgICAgICBpZiAoay5pbmNsdWRlcygndXRtXycpICYmIGsubGVuZ3RoID4gNCkge1xuICAgICAgICAgICAgdmFyIHV0bVBhcmFtID0gay5zbGljZSg0KTtcbiAgICAgICAgICAgIGlmICh1dG1QYXJhbSA9PT0gJ2NhbXBhaWduJykge1xuICAgICAgICAgICAgICAgIHV0bVBhcmFtID0gJ25hbWUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjW3V0bVBhcmFtXSA9IGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFtcElkKCkge1xuICAgIHZhciBhbXBJZCA9IGphci5nZXQoJ19nYScpO1xuICAgIGlmIChhbXBJZCAmJiBhbXBJZC5zdGFydHNXaXRoKCdhbXAnKSkge1xuICAgICAgICByZXR1cm4gYW1wSWQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVmZXJyZXJJZChxdWVyeSwgY3R4LCBkaXNhYmxlUGVyc2lzdGFuY2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHN0b3JhZ2UgPSBuZXcgVW5pdmVyc2FsU3RvcmFnZShkaXNhYmxlUGVyc2lzdGFuY2UgPyBbXSA6IFtuZXcgQ29va2llU3RvcmFnZShnZXRDb29raWVPcHRpb25zKCkpXSk7XG4gICAgdmFyIHN0b3JlZCA9IHN0b3JhZ2UuZ2V0KCdzOmNvbnRleHQucmVmZXJyZXInKTtcbiAgICB2YXIgYWQgPSAoX2EgPSBhZHMocXVlcnkpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBzdG9yZWQ7XG4gICAgaWYgKCFhZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjdHgpIHtcbiAgICAgICAgY3R4LnJlZmVycmVyID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5yZWZlcnJlciksIGFkKTtcbiAgICB9XG4gICAgc3RvcmFnZS5zZXQoJ3M6Y29udGV4dC5yZWZlcnJlcicsIGFkKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBvYmogZS5nLiB7IGZvbzogJ2InLCBiYXI6ICdkJywgYmF6OiBbJzEyMycsICc0NTYnXX1cbiAqIEByZXR1cm5zIGUuZy4gJ2Zvbz1iJmJhcj1kJmJhej0xMjMmYmF6PTQ1NidcbiAqL1xudmFyIG9iamVjdFRvUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIHNlYXJjaFBhcmFtc18xID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBPYmplY3QuZW50cmllcyhvYmopLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgayA9IF9hWzBdLCB2ID0gX2FbMV07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAgICAgICAgIHYuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHNlYXJjaFBhcmFtc18xLmFwcGVuZChrLCB2YWx1ZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VhcmNoUGFyYW1zXzEuYXBwZW5kKGssIHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlYXJjaFBhcmFtc18xLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufTtcbnZhciBFbnZpcm9ubWVudEVucmljaG1lbnRQbHVnaW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRW52aXJvbm1lbnRFbnJpY2htZW50UGx1Z2luKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm5hbWUgPSAnUGFnZSBFbnJpY2htZW50JztcbiAgICAgICAgdGhpcy50eXBlID0gJ2JlZm9yZSc7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9ICcwLjEuMCc7XG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuICAgICAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoX2N0eCwgaW5zdGFuY2UpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSwgXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjbGllbnRIaW50cyh0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGlnaEVudHJvcHlWYWx1ZXNDbGllbnRIaW50cyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS51c2VyQWdlbnREYXRhID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF8xID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVzb2x2ZSgpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHRoaXMuZW5yaWNoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIC8vIE5vdGU6IFR5cGVzIGFyZSBvZmYgLSBjb250ZXh0IHNob3VsZCBuZXZlciBiZSB1bmRlZmluZWQgaGVyZSwgc2luY2UgaXQgaXMgc2V0IGFzIHBhcnQgb2YgZXZlbnQgY3JlYXRpb24uXG4gICAgICAgICAgICB2YXIgZXZ0Q3R4ID0gY3R4LmV2ZW50LmNvbnRleHQ7XG4gICAgICAgICAgICB2YXIgc2VhcmNoID0gZXZ0Q3R4LnBhZ2Uuc2VhcmNoIHx8ICcnO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdHlwZW9mIHNlYXJjaCA9PT0gJ29iamVjdCcgPyBvYmplY3RUb1F1ZXJ5U3RyaW5nKHNlYXJjaCkgOiBzZWFyY2g7XG4gICAgICAgICAgICBldnRDdHgudXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgICAgIGV2dEN0eC51c2VyQWdlbnREYXRhID0gX3RoaXMudXNlckFnZW50RGF0YTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHZhciBsb2NhbGUgPSBuYXZpZ2F0b3IudXNlckxhbmd1YWdlIHx8IG5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZ0Q3R4LmxvY2FsZSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxvY2FsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBldnRDdHgubG9jYWxlID0gbG9jYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF9hID0gZXZ0Q3R4LmxpYnJhcnkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChldnRDdHgubGlicmFyeSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnYW5hbHl0aWNzLmpzJyxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBcIlwiLmNvbmNhdChnZXRWZXJzaW9uVHlwZSgpID09PSAnd2ViJyA/ICduZXh0JyA6ICducG06bmV4dCcsIFwiLVwiKS5jb25jYXQodmVyc2lvbiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChxdWVyeSAmJiAhZXZ0Q3R4LmNhbXBhaWduKSB7XG4gICAgICAgICAgICAgICAgZXZ0Q3R4LmNhbXBhaWduID0gdXRtKHF1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhbXAgPSBhbXBJZCgpO1xuICAgICAgICAgICAgaWYgKGFtcCkge1xuICAgICAgICAgICAgICAgIGV2dEN0eC5hbXAgPSB7IGlkOiBhbXAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZmVycmVySWQocXVlcnksIGV2dEN0eCwgKF9iID0gX3RoaXMuaW5zdGFuY2Uub3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2UpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZXZ0Q3R4LnRpbWV6b25lID0gSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBicm93c2VyIGRvZXNuJ3QgaGF2ZSBzdXBwb3J0IGxlYXZlIHRpbWV6b25lIHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMuZW5yaWNoO1xuICAgICAgICB0aGlzLmlkZW50aWZ5ID0gdGhpcy5lbnJpY2g7XG4gICAgICAgIHRoaXMucGFnZSA9IHRoaXMuZW5yaWNoO1xuICAgICAgICB0aGlzLmdyb3VwID0gdGhpcy5lbnJpY2g7XG4gICAgICAgIHRoaXMuYWxpYXMgPSB0aGlzLmVucmljaDtcbiAgICAgICAgdGhpcy5zY3JlZW4gPSB0aGlzLmVucmljaDtcbiAgICB9XG4gICAgcmV0dXJuIEVudmlyb25tZW50RW5yaWNobWVudFBsdWdpbjtcbn0oKSk7XG5leHBvcnQgdmFyIGVudkVucmljaG1lbnQgPSBuZXcgRW52aXJvbm1lbnRFbnJpY2htZW50UGx1Z2luKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadLegacyVideoPlugins: () => (/* binding */ loadLegacyVideoPlugins)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction loadLegacyVideoPlugins(analytics) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var plugins;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() */ \"vendor-chunks/@segment\").then(__webpack_require__.t.bind(__webpack_require__, /*! @segment/analytics.js-video-plugins/dist/index.umd.js */ \"(rsc)/./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js\", 23))\n                    // This is super gross, but we need to support the `window.analytics.plugins` namespace\n                    // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n                    // @ts-expect-error\n                ];\n                case 1:\n                    plugins = _a.sent();\n                    // This is super gross, but we need to support the `window.analytics.plugins` namespace\n                    // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n                    // @ts-expect-error\n                    analytics._plugins = plugins;\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9sZWdhY3ktdmlkZW8tcGx1Z2lucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUN4QztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0EsNkNBQTZDLG9RQUUrQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2xlZ2FjeS12aWRlby1wbHVnaW5zL2luZGV4LmpzP2ZlZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRMZWdhY3lWaWRlb1BsdWdpbnMoYW5hbHl0aWNzKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGx1Z2lucztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgICAgICdAc2VnbWVudC9hbmFseXRpY3MuanMtdmlkZW8tcGx1Z2lucy9kaXN0L2luZGV4LnVtZC5qcycpXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgc3VwZXIgZ3Jvc3MsIGJ1dCB3ZSBuZWVkIHRvIHN1cHBvcnQgdGhlIGB3aW5kb3cuYW5hbHl0aWNzLnBsdWdpbnNgIG5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGlzIGxpbmtlZCBpbiB0aGUgc2VnbWVudCBkb2NzIGluIG9yZGVyIHRvIGJlIGJhY2t3YXJkcyBjb21wYXRpYmxlIHdpdGggYWpzLWNsYXNzaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHN1cGVyIGdyb3NzLCBidXQgd2UgbmVlZCB0byBzdXBwb3J0IHRoZSBgd2luZG93LmFuYWx5dGljcy5wbHVnaW5zYCBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBpcyBsaW5rZWQgaW4gdGhlIHNlZ21lbnQgZG9jcyBpbiBvcmRlciB0byBiZSBiYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoIGFqcy1jbGFzc2ljXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzLl9wbHVnaW5zID0gcGx1Z2lucztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyDestinationMiddleware: () => (/* binding */ applyDestinationMiddleware),\n/* harmony export */   sourceMiddlewarePlugin: () => (/* binding */ sourceMiddlewarePlugin)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/to-facade */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\");\n\n\n\nfunction applyDestinationMiddleware(destination, evt, middleware) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        function applyMiddleware(event, fn) {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n                var nextCalled, returnedEvent;\n                var _a;\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            nextCalled = false;\n                            returnedEvent = null;\n                            return [4 /*yield*/, fn({\n                                    payload: (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(event, {\n                                        clone: true,\n                                        traverse: false,\n                                    }),\n                                    integration: destination,\n                                    next: function (evt) {\n                                        nextCalled = true;\n                                        if (evt === null) {\n                                            returnedEvent = null;\n                                        }\n                                        if (evt) {\n                                            returnedEvent = evt.obj;\n                                        }\n                                    },\n                                })];\n                        case 1:\n                            _b.sent();\n                            if (!nextCalled && returnedEvent !== null) {\n                                returnedEvent = returnedEvent;\n                                returnedEvent.integrations = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, event.integrations), (_a = {}, _a[destination] = false, _a));\n                            }\n                            return [2 /*return*/, returnedEvent];\n                    }\n                });\n            });\n        }\n        var modifiedEvent, _i, middleware_1, md, result;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    modifiedEvent = (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(evt, {\n                        clone: true,\n                        traverse: false,\n                    }).rawEvent();\n                    _i = 0, middleware_1 = middleware;\n                    _a.label = 1;\n                case 1:\n                    if (!(_i < middleware_1.length)) return [3 /*break*/, 4];\n                    md = middleware_1[_i];\n                    return [4 /*yield*/, applyMiddleware(modifiedEvent, md)];\n                case 2:\n                    result = _a.sent();\n                    if (result === null) {\n                        return [2 /*return*/, null];\n                    }\n                    modifiedEvent = result;\n                    _a.label = 3;\n                case 3:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 4: return [2 /*return*/, modifiedEvent];\n            }\n        });\n    });\n}\nfunction sourceMiddlewarePlugin(fn, integrations) {\n    function apply(ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var nextCalled;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        nextCalled = false;\n                        return [4 /*yield*/, fn({\n                                payload: (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(ctx.event, {\n                                    clone: true,\n                                    traverse: false,\n                                }),\n                                integrations: integrations !== null && integrations !== void 0 ? integrations : {},\n                                next: function (evt) {\n                                    nextCalled = true;\n                                    if (evt) {\n                                        ctx.event = evt.obj;\n                                    }\n                                },\n                            })];\n                    case 1:\n                        _a.sent();\n                        if (!nextCalled) {\n                            throw new _core_context__WEBPACK_IMPORTED_MODULE_2__.ContextCancelation({\n                                retry: false,\n                                type: 'middleware_cancellation',\n                                reason: 'Middleware `next` function skipped',\n                            });\n                        }\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    }\n    return {\n        name: \"Source Middleware \".concat(fn.name),\n        type: 'before',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function (ctx) { return Promise.resolve(ctx); },\n        track: apply,\n        page: apply,\n        identify: apply,\n        alias: apply,\n        group: apply,\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9taWRkbGV3YXJlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlEO0FBQ0Q7QUFDVDtBQUN4QztBQUNQLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxtQkFBbUIsZ0RBQVM7QUFDNUI7QUFDQTtBQUNBLHVCQUF1QixrREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHdEQUFRO0FBQ3JEO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsK0JBQStCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBLG9DQUFvQyx3REFBUTtBQUM1QztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx3REFBUTtBQUNqRDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGtIQUFrSDtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNkRBQWtCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsY0FBYztBQUM5QywrQkFBK0IsOEJBQThCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL21pZGRsZXdhcmUvaW5kZXguanM/OTg5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IHRvRmFjYWRlIH0gZnJvbSAnLi4vLi4vbGliL3RvLWZhY2FkZSc7XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUoZGVzdGluYXRpb24sIGV2dCwgbWlkZGxld2FyZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gYXBwbHlNaWRkbGV3YXJlKGV2ZW50LCBmbikge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0Q2FsbGVkLCByZXR1cm5lZEV2ZW50O1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogdG9GYWNhZGUoZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uOiBkZXN0aW5hdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkRXZlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkRXZlbnQgPSBldnQub2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkICYmIHJldHVybmVkRXZlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudCA9IHJldHVybmVkRXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkRXZlbnQuaW50ZWdyYXRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50LmludGVncmF0aW9ucyksIChfYSA9IHt9LCBfYVtkZXN0aW5hdGlvbl0gPSBmYWxzZSwgX2EpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJldHVybmVkRXZlbnRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbW9kaWZpZWRFdmVudCwgX2ksIG1pZGRsZXdhcmVfMSwgbWQsIHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRFdmVudCA9IHRvRmFjYWRlKGV2dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pLnJhd0V2ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9pID0gMCwgbWlkZGxld2FyZV8xID0gbWlkZGxld2FyZTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBtaWRkbGV3YXJlXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIG1kID0gbWlkZGxld2FyZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXBwbHlNaWRkbGV3YXJlKG1vZGlmaWVkRXZlbnQsIG1kKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtb2RpZmllZEV2ZW50ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBfaSsrO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBtb2RpZmllZEV2ZW50XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc291cmNlTWlkZGxld2FyZVBsdWdpbihmbiwgaW50ZWdyYXRpb25zKSB7XG4gICAgZnVuY3Rpb24gYXBwbHkoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXh0Q2FsbGVkO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiB0b0ZhY2FkZShjdHguZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBpbnRlZ3JhdGlvbnMgIT09IG51bGwgJiYgaW50ZWdyYXRpb25zICE9PSB2b2lkIDAgPyBpbnRlZ3JhdGlvbnMgOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmV2ZW50ID0gZXZ0Lm9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV4dENhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtaWRkbGV3YXJlX2NhbmNlbGxhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ01pZGRsZXdhcmUgYG5leHRgIGZ1bmN0aW9uIHNraXBwZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBcIlNvdXJjZSBNaWRkbGV3YXJlIFwiLmNvbmNhdChmbi5uYW1lKSxcbiAgICAgICAgdHlwZTogJ2JlZm9yZScsXG4gICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgIGlzTG9hZGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoY3R4KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTsgfSxcbiAgICAgICAgdHJhY2s6IGFwcGx5LFxuICAgICAgICBwYWdlOiBhcHBseSxcbiAgICAgICAgaWRlbnRpZnk6IGFwcGx5LFxuICAgICAgICBhbGlhczogYXBwbHksXG4gICAgICAgIGdyb3VwOiBhcHBseSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionDestination: () => (/* binding */ ActionDestination),\n/* harmony export */   remoteLoader: () => (/* binding */ remoteLoader)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/load-script */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\nvar ActionDestination = /** @class */ (function () {\n    function ActionDestination(name, action) {\n        this.version = '1.0.0';\n        this.alternativeNames = [];\n        this.loadPromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__.createDeferred)();\n        this.middleware = [];\n        this.alias = this._createMethod('alias');\n        this.group = this._createMethod('group');\n        this.identify = this._createMethod('identify');\n        this.page = this._createMethod('page');\n        this.screen = this._createMethod('screen');\n        this.track = this._createMethod('track');\n        this.action = action;\n        this.name = name;\n        this.type = action.type;\n        this.alternativeNames.push(action.name);\n    }\n    ActionDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        /** Make sure we only apply destination filters to actions of the \"destination\" type to avoid causing issues for hybrid destinations */\n        if (this.type === 'destination') {\n            (_a = this.middleware).push.apply(_a, fn);\n        }\n    };\n    ActionDestination.prototype.transform = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var modifiedEvent;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_2__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        modifiedEvent = _a.sent();\n                        if (modifiedEvent === null) {\n                            ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation({\n                                retry: false,\n                                reason: 'dropped by destination middleware',\n                            }));\n                        }\n                        return [2 /*return*/, new _core_context__WEBPACK_IMPORTED_MODULE_4__.Context(modifiedEvent)];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype._createMethod = function (methodName) {\n        var _this = this;\n        return function (ctx) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var transformedContext, error_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.action[methodName])\n                            return [2 /*return*/, ctx];\n                        transformedContext = ctx;\n                        if (!(this.type === 'destination')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.transform(ctx)];\n                    case 1:\n                        transformedContext = _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 5, , 6]);\n                        return [4 /*yield*/, this.ready()];\n                    case 3:\n                        if (!(_a.sent())) {\n                            throw new Error('Something prevented the destination from getting ready');\n                        }\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: methodName,\n                            type: 'action',\n                        });\n                        return [4 /*yield*/, this.action[methodName](transformedContext)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: methodName,\n                            type: 'action',\n                            didError: true,\n                        });\n                        throw error_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        }); };\n    };\n    /* --- PASSTHROUGH METHODS --- */\n    ActionDestination.prototype.isLoaded = function () {\n        return this.action.isLoaded();\n    };\n    ActionDestination.prototype.ready = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.loadPromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, true];\n                    case 2:\n                        _a = _b.sent();\n                        return [2 /*return*/, false];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype.load = function (ctx, analytics) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var loadP, _a, _b, error_2;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.loadPromise.isSettled()) {\n                            return [2 /*return*/, this.loadPromise.promise];\n                        }\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 3, , 4]);\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: 'load',\n                            type: 'action',\n                        });\n                        loadP = this.action.load(ctx, analytics);\n                        _b = (_a = this.loadPromise).resolve;\n                        return [4 /*yield*/, loadP];\n                    case 2:\n                        _b.apply(_a, [_c.sent()]);\n                        return [2 /*return*/, loadP];\n                    case 3:\n                        error_2 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: 'load',\n                            type: 'action',\n                            didError: true,\n                        });\n                        this.loadPromise.reject(error_2);\n                        throw error_2;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype.unload = function (ctx, analytics) {\n        var _a, _b;\n        return (_b = (_a = this.action).unload) === null || _b === void 0 ? void 0 : _b.call(_a, ctx, analytics);\n    };\n    return ActionDestination;\n}());\n\nfunction validate(pluginLike) {\n    if (!Array.isArray(pluginLike)) {\n        throw new Error('Not a valid list of plugins');\n    }\n    var required = ['load', 'isLoaded', 'name', 'version', 'type'];\n    pluginLike.forEach(function (plugin) {\n        required.forEach(function (method) {\n            var _a;\n            if (plugin[method] === undefined) {\n                throw new Error(\"Plugin: \".concat((_a = plugin.name) !== null && _a !== void 0 ? _a : 'unknown', \" missing required function \").concat(method));\n            }\n        });\n    });\n    return true;\n}\nfunction isPluginDisabled(userIntegrations, remotePlugin) {\n    var creationNameEnabled = userIntegrations[remotePlugin.creationName];\n    var currentNameEnabled = userIntegrations[remotePlugin.name];\n    // Check that the plugin isn't explicitly enabled when All: false\n    if (userIntegrations.All === false &&\n        !creationNameEnabled &&\n        !currentNameEnabled) {\n        return true;\n    }\n    // Check that the plugin isn't explicitly disabled\n    if (creationNameEnabled === false || currentNameEnabled === false) {\n        return true;\n    }\n    return false;\n}\nfunction loadPluginFactory(remotePlugin, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var defaultCdn, cdn, urlSplit, name_1, obfuscatedURL, error_3, err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 9, , 10]);\n                    defaultCdn = new RegExp('https://cdn.segment.(com|build)');\n                    cdn = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_6__.getCDN)();\n                    if (!obfuscate) return [3 /*break*/, 6];\n                    urlSplit = remotePlugin.url.split('/');\n                    name_1 = urlSplit[urlSplit.length - 2];\n                    obfuscatedURL = remotePlugin.url.replace(name_1, btoa(name_1).replace(/=/g, ''));\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 5]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(obfuscatedURL.replace(defaultCdn, cdn))];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3:\n                    error_3 = _a.sent();\n                    // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n                    // We should use the unobfuscated version as a fallback.\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(remotePlugin.url.replace(defaultCdn, cdn))];\n                case 4:\n                    // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n                    // We should use the unobfuscated version as a fallback.\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 5: return [3 /*break*/, 8];\n                case 6: return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(remotePlugin.url.replace(defaultCdn, cdn))];\n                case 7:\n                    _a.sent();\n                    _a.label = 8;\n                case 8:\n                    // @ts-expect-error\n                    if (typeof window[remotePlugin.libraryName] === 'function') {\n                        // @ts-expect-error\n                        return [2 /*return*/, window[remotePlugin.libraryName]];\n                    }\n                    return [3 /*break*/, 10];\n                case 9:\n                    err_1 = _a.sent();\n                    console.error('Failed to create PluginFactory', remotePlugin);\n                    throw err_1;\n                case 10: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction remoteLoader(settings, userIntegrations, mergedIntegrations, options, routingMiddleware, pluginSources) {\n    var _a, _b, _c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var allPlugins, routingRules, pluginPromises;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    allPlugins = [];\n                    routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n                    pluginPromises = ((_c = settings.remotePlugins) !== null && _c !== void 0 ? _c : []).map(function (remotePlugin) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                        var pluginFactory, _a, plugin, plugins, routing_1, error_4;\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (isPluginDisabled(userIntegrations, remotePlugin))\n                                        return [2 /*return*/];\n                                    _b.label = 1;\n                                case 1:\n                                    _b.trys.push([1, 6, , 7]);\n                                    _a = (pluginSources === null || pluginSources === void 0 ? void 0 : pluginSources.find(function (_a) {\n                                        var pluginName = _a.pluginName;\n                                        return pluginName === remotePlugin.name;\n                                    }));\n                                    if (_a) return [3 /*break*/, 3];\n                                    return [4 /*yield*/, loadPluginFactory(remotePlugin, options === null || options === void 0 ? void 0 : options.obfuscate)];\n                                case 2:\n                                    _a = (_b.sent());\n                                    _b.label = 3;\n                                case 3:\n                                    pluginFactory = _a;\n                                    if (!pluginFactory) return [3 /*break*/, 5];\n                                    return [4 /*yield*/, pluginFactory((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, remotePlugin.settings), mergedIntegrations[remotePlugin.name]))];\n                                case 4:\n                                    plugin = _b.sent();\n                                    plugins = Array.isArray(plugin) ? plugin : [plugin];\n                                    validate(plugins);\n                                    routing_1 = routingRules.filter(function (rule) { return rule.destinationName === remotePlugin.creationName; });\n                                    plugins.forEach(function (plugin) {\n                                        var wrapper = new ActionDestination(remotePlugin.creationName, plugin);\n                                        if (routing_1.length && routingMiddleware) {\n                                            wrapper.addMiddleware(routingMiddleware);\n                                        }\n                                        allPlugins.push(wrapper);\n                                    });\n                                    _b.label = 5;\n                                case 5: return [3 /*break*/, 7];\n                                case 6:\n                                    error_4 = _b.sent();\n                                    console.warn('Failed to load Remote Plugin', error_4);\n                                    return [3 /*break*/, 7];\n                                case 7: return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                    return [4 /*yield*/, Promise.all(pluginPromises)];\n                case 1:\n                    _d.sent();\n                    return [2 /*return*/, allPlugins.filter(Boolean)];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yZW1vdGUtbG9hZGVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDTjtBQUNOO0FBQ2U7QUFDSztBQUNTO0FBQ1I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0ZBQWM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBLGlEQUFpRCx1RUFBMEI7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDZEQUFrQjtBQUM3RDtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0Esa0RBQWtELGtEQUFPO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTyxnREFBUztBQUNoRDtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtRkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDREQUFVO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUlBQXVJLE9BQU8sZ0RBQVM7QUFDdko7QUFDQSwrQkFBK0Isa0RBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0YsNERBQTREO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQixJQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3JlbW90ZS1sb2FkZXIvaW5kZXguanM/OWE3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgbG9hZFNjcmlwdCB9IGZyb20gJy4uLy4uL2xpYi9sb2FkLXNjcmlwdCc7XG5pbXBvcnQgeyBnZXRDRE4gfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlLCB9IGZyb20gJy4uL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IHJlY29yZEludGVncmF0aW9uTWV0cmljIH0gZnJvbSAnLi4vLi4vY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbnZhciBBY3Rpb25EZXN0aW5hdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBY3Rpb25EZXN0aW5hdGlvbihuYW1lLCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gJzEuMC4wJztcbiAgICAgICAgdGhpcy5hbHRlcm5hdGl2ZU5hbWVzID0gW107XG4gICAgICAgIHRoaXMubG9hZFByb21pc2UgPSBjcmVhdGVEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnYWxpYXMnKTtcbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnZ3JvdXAnKTtcbiAgICAgICAgdGhpcy5pZGVudGlmeSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnaWRlbnRpZnknKTtcbiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdwYWdlJyk7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdzY3JlZW4nKTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2snKTtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudHlwZSA9IGFjdGlvbi50eXBlO1xuICAgICAgICB0aGlzLmFsdGVybmF0aXZlTmFtZXMucHVzaChhY3Rpb24ubmFtZSk7XG4gICAgfVxuICAgIEFjdGlvbkRlc3RpbmF0aW9uLnByb3RvdHlwZS5hZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZm5bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICAvKiogTWFrZSBzdXJlIHdlIG9ubHkgYXBwbHkgZGVzdGluYXRpb24gZmlsdGVycyB0byBhY3Rpb25zIG9mIHRoZSBcImRlc3RpbmF0aW9uXCIgdHlwZSB0byBhdm9pZCBjYXVzaW5nIGlzc3VlcyBmb3IgaHlicmlkIGRlc3RpbmF0aW9ucyAqL1xuICAgICAgICBpZiAodGhpcy50eXBlID09PSAnZGVzdGluYXRpb24nKSB7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLm1pZGRsZXdhcmUpLnB1c2guYXBwbHkoX2EsIGZuKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZGlmaWVkRXZlbnQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlKHRoaXMubmFtZSwgY3R4LmV2ZW50LCB0aGlzLm1pZGRsZXdhcmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRFdmVudCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RpZmllZEV2ZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbmNlbChuZXcgQ29udGV4dENhbmNlbGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdkcm9wcGVkIGJ5IGRlc3RpbmF0aW9uIG1pZGRsZXdhcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgQ29udGV4dChtb2RpZmllZEV2ZW50KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLl9jcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN0eCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybWVkQ29udGV4dCwgZXJyb3JfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5hY3Rpb25bbWV0aG9kTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvbnRleHQgPSBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudHJhbnNmb3JtKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvbnRleHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlYWR5KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYS5zZW50KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb21ldGhpbmcgcHJldmVudGVkIHRoZSBkZXN0aW5hdGlvbiBmcm9tIGdldHRpbmcgcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5hY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBtZXRob2ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmFjdGlvblttZXRob2ROYW1lXSh0cmFuc2Zvcm1lZENvbnRleHQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMuYWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogbWV0aG9kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JfMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgfTtcbiAgICAvKiAtLS0gUEFTU1RIUk9VR0ggTUVUSE9EUyAtLS0gKi9cbiAgICBBY3Rpb25EZXN0aW5hdGlvbi5wcm90b3R5cGUuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5pc0xvYWRlZCgpO1xuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2FkUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFjdGlvbkRlc3RpbmF0aW9uLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsb2FkUCwgX2EsIF9iLCBlcnJvcl8yO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFByb21pc2UuaXNTZXR0bGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5sb2FkUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5hY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQID0gdGhpcy5hY3Rpb24ubG9hZChjdHgsIGFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IChfYSA9IHRoaXMubG9hZFByb21pc2UpLnJlc29sdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmFwcGx5KF9hLCBbX2Muc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbG9hZFBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLmFjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWU6ICdsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUHJvbWlzZS5yZWplY3QoZXJyb3JfMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBY3Rpb25EZXN0aW5hdGlvbi5wcm90b3R5cGUudW5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLmFjdGlvbikudW5sb2FkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgY3R4LCBhbmFseXRpY3MpO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbkRlc3RpbmF0aW9uO1xufSgpKTtcbmV4cG9ydCB7IEFjdGlvbkRlc3RpbmF0aW9uIH07XG5mdW5jdGlvbiB2YWxpZGF0ZShwbHVnaW5MaWtlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBsdWdpbkxpa2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQgbGlzdCBvZiBwbHVnaW5zJyk7XG4gICAgfVxuICAgIHZhciByZXF1aXJlZCA9IFsnbG9hZCcsICdpc0xvYWRlZCcsICduYW1lJywgJ3ZlcnNpb24nLCAndHlwZSddO1xuICAgIHBsdWdpbkxpa2UuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgIHJlcXVpcmVkLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKHBsdWdpblttZXRob2RdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbHVnaW46IFwiLmNvbmNhdCgoX2EgPSBwbHVnaW4ubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3Vua25vd24nLCBcIiBtaXNzaW5nIHJlcXVpcmVkIGZ1bmN0aW9uIFwiKS5jb25jYXQobWV0aG9kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNQbHVnaW5EaXNhYmxlZCh1c2VySW50ZWdyYXRpb25zLCByZW1vdGVQbHVnaW4pIHtcbiAgICB2YXIgY3JlYXRpb25OYW1lRW5hYmxlZCA9IHVzZXJJbnRlZ3JhdGlvbnNbcmVtb3RlUGx1Z2luLmNyZWF0aW9uTmFtZV07XG4gICAgdmFyIGN1cnJlbnROYW1lRW5hYmxlZCA9IHVzZXJJbnRlZ3JhdGlvbnNbcmVtb3RlUGx1Z2luLm5hbWVdO1xuICAgIC8vIENoZWNrIHRoYXQgdGhlIHBsdWdpbiBpc24ndCBleHBsaWNpdGx5IGVuYWJsZWQgd2hlbiBBbGw6IGZhbHNlXG4gICAgaWYgKHVzZXJJbnRlZ3JhdGlvbnMuQWxsID09PSBmYWxzZSAmJlxuICAgICAgICAhY3JlYXRpb25OYW1lRW5hYmxlZCAmJlxuICAgICAgICAhY3VycmVudE5hbWVFbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBDaGVjayB0aGF0IHRoZSBwbHVnaW4gaXNuJ3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmIChjcmVhdGlvbk5hbWVFbmFibGVkID09PSBmYWxzZSB8fCBjdXJyZW50TmFtZUVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBsb2FkUGx1Z2luRmFjdG9yeShyZW1vdGVQbHVnaW4sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRDZG4sIGNkbiwgdXJsU3BsaXQsIG5hbWVfMSwgb2JmdXNjYXRlZFVSTCwgZXJyb3JfMywgZXJyXzE7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgOSwgLCAxMF0pO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2RuID0gbmV3IFJlZ0V4cCgnaHR0cHM6Ly9jZG4uc2VnbWVudC4oY29tfGJ1aWxkKScpO1xuICAgICAgICAgICAgICAgICAgICBjZG4gPSBnZXRDRE4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmZ1c2NhdGUpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICB1cmxTcGxpdCA9IHJlbW90ZVBsdWdpbi51cmwuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZV8xID0gdXJsU3BsaXRbdXJsU3BsaXQubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRVUkwgPSByZW1vdGVQbHVnaW4udXJsLnJlcGxhY2UobmFtZV8xLCBidG9hKG5hbWVfMSkucmVwbGFjZSgvPS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KG9iZnVzY2F0ZWRVUkwucmVwbGFjZShkZWZhdWx0Q2RuLCBjZG4pKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRHVlIHRvIHN5bmNpbmcgY29uY2VybnMgaXQgaXMgcG9zc2libGUgdGhhdCB0aGUgb2JmdXNjYXRlZCBhY3Rpb24gZGVzdGluYXRpb24gKG9yIHJlcXVlc3RlZCB2ZXJzaW9uKSBtaWdodCBub3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHNob3VsZCB1c2UgdGhlIHVub2JmdXNjYXRlZCB2ZXJzaW9uIGFzIGEgZmFsbGJhY2suXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRTY3JpcHQocmVtb3RlUGx1Z2luLnVybC5yZXBsYWNlKGRlZmF1bHRDZG4sIGNkbikpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIER1ZSB0byBzeW5jaW5nIGNvbmNlcm5zIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIG9iZnVzY2F0ZWQgYWN0aW9uIGRlc3RpbmF0aW9uIChvciByZXF1ZXN0ZWQgdmVyc2lvbikgbWlnaHQgbm90IGV4aXN0LlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgdXNlIHRoZSB1bm9iZnVzY2F0ZWQgdmVyc2lvbiBhcyBhIGZhbGxiYWNrLlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KHJlbW90ZVBsdWdpbi51cmwucmVwbGFjZShkZWZhdWx0Q2RuLCBjZG4pKV07XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gODtcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3dbcmVtb3RlUGx1Z2luLmxpYnJhcnlOYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHdpbmRvd1tyZW1vdGVQbHVnaW4ubGlicmFyeU5hbWVdXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMF07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBQbHVnaW5GYWN0b3J5JywgcmVtb3RlUGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzE7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdGVMb2FkZXIoc2V0dGluZ3MsIHVzZXJJbnRlZ3JhdGlvbnMsIG1lcmdlZEludGVncmF0aW9ucywgb3B0aW9ucywgcm91dGluZ01pZGRsZXdhcmUsIHBsdWdpblNvdXJjZXMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGxQbHVnaW5zLCByb3V0aW5nUnVsZXMsIHBsdWdpblByb21pc2VzO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9kKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9kLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBhbGxQbHVnaW5zID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJvdXRpbmdSdWxlcyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpblByb21pc2VzID0gKChfYyA9IHNldHRpbmdzLnJlbW90ZVBsdWdpbnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFtdKS5tYXAoZnVuY3Rpb24gKHJlbW90ZVBsdWdpbikgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbkZhY3RvcnksIF9hLCBwbHVnaW4sIHBsdWdpbnMsIHJvdXRpbmdfMSwgZXJyb3JfNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1BsdWdpbkRpc2FibGVkKHVzZXJJbnRlZ3JhdGlvbnMsIHJlbW90ZVBsdWdpbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsIDYsICwgN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAocGx1Z2luU291cmNlcyA9PT0gbnVsbCB8fCBwbHVnaW5Tb3VyY2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5Tb3VyY2VzLmZpbmQoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbk5hbWUgPSBfYS5wbHVnaW5OYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5OYW1lID09PSByZW1vdGVQbHVnaW4ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUGx1Z2luRmFjdG9yeShyZW1vdGVQbHVnaW4sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vYmZ1c2NhdGUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAoX2Iuc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luRmFjdG9yeSA9IF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW5GYWN0b3J5KSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbkZhY3RvcnkoX19hc3NpZ24oX19hc3NpZ24oe30sIHJlbW90ZVBsdWdpbi5zZXR0aW5ncyksIG1lcmdlZEludGVncmF0aW9uc1tyZW1vdGVQbHVnaW4ubmFtZV0pKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbiA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbnMgPSBBcnJheS5pc0FycmF5KHBsdWdpbikgPyBwbHVnaW4gOiBbcGx1Z2luXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlKHBsdWdpbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGluZ18xID0gcm91dGluZ1J1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkgeyByZXR1cm4gcnVsZS5kZXN0aW5hdGlvbk5hbWUgPT09IHJlbW90ZVBsdWdpbi5jcmVhdGlvbk5hbWU7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IG5ldyBBY3Rpb25EZXN0aW5hdGlvbihyZW1vdGVQbHVnaW4uY3JlYXRpb25OYW1lLCBwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3V0aW5nXzEubGVuZ3RoICYmIHJvdXRpbmdNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYWRkTWlkZGxld2FyZShyb3V0aW5nTWlkZGxld2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFBsdWdpbnMucHVzaCh3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl80ID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBSZW1vdGUgUGx1Z2luJywgZXJyb3JfNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwocGx1Z2luUHJvbWlzZXMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9kLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFsbFBsdWdpbnMuZmlsdGVyKEJvb2xlYW4pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remoteMiddlewares: () => (/* binding */ remoteMiddlewares)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/environment */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/load-script */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n\n\n\n\nfunction remoteMiddlewares(ctx, settings, obfuscate) {\n    var _a;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, remoteMiddleware, names, scripts, middleware;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_1__.isServer)()) {\n                        return [2 /*return*/, []];\n                    }\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__.getNextIntegrationsURL)();\n                    remoteMiddleware = (_a = settings.enabledMiddleware) !== null && _a !== void 0 ? _a : {};\n                    names = Object.entries(remoteMiddleware)\n                        .filter(function (_a) {\n                        var _ = _a[0], enabled = _a[1];\n                        return enabled;\n                    })\n                        .map(function (_a) {\n                        var name = _a[0];\n                        return name;\n                    });\n                    scripts = names.map(function (name) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n                        var nonNamespaced, bundleName, fullPath, error_1;\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    nonNamespaced = name.replace('@segment/', '');\n                                    bundleName = nonNamespaced;\n                                    if (obfuscate) {\n                                        bundleName = btoa(nonNamespaced).replace(/=/g, '');\n                                    }\n                                    fullPath = \"\".concat(path, \"/middleware/\").concat(bundleName, \"/latest/\").concat(bundleName, \".js.gz\");\n                                    _a.label = 1;\n                                case 1:\n                                    _a.trys.push([1, 3, , 4]);\n                                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_3__.loadScript)(fullPath)\n                                        // @ts-ignore\n                                    ];\n                                case 2:\n                                    _a.sent();\n                                    // @ts-ignore\n                                    return [2 /*return*/, window[\"\".concat(nonNamespaced, \"Middleware\")]];\n                                case 3:\n                                    error_1 = _a.sent();\n                                    ctx.log('error', error_1);\n                                    ctx.stats.increment('failed_remote_middleware');\n                                    return [3 /*break*/, 4];\n                                case 4: return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                    return [4 /*yield*/, Promise.all(scripts)];\n                case 1:\n                    middleware = _b.sent();\n                    middleware = middleware.filter(Boolean);\n                    return [2 /*return*/, middleware];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yZW1vdGUtbWlkZGxld2FyZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUErQztBQUNHO0FBQ0M7QUFDVTtBQUN0RDtBQUNQO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0Esd0JBQXdCLDJEQUFRO0FBQ2hDO0FBQ0E7QUFDQSwyQkFBMkIsc0VBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLDBEQUEwRCxPQUFPLGdEQUFTO0FBQzFFO0FBQ0EsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsNERBQVU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCLElBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yZW1vdGUtbWlkZGxld2FyZS9pbmRleC5qcz81YWYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSAnLi4vLi4vY29yZS9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBsb2FkU2NyaXB0IH0gZnJvbSAnLi4vLi4vbGliL2xvYWQtc2NyaXB0JztcbmltcG9ydCB7IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmV4cG9ydCBmdW5jdGlvbiByZW1vdGVNaWRkbGV3YXJlcyhjdHgsIHNldHRpbmdzLCBvYmZ1c2NhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCwgcmVtb3RlTWlkZGxld2FyZSwgbmFtZXMsIHNjcmlwdHMsIG1pZGRsZXdhcmU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NlcnZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBnZXROZXh0SW50ZWdyYXRpb25zVVJMKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZU1pZGRsZXdhcmUgPSAoX2EgPSBzZXR0aW5ncy5lbmFibGVkTWlkZGxld2FyZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzID0gT2JqZWN0LmVudHJpZXMocmVtb3RlTWlkZGxld2FyZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgXyA9IF9hWzBdLCBlbmFibGVkID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9hWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHRzID0gbmFtZXMubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9uTmFtZXNwYWNlZCwgYnVuZGxlTmFtZSwgZnVsbFBhdGgsIGVycm9yXzE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25OYW1lc3BhY2VkID0gbmFtZS5yZXBsYWNlKCdAc2VnbWVudC8nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVOYW1lID0gbm9uTmFtZXNwYWNlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmZ1c2NhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVOYW1lID0gYnRvYShub25OYW1lc3BhY2VkKS5yZXBsYWNlKC89L2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxQYXRoID0gXCJcIi5jb25jYXQocGF0aCwgXCIvbWlkZGxld2FyZS9cIikuY29uY2F0KGJ1bmRsZU5hbWUsIFwiL2xhdGVzdC9cIikuY29uY2F0KGJ1bmRsZU5hbWUsIFwiLmpzLmd6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFNjcmlwdChmdWxsUGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2luZG93W1wiXCIuY29uY2F0KG5vbk5hbWVzcGFjZWQsIFwiTWlkZGxld2FyZVwiKV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnZXJyb3InLCBlcnJvcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2ZhaWxlZF9yZW1vdGVfbWlkZGxld2FyZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHNjcmlwdHMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZXdhcmUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZXdhcmUgPSBtaWRkbGV3YXJlLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG1pZGRsZXdhcmVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tsubMiddleware: () => (/* binding */ tsubMiddleware)\n/* harmony export */ });\n/* harmony import */ var _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vendor/tsub/tsub */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js\");\n/* harmony import */ var _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__);\n// @ts-ignore\n\nvar tsubMiddleware = function (rules) {\n    return function (_a) {\n        var payload = _a.payload, integration = _a.integration, next = _a.next;\n        var store = new _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__.Store(rules);\n        var rulesToApply = store.getRulesByDestinationName(integration);\n        rulesToApply.forEach(function (rule) {\n            var matchers = rule.matchers, transformers = rule.transformers;\n            for (var i = 0; i < matchers.length; i++) {\n                if (_vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__.matches(payload.obj, matchers[i])) {\n                    payload.obj = _vendor_tsub_tsub__WEBPACK_IMPORTED_MODULE_0__.transform(payload.obj, transformers[i]);\n                    if (payload.obj === null) {\n                        return next(null);\n                    }\n                }\n            }\n        });\n        next(payload);\n    };\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yb3V0aW5nLW1pZGRsZXdhcmUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDK0M7QUFDeEM7QUFDUDtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxQkFBcUI7QUFDakQsb0JBQW9CLHNEQUFZO0FBQ2hDLGtDQUFrQyx3REFBYztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yb3V0aW5nLW1pZGRsZXdhcmUvaW5kZXguanM/ZjNlMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtaWdub3JlXG5pbXBvcnQgKiBhcyB0c3ViIGZyb20gJy4uLy4uL3ZlbmRvci90c3ViL3RzdWInO1xuZXhwb3J0IHZhciB0c3ViTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChydWxlcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBfYS5wYXlsb2FkLCBpbnRlZ3JhdGlvbiA9IF9hLmludGVncmF0aW9uLCBuZXh0ID0gX2EubmV4dDtcbiAgICAgICAgdmFyIHN0b3JlID0gbmV3IHRzdWIuU3RvcmUocnVsZXMpO1xuICAgICAgICB2YXIgcnVsZXNUb0FwcGx5ID0gc3RvcmUuZ2V0UnVsZXNCeURlc3RpbmF0aW9uTmFtZShpbnRlZ3JhdGlvbik7XG4gICAgICAgIHJ1bGVzVG9BcHBseS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlcnMgPSBydWxlLm1hdGNoZXJzLCB0cmFuc2Zvcm1lcnMgPSBydWxlLnRyYW5zZm9ybWVycztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodHN1Yi5tYXRjaGVzKHBheWxvYWQub2JqLCBtYXRjaGVyc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5vYmogPSB0c3ViLnRyYW5zZm9ybShwYXlsb2FkLm9iaiwgdHJhbnNmb3JtZXJzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQub2JqID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG5leHQocGF5bG9hZCk7XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schemaFilter: () => (/* binding */ schemaFilter)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n\n\nfunction disabledActionDestinations(plan, settings) {\n    var _a, _b;\n    if (!plan || !Object.keys(plan)) {\n        return {};\n    }\n    var disabledIntegrations = plan.integrations\n        ? Object.keys(plan.integrations).filter(function (i) { return plan.integrations[i] === false; })\n        : [];\n    // This accounts for cases like Fullstory, where the settings.integrations\n    // contains a \"Fullstory\" object but settings.remotePlugins contains \"Fullstory (Actions)\"\n    var disabledRemotePlugins = [];\n    ((_a = settings.remotePlugins) !== null && _a !== void 0 ? _a : []).forEach(function (p) {\n        disabledIntegrations.forEach(function (int) {\n            if (p.creationName == int) {\n                disabledRemotePlugins.push(p.name);\n            }\n        });\n    });\n    return ((_b = settings.remotePlugins) !== null && _b !== void 0 ? _b : []).reduce(function (acc, p) {\n        if (p.settings['subscriptions']) {\n            if (disabledRemotePlugins.includes(p.name)) {\n                // @ts-expect-error element implicitly has an 'any' type because p.settings is a JSONObject\n                p.settings['subscriptions'].forEach(\n                // @ts-expect-error parameter 'sub' implicitly has an 'any' type\n                function (sub) { return (acc[\"\".concat(p.name, \" \").concat(sub.partnerAction)] = false); });\n            }\n        }\n        return acc;\n    }, {});\n}\nfunction schemaFilter(track, settings) {\n    function filter(ctx) {\n        var plan = track;\n        var ev = ctx.event.event;\n        if (plan && ev) {\n            var planEvent = plan[ev];\n            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_0__.isPlanEventEnabled)(plan, planEvent)) {\n                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                return ctx;\n            }\n            else {\n                var disabledActions = disabledActionDestinations(planEvent, settings);\n                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations), disabledActions));\n            }\n        }\n        return ctx;\n    }\n    return {\n        name: 'Schema Filter',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function () { return Promise.resolve(); },\n        type: 'before',\n        page: filter,\n        alias: filter,\n        track: filter,\n        identify: filter,\n        group: filter,\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zY2hlbWEtZmlsdGVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNvQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Qsd0NBQXdDO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHlFQUF5RTtBQUMxRztBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4RUFBa0I7QUFDbkMsZ0RBQWdELCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIsZ0NBQWdDO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGNBQWM7QUFDOUMsNEJBQTRCLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NjaGVtYS1maWx0ZXIvaW5kZXguanM/NWQ1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNQbGFuRXZlbnRFbmFibGVkIH0gZnJvbSAnLi4vLi4vbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZCc7XG5mdW5jdGlvbiBkaXNhYmxlZEFjdGlvbkRlc3RpbmF0aW9ucyhwbGFuLCBzZXR0aW5ncykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKCFwbGFuIHx8ICFPYmplY3Qua2V5cyhwbGFuKSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHZhciBkaXNhYmxlZEludGVncmF0aW9ucyA9IHBsYW4uaW50ZWdyYXRpb25zXG4gICAgICAgID8gT2JqZWN0LmtleXMocGxhbi5pbnRlZ3JhdGlvbnMpLmZpbHRlcihmdW5jdGlvbiAoaSkgeyByZXR1cm4gcGxhbi5pbnRlZ3JhdGlvbnNbaV0gPT09IGZhbHNlOyB9KVxuICAgICAgICA6IFtdO1xuICAgIC8vIFRoaXMgYWNjb3VudHMgZm9yIGNhc2VzIGxpa2UgRnVsbHN0b3J5LCB3aGVyZSB0aGUgc2V0dGluZ3MuaW50ZWdyYXRpb25zXG4gICAgLy8gY29udGFpbnMgYSBcIkZ1bGxzdG9yeVwiIG9iamVjdCBidXQgc2V0dGluZ3MucmVtb3RlUGx1Z2lucyBjb250YWlucyBcIkZ1bGxzdG9yeSAoQWN0aW9ucylcIlxuICAgIHZhciBkaXNhYmxlZFJlbW90ZVBsdWdpbnMgPSBbXTtcbiAgICAoKF9hID0gc2V0dGluZ3MucmVtb3RlUGx1Z2lucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgZGlzYWJsZWRJbnRlZ3JhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW50KSB7XG4gICAgICAgICAgICBpZiAocC5jcmVhdGlvbk5hbWUgPT0gaW50KSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZWRSZW1vdGVQbHVnaW5zLnB1c2gocC5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgoX2IgPSBzZXR0aW5ncy5yZW1vdGVQbHVnaW5zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHApIHtcbiAgICAgICAgaWYgKHAuc2V0dGluZ3NbJ3N1YnNjcmlwdGlvbnMnXSkge1xuICAgICAgICAgICAgaWYgKGRpc2FibGVkUmVtb3RlUGx1Z2lucy5pbmNsdWRlcyhwLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBlbGVtZW50IGltcGxpY2l0bHkgaGFzIGFuICdhbnknIHR5cGUgYmVjYXVzZSBwLnNldHRpbmdzIGlzIGEgSlNPTk9iamVjdFxuICAgICAgICAgICAgICAgIHAuc2V0dGluZ3NbJ3N1YnNjcmlwdGlvbnMnXS5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcGFyYW1ldGVyICdzdWInIGltcGxpY2l0bHkgaGFzIGFuICdhbnknIHR5cGVcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoc3ViKSB7IHJldHVybiAoYWNjW1wiXCIuY29uY2F0KHAubmFtZSwgXCIgXCIpLmNvbmNhdChzdWIucGFydG5lckFjdGlvbildID0gZmFsc2UpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzY2hlbWFGaWx0ZXIodHJhY2ssIHNldHRpbmdzKSB7XG4gICAgZnVuY3Rpb24gZmlsdGVyKGN0eCkge1xuICAgICAgICB2YXIgcGxhbiA9IHRyYWNrO1xuICAgICAgICB2YXIgZXYgPSBjdHguZXZlbnQuZXZlbnQ7XG4gICAgICAgIGlmIChwbGFuICYmIGV2KSB7XG4gICAgICAgICAgICB2YXIgcGxhbkV2ZW50ID0gcGxhbltldl07XG4gICAgICAgICAgICBpZiAoIWlzUGxhbkV2ZW50RW5hYmxlZChwbGFuLCBwbGFuRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdpbnRlZ3JhdGlvbnMnLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LmV2ZW50LmludGVncmF0aW9ucyksIHsgQWxsOiBmYWxzZSwgJ1NlZ21lbnQuaW8nOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc2FibGVkQWN0aW9ucyA9IGRpc2FibGVkQWN0aW9uRGVzdGluYXRpb25zKHBsYW5FdmVudCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGN0eC51cGRhdGVFdmVudCgnaW50ZWdyYXRpb25zJywgX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpLCBwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zKSwgZGlzYWJsZWRBY3Rpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJ1NjaGVtYSBGaWx0ZXInLFxuICAgICAgICB2ZXJzaW9uOiAnMC4xLjAnLFxuICAgICAgICBpc0xvYWRlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH0sXG4gICAgICAgIHR5cGU6ICdiZWZvcmUnLFxuICAgICAgICBwYWdlOiBmaWx0ZXIsXG4gICAgICAgIGFsaWFzOiBmaWx0ZXIsXG4gICAgICAgIHRyYWNrOiBmaWx0ZXIsXG4gICAgICAgIGlkZW50aWZ5OiBmaWx0ZXIsXG4gICAgICAgIGdyb3VwOiBmaWx0ZXIsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ batch)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/fetch */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _lib_on_page_change__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/on-page-change */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js\");\n/* harmony import */ var _ratelimit_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ratelimit-error */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n\n\n\n\n\nvar MAX_PAYLOAD_SIZE = 500;\nvar MAX_KEEPALIVE_SIZE = 64;\nfunction kilobytes(buffer) {\n    var size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1;\n    return size / 1024;\n}\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer) {\n    return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50;\n}\n/**\n * Checks if payload is over or approaching the limit for keepalive\n * requests. If keepalive is enabled we want to avoid\n * going over this to prevent data loss.\n */\nfunction passedKeepaliveLimit(buffer) {\n    return kilobytes(buffer) >= MAX_KEEPALIVE_SIZE - 10;\n}\nfunction chunks(batch) {\n    var result = [];\n    var index = 0;\n    batch.forEach(function (item) {\n        var size = kilobytes(result[index]);\n        if (size >= 64) {\n            index++;\n        }\n        if (result[index]) {\n            result[index].push(item);\n        }\n        else {\n            result[index] = [item];\n        }\n    });\n    return result;\n}\nfunction batch(apiHost, config) {\n    var _a, _b;\n    var buffer = [];\n    var pageUnloaded = false;\n    var limit = (_a = config === null || config === void 0 ? void 0 : config.size) !== null && _a !== void 0 ? _a : 10;\n    var timeout = (_b = config === null || config === void 0 ? void 0 : config.timeout) !== null && _b !== void 0 ? _b : 5000;\n    var rateLimitTimeout = 0;\n    function sendBatch(batch) {\n        var _a;\n        if (batch.length === 0) {\n            return;\n        }\n        var writeKey = (_a = batch[0]) === null || _a === void 0 ? void 0 : _a.writeKey;\n        // Remove sentAt from every event as batching only needs a single timestamp\n        var updatedBatch = batch.map(function (event) {\n            var _a = event, sentAt = _a.sentAt, newEvent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"sentAt\"]);\n            return newEvent;\n        });\n        return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_1__.fetch)(\"https://\".concat(apiHost, \"/b\"), {\n            keepalive: (config === null || config === void 0 ? void 0 : config.keepalive) || pageUnloaded,\n            headers: {\n                'Content-Type': 'text/plain',\n            },\n            method: 'post',\n            body: JSON.stringify({\n                writeKey: writeKey,\n                batch: updatedBatch,\n                sentAt: new Date().toISOString(),\n            }),\n        }).then(function (res) {\n            var _a;\n            if (res.status >= 500) {\n                throw new Error(\"Bad response from server: \".concat(res.status));\n            }\n            if (res.status === 429) {\n                var retryTimeoutStringSecs = (_a = res.headers) === null || _a === void 0 ? void 0 : _a.get('x-ratelimit-reset');\n                var retryTimeoutMS = typeof retryTimeoutStringSecs == 'string'\n                    ? parseInt(retryTimeoutStringSecs) * 1000\n                    : timeout;\n                throw new _ratelimit_error__WEBPACK_IMPORTED_MODULE_2__.RateLimitError(\"Rate limit exceeded: \".concat(res.status), retryTimeoutMS);\n            }\n        });\n    }\n    function flush(attempt) {\n        var _a;\n        if (attempt === void 0) { attempt = 1; }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var batch_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                if (buffer.length) {\n                    batch_1 = buffer;\n                    buffer = [];\n                    return [2 /*return*/, (_a = sendBatch(batch_1)) === null || _a === void 0 ? void 0 : _a.catch(function (error) {\n                            var _a;\n                            var ctx = _core_context__WEBPACK_IMPORTED_MODULE_3__.Context.system();\n                            ctx.log('error', 'Error sending batch', error);\n                            if (attempt <= ((_a = config === null || config === void 0 ? void 0 : config.maxRetries) !== null && _a !== void 0 ? _a : 10)) {\n                                if (error.name === 'RateLimitError') {\n                                    rateLimitTimeout = error.retryTimeout;\n                                }\n                                buffer.push.apply(buffer, batch_1);\n                                buffer.map(function (event) {\n                                    if ('_metadata' in event) {\n                                        var segmentEvent = event;\n                                        segmentEvent._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, segmentEvent._metadata), { retryCount: attempt });\n                                    }\n                                });\n                                scheduleFlush(attempt + 1);\n                            }\n                        })];\n                }\n                return [2 /*return*/];\n            });\n        });\n    }\n    var schedule;\n    function scheduleFlush(attempt) {\n        if (attempt === void 0) { attempt = 1; }\n        if (schedule) {\n            return;\n        }\n        schedule = setTimeout(function () {\n            schedule = undefined;\n            flush(attempt).catch(console.error);\n        }, rateLimitTimeout ? rateLimitTimeout : timeout);\n        rateLimitTimeout = 0;\n    }\n    (0,_lib_on_page_change__WEBPACK_IMPORTED_MODULE_4__.onPageChange)(function (unloaded) {\n        pageUnloaded = unloaded;\n        if (pageUnloaded && buffer.length) {\n            var reqs = chunks(buffer).map(sendBatch);\n            Promise.all(reqs).catch(console.error);\n        }\n    });\n    function dispatch(_url, body) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var bufferOverflow;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                buffer.push(body);\n                bufferOverflow = buffer.length >= limit ||\n                    approachingTrackingAPILimit(buffer) ||\n                    ((config === null || config === void 0 ? void 0 : config.keepalive) && passedKeepaliveLimit(buffer));\n                return [2 /*return*/, bufferOverflow || pageUnloaded ? flush() : scheduleFlush()];\n            });\n        });\n    }\n    return {\n        dispatch: dispatch,\n    };\n}\n//# sourceMappingURL=batched-dispatcher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vYmF0Y2hlZC1kaXNwYXRjaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRTtBQUN6QjtBQUNnQjtBQUNMO0FBQ047QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsNkNBQU07QUFDakU7QUFDQSxTQUFTO0FBQ1QsZUFBZSxpREFBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDREQUFjO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msa0RBQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIscUJBQXFCO0FBQ3ZJO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsSUFBSSxpRUFBWTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NlZ21lbnRpby9iYXRjaGVkLWRpc3BhdGNoZXIuanM/ZDZlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBmZXRjaCB9IGZyb20gJy4uLy4uL2xpYi9mZXRjaCc7XG5pbXBvcnQgeyBvblBhZ2VDaGFuZ2UgfSBmcm9tICcuLi8uLi9saWIvb24tcGFnZS1jaGFuZ2UnO1xuaW1wb3J0IHsgUmF0ZUxpbWl0RXJyb3IgfSBmcm9tICcuL3JhdGVsaW1pdC1lcnJvcic7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbnZhciBNQVhfUEFZTE9BRF9TSVpFID0gNTAwO1xudmFyIE1BWF9LRUVQQUxJVkVfU0laRSA9IDY0O1xuZnVuY3Rpb24ga2lsb2J5dGVzKGJ1ZmZlcikge1xuICAgIHZhciBzaXplID0gZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KGJ1ZmZlcikpLnNwbGl0KC8lLi58Li8pLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIHNpemUgLyAxMDI0O1xufVxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHBheWxvYWQgaXMgb3ZlciBvciBjbG9zZSB0b1xuICogdGhlIG1heGltdW0gcGF5bG9hZCBzaXplIGFsbG93ZWQgYnkgdHJhY2tpbmdcbiAqIEFQSS5cbiAqL1xuZnVuY3Rpb24gYXBwcm9hY2hpbmdUcmFja2luZ0FQSUxpbWl0KGJ1ZmZlcikge1xuICAgIHJldHVybiBraWxvYnl0ZXMoYnVmZmVyKSA+PSBNQVhfUEFZTE9BRF9TSVpFIC0gNTA7XG59XG4vKipcbiAqIENoZWNrcyBpZiBwYXlsb2FkIGlzIG92ZXIgb3IgYXBwcm9hY2hpbmcgdGhlIGxpbWl0IGZvciBrZWVwYWxpdmVcbiAqIHJlcXVlc3RzLiBJZiBrZWVwYWxpdmUgaXMgZW5hYmxlZCB3ZSB3YW50IHRvIGF2b2lkXG4gKiBnb2luZyBvdmVyIHRoaXMgdG8gcHJldmVudCBkYXRhIGxvc3MuXG4gKi9cbmZ1bmN0aW9uIHBhc3NlZEtlZXBhbGl2ZUxpbWl0KGJ1ZmZlcikge1xuICAgIHJldHVybiBraWxvYnl0ZXMoYnVmZmVyKSA+PSBNQVhfS0VFUEFMSVZFX1NJWkUgLSAxMDtcbn1cbmZ1bmN0aW9uIGNodW5rcyhiYXRjaCkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGJhdGNoLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIHNpemUgPSBraWxvYnl0ZXMocmVzdWx0W2luZGV4XSk7XG4gICAgICAgIGlmIChzaXplID49IDY0KSB7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHRbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXN1bHRbaW5kZXhdLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gW2l0ZW1dO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJhdGNoKGFwaUhvc3QsIGNvbmZpZykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdmFyIGJ1ZmZlciA9IFtdO1xuICAgIHZhciBwYWdlVW5sb2FkZWQgPSBmYWxzZTtcbiAgICB2YXIgbGltaXQgPSAoX2EgPSBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcuc2l6ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMTA7XG4gICAgdmFyIHRpbWVvdXQgPSAoX2IgPSBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcudGltZW91dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNTAwMDtcbiAgICB2YXIgcmF0ZUxpbWl0VGltZW91dCA9IDA7XG4gICAgZnVuY3Rpb24gc2VuZEJhdGNoKGJhdGNoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3cml0ZUtleSA9IChfYSA9IGJhdGNoWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud3JpdGVLZXk7XG4gICAgICAgIC8vIFJlbW92ZSBzZW50QXQgZnJvbSBldmVyeSBldmVudCBhcyBiYXRjaGluZyBvbmx5IG5lZWRzIGEgc2luZ2xlIHRpbWVzdGFtcFxuICAgICAgICB2YXIgdXBkYXRlZEJhdGNoID0gYmF0Y2gubWFwKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF9hID0gZXZlbnQsIHNlbnRBdCA9IF9hLnNlbnRBdCwgbmV3RXZlbnQgPSBfX3Jlc3QoX2EsIFtcInNlbnRBdFwiXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL1wiLmNvbmNhdChhcGlIb3N0LCBcIi9iXCIpLCB7XG4gICAgICAgICAgICBrZWVwYWxpdmU6IChjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcua2VlcGFsaXZlKSB8fCBwYWdlVW5sb2FkZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB3cml0ZUtleTogd3JpdGVLZXksXG4gICAgICAgICAgICAgICAgYmF0Y2g6IHVwZGF0ZWRCYXRjaCxcbiAgICAgICAgICAgICAgICBzZW50QXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID49IDUwMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIHNlcnZlcjogXCIuY29uY2F0KHJlcy5zdGF0dXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0cnlUaW1lb3V0U3RyaW5nU2VjcyA9IChfYSA9IHJlcy5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0KCd4LXJhdGVsaW1pdC1yZXNldCcpO1xuICAgICAgICAgICAgICAgIHZhciByZXRyeVRpbWVvdXRNUyA9IHR5cGVvZiByZXRyeVRpbWVvdXRTdHJpbmdTZWNzID09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQocmV0cnlUaW1lb3V0U3RyaW5nU2VjcykgKiAxMDAwXG4gICAgICAgICAgICAgICAgICAgIDogdGltZW91dDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmF0ZUxpbWl0RXJyb3IoXCJSYXRlIGxpbWl0IGV4Y2VlZGVkOiBcIi5jb25jYXQocmVzLnN0YXR1cyksIHJldHJ5VGltZW91dE1TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZsdXNoKGF0dGVtcHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdm9pZCAwKSB7IGF0dGVtcHQgPSAxOyB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiYXRjaF8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhdGNoXzEgPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gc2VuZEJhdGNoKGJhdGNoXzEpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSBDb250ZXh0LnN5c3RlbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ0Vycm9yIHNlbmRpbmcgYmF0Y2gnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGVtcHQgPD0gKChfYSA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5tYXhSZXRyaWVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdSYXRlTGltaXRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGVMaW1pdFRpbWVvdXQgPSBlcnJvci5yZXRyeVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2guYXBwbHkoYnVmZmVyLCBiYXRjaF8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLm1hcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnX21ldGFkYXRhJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWdtZW50RXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQuX21ldGFkYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHNlZ21lbnRFdmVudC5fbWV0YWRhdGEpLCB7IHJldHJ5Q291bnQ6IGF0dGVtcHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUZsdXNoKGF0dGVtcHQgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdmFyIHNjaGVkdWxlO1xuICAgIGZ1bmN0aW9uIHNjaGVkdWxlRmx1c2goYXR0ZW1wdCkge1xuICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gdm9pZCAwKSB7IGF0dGVtcHQgPSAxOyB9XG4gICAgICAgIGlmIChzY2hlZHVsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjaGVkdWxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY2hlZHVsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGZsdXNoKGF0dGVtcHQpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICB9LCByYXRlTGltaXRUaW1lb3V0ID8gcmF0ZUxpbWl0VGltZW91dCA6IHRpbWVvdXQpO1xuICAgICAgICByYXRlTGltaXRUaW1lb3V0ID0gMDtcbiAgICB9XG4gICAgb25QYWdlQ2hhbmdlKGZ1bmN0aW9uICh1bmxvYWRlZCkge1xuICAgICAgICBwYWdlVW5sb2FkZWQgPSB1bmxvYWRlZDtcbiAgICAgICAgaWYgKHBhZ2VVbmxvYWRlZCAmJiBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgcmVxcyA9IGNodW5rcyhidWZmZXIpLm1hcChzZW5kQmF0Y2gpO1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwocmVxcykuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiBkaXNwYXRjaChfdXJsLCBib2R5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBidWZmZXJPdmVyZmxvdztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChib2R5KTtcbiAgICAgICAgICAgICAgICBidWZmZXJPdmVyZmxvdyA9IGJ1ZmZlci5sZW5ndGggPj0gbGltaXQgfHxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm9hY2hpbmdUcmFja2luZ0FQSUxpbWl0KGJ1ZmZlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgKChjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcua2VlcGFsaXZlKSAmJiBwYXNzZWRLZWVwYWxpdmVMaW1pdChidWZmZXIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYnVmZmVyT3ZlcmZsb3cgfHwgcGFnZVVubG9hZGVkID8gZmx1c2goKSA6IHNjaGVkdWxlRmx1c2goKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmF0Y2hlZC1kaXNwYXRjaGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/fetch */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _ratelimit_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ratelimit-error */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js\");\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(config) {\n    function dispatch(url, body) {\n        return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetch)(url, {\n            keepalive: config === null || config === void 0 ? void 0 : config.keepalive,\n            headers: { 'Content-Type': 'text/plain' },\n            method: 'post',\n            body: JSON.stringify(body),\n        }).then(function (res) {\n            var _a;\n            if (res.status >= 500) {\n                throw new Error(\"Bad response from server: \".concat(res.status));\n            }\n            if (res.status === 429) {\n                var retryTimeoutStringSecs = (_a = res.headers) === null || _a === void 0 ? void 0 : _a.get('x-ratelimit-reset');\n                var retryTimeoutMS = retryTimeoutStringSecs\n                    ? parseInt(retryTimeoutStringSecs) * 1000\n                    : 5000;\n                throw new _ratelimit_error__WEBPACK_IMPORTED_MODULE_1__.RateLimitError(\"Rate limit exceeded: \".concat(res.status), retryTimeoutMS);\n            }\n        });\n    }\n    return {\n        dispatch: dispatch,\n    };\n}\n//# sourceMappingURL=fetch-dispatcher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vZmV0Y2gtZGlzcGF0Y2hlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDVztBQUNuRCw2QkFBZSxvQ0FBVTtBQUN6QjtBQUNBLGVBQWUsaURBQUs7QUFDcEI7QUFDQSx1QkFBdUIsOEJBQThCO0FBQ3JEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDREQUFjO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL2ZldGNoLWRpc3BhdGNoZXIuanM/ZGMwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZXRjaCB9IGZyb20gJy4uLy4uL2xpYi9mZXRjaCc7XG5pbXBvcnQgeyBSYXRlTGltaXRFcnJvciB9IGZyb20gJy4vcmF0ZWxpbWl0LWVycm9yJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICBmdW5jdGlvbiBkaXNwYXRjaCh1cmwsIGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgICAgICAga2VlcGFsaXZlOiBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcua2VlcGFsaXZlLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID49IDUwMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIHNlcnZlcjogXCIuY29uY2F0KHJlcy5zdGF0dXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0cnlUaW1lb3V0U3RyaW5nU2VjcyA9IChfYSA9IHJlcy5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0KCd4LXJhdGVsaW1pdC1yZXNldCcpO1xuICAgICAgICAgICAgICAgIHZhciByZXRyeVRpbWVvdXRNUyA9IHJldHJ5VGltZW91dFN0cmluZ1NlY3NcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChyZXRyeVRpbWVvdXRTdHJpbmdTZWNzKSAqIDEwMDBcbiAgICAgICAgICAgICAgICAgICAgOiA1MDAwO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYXRlTGltaXRFcnJvcihcIlJhdGUgbGltaXQgZXhjZWVkZWQ6IFwiLmNvbmNhdChyZXMuc3RhdHVzKSwgcmV0cnlUaW1lb3V0TVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZXRjaC1kaXNwYXRjaGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSegmentPlugin: () => (/* binding */ isSegmentPlugin),\n/* harmony export */   segmentio: () => (/* binding */ segmentio)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/connection */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/to-facade */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\");\n/* harmony import */ var _batched_dispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./batched-dispatcher */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js\");\n/* harmony import */ var _fetch_dispatcher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fetch-dispatcher */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js\");\n/* harmony import */ var _normalize__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./normalize */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js\");\n/* harmony import */ var _schedule_flush__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./schedule-flush */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js\");\n/* harmony import */ var _core_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/constants */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\");\n\n\n\n\n\n\n\n\n\n\nfunction onAlias(analytics, json) {\n    var _a, _b, _c, _d;\n    var user = analytics.user();\n    json.previousId =\n        (_c = (_b = (_a = json.previousId) !== null && _a !== void 0 ? _a : json.from) !== null && _b !== void 0 ? _b : user.id()) !== null && _c !== void 0 ? _c : user.anonymousId();\n    json.userId = (_d = json.userId) !== null && _d !== void 0 ? _d : json.to;\n    delete json.from;\n    delete json.to;\n    return json;\n}\nvar isSegmentPlugin = function (plugin) {\n    return plugin.name === 'Segment.io';\n};\nfunction segmentio(analytics, settings, integrations) {\n    var _a, _b, _c;\n    // Attach `pagehide` before buffer is created so that inflight events are added\n    // to the buffer before the buffer persists events in its own `pagehide` handler.\n    window.addEventListener('pagehide', function () {\n        buffer.push.apply(buffer, Array.from(inflightEvents));\n        inflightEvents.clear();\n    });\n    var writeKey = (_a = settings === null || settings === void 0 ? void 0 : settings.apiKey) !== null && _a !== void 0 ? _a : '';\n    var buffer = analytics.options.disableClientPersistence\n        ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_0__.PriorityQueue(analytics.queue.queue.maxAttempts, [])\n        : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__.PersistedPriorityQueue(analytics.queue.queue.maxAttempts, \"\".concat(writeKey, \":dest-Segment.io\"));\n    var inflightEvents = new Set();\n    var flushing = false;\n    var apiHost = (_b = settings === null || settings === void 0 ? void 0 : settings.apiHost) !== null && _b !== void 0 ? _b : _core_constants__WEBPACK_IMPORTED_MODULE_2__.SEGMENT_API_HOST;\n    var protocol = (_c = settings === null || settings === void 0 ? void 0 : settings.protocol) !== null && _c !== void 0 ? _c : 'https';\n    var remote = \"\".concat(protocol, \"://\").concat(apiHost);\n    var deliveryStrategy = settings === null || settings === void 0 ? void 0 : settings.deliveryStrategy;\n    var client = (deliveryStrategy === null || deliveryStrategy === void 0 ? void 0 : deliveryStrategy.strategy) === 'batching'\n        ? (0,_batched_dispatcher__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(apiHost, deliveryStrategy.config)\n        : (0,_fetch_dispatcher__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(deliveryStrategy === null || deliveryStrategy === void 0 ? void 0 : deliveryStrategy.config);\n    function send(ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var path, json;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_6__.isOffline)()) {\n                    buffer.push(ctx);\n                    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                    (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n                    return [2 /*return*/, ctx];\n                }\n                inflightEvents.add(ctx);\n                path = ctx.event.type.charAt(0);\n                json = (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_8__.toFacade)(ctx.event).json();\n                if (ctx.event.type === 'track') {\n                    delete json.traits;\n                }\n                if (ctx.event.type === 'alias') {\n                    json = onAlias(analytics, json);\n                }\n                return [2 /*return*/, client\n                        .dispatch(\"\".concat(remote, \"/\").concat(path), (0,_normalize__WEBPACK_IMPORTED_MODULE_9__.normalize)(analytics, json, settings, integrations, ctx))\n                        .then(function () { return ctx; })\n                        .catch(function (error) {\n                        ctx.log('error', 'Error sending event', error);\n                        if (error.name === 'RateLimitError') {\n                            var timeout = error.retryTimeout;\n                            buffer.pushWithBackoff(ctx, timeout);\n                        }\n                        else {\n                            buffer.pushWithBackoff(ctx);\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                        (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n                        return ctx;\n                    })\n                        .finally(function () {\n                        inflightEvents.delete(ctx);\n                    })];\n            });\n        });\n    }\n    var segmentio = {\n        metadata: {\n            writeKey: writeKey,\n            apiHost: apiHost,\n            protocol: protocol,\n        },\n        name: 'Segment.io',\n        type: 'destination',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function () { return Promise.resolve(); },\n        track: send,\n        identify: send,\n        page: send,\n        alias: send,\n        group: send,\n        screen: send,\n    };\n    // Buffer may already have items if they were previously stored in localStorage.\n    // Start flushing them immediately.\n    if (buffer.todo) {\n        (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n    }\n    return segmentio;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ0c7QUFDTztBQUNtQjtBQUM3QjtBQUNOO0FBQ0M7QUFDRjtBQUNTO0FBQ087QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw4REFBYTtBQUMzQixjQUFjLGlGQUFzQjtBQUNwQztBQUNBO0FBQ0EsK0hBQStILDZEQUFnQjtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0RBQUs7QUFDZixVQUFVLDZEQUFRO0FBQ2xCO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QixvQkFBb0IsMkRBQVM7QUFDN0I7QUFDQTtBQUNBLG9CQUFvQiw4REFBYSw4QkFBOEIsMERBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUscURBQVM7QUFDaEYsNENBQTRDLGFBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQWEsOEJBQThCLDBEQUFhO0FBQ2hGO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGNBQWM7QUFDOUMsNEJBQTRCLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWEsOEJBQThCLDBEQUFhO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanM/ODk2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc09mZmxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZSc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZCc7XG5pbXBvcnQgeyB0b0ZhY2FkZSB9IGZyb20gJy4uLy4uL2xpYi90by1mYWNhZGUnO1xuaW1wb3J0IGJhdGNoIGZyb20gJy4vYmF0Y2hlZC1kaXNwYXRjaGVyJztcbmltcG9ydCBzdGFuZGFyZCBmcm9tICcuL2ZldGNoLWRpc3BhdGNoZXInO1xuaW1wb3J0IHsgbm9ybWFsaXplIH0gZnJvbSAnLi9ub3JtYWxpemUnO1xuaW1wb3J0IHsgc2NoZWR1bGVGbHVzaCB9IGZyb20gJy4vc2NoZWR1bGUtZmx1c2gnO1xuaW1wb3J0IHsgU0VHTUVOVF9BUElfSE9TVCB9IGZyb20gJy4uLy4uL2NvcmUvY29uc3RhbnRzJztcbmZ1bmN0aW9uIG9uQWxpYXMoYW5hbHl0aWNzLCBqc29uKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIHZhciB1c2VyID0gYW5hbHl0aWNzLnVzZXIoKTtcbiAgICBqc29uLnByZXZpb3VzSWQgPVxuICAgICAgICAoX2MgPSAoX2IgPSAoX2EgPSBqc29uLnByZXZpb3VzSWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGpzb24uZnJvbSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdXNlci5pZCgpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1c2VyLmFub255bW91c0lkKCk7XG4gICAganNvbi51c2VySWQgPSAoX2QgPSBqc29uLnVzZXJJZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDoganNvbi50bztcbiAgICBkZWxldGUganNvbi5mcm9tO1xuICAgIGRlbGV0ZSBqc29uLnRvO1xuICAgIHJldHVybiBqc29uO1xufVxuZXhwb3J0IHZhciBpc1NlZ21lbnRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgcmV0dXJuIHBsdWdpbi5uYW1lID09PSAnU2VnbWVudC5pbyc7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNlZ21lbnRpbyhhbmFseXRpY3MsIHNldHRpbmdzLCBpbnRlZ3JhdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAvLyBBdHRhY2ggYHBhZ2VoaWRlYCBiZWZvcmUgYnVmZmVyIGlzIGNyZWF0ZWQgc28gdGhhdCBpbmZsaWdodCBldmVudHMgYXJlIGFkZGVkXG4gICAgLy8gdG8gdGhlIGJ1ZmZlciBiZWZvcmUgdGhlIGJ1ZmZlciBwZXJzaXN0cyBldmVudHMgaW4gaXRzIG93biBgcGFnZWhpZGVgIGhhbmRsZXIuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBidWZmZXIucHVzaC5hcHBseShidWZmZXIsIEFycmF5LmZyb20oaW5mbGlnaHRFdmVudHMpKTtcbiAgICAgICAgaW5mbGlnaHRFdmVudHMuY2xlYXIoKTtcbiAgICB9KTtcbiAgICB2YXIgd3JpdGVLZXkgPSAoX2EgPSBzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3MuYXBpS2V5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJztcbiAgICB2YXIgYnVmZmVyID0gYW5hbHl0aWNzLm9wdGlvbnMuZGlzYWJsZUNsaWVudFBlcnNpc3RlbmNlXG4gICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUoYW5hbHl0aWNzLnF1ZXVlLnF1ZXVlLm1heEF0dGVtcHRzLCBbXSlcbiAgICAgICAgOiBuZXcgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZShhbmFseXRpY3MucXVldWUucXVldWUubWF4QXR0ZW1wdHMsIFwiXCIuY29uY2F0KHdyaXRlS2V5LCBcIjpkZXN0LVNlZ21lbnQuaW9cIikpO1xuICAgIHZhciBpbmZsaWdodEV2ZW50cyA9IG5ldyBTZXQoKTtcbiAgICB2YXIgZmx1c2hpbmcgPSBmYWxzZTtcbiAgICB2YXIgYXBpSG9zdCA9IChfYiA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5hcGlIb3N0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBTRUdNRU5UX0FQSV9IT1NUO1xuICAgIHZhciBwcm90b2NvbCA9IChfYyA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5wcm90b2NvbCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJ2h0dHBzJztcbiAgICB2YXIgcmVtb3RlID0gXCJcIi5jb25jYXQocHJvdG9jb2wsIFwiOi8vXCIpLmNvbmNhdChhcGlIb3N0KTtcbiAgICB2YXIgZGVsaXZlcnlTdHJhdGVneSA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5kZWxpdmVyeVN0cmF0ZWd5O1xuICAgIHZhciBjbGllbnQgPSAoZGVsaXZlcnlTdHJhdGVneSA9PT0gbnVsbCB8fCBkZWxpdmVyeVN0cmF0ZWd5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWxpdmVyeVN0cmF0ZWd5LnN0cmF0ZWd5KSA9PT0gJ2JhdGNoaW5nJ1xuICAgICAgICA/IGJhdGNoKGFwaUhvc3QsIGRlbGl2ZXJ5U3RyYXRlZ3kuY29uZmlnKVxuICAgICAgICA6IHN0YW5kYXJkKGRlbGl2ZXJ5U3RyYXRlZ3kgPT09IG51bGwgfHwgZGVsaXZlcnlTdHJhdGVneSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVsaXZlcnlTdHJhdGVneS5jb25maWcpO1xuICAgIGZ1bmN0aW9uIHNlbmQoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXRoLCBqc29uO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChjdHgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goZmx1c2hpbmcsIGJ1ZmZlciwgc2VnbWVudGlvLCBzY2hlZHVsZUZsdXNoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZmxpZ2h0RXZlbnRzLmFkZChjdHgpO1xuICAgICAgICAgICAgICAgIHBhdGggPSBjdHguZXZlbnQudHlwZS5jaGFyQXQoMCk7XG4gICAgICAgICAgICAgICAganNvbiA9IHRvRmFjYWRlKGN0eC5ldmVudCkuanNvbigpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguZXZlbnQudHlwZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi50cmFpdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdHguZXZlbnQudHlwZSA9PT0gJ2FsaWFzJykge1xuICAgICAgICAgICAgICAgICAgICBqc29uID0gb25BbGlhcyhhbmFseXRpY3MsIGpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY2xpZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAuZGlzcGF0Y2goXCJcIi5jb25jYXQocmVtb3RlLCBcIi9cIikuY29uY2F0KHBhdGgpLCBub3JtYWxpemUoYW5hbHl0aWNzLCBqc29uLCBzZXR0aW5ncywgaW50ZWdyYXRpb25zLCBjdHgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY3R4OyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnZXJyb3InLCAnRXJyb3Igc2VuZGluZyBldmVudCcsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnUmF0ZUxpbWl0RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBlcnJvci5yZXRyeVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2hXaXRoQmFja29mZihjdHgsIHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2hXaXRoQmFja29mZihjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVGbHVzaChmbHVzaGluZywgYnVmZmVyLCBzZWdtZW50aW8sIHNjaGVkdWxlRmx1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZmxpZ2h0RXZlbnRzLmRlbGV0ZShjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBzZWdtZW50aW8gPSB7XG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICB3cml0ZUtleTogd3JpdGVLZXksXG4gICAgICAgICAgICBhcGlIb3N0OiBhcGlIb3N0LFxuICAgICAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lOiAnU2VnbWVudC5pbycsXG4gICAgICAgIHR5cGU6ICdkZXN0aW5hdGlvbicsXG4gICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgIGlzTG9hZGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfSxcbiAgICAgICAgdHJhY2s6IHNlbmQsXG4gICAgICAgIGlkZW50aWZ5OiBzZW5kLFxuICAgICAgICBwYWdlOiBzZW5kLFxuICAgICAgICBhbGlhczogc2VuZCxcbiAgICAgICAgZ3JvdXA6IHNlbmQsXG4gICAgICAgIHNjcmVlbjogc2VuZCxcbiAgICB9O1xuICAgIC8vIEJ1ZmZlciBtYXkgYWxyZWFkeSBoYXZlIGl0ZW1zIGlmIHRoZXkgd2VyZSBwcmV2aW91c2x5IHN0b3JlZCBpbiBsb2NhbFN0b3JhZ2UuXG4gICAgLy8gU3RhcnQgZmx1c2hpbmcgdGhlbSBpbW1lZGlhdGVseS5cbiAgICBpZiAoYnVmZmVyLnRvZG8pIHtcbiAgICAgICAgc2NoZWR1bGVGbHVzaChmbHVzaGluZywgYnVmZmVyLCBzZWdtZW50aW8sIHNjaGVkdWxlRmx1c2gpO1xuICAgIH1cbiAgICByZXR1cm4gc2VnbWVudGlvO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalize: () => (/* binding */ normalize)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction normalize(analytics, json, settings, integrations, ctx) {\n    var _a;\n    var user = analytics.user();\n    delete json.options;\n    json.writeKey = settings === null || settings === void 0 ? void 0 : settings.apiKey;\n    json.userId = json.userId || user.id();\n    json.anonymousId = json.anonymousId || user.anonymousId();\n    json.sentAt = new Date();\n    var failed = analytics.queue.failedInitializations || [];\n    if (failed.length > 0) {\n        json._metadata = { failedInitializations: failed };\n    }\n    if (ctx != null) {\n        if (ctx.attempts > 1) {\n            json._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, json._metadata), { retryCount: ctx.attempts });\n        }\n        ctx.attempts++;\n    }\n    var bundled = [];\n    var unbundled = [];\n    for (var key in integrations) {\n        var integration = integrations[key];\n        if (key === 'Segment.io') {\n            bundled.push(key);\n        }\n        if (integration.bundlingStatus === 'bundled') {\n            bundled.push(key);\n        }\n        if (integration.bundlingStatus === 'unbundled') {\n            unbundled.push(key);\n        }\n    }\n    // This will make sure that the disabled cloud mode destinations will be\n    // included in the unbundled list.\n    for (var _i = 0, _b = (settings === null || settings === void 0 ? void 0 : settings.unbundledIntegrations) || []; _i < _b.length; _i++) {\n        var settingsUnbundled = _b[_i];\n        if (!unbundled.includes(settingsUnbundled)) {\n            unbundled.push(settingsUnbundled);\n        }\n    }\n    var configIds = (_a = settings === null || settings === void 0 ? void 0 : settings.maybeBundledConfigIds) !== null && _a !== void 0 ? _a : {};\n    var bundledConfigIds = [];\n    bundled.sort().forEach(function (name) {\n        var _a;\n        ;\n        ((_a = configIds[name]) !== null && _a !== void 0 ? _a : []).forEach(function (id) {\n            bundledConfigIds.push(id);\n        });\n    });\n    if ((settings === null || settings === void 0 ? void 0 : settings.addBundledMetadata) !== false) {\n        json._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, json._metadata), { bundled: bundled.sort(), unbundled: unbundled.sort(), bundledIds: bundledConfigIds });\n    }\n    return json;\n}\n//# sourceMappingURL=normalize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vbm9ybWFsaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQzFCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcscUJBQXFCLDBCQUEwQjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNIQUFzSCxnQkFBZ0I7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLHlCQUF5QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcscUJBQXFCLG9GQUFvRjtBQUN0SjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL25vcm1hbGl6ZS5qcz80MjU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGFuYWx5dGljcywganNvbiwgc2V0dGluZ3MsIGludGVncmF0aW9ucywgY3R4KSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciB1c2VyID0gYW5hbHl0aWNzLnVzZXIoKTtcbiAgICBkZWxldGUganNvbi5vcHRpb25zO1xuICAgIGpzb24ud3JpdGVLZXkgPSBzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3MuYXBpS2V5O1xuICAgIGpzb24udXNlcklkID0ganNvbi51c2VySWQgfHwgdXNlci5pZCgpO1xuICAgIGpzb24uYW5vbnltb3VzSWQgPSBqc29uLmFub255bW91c0lkIHx8IHVzZXIuYW5vbnltb3VzSWQoKTtcbiAgICBqc29uLnNlbnRBdCA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIGZhaWxlZCA9IGFuYWx5dGljcy5xdWV1ZS5mYWlsZWRJbml0aWFsaXphdGlvbnMgfHwgW107XG4gICAgaWYgKGZhaWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGpzb24uX21ldGFkYXRhID0geyBmYWlsZWRJbml0aWFsaXphdGlvbnM6IGZhaWxlZCB9O1xuICAgIH1cbiAgICBpZiAoY3R4ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGN0eC5hdHRlbXB0cyA+IDEpIHtcbiAgICAgICAgICAgIGpzb24uX21ldGFkYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGpzb24uX21ldGFkYXRhKSwgeyByZXRyeUNvdW50OiBjdHguYXR0ZW1wdHMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmF0dGVtcHRzKys7XG4gICAgfVxuICAgIHZhciBidW5kbGVkID0gW107XG4gICAgdmFyIHVuYnVuZGxlZCA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBpbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdmFyIGludGVncmF0aW9uID0gaW50ZWdyYXRpb25zW2tleV07XG4gICAgICAgIGlmIChrZXkgPT09ICdTZWdtZW50LmlvJykge1xuICAgICAgICAgICAgYnVuZGxlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVncmF0aW9uLmJ1bmRsaW5nU3RhdHVzID09PSAnYnVuZGxlZCcpIHtcbiAgICAgICAgICAgIGJ1bmRsZWQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlZ3JhdGlvbi5idW5kbGluZ1N0YXR1cyA9PT0gJ3VuYnVuZGxlZCcpIHtcbiAgICAgICAgICAgIHVuYnVuZGxlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVGhpcyB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRoZSBkaXNhYmxlZCBjbG91ZCBtb2RlIGRlc3RpbmF0aW9ucyB3aWxsIGJlXG4gICAgLy8gaW5jbHVkZWQgaW4gdGhlIHVuYnVuZGxlZCBsaXN0LlxuICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSAoc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLnVuYnVuZGxlZEludGVncmF0aW9ucykgfHwgW107IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBzZXR0aW5nc1VuYnVuZGxlZCA9IF9iW19pXTtcbiAgICAgICAgaWYgKCF1bmJ1bmRsZWQuaW5jbHVkZXMoc2V0dGluZ3NVbmJ1bmRsZWQpKSB7XG4gICAgICAgICAgICB1bmJ1bmRsZWQucHVzaChzZXR0aW5nc1VuYnVuZGxlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbmZpZ0lkcyA9IChfYSA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5tYXliZUJ1bmRsZWRDb25maWdJZHMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgIHZhciBidW5kbGVkQ29uZmlnSWRzID0gW107XG4gICAgYnVuZGxlZC5zb3J0KCkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIDtcbiAgICAgICAgKChfYSA9IGNvbmZpZ0lkc1tuYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBidW5kbGVkQ29uZmlnSWRzLnB1c2goaWQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBpZiAoKHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5hZGRCdW5kbGVkTWV0YWRhdGEpICE9PSBmYWxzZSkge1xuICAgICAgICBqc29uLl9tZXRhZGF0YSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBqc29uLl9tZXRhZGF0YSksIHsgYnVuZGxlZDogYnVuZGxlZC5zb3J0KCksIHVuYnVuZGxlZDogdW5idW5kbGVkLnNvcnQoKSwgYnVuZGxlZElkczogYnVuZGxlZENvbmZpZ0lkcyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGpzb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3JtYWxpemUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar RateLimitError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(RateLimitError, _super);\n    function RateLimitError(message, retryTimeout) {\n        var _this = _super.call(this, message) || this;\n        _this.retryTimeout = retryTimeout;\n        _this.name = 'RateLimitError';\n        return _this;\n    }\n    return RateLimitError;\n}(Error));\n\n//# sourceMappingURL=ratelimit-error.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vcmF0ZWxpbWl0LWVycm9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBQ2xDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN5QjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL3JhdGVsaW1pdC1lcnJvci5qcz84ODY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xudmFyIFJhdGVMaW1pdEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYXRlTGltaXRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSYXRlTGltaXRFcnJvcihtZXNzYWdlLCByZXRyeVRpbWVvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucmV0cnlUaW1lb3V0ID0gcmV0cnlUaW1lb3V0O1xuICAgICAgICBfdGhpcy5uYW1lID0gJ1JhdGVMaW1pdEVycm9yJztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUmF0ZUxpbWl0RXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBSYXRlTGltaXRFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmF0ZWxpbWl0LWVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scheduleFlush: () => (/* binding */ scheduleFlush)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/connection */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/context */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/p-while */ \"(rsc)/./node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_1__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_2__.pWhile)(function () { return queue.length > 0 && !(0,_core_connection__WEBPACK_IMPORTED_MODULE_1__.isOffline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_4__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nfunction scheduleFlush(flushing, buffer, xt, scheduleFlush) {\n    var _this = this;\n    if (flushing) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n        var isFlushing, newBuffer;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    isFlushing = true;\n                    return [4 /*yield*/, flushQueue(xt, buffer)];\n                case 1:\n                    newBuffer = _a.sent();\n                    isFlushing = false;\n                    if (buffer.todo > 0) {\n                        scheduleFlush(isFlushing, newBuffer, xt, scheduleFlush);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); }, Math.random() * 5000);\n}\n//# sourceMappingURL=schedule-flush.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vc2NoZWR1bGUtZmx1c2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStDO0FBQ0c7QUFDTDtBQUNLO0FBQ1A7QUFDM0M7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBUztBQUNqQztBQUNBO0FBQ0EseUNBQXlDLG9EQUFNLGVBQWUsNEJBQTRCLDJEQUFTLEtBQUssZ0JBQWdCLE9BQU8sZ0RBQVM7QUFDeEk7QUFDQSxtQ0FBbUMsa0RBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGdFQUFPO0FBQ3BFO0FBQ0E7QUFDQSxvRUFBb0Usa0RBQU87QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUIsSUFBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHVDQUF1QztBQUMvRjtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixPQUFPLGdEQUFTO0FBQzdDO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSyxJQUFJO0FBQ1Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL3NjaGVkdWxlLWZsdXNoLmpzPzk5MDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNPZmZsaW5lIH0gZnJvbSAnLi4vLi4vY29yZS9jb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tICcuLi8uLi9jb3JlL2NvbnRleHQnO1xuaW1wb3J0IHsgYXR0ZW1wdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IHBXaGlsZSB9IGZyb20gJy4uLy4uL2xpYi9wLXdoaWxlJztcbmZ1bmN0aW9uIGZsdXNoUXVldWUoeHQsIHF1ZXVlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmFpbGVkUXVldWU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwV2hpbGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUubGVuZ3RoID4gMCAmJiAhaXNPZmZsaW5lKCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4LCByZXN1bHQsIHN1Y2Nlc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gcXVldWUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhdHRlbXB0KGN0eCwgeHQpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHJlc3VsdCBpbnN0YW5jZW9mIENvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCBmYWlsZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIGZhaWxlZCB0YXNrc1xuICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZS5tYXAoZnVuY3Rpb24gKGZhaWxlZCkgeyByZXR1cm4gcXVldWUucHVzaFdpdGhCYWNrb2ZmKGZhaWxlZCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcXVldWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZUZsdXNoKGZsdXNoaW5nLCBidWZmZXIsIHh0LCBzY2hlZHVsZUZsdXNoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBpZiAoZmx1c2hpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlzRmx1c2hpbmcsIG5ld0J1ZmZlcjtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaXNGbHVzaGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZsdXNoUXVldWUoeHQsIGJ1ZmZlcildO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbmV3QnVmZmVyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goaXNGbHVzaGluZywgbmV3QnVmZmVyLCB4dCwgc2NoZWR1bGVGbHVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTsgfSwgTWF0aC5yYW5kb20oKSAqIDUwMDApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGUtZmx1c2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js ***!
  \***************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n// @ts-nocheck\n// prettier-ignore\n/* eslint-disable */\n// @segment/tsub 2.0.0 - GENERATED DO NOT MODIFY\n/*! For license information please see tsub.js.LICENSE.txt */\n!function (t, r) { if (true)\n    module.exports = r();\nelse { var n, e; } }(self, (function () { return (function () { var t = { 2870: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 }), r.Store = r.matches = r.transform = void 0;\n        var o = e(4303);\n        Object.defineProperty(r, \"transform\", { enumerable: !0, get: function () { return n(o).default; } });\n        var s = e(2370);\n        Object.defineProperty(r, \"matches\", { enumerable: !0, get: function () { return n(s).default; } });\n        var i = e(1444);\n        Object.defineProperty(r, \"Store\", { enumerable: !0, get: function () { return n(i).default; } });\n    }, 2370: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 });\n        var o = n(e(7843));\n        function s(t, r) { if (!Array.isArray(t))\n            return !0 === i(t, r); var e, n, o, f, p = t[0]; switch (p) {\n            case \"!\": return !s(t[1], r);\n            case \"or\":\n                for (var l = 1; l < t.length; l++)\n                    if (s(t[l], r))\n                        return !0;\n                return !1;\n            case \"and\":\n                for (l = 1; l < t.length; l++)\n                    if (!s(t[l], r))\n                        return !1;\n                return !0;\n            case \"=\":\n            case \"!=\": return function (t, r, e, n) { switch (u(t) && (t = s(t, n)), u(r) && (r = s(r, n)), \"object\" == typeof t && \"object\" == typeof r && (t = JSON.stringify(t), r = JSON.stringify(r)), e) {\n                case \"=\": return t === r;\n                case \"!=\": return t !== r;\n                default: throw new Error(\"Invalid operator in compareItems: \".concat(e));\n            } }(i(t[1], r), i(t[2], r), p, r);\n            case \"<=\":\n            case \"<\":\n            case \">\":\n            case \">=\": return function (t, r, e, n) { if (u(t) && (t = s(t, n)), u(r) && (r = s(r, n)), \"number\" != typeof t || \"number\" != typeof r)\n                return !1; switch (e) {\n                case \"<=\": return t <= r;\n                case \">=\": return t >= r;\n                case \"<\": return t < r;\n                case \">\": return t > r;\n                default: throw new Error(\"Invalid operator in compareNumbers: \".concat(e));\n            } }(i(t[1], r), i(t[2], r), p, r);\n            case \"in\": return function (t, r, e) { return void 0 !== r.find((function (r) { return i(r, e) === t; })); }(i(t[1], r), i(t[2], r), r);\n            case \"contains\": return o = i(t[1], r), f = i(t[2], r), \"string\" == typeof o && \"string\" == typeof f && -1 !== o.indexOf(f);\n            case \"match\": return e = i(t[1], r), n = i(t[2], r), \"string\" == typeof e && \"string\" == typeof n && function (t, r) { var e, n; t: for (; t.length > 0;) {\n                var o, s;\n                if (o = (e = a(t)).star, s = e.chunk, t = e.pattern, o && \"\" === s)\n                    return !0;\n                var i = c(s, r), u = i.t, f = i.ok, p = i.err;\n                if (p)\n                    return !1;\n                if (!f || !(0 === u.length || t.length > 0)) {\n                    if (o)\n                        for (var l = 0; l < r.length; l++) {\n                            if (u = (n = c(s, r.slice(l + 1))).t, f = n.ok, p = n.err, f) {\n                                if (0 === t.length && u.length > 0)\n                                    continue;\n                                r = u;\n                                continue t;\n                            }\n                            if (p)\n                                return !1;\n                        }\n                    return !1;\n                }\n                r = u;\n            } return 0 === r.length; }(n, e);\n            case \"lowercase\":\n                var v = i(t[1], r);\n                return \"string\" != typeof v ? null : v.toLowerCase();\n            case \"typeof\": return typeof i(t[1], r);\n            case \"length\": return function (t) { return null === t ? 0 : Array.isArray(t) || \"string\" == typeof t ? t.length : NaN; }(i(t[1], r));\n            default: throw new Error(\"FQL IR could not evaluate for token: \".concat(p));\n        } }\n        function i(t, r) { return Array.isArray(t) ? t : \"object\" == typeof t ? t.value : (0, o.default)(r, t); }\n        function u(t) { return !!Array.isArray(t) && ((\"lowercase\" === t[0] || \"length\" === t[0] || \"typeof\" === t[0]) && 2 === t.length || (\"contains\" === t[0] || \"match\" === t[0]) && 3 === t.length); }\n        function a(t) { for (var r = { star: !1, chunk: \"\", pattern: \"\" }; t.length > 0 && \"*\" === t[0];)\n            t = t.slice(1), r.star = !0; var e, n = !1; t: for (e = 0; e < t.length; e++)\n            switch (t[e]) {\n                case \"\\\\\":\n                    e + 1 < t.length && e++;\n                    break;\n                case \"[\":\n                    n = !0;\n                    break;\n                case \"]\":\n                    n = !1;\n                    break;\n                case \"*\": if (!n)\n                    break t;\n            } return r.chunk = t.slice(0, e), r.pattern = t.slice(e), r; }\n        function c(t, r) { for (var e, n, o = { t: \"\", ok: !1, err: !1 }; t.length > 0;) {\n            if (0 === r.length)\n                return o;\n            switch (t[0]) {\n                case \"[\":\n                    var s = r[0];\n                    r = r.slice(1);\n                    var i = !0;\n                    (t = t.slice(1)).length > 0 && \"^\" === t[0] && (i = !1, t = t.slice(1));\n                    for (var u = !1, a = 0;;) {\n                        if (t.length > 0 && \"]\" === t[0] && a > 0) {\n                            t = t.slice(1);\n                            break;\n                        }\n                        var c, p = \"\";\n                        if (c = (e = f(t)).char, t = e.newChunk, e.err)\n                            return o;\n                        if (p = c, \"-\" === t[0] && (p = (n = f(t.slice(1))).char, t = n.newChunk, n.err))\n                            return o;\n                        c <= s && s <= p && (u = !0), a++;\n                    }\n                    if (u !== i)\n                        return o;\n                    break;\n                case \"?\":\n                    r = r.slice(1), t = t.slice(1);\n                    break;\n                case \"\\\\\": if (0 === (t = t.slice(1)).length)\n                    return o.err = !0, o;\n                default:\n                    if (t[0] !== r[0])\n                        return o;\n                    r = r.slice(1), t = t.slice(1);\n            }\n        } return o.t = r, o.ok = !0, o.err = !1, o; }\n        function f(t) { var r = { char: \"\", newChunk: \"\", err: !1 }; return 0 === t.length || \"-\" === t[0] || \"]\" === t[0] || \"\\\\\" === t[0] && 0 === (t = t.slice(1)).length ? (r.err = !0, r) : (r.char = t[0], r.newChunk = t.slice(1), 0 === r.newChunk.length && (r.err = !0), r); }\n        r.default = function (t, r) { if (!r)\n            throw new Error(\"No matcher supplied!\"); switch (r.type) {\n            case \"all\": return !0;\n            case \"fql\": return function (t, r) { if (!t)\n                return !1; try {\n                t = JSON.parse(t);\n            }\n            catch (r) {\n                throw new Error('Failed to JSON.parse FQL intermediate representation \"'.concat(t, '\": ').concat(r));\n            } var e = s(t, r); return \"boolean\" == typeof e && e; }(r.ir, t);\n            default: throw new Error(\"Matcher of type \".concat(r.type, \" unsupported.\"));\n        } };\n    }, 1444: function (t, r) {\n        \"use strict\";\n        Object.defineProperty(r, \"__esModule\", { value: !0 });\n        var e = function () { function t(t) { this.rules = [], this.rules = t || []; } return t.prototype.getRulesByDestinationName = function (t) { for (var r = [], e = 0, n = this.rules; e < n.length; e++) {\n            var o = n[e];\n            o.destinationName !== t && void 0 !== o.destinationName || r.push(o);\n        } return r; }, t; }();\n        r.default = e;\n    }, 4303: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 });\n        var o = n(e(374)), s = n(e(7843)), i = n(e(5500)), u = e(9014), a = e(4966);\n        function c(t, r) { p(t, r.drop, (function (t, r) { r.forEach((function (r) { return delete t[r]; })); })); }\n        function f(t, r) { p(t, r.allow, (function (t, r) { Object.keys(t).forEach((function (e) { r.includes(e) || delete t[e]; })); })); }\n        function p(t, r, e) { Object.entries(r).forEach((function (r) { var n = r[0], o = r[1], i = function (t) { \"object\" == typeof t && null !== t && e(t, o); }, u = \"\" === n ? t : (0, s.default)(t, n); Array.isArray(u) ? u.forEach(i) : i(u); })); }\n        function l(t, r) { var e = JSON.parse(JSON.stringify(t)); for (var n in r.map)\n            if (r.map.hasOwnProperty(n)) {\n                var o = r.map[n], i = n.split(\".\"), c = void 0;\n                if (i.length > 1 ? (i.pop(), c = (0, s.default)(e, i.join(\".\"))) : c = t, \"object\" == typeof c) {\n                    if (o.copy) {\n                        var f = (0, s.default)(e, o.copy);\n                        void 0 !== f && (0, u.dset)(t, n, f);\n                    }\n                    else if (o.move) {\n                        var p = (0, s.default)(e, o.move);\n                        void 0 !== p && (0, u.dset)(t, n, p), (0, a.unset)(t, o.move);\n                    }\n                    else\n                        o.hasOwnProperty(\"set\") && (0, u.dset)(t, n, o.set);\n                    if (o.to_string) {\n                        var l = (0, s.default)(t, n);\n                        if (\"string\" == typeof l || \"object\" == typeof l && null !== l)\n                            continue;\n                        void 0 !== l ? (0, u.dset)(t, n, JSON.stringify(l)) : (0, u.dset)(t, n, \"undefined\");\n                    }\n                }\n            } }\n        function v(t, r) { return !(r.sample.percent <= 0) && (r.sample.percent >= 1 || (r.sample.path ? function (t, r) { var e = (0, s.default)(t, r.sample.path), n = (0, o.default)(JSON.stringify(e)), u = -64, a = []; y(n.slice(0, 8), a); for (var c = 0, f = 0; f < 64 && 1 !== a[f]; f++)\n            c++; if (0 !== c) {\n            var p = [];\n            y(n.slice(9, 16), p), u -= c, a.splice(0, c), p.splice(64 - c), a = a.concat(p);\n        } return a[63] = 0 === a[63] ? 1 : 0, (0, i.default)(parseInt(a.join(\"\"), 2), u) < r.sample.percent; }(t, r) : (e = r.sample.percent, Math.random() <= e))); var e; }\n        function y(t, r) { for (var e = 0; e < 8; e++)\n            for (var n = t[e], o = 128; o >= 1; o /= 2)\n                n - o >= 0 ? (n -= o, r.push(1)) : r.push(0); }\n        r.default = function (t, r) { for (var e = t, n = 0, o = r; n < o.length; n++) {\n            var s = o[n];\n            switch (s.type) {\n                case \"drop\": return null;\n                case \"drop_properties\":\n                    c(e, s.config);\n                    break;\n                case \"allow_properties\":\n                    f(e, s.config);\n                    break;\n                case \"sample_event\":\n                    if (v(e, s.config))\n                        break;\n                    return null;\n                case \"map_properties\":\n                    l(e, s.config);\n                    break;\n                case \"hash_properties\": break;\n                default: throw new Error('Transformer of type \"'.concat(s.type, '\" is unsupported.'));\n            }\n        } return e; };\n    }, 4966: function (t, r, e) {\n        \"use strict\";\n        var n = this && this.__importDefault || function (t) { return t && t.__esModule ? t : { default: t }; };\n        Object.defineProperty(r, \"__esModule\", { value: !0 }), r.unset = void 0;\n        var o = n(e(7843));\n        r.unset = function (t, r) { if ((0, o.default)(t, r)) {\n            for (var e = r.split(\".\"), n = e.pop(); e.length && \"\\\\\" === e[e.length - 1].slice(-1);)\n                n = e.pop().slice(0, -1) + \".\" + n;\n            for (; e.length;)\n                t = t[r = e.shift()];\n            return delete t[n];\n        } return !0; };\n    }, 9014: function (t, r) { r.dset = function (t, r, e) { r.split && (r = r.split(\".\")); for (var n, o, s = 0, i = r.length, u = t; s < i && \"__proto__\" !== (o = r[s++]) && \"constructor\" !== o && \"prototype\" !== o;)\n        u = u[o] = s === i ? e : typeof (n = u[o]) == typeof r ? n : 0 * r[s] != 0 || ~(\"\" + r[s]).indexOf(\".\") ? {} : []; }; }, 3304: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Float64Array ? Float64Array : void 0;\n        t.exports = r;\n    }, 7382: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(5569), s = e(3304), i = e(8482);\n        n = o() ? s : i, t.exports = n;\n    }, 8482: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 6322: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(2508), s = e(5679), i = e(882);\n        n = o() ? s : i, t.exports = n;\n    }, 882: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 5679: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint16Array ? Uint16Array : void 0;\n        t.exports = r;\n    }, 4773: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(9773), s = e(3004), i = e(3078);\n        n = o() ? s : i, t.exports = n;\n    }, 3078: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 3004: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint32Array ? Uint32Array : void 0;\n        t.exports = r;\n    }, 7980: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(8114), s = e(6737), i = e(3357);\n        n = o() ? s : i, t.exports = n;\n    }, 3357: function (t) {\n        \"use strict\";\n        t.exports = function () { throw new Error(\"not implemented\"); };\n    }, 6737: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint8Array ? Uint8Array : void 0;\n        t.exports = r;\n    }, 2684: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Float64Array ? Float64Array : null;\n        t.exports = r;\n    }, 5569: function (t, r, e) {\n        \"use strict\";\n        var n = e(3876);\n        t.exports = n;\n    }, 3876: function (t, r, e) {\n        \"use strict\";\n        var n = e(1448), o = e(2684);\n        t.exports = function () { var t, r; if (\"function\" != typeof o)\n            return !1; try {\n            r = new o([1, 3.14, -3.14, NaN]), t = n(r) && 1 === r[0] && 3.14 === r[1] && -3.14 === r[2] && r[3] != r[3];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 9048: function (t, r, e) {\n        \"use strict\";\n        var n = e(3763);\n        t.exports = n;\n    }, 3763: function (t) {\n        \"use strict\";\n        var r = Object.prototype.hasOwnProperty;\n        t.exports = function (t, e) { return null != t && r.call(t, e); };\n    }, 7009: function (t, r, e) {\n        \"use strict\";\n        var n = e(6784);\n        t.exports = n;\n    }, 6784: function (t) {\n        \"use strict\";\n        t.exports = function () { return \"function\" == typeof Symbol && \"symbol\" == typeof Symbol(\"foo\"); };\n    }, 3123: function (t, r, e) {\n        \"use strict\";\n        var n = e(8481);\n        t.exports = n;\n    }, 8481: function (t, r, e) {\n        \"use strict\";\n        var n = e(7009)();\n        t.exports = function () { return n && \"symbol\" == typeof Symbol.toStringTag; };\n    }, 2508: function (t, r, e) {\n        \"use strict\";\n        var n = e(3403);\n        t.exports = n;\n    }, 3403: function (t, r, e) {\n        \"use strict\";\n        var n = e(768), o = e(9668), s = e(187);\n        t.exports = function () { var t, r; if (\"function\" != typeof s)\n            return !1; try {\n            r = new s(r = [1, 3.14, -3.14, o + 1, o + 2]), t = n(r) && 1 === r[0] && 3 === r[1] && r[2] === o - 2 && 0 === r[3] && 1 === r[4];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 187: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint16Array ? Uint16Array : null;\n        t.exports = r;\n    }, 9773: function (t, r, e) {\n        \"use strict\";\n        var n = e(2822);\n        t.exports = n;\n    }, 2822: function (t, r, e) {\n        \"use strict\";\n        var n = e(2744), o = e(3899), s = e(746);\n        t.exports = function () { var t, r; if (\"function\" != typeof s)\n            return !1; try {\n            r = new s(r = [1, 3.14, -3.14, o + 1, o + 2]), t = n(r) && 1 === r[0] && 3 === r[1] && r[2] === o - 2 && 0 === r[3] && 1 === r[4];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 746: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint32Array ? Uint32Array : null;\n        t.exports = r;\n    }, 8114: function (t, r, e) {\n        \"use strict\";\n        var n = e(8066);\n        t.exports = n;\n    }, 8066: function (t, r, e) {\n        \"use strict\";\n        var n = e(8279), o = e(3443), s = e(2731);\n        t.exports = function () { var t, r; if (\"function\" != typeof s)\n            return !1; try {\n            r = new s(r = [1, 3.14, -3.14, o + 1, o + 2]), t = n(r) && 1 === r[0] && 3 === r[1] && r[2] === o - 2 && 0 === r[3] && 1 === r[4];\n        }\n        catch (r) {\n            t = !1;\n        } return t; };\n    }, 2731: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Uint8Array ? Uint8Array : null;\n        t.exports = r;\n    }, 1448: function (t, r, e) {\n        \"use strict\";\n        var n = e(1453);\n        t.exports = n;\n    }, 1453: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Float64Array;\n        t.exports = function (t) { return o && t instanceof Float64Array || \"[object Float64Array]\" === n(t); };\n    }, 9331: function (t, r, e) {\n        \"use strict\";\n        var n = e(7980), o = { uint16: e(6322), uint8: n };\n        t.exports = o;\n    }, 5902: function (t, r, e) {\n        \"use strict\";\n        var n = e(4106);\n        t.exports = n;\n    }, 4106: function (t, r, e) {\n        \"use strict\";\n        var n, o, s = e(9331);\n        (o = new s.uint16(1))[0] = 4660, n = 52 === new s.uint8(o.buffer)[0], t.exports = n;\n    }, 768: function (t, r, e) {\n        \"use strict\";\n        var n = e(3823);\n        t.exports = n;\n    }, 3823: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Uint16Array;\n        t.exports = function (t) { return o && t instanceof Uint16Array || \"[object Uint16Array]\" === n(t); };\n    }, 2744: function (t, r, e) {\n        \"use strict\";\n        var n = e(2326);\n        t.exports = n;\n    }, 2326: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Uint32Array;\n        t.exports = function (t) { return o && t instanceof Uint32Array || \"[object Uint32Array]\" === n(t); };\n    }, 8279: function (t, r, e) {\n        \"use strict\";\n        var n = e(208);\n        t.exports = n;\n    }, 208: function (t, r, e) {\n        \"use strict\";\n        var n = e(6208), o = \"function\" == typeof Uint8Array;\n        t.exports = function (t) { return o && t instanceof Uint8Array || \"[object Uint8Array]\" === n(t); };\n    }, 6315: function (t) {\n        \"use strict\";\n        t.exports = 1023;\n    }, 1686: function (t) {\n        \"use strict\";\n        t.exports = 2147483647;\n    }, 3105: function (t) {\n        \"use strict\";\n        t.exports = 2146435072;\n    }, 3449: function (t) {\n        \"use strict\";\n        t.exports = 2147483648;\n    }, 6988: function (t) {\n        \"use strict\";\n        t.exports = -1023;\n    }, 9777: function (t) {\n        \"use strict\";\n        t.exports = 1023;\n    }, 3690: function (t) {\n        \"use strict\";\n        t.exports = -1074;\n    }, 2918: function (t, r, e) {\n        \"use strict\";\n        var n = e(4772).NEGATIVE_INFINITY;\n        t.exports = n;\n    }, 4165: function (t) {\n        \"use strict\";\n        var r = Number.POSITIVE_INFINITY;\n        t.exports = r;\n    }, 6488: function (t) {\n        \"use strict\";\n        t.exports = 22250738585072014e-324;\n    }, 9668: function (t) {\n        \"use strict\";\n        t.exports = 65535;\n    }, 3899: function (t) {\n        \"use strict\";\n        t.exports = 4294967295;\n    }, 3443: function (t) {\n        \"use strict\";\n        t.exports = 255;\n    }, 7011: function (t, r, e) {\n        \"use strict\";\n        var n = e(812);\n        t.exports = n;\n    }, 812: function (t, r, e) {\n        \"use strict\";\n        var n = e(4165), o = e(2918);\n        t.exports = function (t) { return t === n || t === o; };\n    }, 1883: function (t, r, e) {\n        \"use strict\";\n        var n = e(1797);\n        t.exports = n;\n    }, 1797: function (t) {\n        \"use strict\";\n        t.exports = function (t) { return t != t; };\n    }, 513: function (t, r, e) {\n        \"use strict\";\n        var n = e(5760);\n        t.exports = n;\n    }, 5760: function (t) {\n        \"use strict\";\n        t.exports = function (t) { return Math.abs(t); };\n    }, 5848: function (t, r, e) {\n        \"use strict\";\n        var n = e(677);\n        t.exports = n;\n    }, 677: function (t, r, e) {\n        \"use strict\";\n        var n = e(3449), o = e(1686), s = e(7838), i = e(1921), u = e(2490), a = [0, 0];\n        t.exports = function (t, r) { var e, c; return s.assign(t, a, 1, 0), e = a[0], e &= o, c = i(r), u(e |= c &= n, a[1]); };\n    }, 5500: function (t, r, e) {\n        \"use strict\";\n        var n = e(8397);\n        t.exports = n;\n    }, 8397: function (t, r, e) {\n        \"use strict\";\n        var n = e(4165), o = e(2918), s = e(6315), i = e(9777), u = e(6988), a = e(3690), c = e(1883), f = e(7011), p = e(5848), l = e(4948), v = e(8478), y = e(7838), d = e(2490), h = [0, 0], x = [0, 0];\n        t.exports = function (t, r) { var e, b; return 0 === t || c(t) || f(t) ? t : (l(h, t), r += h[1], (r += v(t = h[0])) < a ? p(0, t) : r > i ? t < 0 ? o : n : (r <= u ? (r += 52, b = 2220446049250313e-31) : b = 1, y(x, t), e = x[0], e &= 2148532223, b * d(e |= r + s << 20, x[1]))); };\n    }, 4772: function (t, r, e) {\n        \"use strict\";\n        var n = e(7548);\n        t.exports = n;\n    }, 7548: function (t) {\n        \"use strict\";\n        t.exports = Number;\n    }, 8478: function (t, r, e) {\n        \"use strict\";\n        var n = e(4500);\n        t.exports = n;\n    }, 4500: function (t, r, e) {\n        \"use strict\";\n        var n = e(1921), o = e(3105), s = e(6315);\n        t.exports = function (t) { var r = n(t); return (r = (r & o) >>> 20) - s | 0; };\n    }, 2490: function (t, r, e) {\n        \"use strict\";\n        var n = e(9639);\n        t.exports = n;\n    }, 4445: function (t, r, e) {\n        \"use strict\";\n        var n, o, s;\n        !0 === e(5902) ? (o = 1, s = 0) : (o = 0, s = 1), n = { HIGH: o, LOW: s }, t.exports = n;\n    }, 9639: function (t, r, e) {\n        \"use strict\";\n        var n = e(4773), o = e(7382), s = e(4445), i = new o(1), u = new n(i.buffer), a = s.HIGH, c = s.LOW;\n        t.exports = function (t, r) { return u[a] = t, u[c] = r, i[0]; };\n    }, 5646: function (t, r, e) {\n        \"use strict\";\n        var n;\n        n = !0 === e(5902) ? 1 : 0, t.exports = n;\n    }, 1921: function (t, r, e) {\n        \"use strict\";\n        var n = e(6285);\n        t.exports = n;\n    }, 6285: function (t, r, e) {\n        \"use strict\";\n        var n = e(4773), o = e(7382), s = e(5646), i = new o(1), u = new n(i.buffer);\n        t.exports = function (t) { return i[0] = t, u[s]; };\n    }, 9024: function (t, r, e) {\n        \"use strict\";\n        var n = e(6488), o = e(7011), s = e(1883), i = e(513);\n        t.exports = function (t, r, e, u) { return s(t) || o(t) ? (r[u] = t, r[u + e] = 0, r) : 0 !== t && i(t) < n ? (r[u] = 4503599627370496 * t, r[u + e] = -52, r) : (r[u] = t, r[u + e] = 0, r); };\n    }, 4948: function (t, r, e) {\n        \"use strict\";\n        var n = e(7576), o = e(9422);\n        n(o, \"assign\", e(9024)), t.exports = o;\n    }, 9422: function (t, r, e) {\n        \"use strict\";\n        var n = e(9024);\n        t.exports = function (t) { return n(t, [0, 0], 1, 0); };\n    }, 5239: function (t, r, e) {\n        \"use strict\";\n        var n = e(4773), o = e(7382), s = e(5782), i = new o(1), u = new n(i.buffer), a = s.HIGH, c = s.LOW;\n        t.exports = function (t, r, e, n) { return i[0] = t, r[n] = u[a], r[n + e] = u[c], r; };\n    }, 7838: function (t, r, e) {\n        \"use strict\";\n        var n = e(7576), o = e(4010);\n        n(o, \"assign\", e(5239)), t.exports = o;\n    }, 5782: function (t, r, e) {\n        \"use strict\";\n        var n, o, s;\n        !0 === e(5902) ? (o = 1, s = 0) : (o = 0, s = 1), n = { HIGH: o, LOW: s }, t.exports = n;\n    }, 4010: function (t, r, e) {\n        \"use strict\";\n        var n = e(5239);\n        t.exports = function (t) { return n(t, [0, 0], 1, 0); };\n    }, 7576: function (t, r, e) {\n        \"use strict\";\n        var n = e(7063);\n        t.exports = n;\n    }, 7063: function (t, r, e) {\n        \"use strict\";\n        var n = e(6691);\n        t.exports = function (t, r, e) { n(t, r, { configurable: !1, enumerable: !1, writable: !1, value: e }); };\n    }, 2073: function (t) {\n        \"use strict\";\n        var r = Object.defineProperty;\n        t.exports = r;\n    }, 1680: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Object.defineProperty ? Object.defineProperty : null;\n        t.exports = r;\n    }, 1471: function (t, r, e) {\n        \"use strict\";\n        var n = e(1680);\n        t.exports = function () { try {\n            return n({}, \"x\", {}), !0;\n        }\n        catch (t) {\n            return !1;\n        } };\n    }, 6691: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(1471), s = e(2073), i = e(1309);\n        n = o() ? s : i, t.exports = n;\n    }, 1309: function (t) {\n        \"use strict\";\n        var r = Object.prototype, e = r.toString, n = r.__defineGetter__, o = r.__defineSetter__, s = r.__lookupGetter__, i = r.__lookupSetter__;\n        t.exports = function (t, u, a) { var c, f, p, l; if (\"object\" != typeof t || null === t || \"[object Array]\" === e.call(t))\n            throw new TypeError(\"invalid argument. First argument must be an object. Value: `\" + t + \"`.\"); if (\"object\" != typeof a || null === a || \"[object Array]\" === e.call(a))\n            throw new TypeError(\"invalid argument. Property descriptor must be an object. Value: `\" + a + \"`.\"); if ((f = \"value\" in a) && (s.call(t, u) || i.call(t, u) ? (c = t.__proto__, t.__proto__ = r, delete t[u], t[u] = a.value, t.__proto__ = c) : t[u] = a.value), p = \"get\" in a, l = \"set\" in a, f && (p || l))\n            throw new Error(\"invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.\"); return p && n && n.call(t, u, a.get), l && o && o.call(t, u, a.set), t; };\n    }, 6208: function (t, r, e) {\n        \"use strict\";\n        var n, o = e(3123), s = e(7407), i = e(4210);\n        n = o() ? i : s, t.exports = n;\n    }, 7407: function (t, r, e) {\n        \"use strict\";\n        var n = e(173);\n        t.exports = function (t) { return n.call(t); };\n    }, 4210: function (t, r, e) {\n        \"use strict\";\n        var n = e(9048), o = e(1403), s = e(173);\n        t.exports = function (t) { var r, e, i; if (null == t)\n            return s.call(t); e = t[o], r = n(t, o); try {\n            t[o] = void 0;\n        }\n        catch (r) {\n            return s.call(t);\n        } return i = s.call(t), r ? t[o] = e : delete t[o], i; };\n    }, 173: function (t) {\n        \"use strict\";\n        var r = Object.prototype.toString;\n        t.exports = r;\n    }, 1403: function (t) {\n        \"use strict\";\n        var r = \"function\" == typeof Symbol ? Symbol.toStringTag : \"\";\n        t.exports = r;\n    }, 7843: function (t) { t.exports = function (t, r, e, n, o) { for (r = r.split ? r.split(\".\") : r, n = 0; n < r.length; n++)\n        t = t ? t[r[n]] : o; return t === o ? e : t; }; }, 374: function (t, r, e) {\n        \"use strict\";\n        e.r(r), e.d(r, { default: function () { return s; } });\n        for (var n = [], o = 0; o < 64;)\n            n[o] = 0 | 4294967296 * Math.sin(++o % Math.PI);\n        function s(t) { var r, e, s, i = [r = 1732584193, e = 4023233417, ~r, ~e], u = [], a = unescape(encodeURI(t)) + \"\", c = a.length; for (t = --c / 4 + 2 | 15, u[--t] = 8 * c; ~c;)\n            u[c >> 2] |= a.charCodeAt(c) << 8 * c--; for (o = a = 0; o < t; o += 16) {\n            for (c = i; a < 64; c = [s = c[3], r + ((s = c[0] + [r & e | ~r & s, s & r | ~s & e, r ^ e ^ s, e ^ (r | ~s)][c = a >> 4] + n[a] + ~~u[o | 15 & [a, 5 * a + 1, 3 * a + 5, 7 * a][c]]) << (c = [7, 12, 17, 22, 5, 9, 14, 20, 4, 11, 16, 23, 6, 10, 15, 21][4 * c + a++ % 4]) | s >>> -c), r, e])\n                r = 0 | c[1], e = c[2];\n            for (a = 4; a;)\n                i[--a] += c[a];\n        } for (t = \"\"; a < 32;)\n            t += (i[a >> 3] >> 4 * (1 ^ a++) & 15).toString(16); return t; }\n    } }, r = {}; function e(n) { var o = r[n]; if (void 0 !== o)\n    return o.exports; var s = r[n] = { exports: {} }; return t[n].call(s.exports, s, s.exports, e), s.exports; } return e.d = function (t, r) { for (var n in r)\n    e.o(r, n) && !e.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: r[n] }); }, e.o = function (t, r) { return Object.prototype.hasOwnProperty.call(t, r); }, e.r = function (t) { \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(t, \"__esModule\", { value: !0 }); }, e(2870); })(); }));\n//# sourceMappingURL=tsub.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvdmVuZG9yL3RzdWIvdHN1Yi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsSUFBSSxJQUF1RDtBQUM5RTtBQUNBLEtBQUssYUFNSixFQUFFLHNCQUFzQixzQkFBc0IsVUFBVTtBQUN6RDtBQUNBLCtEQUErRCxpQ0FBaUM7QUFDaEcsaURBQWlELFdBQVc7QUFDNUQ7QUFDQSxnREFBZ0QsbUNBQW1DLHdCQUF3QjtBQUMzRztBQUNBLDhDQUE4QyxtQ0FBbUMsd0JBQXdCO0FBQ3pHO0FBQ0EsNENBQTRDLG1DQUFtQyx3QkFBd0I7QUFDdkcsS0FBSztBQUNMO0FBQ0EsK0RBQStELGlDQUFpQztBQUNoRyxpREFBaUQsV0FBVztBQUM1RDtBQUNBLDJCQUEyQjtBQUMzQixtQ0FBbUMsMEJBQTBCO0FBQzdEO0FBQ0E7QUFDQSxnQ0FBZ0MsY0FBYztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsbURBQW1ELHlDQUF5Qyx1QkFBdUIsS0FBSztBQUN4SDtBQUNBLG1JQUFtSSxVQUFVLFVBQVUsYUFBYTtBQUNwSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGNBQWM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3QkFBd0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsb0ZBQW9GO0FBQ3JJO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isd0JBQXdCO0FBQ3hCLHdCQUF3QixlQUFlLG9DQUFvQyw2QkFBNkI7QUFDeEcseUNBQXlDLGVBQWUsZUFBZSxjQUFjO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCwyQkFBMkIscUJBQXFCLDBCQUEwQixhQUFhO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHdCQUF3QixVQUFVLG1DQUFtQztBQUNyRSxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JEO0FBQ0EsaURBQWlEO0FBQ2pELDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUJBQWlCLG9DQUFvQztBQUNuRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaURBQWlELFdBQVc7QUFDNUQsOEJBQThCLGdCQUFnQix5Q0FBeUMsOERBQThELHdDQUF3QyxjQUFjO0FBQzNNO0FBQ0E7QUFDQSxVQUFVLFdBQVcsTUFBTTtBQUMzQjtBQUNBLEtBQUs7QUFDTDtBQUNBLCtEQUErRCxpQ0FBaUM7QUFDaEcsaURBQWlELFdBQVc7QUFDNUQ7QUFDQSwyQkFBMkIsZ0NBQWdDLDBCQUEwQixxQkFBcUIsS0FBSztBQUMvRywyQkFBMkIsaUNBQWlDLHVDQUF1QywrQkFBK0IsS0FBSztBQUN2SSw4QkFBOEIsMENBQTBDLDJDQUEyQyxnREFBZ0QsMkNBQTJDLHlDQUF5QztBQUN2UCwyQkFBMkIsdUNBQXVDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnR0FBZ0csa0dBQWtHLHFCQUFxQix1QkFBdUIsc0JBQXNCO0FBQy9SLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsVUFBVSxvR0FBb0csdURBQXVEO0FBQ3JLLDJCQUEyQixnQkFBZ0IsT0FBTztBQUNsRCx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBLHNDQUFzQyw4QkFBOEIsY0FBYztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixLQUFLO0FBQ0w7QUFDQSwrREFBK0QsaUNBQWlDO0FBQ2hHLGlEQUFpRCxXQUFXO0FBQzVEO0FBQ0Esb0NBQW9DO0FBQ3BDLG9EQUFvRCwrQ0FBK0M7QUFDbkc7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUssMEJBQTBCLDhCQUE4QiwrQkFBK0IsMkNBQTJDLGtGQUFrRjtBQUN6TixxSEFBcUgsVUFBVTtBQUMvSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0NBQWtDO0FBQ2xDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1Qyx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUMsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1Qyx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxtQ0FBbUM7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0NBQXNDLFVBQVU7QUFDaEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0NBQXNDLFVBQVU7QUFDaEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DLGNBQWM7QUFDakQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0VBQWdFLGlCQUFpQjtBQUNqRixLQUFLO0FBQ0w7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRDQUE0QztBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlDQUF5QyxVQUFVLDBEQUEwRDtBQUM3RyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUNBQXlDLGdCQUFnQjtBQUN6RCw0R0FBNEc7QUFDNUcsaUhBQWlIO0FBQ2pILHFKQUFxSjtBQUNySixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUMsYUFBYTtBQUNoRCw4QkFBOEIsdUJBQXVCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSyx1QkFBdUIsdUNBQXVDLDRDQUE0QyxjQUFjO0FBQzdILDZCQUE2Qiw0QkFBNEI7QUFDekQ7QUFDQSx5QkFBeUIsdUJBQXVCLGFBQWE7QUFDN0QsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQSx3QkFBd0IsbUhBQW1ILDJDQUEyQyxHQUFHO0FBQ3pMLHFEQUFxRCxnQkFBZ0IsT0FBTztBQUM1RSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBLHdCQUF3QixFQUFFO0FBQzFCO0FBQ0EsVUFBVSxhQUFhLE9BQU87QUFDOUIsaUVBQWlFO0FBQ2pFLE9BQU8sVUFBVSxnQkFBZ0IsY0FBYztBQUMvQyxzQkFBc0IsaUJBQWlCLGVBQWUsMkRBQTJELCtCQUErQjtBQUNoSiw2REFBNkQsMkJBQTJCLElBQUksMEJBQTBCLG9EQUFvRCx1QkFBdUIscUdBQXFHLGlCQUFpQiw0Q0FBNEMsV0FBVyxJQUFJLFlBQVksTUFBTTtBQUNwWSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3ZlbmRvci90c3ViL3RzdWIuanM/YTM3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8vIEB0cy1ub2NoZWNrXG4vLyBwcmV0dGllci1pZ25vcmVcbi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAc2VnbWVudC90c3ViIDIuMC4wIC0gR0VORVJBVEVEIERPIE5PVCBNT0RJRllcbi8qISBGb3IgbGljZW5zZSBpbmZvcm1hdGlvbiBwbGVhc2Ugc2VlIHRzdWIuanMuTElDRU5TRS50eHQgKi9cbiFmdW5jdGlvbiAodCwgcikgeyBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgZXhwb3J0cyAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBtb2R1bGUpXG4gICAgbW9kdWxlLmV4cG9ydHMgPSByKCk7XG5lbHNlIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kKVxuICAgIGRlZmluZShbXSwgcik7XG5lbHNlIHtcbiAgICB2YXIgZSA9IHIoKTtcbiAgICBmb3IgKHZhciBuIGluIGUpXG4gICAgICAgIChcIm9iamVjdFwiID09IHR5cGVvZiBleHBvcnRzID8gZXhwb3J0cyA6IHQpW25dID0gZVtuXTtcbn0gfShzZWxmLCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gKGZ1bmN0aW9uICgpIHsgdmFyIHQgPSB7IDI4NzA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQgfHwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgJiYgdC5fX2VzTW9kdWxlID8gdCA6IHsgZGVmYXVsdDogdCB9OyB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6ICEwIH0pLCByLlN0b3JlID0gci5tYXRjaGVzID0gci50cmFuc2Zvcm0gPSB2b2lkIDA7XG4gICAgICAgIHZhciBvID0gZSg0MzAzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIFwidHJhbnNmb3JtXCIsIHsgZW51bWVyYWJsZTogITAsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbihvKS5kZWZhdWx0OyB9IH0pO1xuICAgICAgICB2YXIgcyA9IGUoMjM3MCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIm1hdGNoZXNcIiwgeyBlbnVtZXJhYmxlOiAhMCwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBuKHMpLmRlZmF1bHQ7IH0gfSk7XG4gICAgICAgIHZhciBpID0gZSgxNDQ0KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIFwiU3RvcmVcIiwgeyBlbnVtZXJhYmxlOiAhMCwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBuKGkpLmRlZmF1bHQ7IH0gfSk7XG4gICAgfSwgMjM3MDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCB8fCBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgPyB0IDogeyBkZWZhdWx0OiB0IH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7XG4gICAgICAgIHZhciBvID0gbihlKDc4NDMpKTtcbiAgICAgICAgZnVuY3Rpb24gcyh0LCByKSB7IGlmICghQXJyYXkuaXNBcnJheSh0KSlcbiAgICAgICAgICAgIHJldHVybiAhMCA9PT0gaSh0LCByKTsgdmFyIGUsIG4sIG8sIGYsIHAgPSB0WzBdOyBzd2l0Y2ggKHApIHtcbiAgICAgICAgICAgIGNhc2UgXCIhXCI6IHJldHVybiAhcyh0WzFdLCByKTtcbiAgICAgICAgICAgIGNhc2UgXCJvclwiOlxuICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAxOyBsIDwgdC5sZW5ndGg7IGwrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHModFtsXSwgcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgY2FzZSBcImFuZFwiOlxuICAgICAgICAgICAgICAgIGZvciAobCA9IDE7IGwgPCB0Lmxlbmd0aDsgbCsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXModFtsXSwgcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgY2FzZSBcIj1cIjpcbiAgICAgICAgICAgIGNhc2UgXCIhPVwiOiByZXR1cm4gZnVuY3Rpb24gKHQsIHIsIGUsIG4pIHsgc3dpdGNoICh1KHQpICYmICh0ID0gcyh0LCBuKSksIHUocikgJiYgKHIgPSBzKHIsIG4pKSwgXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiByICYmICh0ID0gSlNPTi5zdHJpbmdpZnkodCksIHIgPSBKU09OLnN0cmluZ2lmeShyKSksIGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiPVwiOiByZXR1cm4gdCA9PT0gcjtcbiAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIjogcmV0dXJuIHQgIT09IHI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGVyYXRvciBpbiBjb21wYXJlSXRlbXM6IFwiLmNvbmNhdChlKSk7XG4gICAgICAgICAgICB9IH0oaSh0WzFdLCByKSwgaSh0WzJdLCByKSwgcCwgcik7XG4gICAgICAgICAgICBjYXNlIFwiPD1cIjpcbiAgICAgICAgICAgIGNhc2UgXCI8XCI6XG4gICAgICAgICAgICBjYXNlIFwiPlwiOlxuICAgICAgICAgICAgY2FzZSBcIj49XCI6IHJldHVybiBmdW5jdGlvbiAodCwgciwgZSwgbikgeyBpZiAodSh0KSAmJiAodCA9IHModCwgbikpLCB1KHIpICYmIChyID0gcyhyLCBuKSksIFwibnVtYmVyXCIgIT0gdHlwZW9mIHQgfHwgXCJudW1iZXJcIiAhPSB0eXBlb2YgcilcbiAgICAgICAgICAgICAgICByZXR1cm4gITE7IHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCI8PVwiOiByZXR1cm4gdCA8PSByO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI+PVwiOiByZXR1cm4gdCA+PSByO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI8XCI6IHJldHVybiB0IDwgcjtcbiAgICAgICAgICAgICAgICBjYXNlIFwiPlwiOiByZXR1cm4gdCA+IHI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGVyYXRvciBpbiBjb21wYXJlTnVtYmVyczogXCIuY29uY2F0KGUpKTtcbiAgICAgICAgICAgIH0gfShpKHRbMV0sIHIpLCBpKHRbMl0sIHIpLCBwLCByKTtcbiAgICAgICAgICAgIGNhc2UgXCJpblwiOiByZXR1cm4gZnVuY3Rpb24gKHQsIHIsIGUpIHsgcmV0dXJuIHZvaWQgMCAhPT0gci5maW5kKChmdW5jdGlvbiAocikgeyByZXR1cm4gaShyLCBlKSA9PT0gdDsgfSkpOyB9KGkodFsxXSwgciksIGkodFsyXSwgciksIHIpO1xuICAgICAgICAgICAgY2FzZSBcImNvbnRhaW5zXCI6IHJldHVybiBvID0gaSh0WzFdLCByKSwgZiA9IGkodFsyXSwgciksIFwic3RyaW5nXCIgPT0gdHlwZW9mIG8gJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZiAmJiAtMSAhPT0gby5pbmRleE9mKGYpO1xuICAgICAgICAgICAgY2FzZSBcIm1hdGNoXCI6IHJldHVybiBlID0gaSh0WzFdLCByKSwgbiA9IGkodFsyXSwgciksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiAmJiBmdW5jdGlvbiAodCwgcikgeyB2YXIgZSwgbjsgdDogZm9yICg7IHQubGVuZ3RoID4gMDspIHtcbiAgICAgICAgICAgICAgICB2YXIgbywgcztcbiAgICAgICAgICAgICAgICBpZiAobyA9IChlID0gYSh0KSkuc3RhciwgcyA9IGUuY2h1bmssIHQgPSBlLnBhdHRlcm4sIG8gJiYgXCJcIiA9PT0gcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIHZhciBpID0gYyhzLCByKSwgdSA9IGkudCwgZiA9IGkub2ssIHAgPSBpLmVycjtcbiAgICAgICAgICAgICAgICBpZiAocClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIGlmICghZiB8fCAhKDAgPT09IHUubGVuZ3RoIHx8IHQubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8pXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHIubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9IChuID0gYyhzLCByLnNsaWNlKGwgKyAxKSkpLnQsIGYgPSBuLm9rLCBwID0gbi5lcnIsIGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoICYmIHUubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByID0gdTtcbiAgICAgICAgICAgIH0gcmV0dXJuIDAgPT09IHIubGVuZ3RoOyB9KG4sIGUpO1xuICAgICAgICAgICAgY2FzZSBcImxvd2VyY2FzZVwiOlxuICAgICAgICAgICAgICAgIHZhciB2ID0gaSh0WzFdLCByKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgdiA/IG51bGwgOiB2LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjYXNlIFwidHlwZW9mXCI6IHJldHVybiB0eXBlb2YgaSh0WzFdLCByKTtcbiAgICAgICAgICAgIGNhc2UgXCJsZW5ndGhcIjogcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiBudWxsID09PSB0ID8gMCA6IEFycmF5LmlzQXJyYXkodCkgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IHQubGVuZ3RoIDogTmFOOyB9KGkodFsxXSwgcikpO1xuICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiRlFMIElSIGNvdWxkIG5vdCBldmFsdWF0ZSBmb3IgdG9rZW46IFwiLmNvbmNhdChwKSk7XG4gICAgICAgIH0gfVxuICAgICAgICBmdW5jdGlvbiBpKHQsIHIpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkodCkgPyB0IDogXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiAoMCwgby5kZWZhdWx0KShyLCB0KTsgfVxuICAgICAgICBmdW5jdGlvbiB1KHQpIHsgcmV0dXJuICEhQXJyYXkuaXNBcnJheSh0KSAmJiAoKFwibG93ZXJjYXNlXCIgPT09IHRbMF0gfHwgXCJsZW5ndGhcIiA9PT0gdFswXSB8fCBcInR5cGVvZlwiID09PSB0WzBdKSAmJiAyID09PSB0Lmxlbmd0aCB8fCAoXCJjb250YWluc1wiID09PSB0WzBdIHx8IFwibWF0Y2hcIiA9PT0gdFswXSkgJiYgMyA9PT0gdC5sZW5ndGgpOyB9XG4gICAgICAgIGZ1bmN0aW9uIGEodCkgeyBmb3IgKHZhciByID0geyBzdGFyOiAhMSwgY2h1bms6IFwiXCIsIHBhdHRlcm46IFwiXCIgfTsgdC5sZW5ndGggPiAwICYmIFwiKlwiID09PSB0WzBdOylcbiAgICAgICAgICAgIHQgPSB0LnNsaWNlKDEpLCByLnN0YXIgPSAhMDsgdmFyIGUsIG4gPSAhMTsgdDogZm9yIChlID0gMDsgZSA8IHQubGVuZ3RoOyBlKyspXG4gICAgICAgICAgICBzd2l0Y2ggKHRbZV0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiXFxcXFwiOlxuICAgICAgICAgICAgICAgICAgICBlICsgMSA8IHQubGVuZ3RoICYmIGUrKztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIltcIjpcbiAgICAgICAgICAgICAgICAgICAgbiA9ICEwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiXVwiOlxuICAgICAgICAgICAgICAgICAgICBuID0gITE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6IGlmICghbilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgdDtcbiAgICAgICAgICAgIH0gcmV0dXJuIHIuY2h1bmsgPSB0LnNsaWNlKDAsIGUpLCByLnBhdHRlcm4gPSB0LnNsaWNlKGUpLCByOyB9XG4gICAgICAgIGZ1bmN0aW9uIGModCwgcikgeyBmb3IgKHZhciBlLCBuLCBvID0geyB0OiBcIlwiLCBvazogITEsIGVycjogITEgfTsgdC5sZW5ndGggPiAwOykge1xuICAgICAgICAgICAgaWYgKDAgPT09IHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgc3dpdGNoICh0WzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIltcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSByWzBdO1xuICAgICAgICAgICAgICAgICAgICByID0gci5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgKHQgPSB0LnNsaWNlKDEpKS5sZW5ndGggPiAwICYmIFwiXlwiID09PSB0WzBdICYmIChpID0gITEsIHQgPSB0LnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9ICExLCBhID0gMDs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGggPiAwICYmIFwiXVwiID09PSB0WzBdICYmIGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYywgcCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9IChlID0gZih0KSkuY2hhciwgdCA9IGUubmV3Q2h1bmssIGUuZXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPSBjLCBcIi1cIiA9PT0gdFswXSAmJiAocCA9IChuID0gZih0LnNsaWNlKDEpKSkuY2hhciwgdCA9IG4ubmV3Q2h1bmssIG4uZXJyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPD0gcyAmJiBzIDw9IHAgJiYgKHUgPSAhMCksIGErKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodSAhPT0gaSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiP1wiOlxuICAgICAgICAgICAgICAgICAgICByID0gci5zbGljZSgxKSwgdCA9IHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJcXFxcXCI6IGlmICgwID09PSAodCA9IHQuc2xpY2UoMSkpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uZXJyID0gITAsIG87XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMF0gIT09IHJbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgICAgICAgICAgciA9IHIuc2xpY2UoMSksIHQgPSB0LnNsaWNlKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHJldHVybiBvLnQgPSByLCBvLm9rID0gITAsIG8uZXJyID0gITEsIG87IH1cbiAgICAgICAgZnVuY3Rpb24gZih0KSB7IHZhciByID0geyBjaGFyOiBcIlwiLCBuZXdDaHVuazogXCJcIiwgZXJyOiAhMSB9OyByZXR1cm4gMCA9PT0gdC5sZW5ndGggfHwgXCItXCIgPT09IHRbMF0gfHwgXCJdXCIgPT09IHRbMF0gfHwgXCJcXFxcXCIgPT09IHRbMF0gJiYgMCA9PT0gKHQgPSB0LnNsaWNlKDEpKS5sZW5ndGggPyAoci5lcnIgPSAhMCwgcikgOiAoci5jaGFyID0gdFswXSwgci5uZXdDaHVuayA9IHQuc2xpY2UoMSksIDAgPT09IHIubmV3Q2h1bmsubGVuZ3RoICYmIChyLmVyciA9ICEwKSwgcik7IH1cbiAgICAgICAgci5kZWZhdWx0ID0gZnVuY3Rpb24gKHQsIHIpIHsgaWYgKCFyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWF0Y2hlciBzdXBwbGllZCFcIik7IHN3aXRjaCAoci50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiYWxsXCI6IHJldHVybiAhMDtcbiAgICAgICAgICAgIGNhc2UgXCJmcWxcIjogcmV0dXJuIGZ1bmN0aW9uICh0LCByKSB7IGlmICghdClcbiAgICAgICAgICAgICAgICByZXR1cm4gITE7IHRyeSB7XG4gICAgICAgICAgICAgICAgdCA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIEpTT04ucGFyc2UgRlFMIGludGVybWVkaWF0ZSByZXByZXNlbnRhdGlvbiBcIicuY29uY2F0KHQsICdcIjogJykuY29uY2F0KHIpKTtcbiAgICAgICAgICAgIH0gdmFyIGUgPSBzKHQsIHIpOyByZXR1cm4gXCJib29sZWFuXCIgPT0gdHlwZW9mIGUgJiYgZTsgfShyLmlyLCB0KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIk1hdGNoZXIgb2YgdHlwZSBcIi5jb25jYXQoci50eXBlLCBcIiB1bnN1cHBvcnRlZC5cIikpO1xuICAgICAgICB9IH07XG4gICAgfSwgMTQ0NDogZnVuY3Rpb24gKHQsIHIpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7XG4gICAgICAgIHZhciBlID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiB0KHQpIHsgdGhpcy5ydWxlcyA9IFtdLCB0aGlzLnJ1bGVzID0gdCB8fCBbXTsgfSByZXR1cm4gdC5wcm90b3R5cGUuZ2V0UnVsZXNCeURlc3RpbmF0aW9uTmFtZSA9IGZ1bmN0aW9uICh0KSB7IGZvciAodmFyIHIgPSBbXSwgZSA9IDAsIG4gPSB0aGlzLnJ1bGVzOyBlIDwgbi5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgdmFyIG8gPSBuW2VdO1xuICAgICAgICAgICAgby5kZXN0aW5hdGlvbk5hbWUgIT09IHQgJiYgdm9pZCAwICE9PSBvLmRlc3RpbmF0aW9uTmFtZSB8fCByLnB1c2gobyk7XG4gICAgICAgIH0gcmV0dXJuIHI7IH0sIHQ7IH0oKTtcbiAgICAgICAgci5kZWZhdWx0ID0gZTtcbiAgICB9LCA0MzAzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSB0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0IHx8IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICYmIHQuX19lc01vZHVsZSA/IHQgOiB7IGRlZmF1bHQ6IHQgfTsgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiAhMCB9KTtcbiAgICAgICAgdmFyIG8gPSBuKGUoMzc0KSksIHMgPSBuKGUoNzg0MykpLCBpID0gbihlKDU1MDApKSwgdSA9IGUoOTAxNCksIGEgPSBlKDQ5NjYpO1xuICAgICAgICBmdW5jdGlvbiBjKHQsIHIpIHsgcCh0LCByLmRyb3AsIChmdW5jdGlvbiAodCwgcikgeyByLmZvckVhY2goKGZ1bmN0aW9uIChyKSB7IHJldHVybiBkZWxldGUgdFtyXTsgfSkpOyB9KSk7IH1cbiAgICAgICAgZnVuY3Rpb24gZih0LCByKSB7IHAodCwgci5hbGxvdywgKGZ1bmN0aW9uICh0LCByKSB7IE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uIChlKSB7IHIuaW5jbHVkZXMoZSkgfHwgZGVsZXRlIHRbZV07IH0pKTsgfSkpOyB9XG4gICAgICAgIGZ1bmN0aW9uIHAodCwgciwgZSkgeyBPYmplY3QuZW50cmllcyhyKS5mb3JFYWNoKChmdW5jdGlvbiAocikgeyB2YXIgbiA9IHJbMF0sIG8gPSByWzFdLCBpID0gZnVuY3Rpb24gKHQpIHsgXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIGUodCwgbyk7IH0sIHUgPSBcIlwiID09PSBuID8gdCA6ICgwLCBzLmRlZmF1bHQpKHQsIG4pOyBBcnJheS5pc0FycmF5KHUpID8gdS5mb3JFYWNoKGkpIDogaSh1KTsgfSkpOyB9XG4gICAgICAgIGZ1bmN0aW9uIGwodCwgcikgeyB2YXIgZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpOyBmb3IgKHZhciBuIGluIHIubWFwKVxuICAgICAgICAgICAgaWYgKHIubWFwLmhhc093blByb3BlcnR5KG4pKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSByLm1hcFtuXSwgaSA9IG4uc3BsaXQoXCIuXCIpLCBjID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IDEgPyAoaS5wb3AoKSwgYyA9ICgwLCBzLmRlZmF1bHQpKGUsIGkuam9pbihcIi5cIikpKSA6IGMgPSB0LCBcIm9iamVjdFwiID09IHR5cGVvZiBjKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLmNvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gKDAsIHMuZGVmYXVsdCkoZSwgby5jb3B5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZiAmJiAoMCwgdS5kc2V0KSh0LCBuLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvLm1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gKDAsIHMuZGVmYXVsdCkoZSwgby5tb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gcCAmJiAoMCwgdS5kc2V0KSh0LCBuLCBwKSwgKDAsIGEudW5zZXQpKHQsIG8ubW92ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgby5oYXNPd25Qcm9wZXJ0eShcInNldFwiKSAmJiAoMCwgdS5kc2V0KSh0LCBuLCBvLnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLnRvX3N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSAoMCwgcy5kZWZhdWx0KSh0LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBsIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIGwgJiYgbnVsbCAhPT0gbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gbCA/ICgwLCB1LmRzZXQpKHQsIG4sIEpTT04uc3RyaW5naWZ5KGwpKSA6ICgwLCB1LmRzZXQpKHQsIG4sIFwidW5kZWZpbmVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHYodCwgcikgeyByZXR1cm4gIShyLnNhbXBsZS5wZXJjZW50IDw9IDApICYmIChyLnNhbXBsZS5wZXJjZW50ID49IDEgfHwgKHIuc2FtcGxlLnBhdGggPyBmdW5jdGlvbiAodCwgcikgeyB2YXIgZSA9ICgwLCBzLmRlZmF1bHQpKHQsIHIuc2FtcGxlLnBhdGgpLCBuID0gKDAsIG8uZGVmYXVsdCkoSlNPTi5zdHJpbmdpZnkoZSkpLCB1ID0gLTY0LCBhID0gW107IHkobi5zbGljZSgwLCA4KSwgYSk7IGZvciAodmFyIGMgPSAwLCBmID0gMDsgZiA8IDY0ICYmIDEgIT09IGFbZl07IGYrKylcbiAgICAgICAgICAgIGMrKzsgaWYgKDAgIT09IGMpIHtcbiAgICAgICAgICAgIHZhciBwID0gW107XG4gICAgICAgICAgICB5KG4uc2xpY2UoOSwgMTYpLCBwKSwgdSAtPSBjLCBhLnNwbGljZSgwLCBjKSwgcC5zcGxpY2UoNjQgLSBjKSwgYSA9IGEuY29uY2F0KHApO1xuICAgICAgICB9IHJldHVybiBhWzYzXSA9IDAgPT09IGFbNjNdID8gMSA6IDAsICgwLCBpLmRlZmF1bHQpKHBhcnNlSW50KGEuam9pbihcIlwiKSwgMiksIHUpIDwgci5zYW1wbGUucGVyY2VudDsgfSh0LCByKSA6IChlID0gci5zYW1wbGUucGVyY2VudCwgTWF0aC5yYW5kb20oKSA8PSBlKSkpOyB2YXIgZTsgfVxuICAgICAgICBmdW5jdGlvbiB5KHQsIHIpIHsgZm9yICh2YXIgZSA9IDA7IGUgPCA4OyBlKyspXG4gICAgICAgICAgICBmb3IgKHZhciBuID0gdFtlXSwgbyA9IDEyODsgbyA+PSAxOyBvIC89IDIpXG4gICAgICAgICAgICAgICAgbiAtIG8gPj0gMCA/IChuIC09IG8sIHIucHVzaCgxKSkgOiByLnB1c2goMCk7IH1cbiAgICAgICAgci5kZWZhdWx0ID0gZnVuY3Rpb24gKHQsIHIpIHsgZm9yICh2YXIgZSA9IHQsIG4gPSAwLCBvID0gcjsgbiA8IG8ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIHZhciBzID0gb1tuXTtcbiAgICAgICAgICAgIHN3aXRjaCAocy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRyb3BcIjogcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRyb3BfcHJvcGVydGllc1wiOlxuICAgICAgICAgICAgICAgICAgICBjKGUsIHMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFsbG93X3Byb3BlcnRpZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgZihlLCBzLmNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzYW1wbGVfZXZlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYoZSwgcy5jb25maWcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtYXBfcHJvcGVydGllc1wiOlxuICAgICAgICAgICAgICAgICAgICBsKGUsIHMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImhhc2hfcHJvcGVydGllc1wiOiBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zZm9ybWVyIG9mIHR5cGUgXCInLmNvbmNhdChzLnR5cGUsICdcIiBpcyB1bnN1cHBvcnRlZC4nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gcmV0dXJuIGU7IH07XG4gICAgfSwgNDk2NjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCB8fCBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgPyB0IDogeyBkZWZhdWx0OiB0IH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSksIHIudW5zZXQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBvID0gbihlKDc4NDMpKTtcbiAgICAgICAgci51bnNldCA9IGZ1bmN0aW9uICh0LCByKSB7IGlmICgoMCwgby5kZWZhdWx0KSh0LCByKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgZSA9IHIuc3BsaXQoXCIuXCIpLCBuID0gZS5wb3AoKTsgZS5sZW5ndGggJiYgXCJcXFxcXCIgPT09IGVbZS5sZW5ndGggLSAxXS5zbGljZSgtMSk7KVxuICAgICAgICAgICAgICAgIG4gPSBlLnBvcCgpLnNsaWNlKDAsIC0xKSArIFwiLlwiICsgbjtcbiAgICAgICAgICAgIGZvciAoOyBlLmxlbmd0aDspXG4gICAgICAgICAgICAgICAgdCA9IHRbciA9IGUuc2hpZnQoKV07XG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlIHRbbl07XG4gICAgICAgIH0gcmV0dXJuICEwOyB9O1xuICAgIH0sIDkwMTQ6IGZ1bmN0aW9uICh0LCByKSB7IHIuZHNldCA9IGZ1bmN0aW9uICh0LCByLCBlKSB7IHIuc3BsaXQgJiYgKHIgPSByLnNwbGl0KFwiLlwiKSk7IGZvciAodmFyIG4sIG8sIHMgPSAwLCBpID0gci5sZW5ndGgsIHUgPSB0OyBzIDwgaSAmJiBcIl9fcHJvdG9fX1wiICE9PSAobyA9IHJbcysrXSkgJiYgXCJjb25zdHJ1Y3RvclwiICE9PSBvICYmIFwicHJvdG90eXBlXCIgIT09IG87KVxuICAgICAgICB1ID0gdVtvXSA9IHMgPT09IGkgPyBlIDogdHlwZW9mIChuID0gdVtvXSkgPT0gdHlwZW9mIHIgPyBuIDogMCAqIHJbc10gIT0gMCB8fCB+KFwiXCIgKyByW3NdKS5pbmRleE9mKFwiLlwiKSA/IHt9IDogW107IH07IH0sIDMzMDQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgRmxvYXQ2NEFycmF5ID8gRmxvYXQ2NEFycmF5IDogdm9pZCAwO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDczODI6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbyA9IGUoNTU2OSksIHMgPSBlKDMzMDQpLCBpID0gZSg4NDgyKTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDg0ODI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTsgfTtcbiAgICB9LCA2MzIyOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4sIG8gPSBlKDI1MDgpLCBzID0gZSg1Njc5KSwgaSA9IGUoODgyKTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDg4MjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpOyB9O1xuICAgIH0sIDU2Nzk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgVWludDE2QXJyYXkgPyBVaW50MTZBcnJheSA6IHZvaWQgMDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCA0NzczOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4sIG8gPSBlKDk3NzMpLCBzID0gZSgzMDA0KSwgaSA9IGUoMzA3OCk7XG4gICAgICAgIG4gPSBvKCkgPyBzIDogaSwgdC5leHBvcnRzID0gbjtcbiAgICB9LCAzMDc4OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIik7IH07XG4gICAgfSwgMzAwNDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciByID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBVaW50MzJBcnJheSA/IFVpbnQzMkFycmF5IDogdm9pZCAwO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDc5ODA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbyA9IGUoODExNCksIHMgPSBlKDY3MzcpLCBpID0gZSgzMzU3KTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDMzNTc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTsgfTtcbiAgICB9LCA2NzM3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXkgPyBVaW50OEFycmF5IDogdm9pZCAwO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDI2ODQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgRmxvYXQ2NEFycmF5ID8gRmxvYXQ2NEFycmF5IDogbnVsbDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCA1NTY5OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDM4NzYpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDM4NzY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMTQ0OCksIG8gPSBlKDI2ODQpO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHZhciB0LCByOyBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBvKVxuICAgICAgICAgICAgcmV0dXJuICExOyB0cnkge1xuICAgICAgICAgICAgciA9IG5ldyBvKFsxLCAzLjE0LCAtMy4xNCwgTmFOXSksIHQgPSBuKHIpICYmIDEgPT09IHJbMF0gJiYgMy4xNCA9PT0gclsxXSAmJiAtMy4xNCA9PT0gclsyXSAmJiByWzNdICE9IHJbM107XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfSByZXR1cm4gdDsgfTtcbiAgICB9LCA5MDQ4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDM3NjMpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDM3NjM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBudWxsICE9IHQgJiYgci5jYWxsKHQsIGUpOyB9O1xuICAgIH0sIDcwMDk6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjc4NCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNjc4NDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbChcImZvb1wiKTsgfTtcbiAgICB9LCAzMTIzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDg0ODEpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDg0ODE6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNzAwOSkoKTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbiAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWc7IH07XG4gICAgfSwgMjUwODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgzNDAzKTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAzNDAzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDc2OCksIG8gPSBlKDk2NjgpLCBzID0gZSgxODcpO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHZhciB0LCByOyBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBzKVxuICAgICAgICAgICAgcmV0dXJuICExOyB0cnkge1xuICAgICAgICAgICAgciA9IG5ldyBzKHIgPSBbMSwgMy4xNCwgLTMuMTQsIG8gKyAxLCBvICsgMl0pLCB0ID0gbihyKSAmJiAxID09PSByWzBdICYmIDMgPT09IHJbMV0gJiYgclsyXSA9PT0gbyAtIDIgJiYgMCA9PT0gclszXSAmJiAxID09PSByWzRdO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChyKSB7XG4gICAgICAgICAgICB0ID0gITE7XG4gICAgICAgIH0gcmV0dXJuIHQ7IH07XG4gICAgfSwgMTg3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQxNkFycmF5ID8gVWludDE2QXJyYXkgOiBudWxsO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDk3NzM6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMjgyMik7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgMjgyMjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgyNzQ0KSwgbyA9IGUoMzg5OSksIHMgPSBlKDc0Nik7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgdmFyIHQsIHI7IGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHMpXG4gICAgICAgICAgICByZXR1cm4gITE7IHRyeSB7XG4gICAgICAgICAgICByID0gbmV3IHMociA9IFsxLCAzLjE0LCAtMy4xNCwgbyArIDEsIG8gKyAyXSksIHQgPSBuKHIpICYmIDEgPT09IHJbMF0gJiYgMyA9PT0gclsxXSAmJiByWzJdID09PSBvIC0gMiAmJiAwID09PSByWzNdICYmIDEgPT09IHJbNF07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfSByZXR1cm4gdDsgfTtcbiAgICB9LCA3NDY6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgVWludDMyQXJyYXkgPyBVaW50MzJBcnJheSA6IG51bGw7XG4gICAgICAgIHQuZXhwb3J0cyA9IHI7XG4gICAgfSwgODExNDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg4MDY2KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA4MDY2OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDgyNzkpLCBvID0gZSgzNDQzKSwgcyA9IGUoMjczMSk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsgdmFyIHQsIHI7IGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHMpXG4gICAgICAgICAgICByZXR1cm4gITE7IHRyeSB7XG4gICAgICAgICAgICByID0gbmV3IHMociA9IFsxLCAzLjE0LCAtMy4xNCwgbyArIDEsIG8gKyAyXSksIHQgPSBuKHIpICYmIDEgPT09IHJbMF0gJiYgMyA9PT0gclsxXSAmJiByWzJdID09PSBvIC0gMiAmJiAwID09PSByWzNdICYmIDEgPT09IHJbNF07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgIHQgPSAhMTtcbiAgICAgICAgfSByZXR1cm4gdDsgfTtcbiAgICB9LCAyNzMxOiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXkgPyBVaW50OEFycmF5IDogbnVsbDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCAxNDQ4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDE0NTMpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDE0NTM6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjIwOCksIG8gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIEZsb2F0NjRBcnJheTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG8gJiYgdCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSB8fCBcIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiID09PSBuKHQpOyB9O1xuICAgIH0sIDkzMzE6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNzk4MCksIG8gPSB7IHVpbnQxNjogZSg2MzIyKSwgdWludDg6IG4gfTtcbiAgICAgICAgdC5leHBvcnRzID0gbztcbiAgICB9LCA1OTAyOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQxMDYpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQxMDY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbywgcyA9IGUoOTMzMSk7XG4gICAgICAgIChvID0gbmV3IHMudWludDE2KDEpKVswXSA9IDQ2NjAsIG4gPSA1MiA9PT0gbmV3IHMudWludDgoby5idWZmZXIpWzBdLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDc2ODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgzODIzKTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAzODIzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDYyMDgpLCBvID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBVaW50MTZBcnJheTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG8gJiYgdCBpbnN0YW5jZW9mIFVpbnQxNkFycmF5IHx8IFwiW29iamVjdCBVaW50MTZBcnJheV1cIiA9PT0gbih0KTsgfTtcbiAgICB9LCAyNzQ0OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDIzMjYpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDIzMjY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjIwOCksIG8gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQzMkFycmF5O1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gbyAmJiB0IGluc3RhbmNlb2YgVWludDMyQXJyYXkgfHwgXCJbb2JqZWN0IFVpbnQzMkFycmF5XVwiID09PSBuKHQpOyB9O1xuICAgIH0sIDgyNzk6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMjA4KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAyMDg6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjIwOCksIG8gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBvICYmIHQgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IFwiW29iamVjdCBVaW50OEFycmF5XVwiID09PSBuKHQpOyB9O1xuICAgIH0sIDYzMTU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAxMDIzO1xuICAgIH0sIDE2ODY6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyMTQ3NDgzNjQ3O1xuICAgIH0sIDMxMDU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyMTQ2NDM1MDcyO1xuICAgIH0sIDM0NDk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyMTQ3NDgzNjQ4O1xuICAgIH0sIDY5ODg6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAtMTAyMztcbiAgICB9LCA5Nzc3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gMTAyMztcbiAgICB9LCAzNjkwOiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gLTEwNzQ7XG4gICAgfSwgMjkxODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg0NzcyKS5ORUdBVElWRV9JTkZJTklUWTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA0MTY1OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIHQuZXhwb3J0cyA9IHI7XG4gICAgfSwgNjQ4ODogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IDIyMjUwNzM4NTg1MDcyMDE0ZS0zMjQ7XG4gICAgfSwgOTY2ODogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IDY1NTM1O1xuICAgIH0sIDM4OTk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSA0Mjk0OTY3Mjk1O1xuICAgIH0sIDM0NDM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB0LmV4cG9ydHMgPSAyNTU7XG4gICAgfSwgNzAxMTogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg4MTIpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDgxMjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg0MTY1KSwgbyA9IGUoMjkxOCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ID09PSBuIHx8IHQgPT09IG87IH07XG4gICAgfSwgMTg4MzogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSgxNzk3KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCAxNzk3OiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgIT0gdDsgfTtcbiAgICB9LCA1MTM6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNTc2MCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNTc2MDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBNYXRoLmFicyh0KTsgfTtcbiAgICB9LCA1ODQ4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDY3Nyk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNjc3OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDM0NDkpLCBvID0gZSgxNjg2KSwgcyA9IGUoNzgzOCksIGkgPSBlKDE5MjEpLCB1ID0gZSgyNDkwKSwgYSA9IFswLCAwXTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHIpIHsgdmFyIGUsIGM7IHJldHVybiBzLmFzc2lnbih0LCBhLCAxLCAwKSwgZSA9IGFbMF0sIGUgJj0gbywgYyA9IGkociksIHUoZSB8PSBjICY9IG4sIGFbMV0pOyB9O1xuICAgIH0sIDU1MDA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoODM5Nyk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgODM5NzogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg0MTY1KSwgbyA9IGUoMjkxOCksIHMgPSBlKDYzMTUpLCBpID0gZSg5Nzc3KSwgdSA9IGUoNjk4OCksIGEgPSBlKDM2OTApLCBjID0gZSgxODgzKSwgZiA9IGUoNzAxMSksIHAgPSBlKDU4NDgpLCBsID0gZSg0OTQ4KSwgdiA9IGUoODQ3OCksIHkgPSBlKDc4MzgpLCBkID0gZSgyNDkwKSwgaCA9IFswLCAwXSwgeCA9IFswLCAwXTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHIpIHsgdmFyIGUsIGI7IHJldHVybiAwID09PSB0IHx8IGModCkgfHwgZih0KSA/IHQgOiAobChoLCB0KSwgciArPSBoWzFdLCAociArPSB2KHQgPSBoWzBdKSkgPCBhID8gcCgwLCB0KSA6IHIgPiBpID8gdCA8IDAgPyBvIDogbiA6IChyIDw9IHUgPyAociArPSA1MiwgYiA9IDIyMjA0NDYwNDkyNTAzMTNlLTMxKSA6IGIgPSAxLCB5KHgsIHQpLCBlID0geFswXSwgZSAmPSAyMTQ4NTMyMjIzLCBiICogZChlIHw9IHIgKyBzIDw8IDIwLCB4WzFdKSkpOyB9O1xuICAgIH0sIDQ3NzI6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNzU0OCk7XG4gICAgICAgIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgNzU0ODogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHQuZXhwb3J0cyA9IE51bWJlcjtcbiAgICB9LCA4NDc4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ1MDApO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQ1MDA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoMTkyMSksIG8gPSBlKDMxMDUpLCBzID0gZSg2MzE1KTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgdmFyIHIgPSBuKHQpOyByZXR1cm4gKHIgPSAociAmIG8pID4+PiAyMCkgLSBzIHwgMDsgfTtcbiAgICB9LCAyNDkwOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDk2MzkpO1xuICAgICAgICB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQ0NDU6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbywgcztcbiAgICAgICAgITAgPT09IGUoNTkwMikgPyAobyA9IDEsIHMgPSAwKSA6IChvID0gMCwgcyA9IDEpLCBuID0geyBISUdIOiBvLCBMT1c6IHMgfSwgdC5leHBvcnRzID0gbjtcbiAgICB9LCA5NjM5OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ3NzMpLCBvID0gZSg3MzgyKSwgcyA9IGUoNDQ0NSksIGkgPSBuZXcgbygxKSwgdSA9IG5ldyBuKGkuYnVmZmVyKSwgYSA9IHMuSElHSCwgYyA9IHMuTE9XO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgcikgeyByZXR1cm4gdVthXSA9IHQsIHVbY10gPSByLCBpWzBdOyB9O1xuICAgIH0sIDU2NDY6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgbiA9ICEwID09PSBlKDU5MDIpID8gMSA6IDAsIHQuZXhwb3J0cyA9IG47XG4gICAgfSwgMTkyMTogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg2Mjg1KTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA2Mjg1OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ3NzMpLCBvID0gZSg3MzgyKSwgcyA9IGUoNTY0NiksIGkgPSBuZXcgbygxKSwgdSA9IG5ldyBuKGkuYnVmZmVyKTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGlbMF0gPSB0LCB1W3NdOyB9O1xuICAgIH0sIDkwMjQ6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNjQ4OCksIG8gPSBlKDcwMTEpLCBzID0gZSgxODgzKSwgaSA9IGUoNTEzKTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHIsIGUsIHUpIHsgcmV0dXJuIHModCkgfHwgbyh0KSA/IChyW3VdID0gdCwgclt1ICsgZV0gPSAwLCByKSA6IDAgIT09IHQgJiYgaSh0KSA8IG4gPyAoclt1XSA9IDQ1MDM1OTk2MjczNzA0OTYgKiB0LCByW3UgKyBlXSA9IC01MiwgcikgOiAoclt1XSA9IHQsIHJbdSArIGVdID0gMCwgcik7IH07XG4gICAgfSwgNDk0ODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg3NTc2KSwgbyA9IGUoOTQyMik7XG4gICAgICAgIG4obywgXCJhc3NpZ25cIiwgZSg5MDI0KSksIHQuZXhwb3J0cyA9IG87XG4gICAgfSwgOTQyMjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg5MDI0KTtcbiAgICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIG4odCwgWzAsIDBdLCAxLCAwKTsgfTtcbiAgICB9LCA1MjM5OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDQ3NzMpLCBvID0gZSg3MzgyKSwgcyA9IGUoNTc4MiksIGkgPSBuZXcgbygxKSwgdSA9IG5ldyBuKGkuYnVmZmVyKSwgYSA9IHMuSElHSCwgYyA9IHMuTE9XO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgciwgZSwgbikgeyByZXR1cm4gaVswXSA9IHQsIHJbbl0gPSB1W2FdLCByW24gKyBlXSA9IHVbY10sIHI7IH07XG4gICAgfSwgNzgzODogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg3NTc2KSwgbyA9IGUoNDAxMCk7XG4gICAgICAgIG4obywgXCJhc3NpZ25cIiwgZSg1MjM5KSksIHQuZXhwb3J0cyA9IG87XG4gICAgfSwgNTc4MjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuLCBvLCBzO1xuICAgICAgICAhMCA9PT0gZSg1OTAyKSA/IChvID0gMSwgcyA9IDApIDogKG8gPSAwLCBzID0gMSksIG4gPSB7IEhJR0g6IG8sIExPVzogcyB9LCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDQwMTA6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiA9IGUoNTIzOSk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBuKHQsIFswLCAwXSwgMSwgMCk7IH07XG4gICAgfSwgNzU3NjogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg3MDYzKTtcbiAgICAgICAgdC5leHBvcnRzID0gbjtcbiAgICB9LCA3MDYzOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDY2OTEpO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgciwgZSkgeyBuKHQsIHIsIHsgY29uZmlndXJhYmxlOiAhMSwgZW51bWVyYWJsZTogITEsIHdyaXRhYmxlOiAhMSwgdmFsdWU6IGUgfSk7IH07XG4gICAgfSwgMjA3MzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciByID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDE2ODA6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnR5ID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogbnVsbDtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCAxNDcxOiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDE2ODApO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbih7fSwgXCJ4XCIsIHt9KSwgITA7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSB9O1xuICAgIH0sIDY2OTE6IGZ1bmN0aW9uICh0LCByLCBlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbiwgbyA9IGUoMTQ3MSksIHMgPSBlKDIwNzMpLCBpID0gZSgxMzA5KTtcbiAgICAgICAgbiA9IG8oKSA/IHMgOiBpLCB0LmV4cG9ydHMgPSBuO1xuICAgIH0sIDEzMDk6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IE9iamVjdC5wcm90b3R5cGUsIGUgPSByLnRvU3RyaW5nLCBuID0gci5fX2RlZmluZUdldHRlcl9fLCBvID0gci5fX2RlZmluZVNldHRlcl9fLCBzID0gci5fX2xvb2t1cEdldHRlcl9fLCBpID0gci5fX2xvb2t1cFNldHRlcl9fO1xuICAgICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgdSwgYSkgeyB2YXIgYywgZiwgcCwgbDsgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCBcIltvYmplY3QgQXJyYXldXCIgPT09IGUuY2FsbCh0KSlcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJpbnZhbGlkIGFyZ3VtZW50LiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdC4gVmFsdWU6IGBcIiArIHQgKyBcImAuXCIpOyBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgYSB8fCBudWxsID09PSBhIHx8IFwiW29iamVjdCBBcnJheV1cIiA9PT0gZS5jYWxsKGEpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImludmFsaWQgYXJndW1lbnQuIFByb3BlcnR5IGRlc2NyaXB0b3IgbXVzdCBiZSBhbiBvYmplY3QuIFZhbHVlOiBgXCIgKyBhICsgXCJgLlwiKTsgaWYgKChmID0gXCJ2YWx1ZVwiIGluIGEpICYmIChzLmNhbGwodCwgdSkgfHwgaS5jYWxsKHQsIHUpID8gKGMgPSB0Ll9fcHJvdG9fXywgdC5fX3Byb3RvX18gPSByLCBkZWxldGUgdFt1XSwgdFt1XSA9IGEudmFsdWUsIHQuX19wcm90b19fID0gYykgOiB0W3VdID0gYS52YWx1ZSksIHAgPSBcImdldFwiIGluIGEsIGwgPSBcInNldFwiIGluIGEsIGYgJiYgKHAgfHwgbCkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGFyZ3VtZW50LiBDYW5ub3Qgc3BlY2lmeSBvbmUgb3IgbW9yZSBhY2Nlc3NvcnMgYW5kIGEgdmFsdWUgb3Igd3JpdGFibGUgYXR0cmlidXRlIGluIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yLlwiKTsgcmV0dXJuIHAgJiYgbiAmJiBuLmNhbGwodCwgdSwgYS5nZXQpLCBsICYmIG8gJiYgby5jYWxsKHQsIHUsIGEuc2V0KSwgdDsgfTtcbiAgICB9LCA2MjA4OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4sIG8gPSBlKDMxMjMpLCBzID0gZSg3NDA3KSwgaSA9IGUoNDIxMCk7XG4gICAgICAgIG4gPSBvKCkgPyBpIDogcywgdC5leHBvcnRzID0gbjtcbiAgICB9LCA3NDA3OiBmdW5jdGlvbiAodCwgciwgZSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG4gPSBlKDE3Myk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBuLmNhbGwodCk7IH07XG4gICAgfSwgNDIxMDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBuID0gZSg5MDQ4KSwgbyA9IGUoMTQwMyksIHMgPSBlKDE3Myk7XG4gICAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7IHZhciByLCBlLCBpOyBpZiAobnVsbCA9PSB0KVxuICAgICAgICAgICAgcmV0dXJuIHMuY2FsbCh0KTsgZSA9IHRbb10sIHIgPSBuKHQsIG8pOyB0cnkge1xuICAgICAgICAgICAgdFtvXSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocikge1xuICAgICAgICAgICAgcmV0dXJuIHMuY2FsbCh0KTtcbiAgICAgICAgfSByZXR1cm4gaSA9IHMuY2FsbCh0KSwgciA/IHRbb10gPSBlIDogZGVsZXRlIHRbb10sIGk7IH07XG4gICAgfSwgMTczOiBmdW5jdGlvbiAodCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuICAgICAgICB0LmV4cG9ydHMgPSByO1xuICAgIH0sIDE0MDM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgciA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogXCJcIjtcbiAgICAgICAgdC5leHBvcnRzID0gcjtcbiAgICB9LCA3ODQzOiBmdW5jdGlvbiAodCkgeyB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgciwgZSwgbiwgbykgeyBmb3IgKHIgPSByLnNwbGl0ID8gci5zcGxpdChcIi5cIikgOiByLCBuID0gMDsgbiA8IHIubGVuZ3RoOyBuKyspXG4gICAgICAgIHQgPSB0ID8gdFtyW25dXSA6IG87IHJldHVybiB0ID09PSBvID8gZSA6IHQ7IH07IH0sIDM3NDogZnVuY3Rpb24gKHQsIHIsIGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIGUucihyKSwgZS5kKHIsIHsgZGVmYXVsdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gczsgfSB9KTtcbiAgICAgICAgZm9yICh2YXIgbiA9IFtdLCBvID0gMDsgbyA8IDY0OylcbiAgICAgICAgICAgIG5bb10gPSAwIHwgNDI5NDk2NzI5NiAqIE1hdGguc2luKCsrbyAlIE1hdGguUEkpO1xuICAgICAgICBmdW5jdGlvbiBzKHQpIHsgdmFyIHIsIGUsIHMsIGkgPSBbciA9IDE3MzI1ODQxOTMsIGUgPSA0MDIzMjMzNDE3LCB+ciwgfmVdLCB1ID0gW10sIGEgPSB1bmVzY2FwZShlbmNvZGVVUkkodCkpICsgXCLCgFwiLCBjID0gYS5sZW5ndGg7IGZvciAodCA9IC0tYyAvIDQgKyAyIHwgMTUsIHVbLS10XSA9IDggKiBjOyB+YzspXG4gICAgICAgICAgICB1W2MgPj4gMl0gfD0gYS5jaGFyQ29kZUF0KGMpIDw8IDggKiBjLS07IGZvciAobyA9IGEgPSAwOyBvIDwgdDsgbyArPSAxNikge1xuICAgICAgICAgICAgZm9yIChjID0gaTsgYSA8IDY0OyBjID0gW3MgPSBjWzNdLCByICsgKChzID0gY1swXSArIFtyICYgZSB8IH5yICYgcywgcyAmIHIgfCB+cyAmIGUsIHIgXiBlIF4gcywgZSBeIChyIHwgfnMpXVtjID0gYSA+PiA0XSArIG5bYV0gKyB+fnVbbyB8IDE1ICYgW2EsIDUgKiBhICsgMSwgMyAqIGEgKyA1LCA3ICogYV1bY11dKSA8PCAoYyA9IFs3LCAxMiwgMTcsIDIyLCA1LCA5LCAxNCwgMjAsIDQsIDExLCAxNiwgMjMsIDYsIDEwLCAxNSwgMjFdWzQgKiBjICsgYSsrICUgNF0pIHwgcyA+Pj4gLWMpLCByLCBlXSlcbiAgICAgICAgICAgICAgICByID0gMCB8IGNbMV0sIGUgPSBjWzJdO1xuICAgICAgICAgICAgZm9yIChhID0gNDsgYTspXG4gICAgICAgICAgICAgICAgaVstLWFdICs9IGNbYV07XG4gICAgICAgIH0gZm9yICh0ID0gXCJcIjsgYSA8IDMyOylcbiAgICAgICAgICAgIHQgKz0gKGlbYSA+PiAzXSA+PiA0ICogKDEgXiBhKyspICYgMTUpLnRvU3RyaW5nKDE2KTsgcmV0dXJuIHQ7IH1cbiAgICB9IH0sIHIgPSB7fTsgZnVuY3Rpb24gZShuKSB7IHZhciBvID0gcltuXTsgaWYgKHZvaWQgMCAhPT0gbylcbiAgICByZXR1cm4gby5leHBvcnRzOyB2YXIgcyA9IHJbbl0gPSB7IGV4cG9ydHM6IHt9IH07IHJldHVybiB0W25dLmNhbGwocy5leHBvcnRzLCBzLCBzLmV4cG9ydHMsIGUpLCBzLmV4cG9ydHM7IH0gcmV0dXJuIGUuZCA9IGZ1bmN0aW9uICh0LCByKSB7IGZvciAodmFyIG4gaW4gcilcbiAgICBlLm8ociwgbikgJiYgIWUubyh0LCBuKSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgeyBlbnVtZXJhYmxlOiAhMCwgZ2V0OiByW25dIH0pOyB9LCBlLm8gPSBmdW5jdGlvbiAodCwgcikgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIHIpOyB9LCBlLnIgPSBmdW5jdGlvbiAodCkgeyBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7IH0sIGUoMjg3MCk7IH0pKCk7IH0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRzdWIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/dist/pkg/vendor/tsub/tsub.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("!function(e,t){ true?module.exports=t():0}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=2)}([function(e,t,a){\"use strict\";a.r(t);var n=\"function\"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(a,n){var i=new XMLHttpRequest;for(var r in i.open(t.method||\"get\",e,!0),t.headers)i.setRequestHeader(r,t.headers[r]);function o(){var e,t=[],a=[],n={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,(function(i,r,o){t.push(r=r.toLowerCase()),a.push([r,o]),e=n[r],n[r]=e?e+\",\"+o:o})),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return a},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}i.withCredentials=\"include\"==t.credentials,i.onload=function(){a(o())},i.onerror=n,i.send(t.body)}))};t.default=n},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.pluginName=t}return n(e,[{key:\"track\",value:function(e,t){window.analytics.track(e,t,{integration:{name:this.pluginName}})}}]),e}();t.default=i},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.YouTubeAnalytics=t.VimeoAnalytics=void 0;var n=r(a(3)),i=r(a(4));function r(e){return e&&e.__esModule?e:{default:e}}t.VimeoAnalytics=n.default,t.YouTubeAnalytics=i.default},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=r(a(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"VimeoAnalytics\"));return n.authToken=a,n.player=e,n.metadata={content:{},playback:{videoPlayer:\"Vimeo\"}},n.mostRecentHeartbeat=0,n.isPaused=!1,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){var e=this,t={loaded:this.retrieveMetadata,play:this.trackPlay,pause:this.trackPause,ended:this.trackEnded,timeupdate:this.trackHeartbeat};for(var a in t)this.registerHandler(a,t[a]);this.player.getVideoId().then((function(t){e.retrieveMetadata({id:t})})).catch(console.error)}},{key:\"registerHandler\",value:function(e,t){var a=this;this.player.on(e,(function(e){a.updateMetadata(e),t.call(a,e)}))}},{key:\"trackPlay\",value:function(){this.isPaused?(this.track(\"Video Playback Resumed\",this.metadata.playback),this.isPaused=!1):(this.track(\"Video Playback Started\",this.metadata.playback),this.track(\"Video Content Started\",this.metadata.content))}},{key:\"trackEnded\",value:function(){this.track(\"Video Playback Completed\",this.metadata.playback),this.track(\"Video Content Completed\",this.metadata.content)}},{key:\"trackHeartbeat\",value:function(){var e=this.mostRecentHeartbeat,t=this.metadata.playback.position;t!==e&&t-e>=10&&(this.track(\"Video Content Playing\",this.metadata.content),this.mostRecentHeartbeat=Math.floor(t))}},{key:\"trackPause\",value:function(){this.isPaused=!0,this.track(\"Video Playback Paused\",this.metadata.playback)}},{key:\"retrieveMetadata\",value:function(e){var t=this;return new Promise((function(a,n){var r=e.id;(0,i.default)(\"https://api.vimeo.com/videos/\"+r,{headers:{Authorization:\"Bearer \"+t.authToken}}).then((function(e){return e.ok?e.json():n(e)})).then((function(e){t.metadata.content.title=e.name,t.metadata.content.description=e.description,t.metadata.content.publisher=e.user.name,t.metadata.playback.position=0,t.metadata.playback.totalLength=e.duration})).catch((function(e){return console.error(\"Request to Vimeo API Failed with: \",e),n(e)}))}))}},{key:\"updateMetadata\",value:function(e){var t=this;return new Promise((function(a,n){t.player.getVolume().then((function(n){n&&(t.metadata.playback.sound=100*n),t.metadata.playback.position=e.seconds,a()})).catch(n)}))}}]),t}(r(a(1)).default);t.default=o},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"YoutubeAnalytics\"));return n.player=e,n.apiKey=a,n.playerLoaded=!1,n.playbackStarted=!1,n.contentStarted=!1,n.isPaused=!1,n.isBuffering=!1,n.isSeeking=!1,n.lastRecordedTime={timeReported:Date.now(),timeElapsed:0},n.metadata=[{playback:{video_player:\"youtube\"},content:{}}],n.playlistIndex=0,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){window.segmentYoutubeOnStateChange=this.onPlayerStateChange.bind(this),window.segmentYoutubeOnReady=this.onPlayerReady.bind(this),this.player.addEventListener(\"onReady\",\"segmentYoutubeOnReady\"),this.player.addEventListener(\"onStateChange\",\"segmentYoutubeOnStateChange\")}},{key:\"onPlayerReady\",value:function(e){this.retrieveMetadata()}},{key:\"onPlayerStateChange\",value:function(e){var t=this.player.getCurrentTime();switch(this.metadata[this.playlistIndex]&&(this.metadata[this.playlistIndex].playback.position=this.metadata[this.playlistIndex].content.position=t,this.metadata[this.playlistIndex].playback.quality=this.player.getPlaybackQuality(),this.metadata[this.playlistIndex].playback.sound=this.player.isMuted()?0:this.player.getVolume()),e.data){case-1:if(this.playerLoaded)break;this.retrieveMetadata(),this.playerLoaded=!0;break;case YT.PlayerState.BUFFERING:this.handleBuffer();break;case YT.PlayerState.PLAYING:this.handlePlay();break;case YT.PlayerState.PAUSED:this.handlePause();break;case YT.PlayerState.ENDED:this.handleEnd()}this.lastRecordedTime={timeReported:Date.now(),timeElapsed:1e3*this.player.getCurrentTime()}}},{key:\"retrieveMetadata\",value:function(){var e=this;return new Promise((function(t,a){var n=e.player.getVideoData(),r=e.player.getPlaylist()||[n.video_id],o=r.join();(0,i.default)(\"https://www.googleapis.com/youtube/v3/videos?id=\"+o+\"&part=snippet,contentDetails&key=\"+e.apiKey).then((function(e){if(!e.ok){var t=new Error(\"Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)\");throw t.response=e,t}return e.json()})).then((function(a){e.metadata=[];for(var n=0,i=0;i<r.length;i++){var o=a.items[i];e.metadata.push({content:{title:o.snippet.title,description:o.snippet.description,keywords:o.snippet.tags,channel:o.snippet.channelTitle,airdate:o.snippet.publishedAt}}),n+=l(o.contentDetails.duration)}for(i=0;i<r.length;i++)e.metadata[i].playback={total_length:n,video_player:\"youtube\"};t()})).catch((function(t){e.metadata=r.map((function(e){return{playback:{video_player:\"youtube\"},content:{}}})),a(t)}))}))}},{key:\"handleBuffer\",value:function(){var e=this.determineSeek();this.playbackStarted||(this.playbackStarted=!0,this.track(\"Video Playback Started\",this.metadata[this.playlistIndex].playback)),e&&!this.isSeeking&&(this.isSeeking=!0,this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback)),this.isSeeking&&(this.track(\"Video Playback Seek Completed\",this.metadata[this.playlistIndex].playback),this.isSeeking=!1);var t=this.player.getPlaylist();t&&0===this.player.getCurrentTime()&&this.player.getPlaylistIndex()!==this.playlistIndex&&(this.contentStarted=!1,this.playlistIndex===t.length-1&&0===this.player.getPlaylistIndex()&&(this.track(\"Video Playback Completed\",this.metadata[this.player.getPlaylistIndex()].playback),this.track(\"Video Playback Started\",this.metadata[this.player.getPlaylistIndex()].playback))),this.track(\"Video Playback Buffer Started\",this.metadata[this.playlistIndex].playback),this.isBuffering=!0}},{key:\"handlePlay\",value:function(){this.contentStarted||(this.playlistIndex=this.player.getPlaylistIndex(),-1===this.playlistIndex&&(this.playlistIndex=0),this.track(\"Video Content Started\",this.metadata[this.playlistIndex].content),this.contentStarted=!0),this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused&&(this.track(\"Video Playback Resumed\",this.metadata[this.playlistIndex].playback),this.isPaused=!1)}},{key:\"handlePause\",value:function(){var e=this.determineSeek();this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused||(e?(this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback),this.isSeeking=!0):(this.track(\"Video Playback Paused\",this.metadata[this.playlistIndex].playback),this.isPaused=!0))}},{key:\"handleEnd\",value:function(){this.track(\"Video Content Completed\",this.metadata[this.playlistIndex].content),this.contentStarted=!1;var e=this.player.getPlaylistIndex(),t=this.player.getPlaylist();(t&&e===t.length-1||-1===e)&&(this.track(\"Video Playback Completed\",this.metadata[this.playlistIndex].playback),this.playbackStarted=!1)}},{key:\"determineSeek\",value:function(){var e=this.isPaused||this.isBuffering?0:Date.now()-this.lastRecordedTime.timeReported,t=1e3*this.player.getCurrentTime()-this.lastRecordedTime.timeElapsed;return Math.abs(e-t)>2e3}}]),t}(r.default);function l(e){var t=e.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);return t=t.slice(1).map((function(e){if(null!=e)return e.replace(/\\D/,\"\")})),3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}t.default=s}])}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLmpzLXZpZGVvLXBsdWdpbnMvZGlzdC9pbmRleC51bWQuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZSxLQUFpRCxvQkFBb0IsQ0FBeUksQ0FBQyxvQkFBb0IsbUJBQW1CLFNBQVMsY0FBYyw0QkFBNEIsWUFBWSxxQkFBcUIsMkRBQTJELHVDQUF1QyxxQ0FBcUMsb0JBQW9CLEVBQUUsaUJBQWlCLDRGQUE0RixlQUFlLHdDQUF3QyxTQUFTLEVBQUUsbUJBQW1CLDhCQUE4QixxREFBcUQsMEJBQTBCLDZDQUE2QyxzQkFBc0IsNkRBQTZELFlBQVksZUFBZSxTQUFTLGlCQUFpQixpQ0FBaUMsaUJBQWlCLFlBQVksVUFBVSxzQkFBc0IsbUJBQW1CLGlEQUFpRCxpQkFBaUIsa0JBQWtCLGFBQWEsT0FBTywwREFBMEQsY0FBYyw0QkFBNEIseUJBQXlCLHVGQUF1RixhQUFhLHFCQUFxQix5RkFBeUYsZ0VBQWdFLElBQUkseUdBQXlHLHVDQUF1QyxpQkFBaUIsd0RBQXdELGlCQUFpQiwrQ0FBK0MsVUFBVSxnQkFBZ0IsU0FBUyxvQkFBb0IsU0FBUyxpQkFBaUIsMEJBQTBCLGlCQUFpQiw4QkFBOEIsK0RBQStELE9BQU8sNEJBQTRCLElBQUksWUFBWSxpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyxFQUFFLGlCQUFpQixnQkFBZ0IsWUFBWSxXQUFXLEtBQUssV0FBVywrR0FBK0csdUJBQXVCLHdDQUF3QyxHQUFHLGlCQUFpQixnQkFBZ0IsZUFBZSw4RUFBOEUsMkJBQTJCLGFBQWEsZ0NBQWdDLDRCQUE0QixhQUFhLHNCQUFzQixHQUFHLEtBQUssR0FBRyxZQUFZLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLDZDQUE2Qyx3QkFBd0IsY0FBYywwQkFBMEIsV0FBVyx3REFBd0QsaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxpQkFBaUIsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFdBQVcsK0dBQStHLHVCQUF1Qix3Q0FBd0MsYUFBYSxjQUFjLDBCQUEwQixXQUFXLGtCQUFrQixnQkFBZ0IsZUFBZSw4RUFBOEUsU0FBUyxvQkFBb0IsNEZBQTRGLHVEQUF1RCwyRUFBMkUsNENBQTRDLFVBQVUsV0FBVyxxQkFBcUIseUNBQXlDLHFCQUFxQiwySEFBMkgsMENBQTBDLGFBQWEsbURBQW1ELHNFQUFzRSxZQUFZLGtDQUFrQyxjQUFjLDZIQUE2SCw0Q0FBNEMsMkNBQTJDLG9CQUFvQixLQUFLLEVBQUUseUJBQXlCLEVBQUUsMENBQTBDLFdBQVcsOEJBQThCLGdDQUFnQyxJQUFJLEVBQUUsaUNBQWlDLHNOQUFzTixFQUFFLGtDQUFrQywySEFBMkgsRUFBRSxzQ0FBc0MsaUVBQWlFLG9IQUFvSCxFQUFFLGtDQUFrQyw2RUFBNkUsRUFBRSx5Q0FBeUMsV0FBVyxrQ0FBa0MsV0FBVyxpREFBaUQsU0FBUyxxQ0FBcUMsb0JBQW9CLDBCQUEwQixxQkFBcUIsZ01BQWdNLHNCQUFzQixrRUFBa0UsR0FBRyxJQUFJLEVBQUUsdUNBQXVDLFdBQVcsa0NBQWtDLHVDQUF1QyxnRkFBZ0YsWUFBWSxJQUFJLEtBQUssa0JBQWtCLFlBQVksaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxpQkFBaUIsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFdBQVcsK0dBQStHLHVCQUF1Qix3Q0FBd0MsdUJBQXVCLGNBQWMsMEJBQTBCLFdBQVcsa0JBQWtCLGdCQUFnQixlQUFlLDhFQUE4RSxTQUFTLG9CQUFvQiw0RkFBNEYsdURBQXVELDZFQUE2RSwwSkFBMEosc0NBQXNDLGNBQWMsVUFBVSx1QkFBdUIsWUFBWSxzQkFBc0IscUJBQXFCLDJIQUEySCwwQ0FBMEMsYUFBYSxtREFBbUQsc0VBQXNFLFlBQVksa0NBQWtDLCtRQUErUSxFQUFFLHNDQUFzQyx5QkFBeUIsRUFBRSw0Q0FBNEMsbUNBQW1DLGtWQUFrVixrQ0FBa0MsNkNBQTZDLE1BQU0sa0RBQWtELE1BQU0sOENBQThDLE1BQU0sOENBQThDLE1BQU0sMkNBQTJDLHVCQUF1Qix1RUFBdUUsRUFBRSx3Q0FBd0MsV0FBVyxrQ0FBa0MsZ0ZBQWdGLG1JQUFtSSxVQUFVLHNKQUFzSixxQkFBcUIsZ0JBQWdCLHFCQUFxQixjQUFjLGdCQUFnQixXQUFXLEtBQUssaUJBQWlCLGlCQUFpQixTQUFTLDhJQUE4SSxrQ0FBa0MsUUFBUSxXQUFXLDRCQUE0Qix1Q0FBdUMsSUFBSSxzQkFBc0IsOEJBQThCLE9BQU8sVUFBVSx1QkFBdUIsYUFBYSxRQUFRLEdBQUcsSUFBSSxFQUFFLG9DQUFvQywyQkFBMkIsd1hBQXdYLGdDQUFnQyxnZUFBZ2UsRUFBRSxrQ0FBa0Msa2RBQWtkLEVBQUUsbUNBQW1DLDJCQUEyQixnV0FBZ1csRUFBRSxpQ0FBaUMsdUdBQXVHLGlFQUFpRSwwSUFBMEksRUFBRSxxQ0FBcUMsMkpBQTJKLDBCQUEwQixLQUFLLFlBQVksY0FBYyx5Q0FBeUMscUNBQXFDLHFDQUFxQyx1RUFBdUUsWUFBWSxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLmpzLXZpZGVvLXBsdWdpbnMvZGlzdC9pbmRleC51bWQuanM/M2FiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLmFuYWx5dGljc1ZpZGVvUGx1Z2lucz10KCk6ZS5hbmFseXRpY3NWaWRlb1BsdWdpbnM9dCgpfSh3aW5kb3csKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIGEobil7aWYodFtuXSlyZXR1cm4gdFtuXS5leHBvcnRzO3ZhciBpPXRbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLGEpLGkubD0hMCxpLmV4cG9ydHN9cmV0dXJuIGEubT1lLGEuYz10LGEuZD1mdW5jdGlvbihlLHQsbil7YS5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0Om59KX0sYS5yPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LGEudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9YShlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKGEucihuKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIGkgaW4gZSlhLmQobixpLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsaSkpO3JldHVybiBufSxhLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIGEuZCh0LFwiYVwiLHQpLHR9LGEubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sYS5wPVwiXCIsYShhLnM9Mil9KFtmdW5jdGlvbihlLHQsYSl7XCJ1c2Ugc3RyaWN0XCI7YS5yKHQpO3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGZldGNoP2ZldGNoLmJpbmQoKTpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHt9LG5ldyBQcm9taXNlKChmdW5jdGlvbihhLG4pe3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtmb3IodmFyIHIgaW4gaS5vcGVuKHQubWV0aG9kfHxcImdldFwiLGUsITApLHQuaGVhZGVycylpLnNldFJlcXVlc3RIZWFkZXIocix0LmhlYWRlcnNbcl0pO2Z1bmN0aW9uIG8oKXt2YXIgZSx0PVtdLGE9W10sbj17fTtyZXR1cm4gaS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS5yZXBsYWNlKC9eKC4qPyk6W15cXFNcXG5dKihbXFxzXFxTXSo/KSQvZ20sKGZ1bmN0aW9uKGkscixvKXt0LnB1c2gocj1yLnRvTG93ZXJDYXNlKCkpLGEucHVzaChbcixvXSksZT1uW3JdLG5bcl09ZT9lK1wiLFwiK286b30pKSx7b2s6Mj09KGkuc3RhdHVzLzEwMHwwKSxzdGF0dXM6aS5zdGF0dXMsc3RhdHVzVGV4dDppLnN0YXR1c1RleHQsdXJsOmkucmVzcG9uc2VVUkwsY2xvbmU6byx0ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShpLnJlc3BvbnNlVGV4dCl9LGpzb246ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGkucmVzcG9uc2VUZXh0KS50aGVuKEpTT04ucGFyc2UpfSxibG9iOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbaS5yZXNwb25zZV0pKX0saGVhZGVyczp7a2V5czpmdW5jdGlvbigpe3JldHVybiB0fSxlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKWluIG59fX19aS53aXRoQ3JlZGVudGlhbHM9XCJpbmNsdWRlXCI9PXQuY3JlZGVudGlhbHMsaS5vbmxvYWQ9ZnVuY3Rpb24oKXthKG8oKSl9LGkub25lcnJvcj1uLGkuc2VuZCh0LmJvZHkpfSkpfTt0LmRlZmF1bHQ9bn0sZnVuY3Rpb24oZSx0LGEpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbj10W2FdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQsYSxuKXtyZXR1cm4gYSYmZSh0LnByb3RvdHlwZSxhKSxuJiZlKHQsbiksdH19KCk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSl7IWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyxlKSx0aGlzLnBsdWdpbk5hbWU9dH1yZXR1cm4gbihlLFt7a2V5OlwidHJhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3dpbmRvdy5hbmFseXRpY3MudHJhY2soZSx0LHtpbnRlZ3JhdGlvbjp7bmFtZTp0aGlzLnBsdWdpbk5hbWV9fSl9fV0pLGV9KCk7dC5kZWZhdWx0PWl9LGZ1bmN0aW9uKGUsdCxhKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LllvdVR1YmVBbmFseXRpY3M9dC5WaW1lb0FuYWx5dGljcz12b2lkIDA7dmFyIG49cihhKDMpKSxpPXIoYSg0KSk7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5WaW1lb0FuYWx5dGljcz1uLmRlZmF1bHQsdC5Zb3VUdWJlQW5hbHl0aWNzPWkuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LGEpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgbj10W2FdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQsYSxuKXtyZXR1cm4gYSYmZSh0LnByb3RvdHlwZSxhKSxuJiZlKHQsbiksdH19KCksaT1yKGEoMCkpO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxhKXshZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpO3ZhciBuPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9KHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcyxcIlZpbWVvQW5hbHl0aWNzXCIpKTtyZXR1cm4gbi5hdXRoVG9rZW49YSxuLnBsYXllcj1lLG4ubWV0YWRhdGE9e2NvbnRlbnQ6e30scGxheWJhY2s6e3ZpZGVvUGxheWVyOlwiVmltZW9cIn19LG4ubW9zdFJlY2VudEhlYXJ0YmVhdD0wLG4uaXNQYXVzZWQ9ITEsbn1yZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX0odCxlKSxuKHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e2xvYWRlZDp0aGlzLnJldHJpZXZlTWV0YWRhdGEscGxheTp0aGlzLnRyYWNrUGxheSxwYXVzZTp0aGlzLnRyYWNrUGF1c2UsZW5kZWQ6dGhpcy50cmFja0VuZGVkLHRpbWV1cGRhdGU6dGhpcy50cmFja0hlYXJ0YmVhdH07Zm9yKHZhciBhIGluIHQpdGhpcy5yZWdpc3RlckhhbmRsZXIoYSx0W2FdKTt0aGlzLnBsYXllci5nZXRWaWRlb0lkKCkudGhlbigoZnVuY3Rpb24odCl7ZS5yZXRyaWV2ZU1ldGFkYXRhKHtpZDp0fSl9KSkuY2F0Y2goY29uc29sZS5lcnJvcil9fSx7a2V5OlwicmVnaXN0ZXJIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgYT10aGlzO3RoaXMucGxheWVyLm9uKGUsKGZ1bmN0aW9uKGUpe2EudXBkYXRlTWV0YWRhdGEoZSksdC5jYWxsKGEsZSl9KSl9fSx7a2V5OlwidHJhY2tQbGF5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkPyh0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgUmVzdW1lZFwiLHRoaXMubWV0YWRhdGEucGxheWJhY2spLHRoaXMuaXNQYXVzZWQ9ITEpOih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGEucGxheWJhY2spLHRoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhLmNvbnRlbnQpKX19LHtrZXk6XCJ0cmFja0VuZGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YS5wbGF5YmFjayksdGhpcy50cmFjayhcIlZpZGVvIENvbnRlbnQgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YS5jb250ZW50KX19LHtrZXk6XCJ0cmFja0hlYXJ0YmVhdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tb3N0UmVjZW50SGVhcnRiZWF0LHQ9dGhpcy5tZXRhZGF0YS5wbGF5YmFjay5wb3NpdGlvbjt0IT09ZSYmdC1lPj0xMCYmKHRoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IFBsYXlpbmdcIix0aGlzLm1ldGFkYXRhLmNvbnRlbnQpLHRoaXMubW9zdFJlY2VudEhlYXJ0YmVhdD1NYXRoLmZsb29yKHQpKX19LHtrZXk6XCJ0cmFja1BhdXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkPSEwLHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBQYXVzZWRcIix0aGlzLm1ldGFkYXRhLnBsYXliYWNrKX19LHtrZXk6XCJyZXRyaWV2ZU1ldGFkYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGEsbil7dmFyIHI9ZS5pZDsoMCxpLmRlZmF1bHQpKFwiaHR0cHM6Ly9hcGkudmltZW8uY29tL3ZpZGVvcy9cIityLHtoZWFkZXJzOntBdXRob3JpemF0aW9uOlwiQmVhcmVyIFwiK3QuYXV0aFRva2VufX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9rP2UuanNvbigpOm4oZSl9KSkudGhlbigoZnVuY3Rpb24oZSl7dC5tZXRhZGF0YS5jb250ZW50LnRpdGxlPWUubmFtZSx0Lm1ldGFkYXRhLmNvbnRlbnQuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbix0Lm1ldGFkYXRhLmNvbnRlbnQucHVibGlzaGVyPWUudXNlci5uYW1lLHQubWV0YWRhdGEucGxheWJhY2sucG9zaXRpb249MCx0Lm1ldGFkYXRhLnBsYXliYWNrLnRvdGFsTGVuZ3RoPWUuZHVyYXRpb259KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBjb25zb2xlLmVycm9yKFwiUmVxdWVzdCB0byBWaW1lbyBBUEkgRmFpbGVkIHdpdGg6IFwiLGUpLG4oZSl9KSl9KSl9fSx7a2V5OlwidXBkYXRlTWV0YWRhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSxuKXt0LnBsYXllci5nZXRWb2x1bWUoKS50aGVuKChmdW5jdGlvbihuKXtuJiYodC5tZXRhZGF0YS5wbGF5YmFjay5zb3VuZD0xMDAqbiksdC5tZXRhZGF0YS5wbGF5YmFjay5wb3NpdGlvbj1lLnNlY29uZHMsYSgpfSkpLmNhdGNoKG4pfSkpfX1dKSx0fShyKGEoMSkpLmRlZmF1bHQpO3QuZGVmYXVsdD1vfSxmdW5jdGlvbihlLHQsYSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciBuPXRbYV07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxhLG4pe3JldHVybiBhJiZlKHQucHJvdG90eXBlLGEpLG4mJmUodCxuKSx0fX0oKSxpPW8oYSgwKSkscj1vKGEoMSkpO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxhKXshZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLHQpO3ZhciBuPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9KHRoaXMsKHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNhbGwodGhpcyxcIllvdXR1YmVBbmFseXRpY3NcIikpO3JldHVybiBuLnBsYXllcj1lLG4uYXBpS2V5PWEsbi5wbGF5ZXJMb2FkZWQ9ITEsbi5wbGF5YmFja1N0YXJ0ZWQ9ITEsbi5jb250ZW50U3RhcnRlZD0hMSxuLmlzUGF1c2VkPSExLG4uaXNCdWZmZXJpbmc9ITEsbi5pc1NlZWtpbmc9ITEsbi5sYXN0UmVjb3JkZWRUaW1lPXt0aW1lUmVwb3J0ZWQ6RGF0ZS5ub3coKSx0aW1lRWxhcHNlZDowfSxuLm1ldGFkYXRhPVt7cGxheWJhY2s6e3ZpZGVvX3BsYXllcjpcInlvdXR1YmVcIn0sY29udGVudDp7fX1dLG4ucGxheWxpc3RJbmRleD0wLG59cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9KHQsZSksbih0LFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93LnNlZ21lbnRZb3V0dWJlT25TdGF0ZUNoYW5nZT10aGlzLm9uUGxheWVyU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSx3aW5kb3cuc2VnbWVudFlvdXR1YmVPblJlYWR5PXRoaXMub25QbGF5ZXJSZWFkeS5iaW5kKHRoaXMpLHRoaXMucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJvblJlYWR5XCIsXCJzZWdtZW50WW91dHViZU9uUmVhZHlcIiksdGhpcy5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm9uU3RhdGVDaGFuZ2VcIixcInNlZ21lbnRZb3V0dWJlT25TdGF0ZUNoYW5nZVwiKX19LHtrZXk6XCJvblBsYXllclJlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5yZXRyaWV2ZU1ldGFkYXRhKCl9fSx7a2V5Olwib25QbGF5ZXJTdGF0ZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCk7c3dpdGNoKHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XSYmKHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjay5wb3NpdGlvbj10aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0uY29udGVudC5wb3NpdGlvbj10LHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjay5xdWFsaXR5PXRoaXMucGxheWVyLmdldFBsYXliYWNrUXVhbGl0eSgpLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjay5zb3VuZD10aGlzLnBsYXllci5pc011dGVkKCk/MDp0aGlzLnBsYXllci5nZXRWb2x1bWUoKSksZS5kYXRhKXtjYXNlLTE6aWYodGhpcy5wbGF5ZXJMb2FkZWQpYnJlYWs7dGhpcy5yZXRyaWV2ZU1ldGFkYXRhKCksdGhpcy5wbGF5ZXJMb2FkZWQ9ITA7YnJlYWs7Y2FzZSBZVC5QbGF5ZXJTdGF0ZS5CVUZGRVJJTkc6dGhpcy5oYW5kbGVCdWZmZXIoKTticmVhaztjYXNlIFlULlBsYXllclN0YXRlLlBMQVlJTkc6dGhpcy5oYW5kbGVQbGF5KCk7YnJlYWs7Y2FzZSBZVC5QbGF5ZXJTdGF0ZS5QQVVTRUQ6dGhpcy5oYW5kbGVQYXVzZSgpO2JyZWFrO2Nhc2UgWVQuUGxheWVyU3RhdGUuRU5ERUQ6dGhpcy5oYW5kbGVFbmQoKX10aGlzLmxhc3RSZWNvcmRlZFRpbWU9e3RpbWVSZXBvcnRlZDpEYXRlLm5vdygpLHRpbWVFbGFwc2VkOjFlMyp0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpfX19LHtrZXk6XCJyZXRyaWV2ZU1ldGFkYXRhXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxhKXt2YXIgbj1lLnBsYXllci5nZXRWaWRlb0RhdGEoKSxyPWUucGxheWVyLmdldFBsYXlsaXN0KCl8fFtuLnZpZGVvX2lkXSxvPXIuam9pbigpOygwLGkuZGVmYXVsdCkoXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3ZpZGVvcz9pZD1cIitvK1wiJnBhcnQ9c25pcHBldCxjb250ZW50RGV0YWlscyZrZXk9XCIrZS5hcGlLZXkpLnRoZW4oKGZ1bmN0aW9uKGUpe2lmKCFlLm9rKXt2YXIgdD1uZXcgRXJyb3IoXCJTZWdtZW50IHJlcXVlc3QgdG8gWW91dHViZSBBUEkgZmFpbGVkIChsaWtlbHkgZHVlIHRvIGEgYmFkIEFQSSBLZXkuIEV2ZW50cyB3aWxsIHN0aWxsIGJlIHNlbnQgYnV0IHdpbGwgbm90IGNvbnRhaW4gdmlkZW8gbWV0YWRhdGEpXCIpO3Rocm93IHQucmVzcG9uc2U9ZSx0fXJldHVybiBlLmpzb24oKX0pKS50aGVuKChmdW5jdGlvbihhKXtlLm1ldGFkYXRhPVtdO2Zvcih2YXIgbj0wLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89YS5pdGVtc1tpXTtlLm1ldGFkYXRhLnB1c2goe2NvbnRlbnQ6e3RpdGxlOm8uc25pcHBldC50aXRsZSxkZXNjcmlwdGlvbjpvLnNuaXBwZXQuZGVzY3JpcHRpb24sa2V5d29yZHM6by5zbmlwcGV0LnRhZ3MsY2hhbm5lbDpvLnNuaXBwZXQuY2hhbm5lbFRpdGxlLGFpcmRhdGU6by5zbmlwcGV0LnB1Ymxpc2hlZEF0fX0pLG4rPWwoby5jb250ZW50RGV0YWlscy5kdXJhdGlvbil9Zm9yKGk9MDtpPHIubGVuZ3RoO2krKyllLm1ldGFkYXRhW2ldLnBsYXliYWNrPXt0b3RhbF9sZW5ndGg6bix2aWRlb19wbGF5ZXI6XCJ5b3V0dWJlXCJ9O3QoKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5tZXRhZGF0YT1yLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3BsYXliYWNrOnt2aWRlb19wbGF5ZXI6XCJ5b3V0dWJlXCJ9LGNvbnRlbnQ6e319fSkpLGEodCl9KSl9KSl9fSx7a2V5OlwiaGFuZGxlQnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRldGVybWluZVNlZWsoKTt0aGlzLnBsYXliYWNrU3RhcnRlZHx8KHRoaXMucGxheWJhY2tTdGFydGVkPSEwLHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSksZSYmIXRoaXMuaXNTZWVraW5nJiYodGhpcy5pc1NlZWtpbmc9ITAsdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFNlZWsgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjaykpLHRoaXMuaXNTZWVraW5nJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFNlZWsgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzU2Vla2luZz0hMSk7dmFyIHQ9dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3QoKTt0JiYwPT09dGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKSYmdGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpIT09dGhpcy5wbGF5bGlzdEluZGV4JiYodGhpcy5jb250ZW50U3RhcnRlZD0hMSx0aGlzLnBsYXlsaXN0SW5kZXg9PT10Lmxlbmd0aC0xJiYwPT09dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpXS5wbGF5YmFjayksdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWVyLmdldFBsYXlsaXN0SW5kZXgoKV0ucGxheWJhY2spKSksdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIEJ1ZmZlciBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzQnVmZmVyaW5nPSEwfX0se2tleTpcImhhbmRsZVBsYXlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY29udGVudFN0YXJ0ZWR8fCh0aGlzLnBsYXlsaXN0SW5kZXg9dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpLC0xPT09dGhpcy5wbGF5bGlzdEluZGV4JiYodGhpcy5wbGF5bGlzdEluZGV4PTApLHRoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0uY29udGVudCksdGhpcy5jb250ZW50U3RhcnRlZD0hMCksdGhpcy5pc0J1ZmZlcmluZyYmKHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBCdWZmZXIgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzQnVmZmVyaW5nPSExKSx0aGlzLmlzUGF1c2VkJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFJlc3VtZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNQYXVzZWQ9ITEpfX0se2tleTpcImhhbmRsZVBhdXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRldGVybWluZVNlZWsoKTt0aGlzLmlzQnVmZmVyaW5nJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIEJ1ZmZlciBDb21wbGV0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNCdWZmZXJpbmc9ITEpLHRoaXMuaXNQYXVzZWR8fChlPyh0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU2VlayBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLmlzU2Vla2luZz0hMCk6KHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBQYXVzZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNQYXVzZWQ9ITApKX19LHtrZXk6XCJoYW5kbGVFbmRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJhY2soXCJWaWRlbyBDb250ZW50IENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5jb250ZW50KSx0aGlzLmNvbnRlbnRTdGFydGVkPSExO3ZhciBlPXRoaXMucGxheWVyLmdldFBsYXlsaXN0SW5kZXgoKSx0PXRoaXMucGxheWVyLmdldFBsYXlsaXN0KCk7KHQmJmU9PT10Lmxlbmd0aC0xfHwtMT09PWUpJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjayksdGhpcy5wbGF5YmFja1N0YXJ0ZWQ9ITEpfX0se2tleTpcImRldGVybWluZVNlZWtcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaXNQYXVzZWR8fHRoaXMuaXNCdWZmZXJpbmc/MDpEYXRlLm5vdygpLXRoaXMubGFzdFJlY29yZGVkVGltZS50aW1lUmVwb3J0ZWQsdD0xZTMqdGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKS10aGlzLmxhc3RSZWNvcmRlZFRpbWUudGltZUVsYXBzZWQ7cmV0dXJuIE1hdGguYWJzKGUtdCk+MmUzfX1dKSx0fShyLmRlZmF1bHQpO2Z1bmN0aW9uIGwoZSl7dmFyIHQ9ZS5tYXRjaCgvUFQoXFxkK0gpPyhcXGQrTSk/KFxcZCtTKT8vKTtyZXR1cm4gdD10LnNsaWNlKDEpLm1hcCgoZnVuY3Rpb24oZSl7aWYobnVsbCE9ZSlyZXR1cm4gZS5yZXBsYWNlKC9cXEQvLFwiXCIpfSkpLDM2MDAqKHBhcnNlSW50KHRbMF0pfHwwKSs2MCoocGFyc2VJbnQodFsxXSl8fDApKyhwYXJzZUludCh0WzJdKXx8MCl9dC5kZWZhdWx0PXN9XSl9KSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/address.js":
/*!******************************************************!*\
  !*** ./node_modules/@segment/facade/dist/address.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(rsc)/./node_modules/obj-case/index.js\"));\nfunction trait(a, b) {\n    return function () {\n        var traits = this.traits();\n        var props = this.properties ? this.properties() : {};\n        return (obj_case_1.default(traits, \"address.\" + a) ||\n            obj_case_1.default(traits, a) ||\n            (b ? obj_case_1.default(traits, \"address.\" + b) : null) ||\n            (b ? obj_case_1.default(traits, b) : null) ||\n            obj_case_1.default(props, \"address.\" + a) ||\n            obj_case_1.default(props, a) ||\n            (b ? obj_case_1.default(props, \"address.\" + b) : null) ||\n            (b ? obj_case_1.default(props, b) : null));\n    };\n}\nfunction default_1(proto) {\n    proto.zip = trait(\"postalCode\", \"zip\");\n    proto.country = trait(\"country\");\n    proto.street = trait(\"street\");\n    proto.state = trait(\"state\");\n    proto.city = trait(\"city\");\n    proto.region = trait(\"region\");\n}\nexports[\"default\"] = default_1;\n//# sourceMappingURL=address.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWRkcmVzcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlDQUFpQyxtQkFBTyxDQUFDLHdEQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2FkZHJlc3MuanM/NDQwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG5mdW5jdGlvbiB0cmFpdChhLCBiKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcGVydGllcyA/IHRoaXMucHJvcGVydGllcygpIDoge307XG4gICAgICAgIHJldHVybiAob2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgXCJhZGRyZXNzLlwiICsgYSkgfHxcbiAgICAgICAgICAgIG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIGEpIHx8XG4gICAgICAgICAgICAoYiA/IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiYWRkcmVzcy5cIiArIGIpIDogbnVsbCkgfHxcbiAgICAgICAgICAgIChiID8gb2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgYikgOiBudWxsKSB8fFxuICAgICAgICAgICAgb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBcImFkZHJlc3MuXCIgKyBhKSB8fFxuICAgICAgICAgICAgb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBhKSB8fFxuICAgICAgICAgICAgKGIgPyBvYmpfY2FzZV8xLmRlZmF1bHQocHJvcHMsIFwiYWRkcmVzcy5cIiArIGIpIDogbnVsbCkgfHxcbiAgICAgICAgICAgIChiID8gb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBiKSA6IG51bGwpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdF8xKHByb3RvKSB7XG4gICAgcHJvdG8uemlwID0gdHJhaXQoXCJwb3N0YWxDb2RlXCIsIFwiemlwXCIpO1xuICAgIHByb3RvLmNvdW50cnkgPSB0cmFpdChcImNvdW50cnlcIik7XG4gICAgcHJvdG8uc3RyZWV0ID0gdHJhaXQoXCJzdHJlZXRcIik7XG4gICAgcHJvdG8uc3RhdGUgPSB0cmFpdChcInN0YXRlXCIpO1xuICAgIHByb3RvLmNpdHkgPSB0cmFpdChcImNpdHlcIik7XG4gICAgcHJvdG8ucmVnaW9uID0gdHJhaXQoXCJyZWdpb25cIik7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBkZWZhdWx0XzE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGRyZXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/address.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/alias.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/alias.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Alias = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nfunction Alias(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Alias = Alias;\ninherits_1.default(Alias, facade_1.Facade);\nAlias.prototype.action = function () {\n    return \"alias\";\n};\nAlias.prototype.type = Alias.prototype.action;\nAlias.prototype.previousId = function () {\n    return this.field(\"previousId\") || this.field(\"from\");\n};\nAlias.prototype.from = Alias.prototype.previousId;\nAlias.prototype.userId = function () {\n    return this.field(\"userId\") || this.field(\"to\");\n};\nAlias.prototype.to = Alias.prototype.userId;\n//# sourceMappingURL=alias.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWxpYXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUNBQWlDLG1CQUFPLENBQUMsMkRBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWxpYXMuanM/ZWE2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQWxpYXMgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xuZnVuY3Rpb24gQWxpYXMoZGljdGlvbmFyeSwgb3B0cykge1xuICAgIGZhY2FkZV8xLkZhY2FkZS5jYWxsKHRoaXMsIGRpY3Rpb25hcnksIG9wdHMpO1xufVxuZXhwb3J0cy5BbGlhcyA9IEFsaWFzO1xuaW5oZXJpdHNfMS5kZWZhdWx0KEFsaWFzLCBmYWNhZGVfMS5GYWNhZGUpO1xuQWxpYXMucHJvdG90eXBlLmFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gXCJhbGlhc1wiO1xufTtcbkFsaWFzLnByb3RvdHlwZS50eXBlID0gQWxpYXMucHJvdG90eXBlLmFjdGlvbjtcbkFsaWFzLnByb3RvdHlwZS5wcmV2aW91c0lkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZpZWxkKFwicHJldmlvdXNJZFwiKSB8fCB0aGlzLmZpZWxkKFwiZnJvbVwiKTtcbn07XG5BbGlhcy5wcm90b3R5cGUuZnJvbSA9IEFsaWFzLnByb3RvdHlwZS5wcmV2aW91c0lkO1xuQWxpYXMucHJvdG90eXBlLnVzZXJJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZChcInVzZXJJZFwiKSB8fCB0aGlzLmZpZWxkKFwidG9cIik7XG59O1xuQWxpYXMucHJvdG90eXBlLnRvID0gQWxpYXMucHJvdG90eXBlLnVzZXJJZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFsaWFzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/alias.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/clone.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/clone.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.clone = void 0;\nfunction clone(properties) {\n    if (typeof properties !== 'object')\n        return properties;\n    if (Object.prototype.toString.call(properties) === '[object Object]') {\n        var temp = {};\n        for (var key in properties) {\n            if (Object.prototype.hasOwnProperty.call(properties, key)) {\n                temp[key] = clone(properties[key]);\n            }\n        }\n        return temp;\n    }\n    else if (Array.isArray(properties)) {\n        return properties.map(clone);\n    }\n    else {\n        return properties;\n    }\n}\nexports.clone = clone;\n//# sourceMappingURL=clone.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvY2xvbmUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvY2xvbmUuanM/NTBkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2xvbmUgPSB2b2lkIDA7XG5mdW5jdGlvbiBjbG9uZShwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9wZXJ0aWVzKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgdmFyIHRlbXAgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuICAgICAgICAgICAgICAgIHRlbXBba2V5XSA9IGNsb25lKHByb3BlcnRpZXNba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcykpIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXMubWFwKGNsb25lKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICAgIH1cbn1cbmV4cG9ydHMuY2xvbmUgPSBjbG9uZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb25lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/clone.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/delete.js":
/*!*****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/delete.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nfunction Delete(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Delete = Delete;\ninherits_1.default(Delete, facade_1.Facade);\nDelete.prototype.type = function () {\n    return \"delete\";\n};\n//# sourceMappingURL=delete.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZGVsZXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYztBQUNkLGlDQUFpQyxtQkFBTyxDQUFDLDJEQUFVO0FBQ25ELGVBQWUsbUJBQU8sQ0FBQyxxRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2RlbGV0ZS5qcz84ZGRhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWxldGUgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xuZnVuY3Rpb24gRGVsZXRlKGRpY3Rpb25hcnksIG9wdHMpIHtcbiAgICBmYWNhZGVfMS5GYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5LCBvcHRzKTtcbn1cbmV4cG9ydHMuRGVsZXRlID0gRGVsZXRlO1xuaW5oZXJpdHNfMS5kZWZhdWx0KERlbGV0ZSwgZmFjYWRlXzEuRmFjYWRlKTtcbkRlbGV0ZS5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gXCJkZWxldGVcIjtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxldGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/delete.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/facade.js":
/*!*****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/facade.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Facade = void 0;\nvar address_1 = __importDefault(__webpack_require__(/*! ./address */ \"(rsc)/./node_modules/@segment/facade/dist/address.js\"));\nvar clone_1 = __webpack_require__(/*! ./clone */ \"(rsc)/./node_modules/@segment/facade/dist/clone.js\");\nvar is_enabled_1 = __importDefault(__webpack_require__(/*! ./is-enabled */ \"(rsc)/./node_modules/@segment/facade/dist/is-enabled.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(rsc)/./node_modules/new-date/lib/index.js\"));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(rsc)/./node_modules/obj-case/index.js\"));\nvar isodate_traverse_1 = __importDefault(__webpack_require__(/*! @segment/isodate-traverse */ \"(rsc)/./node_modules/@segment/isodate-traverse/lib/index.js\"));\nfunction Facade(obj, opts) {\n    opts = opts || {};\n    this.raw = clone_1.clone(obj);\n    if (!(\"clone\" in opts))\n        opts.clone = true;\n    if (opts.clone)\n        obj = clone_1.clone(obj);\n    if (!(\"traverse\" in opts))\n        opts.traverse = true;\n    if (!(\"timestamp\" in obj))\n        obj.timestamp = new Date();\n    else\n        obj.timestamp = new_date_1.default(obj.timestamp);\n    if (opts.traverse)\n        isodate_traverse_1.default(obj);\n    this.opts = opts;\n    this.obj = obj;\n}\nexports.Facade = Facade;\nvar f = Facade.prototype;\nf.proxy = function (field) {\n    var fields = field.split(\".\");\n    field = fields.shift();\n    var obj = this[field] || this.obj[field];\n    if (!obj)\n        return obj;\n    if (typeof obj === \"function\")\n        obj = obj.call(this) || {};\n    if (fields.length === 0)\n        return this.opts.clone ? transform(obj) : obj;\n    obj = obj_case_1.default(obj, fields.join(\".\"));\n    return this.opts.clone ? transform(obj) : obj;\n};\nf.field = function (field) {\n    var obj = this.obj[field];\n    return this.opts.clone ? transform(obj) : obj;\n};\nFacade.proxy = function (field) {\n    return function () {\n        return this.proxy(field);\n    };\n};\nFacade.field = function (field) {\n    return function () {\n        return this.field(field);\n    };\n};\nFacade.multi = function (path) {\n    return function () {\n        var multi = this.proxy(path + \"s\");\n        if (Array.isArray(multi))\n            return multi;\n        var one = this.proxy(path);\n        if (one)\n            one = [this.opts.clone ? clone_1.clone(one) : one];\n        return one || [];\n    };\n};\nFacade.one = function (path) {\n    return function () {\n        var one = this.proxy(path);\n        if (one)\n            return one;\n        var multi = this.proxy(path + \"s\");\n        if (Array.isArray(multi))\n            return multi[0];\n    };\n};\nf.json = function () {\n    var ret = this.opts.clone ? clone_1.clone(this.obj) : this.obj;\n    if (this.type)\n        ret.type = this.type();\n    return ret;\n};\nf.rawEvent = function () {\n    return this.raw;\n};\nf.options = function (integration) {\n    var obj = this.obj.options || this.obj.context || {};\n    var options = this.opts.clone ? clone_1.clone(obj) : obj;\n    if (!integration)\n        return options;\n    if (!this.enabled(integration))\n        return;\n    var integrations = this.integrations();\n    var value = integrations[integration] || obj_case_1.default(integrations, integration);\n    if (typeof value !== \"object\")\n        value = obj_case_1.default(this.options(), integration);\n    return typeof value === \"object\" ? value : {};\n};\nf.context = f.options;\nf.enabled = function (integration) {\n    var allEnabled = this.proxy(\"options.providers.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = this.proxy(\"options.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = this.proxy(\"integrations.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = true;\n    var enabled = allEnabled && is_enabled_1.default(integration);\n    var options = this.integrations();\n    if (options.providers && options.providers.hasOwnProperty(integration)) {\n        enabled = options.providers[integration];\n    }\n    if (options.hasOwnProperty(integration)) {\n        var settings = options[integration];\n        if (typeof settings === \"boolean\") {\n            enabled = settings;\n        }\n        else {\n            enabled = true;\n        }\n    }\n    return !!enabled;\n};\nf.integrations = function () {\n    return (this.obj.integrations || this.proxy(\"options.providers\") || this.options());\n};\nf.active = function () {\n    var active = this.proxy(\"options.active\");\n    if (active === null || active === undefined)\n        active = true;\n    return active;\n};\nf.anonymousId = function () {\n    return this.field(\"anonymousId\") || this.field(\"sessionId\");\n};\nf.sessionId = f.anonymousId;\nf.groupId = Facade.proxy(\"options.groupId\");\nf.traits = function (aliases) {\n    var ret = this.proxy(\"options.traits\") || {};\n    var id = this.userId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"options.traits.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\nf.library = function () {\n    var library = this.proxy(\"options.library\");\n    if (!library)\n        return { name: \"unknown\", version: null };\n    if (typeof library === \"string\")\n        return { name: library, version: null };\n    return library;\n};\nf.device = function () {\n    var device = this.proxy(\"context.device\");\n    if (typeof device !== \"object\" || device === null) {\n        device = {};\n    }\n    var library = this.library().name;\n    if (device.type)\n        return device;\n    if (library.indexOf(\"ios\") > -1)\n        device.type = \"ios\";\n    if (library.indexOf(\"android\") > -1)\n        device.type = \"android\";\n    return device;\n};\nf.userAgent = Facade.proxy(\"context.userAgent\");\nf.timezone = Facade.proxy(\"context.timezone\");\nf.timestamp = Facade.field(\"timestamp\");\nf.channel = Facade.field(\"channel\");\nf.ip = Facade.proxy(\"context.ip\");\nf.userId = Facade.field(\"userId\");\naddress_1.default(f);\nfunction transform(obj) {\n    return clone_1.clone(obj);\n}\n//# sourceMappingURL=facade.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZmFjYWRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYztBQUNkLGdDQUFnQyxtQkFBTyxDQUFDLHVFQUFXO0FBQ25ELGNBQWMsbUJBQU8sQ0FBQyxtRUFBUztBQUMvQixtQ0FBbUMsbUJBQU8sQ0FBQyw2RUFBYztBQUN6RCxpQ0FBaUMsbUJBQU8sQ0FBQyw0REFBVTtBQUNuRCxpQ0FBaUMsbUJBQU8sQ0FBQyx3REFBVTtBQUNuRCx5Q0FBeUMsbUJBQU8sQ0FBQyw4RkFBMkI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9mYWNhZGUuanM/MTQ1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRmFjYWRlID0gdm9pZCAwO1xudmFyIGFkZHJlc3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9hZGRyZXNzXCIpKTtcbnZhciBjbG9uZV8xID0gcmVxdWlyZShcIi4vY2xvbmVcIik7XG52YXIgaXNfZW5hYmxlZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVuYWJsZWRcIikpO1xudmFyIG5ld19kYXRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5ldy1kYXRlXCIpKTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG52YXIgaXNvZGF0ZV90cmF2ZXJzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJAc2VnbWVudC9pc29kYXRlLXRyYXZlcnNlXCIpKTtcbmZ1bmN0aW9uIEZhY2FkZShvYmosIG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLnJhdyA9IGNsb25lXzEuY2xvbmUob2JqKTtcbiAgICBpZiAoIShcImNsb25lXCIgaW4gb3B0cykpXG4gICAgICAgIG9wdHMuY2xvbmUgPSB0cnVlO1xuICAgIGlmIChvcHRzLmNsb25lKVxuICAgICAgICBvYmogPSBjbG9uZV8xLmNsb25lKG9iaik7XG4gICAgaWYgKCEoXCJ0cmF2ZXJzZVwiIGluIG9wdHMpKVxuICAgICAgICBvcHRzLnRyYXZlcnNlID0gdHJ1ZTtcbiAgICBpZiAoIShcInRpbWVzdGFtcFwiIGluIG9iaikpXG4gICAgICAgIG9iai50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuICAgIGVsc2VcbiAgICAgICAgb2JqLnRpbWVzdGFtcCA9IG5ld19kYXRlXzEuZGVmYXVsdChvYmoudGltZXN0YW1wKTtcbiAgICBpZiAob3B0cy50cmF2ZXJzZSlcbiAgICAgICAgaXNvZGF0ZV90cmF2ZXJzZV8xLmRlZmF1bHQob2JqKTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMub2JqID0gb2JqO1xufVxuZXhwb3J0cy5GYWNhZGUgPSBGYWNhZGU7XG52YXIgZiA9IEZhY2FkZS5wcm90b3R5cGU7XG5mLnByb3h5ID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgdmFyIGZpZWxkcyA9IGZpZWxkLnNwbGl0KFwiLlwiKTtcbiAgICBmaWVsZCA9IGZpZWxkcy5zaGlmdCgpO1xuICAgIHZhciBvYmogPSB0aGlzW2ZpZWxkXSB8fCB0aGlzLm9ialtmaWVsZF07XG4gICAgaWYgKCFvYmopXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgaWYgKHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgb2JqID0gb2JqLmNhbGwodGhpcykgfHwge307XG4gICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiB0aGlzLm9wdHMuY2xvbmUgPyB0cmFuc2Zvcm0ob2JqKSA6IG9iajtcbiAgICBvYmogPSBvYmpfY2FzZV8xLmRlZmF1bHQob2JqLCBmaWVsZHMuam9pbihcIi5cIikpO1xuICAgIHJldHVybiB0aGlzLm9wdHMuY2xvbmUgPyB0cmFuc2Zvcm0ob2JqKSA6IG9iajtcbn07XG5mLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgdmFyIG9iaiA9IHRoaXMub2JqW2ZpZWxkXTtcbiAgICByZXR1cm4gdGhpcy5vcHRzLmNsb25lID8gdHJhbnNmb3JtKG9iaikgOiBvYmo7XG59O1xuRmFjYWRlLnByb3h5ID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJveHkoZmllbGQpO1xuICAgIH07XG59O1xuRmFjYWRlLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQoZmllbGQpO1xuICAgIH07XG59O1xuRmFjYWRlLm11bHRpID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbXVsdGkgPSB0aGlzLnByb3h5KHBhdGggKyBcInNcIik7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG11bHRpKSlcbiAgICAgICAgICAgIHJldHVybiBtdWx0aTtcbiAgICAgICAgdmFyIG9uZSA9IHRoaXMucHJveHkocGF0aCk7XG4gICAgICAgIGlmIChvbmUpXG4gICAgICAgICAgICBvbmUgPSBbdGhpcy5vcHRzLmNsb25lID8gY2xvbmVfMS5jbG9uZShvbmUpIDogb25lXTtcbiAgICAgICAgcmV0dXJuIG9uZSB8fCBbXTtcbiAgICB9O1xufTtcbkZhY2FkZS5vbmUgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvbmUgPSB0aGlzLnByb3h5KHBhdGgpO1xuICAgICAgICBpZiAob25lKVxuICAgICAgICAgICAgcmV0dXJuIG9uZTtcbiAgICAgICAgdmFyIG11bHRpID0gdGhpcy5wcm94eShwYXRoICsgXCJzXCIpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtdWx0aSkpXG4gICAgICAgICAgICByZXR1cm4gbXVsdGlbMF07XG4gICAgfTtcbn07XG5mLmpzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHRoaXMub3B0cy5jbG9uZSA/IGNsb25lXzEuY2xvbmUodGhpcy5vYmopIDogdGhpcy5vYmo7XG4gICAgaWYgKHRoaXMudHlwZSlcbiAgICAgICAgcmV0LnR5cGUgPSB0aGlzLnR5cGUoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcbmYucmF3RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmF3O1xufTtcbmYub3B0aW9ucyA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbikge1xuICAgIHZhciBvYmogPSB0aGlzLm9iai5vcHRpb25zIHx8IHRoaXMub2JqLmNvbnRleHQgfHwge307XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdHMuY2xvbmUgPyBjbG9uZV8xLmNsb25lKG9iaikgOiBvYmo7XG4gICAgaWYgKCFpbnRlZ3JhdGlvbilcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoaW50ZWdyYXRpb24pKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGludGVncmF0aW9ucyA9IHRoaXMuaW50ZWdyYXRpb25zKCk7XG4gICAgdmFyIHZhbHVlID0gaW50ZWdyYXRpb25zW2ludGVncmF0aW9uXSB8fCBvYmpfY2FzZV8xLmRlZmF1bHQoaW50ZWdyYXRpb25zLCBpbnRlZ3JhdGlvbik7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgdmFsdWUgPSBvYmpfY2FzZV8xLmRlZmF1bHQodGhpcy5vcHRpb25zKCksIGludGVncmF0aW9uKTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiID8gdmFsdWUgOiB7fTtcbn07XG5mLmNvbnRleHQgPSBmLm9wdGlvbnM7XG5mLmVuYWJsZWQgPSBmdW5jdGlvbiAoaW50ZWdyYXRpb24pIHtcbiAgICB2YXIgYWxsRW5hYmxlZCA9IHRoaXMucHJveHkoXCJvcHRpb25zLnByb3ZpZGVycy5hbGxcIik7XG4gICAgaWYgKHR5cGVvZiBhbGxFbmFibGVkICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgYWxsRW5hYmxlZCA9IHRoaXMucHJveHkoXCJvcHRpb25zLmFsbFwiKTtcbiAgICBpZiAodHlwZW9mIGFsbEVuYWJsZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICBhbGxFbmFibGVkID0gdGhpcy5wcm94eShcImludGVncmF0aW9ucy5hbGxcIik7XG4gICAgaWYgKHR5cGVvZiBhbGxFbmFibGVkICE9PSBcImJvb2xlYW5cIilcbiAgICAgICAgYWxsRW5hYmxlZCA9IHRydWU7XG4gICAgdmFyIGVuYWJsZWQgPSBhbGxFbmFibGVkICYmIGlzX2VuYWJsZWRfMS5kZWZhdWx0KGludGVncmF0aW9uKTtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuaW50ZWdyYXRpb25zKCk7XG4gICAgaWYgKG9wdGlvbnMucHJvdmlkZXJzICYmIG9wdGlvbnMucHJvdmlkZXJzLmhhc093blByb3BlcnR5KGludGVncmF0aW9uKSkge1xuICAgICAgICBlbmFibGVkID0gb3B0aW9ucy5wcm92aWRlcnNbaW50ZWdyYXRpb25dO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShpbnRlZ3JhdGlvbikpIHtcbiAgICAgICAgdmFyIHNldHRpbmdzID0gb3B0aW9uc1tpbnRlZ3JhdGlvbl07XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICBlbmFibGVkID0gc2V0dGluZ3M7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gISFlbmFibGVkO1xufTtcbmYuaW50ZWdyYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5vYmouaW50ZWdyYXRpb25zIHx8IHRoaXMucHJveHkoXCJvcHRpb25zLnByb3ZpZGVyc1wiKSB8fCB0aGlzLm9wdGlvbnMoKSk7XG59O1xuZi5hY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMucHJveHkoXCJvcHRpb25zLmFjdGl2ZVwiKTtcbiAgICBpZiAoYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgIHJldHVybiBhY3RpdmU7XG59O1xuZi5hbm9ueW1vdXNJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZChcImFub255bW91c0lkXCIpIHx8IHRoaXMuZmllbGQoXCJzZXNzaW9uSWRcIik7XG59O1xuZi5zZXNzaW9uSWQgPSBmLmFub255bW91c0lkO1xuZi5ncm91cElkID0gRmFjYWRlLnByb3h5KFwib3B0aW9ucy5ncm91cElkXCIpO1xuZi50cmFpdHMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICAgIHZhciByZXQgPSB0aGlzLnByb3h5KFwib3B0aW9ucy50cmFpdHNcIikgfHwge307XG4gICAgdmFyIGlkID0gdGhpcy51c2VySWQoKTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBpZiAoaWQpXG4gICAgICAgIHJldC5pZCA9IGlkO1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbGlhc2VzLCBhbGlhcykpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNbYWxpYXNdID09IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJveHkoXCJvcHRpb25zLnRyYWl0cy5cIiArIGFsaWFzKVxuICAgICAgICAgICAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0W2FsaWFzZXNbYWxpYXNdXSA9IHZhbHVlO1xuICAgICAgICAgICAgZGVsZXRlIHJldFthbGlhc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5mLmxpYnJhcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxpYnJhcnkgPSB0aGlzLnByb3h5KFwib3B0aW9ucy5saWJyYXJ5XCIpO1xuICAgIGlmICghbGlicmFyeSlcbiAgICAgICAgcmV0dXJuIHsgbmFtZTogXCJ1bmtub3duXCIsIHZlcnNpb246IG51bGwgfTtcbiAgICBpZiAodHlwZW9mIGxpYnJhcnkgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IG5hbWU6IGxpYnJhcnksIHZlcnNpb246IG51bGwgfTtcbiAgICByZXR1cm4gbGlicmFyeTtcbn07XG5mLmRldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGV2aWNlID0gdGhpcy5wcm94eShcImNvbnRleHQuZGV2aWNlXCIpO1xuICAgIGlmICh0eXBlb2YgZGV2aWNlICE9PSBcIm9iamVjdFwiIHx8IGRldmljZSA9PT0gbnVsbCkge1xuICAgICAgICBkZXZpY2UgPSB7fTtcbiAgICB9XG4gICAgdmFyIGxpYnJhcnkgPSB0aGlzLmxpYnJhcnkoKS5uYW1lO1xuICAgIGlmIChkZXZpY2UudHlwZSlcbiAgICAgICAgcmV0dXJuIGRldmljZTtcbiAgICBpZiAobGlicmFyeS5pbmRleE9mKFwiaW9zXCIpID4gLTEpXG4gICAgICAgIGRldmljZS50eXBlID0gXCJpb3NcIjtcbiAgICBpZiAobGlicmFyeS5pbmRleE9mKFwiYW5kcm9pZFwiKSA+IC0xKVxuICAgICAgICBkZXZpY2UudHlwZSA9IFwiYW5kcm9pZFwiO1xuICAgIHJldHVybiBkZXZpY2U7XG59O1xuZi51c2VyQWdlbnQgPSBGYWNhZGUucHJveHkoXCJjb250ZXh0LnVzZXJBZ2VudFwiKTtcbmYudGltZXpvbmUgPSBGYWNhZGUucHJveHkoXCJjb250ZXh0LnRpbWV6b25lXCIpO1xuZi50aW1lc3RhbXAgPSBGYWNhZGUuZmllbGQoXCJ0aW1lc3RhbXBcIik7XG5mLmNoYW5uZWwgPSBGYWNhZGUuZmllbGQoXCJjaGFubmVsXCIpO1xuZi5pcCA9IEZhY2FkZS5wcm94eShcImNvbnRleHQuaXBcIik7XG5mLnVzZXJJZCA9IEZhY2FkZS5maWVsZChcInVzZXJJZFwiKTtcbmFkZHJlc3NfMS5kZWZhdWx0KGYpO1xuZnVuY3Rpb24gdHJhbnNmb3JtKG9iaikge1xuICAgIHJldHVybiBjbG9uZV8xLmNsb25lKG9iaik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mYWNhZGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/facade.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/group.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/group.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Group = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(rsc)/./node_modules/@segment/facade/dist/is-email.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(rsc)/./node_modules/new-date/lib/index.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nfunction Group(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Group = Group;\ninherits_1.default(Group, facade_1.Facade);\nvar g = Group.prototype;\ng.action = function () {\n    return \"group\";\n};\ng.type = g.action;\ng.groupId = facade_1.Facade.field(\"groupId\");\ng.created = function () {\n    var created = this.proxy(\"traits.createdAt\") ||\n        this.proxy(\"traits.created\") ||\n        this.proxy(\"properties.createdAt\") ||\n        this.proxy(\"properties.created\");\n    if (created)\n        return new_date_1.default(created);\n};\ng.email = function () {\n    var email = this.proxy(\"traits.email\");\n    if (email)\n        return email;\n    var groupId = this.groupId();\n    if (is_email_1.default(groupId))\n        return groupId;\n};\ng.traits = function (aliases) {\n    var ret = this.properties();\n    var id = this.groupId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"traits.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\ng.name = facade_1.Facade.proxy(\"traits.name\");\ng.industry = facade_1.Facade.proxy(\"traits.industry\");\ng.employees = facade_1.Facade.proxy(\"traits.employees\");\ng.properties = function () {\n    return this.field(\"traits\") || this.field(\"properties\") || {};\n};\n//# sourceMappingURL=group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZ3JvdXAuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUNBQWlDLG1CQUFPLENBQUMsMkRBQVU7QUFDbkQsaUNBQWlDLG1CQUFPLENBQUMseUVBQVk7QUFDckQsaUNBQWlDLG1CQUFPLENBQUMsNERBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2dyb3VwLmpzPzIwNTEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdyb3VwID0gdm9pZCAwO1xudmFyIGluaGVyaXRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImluaGVyaXRzXCIpKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbnZhciBuZXdfZGF0ZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJuZXctZGF0ZVwiKSk7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG5mdW5jdGlvbiBHcm91cChkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLkdyb3VwID0gR3JvdXA7XG5pbmhlcml0c18xLmRlZmF1bHQoR3JvdXAsIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgZyA9IEdyb3VwLnByb3RvdHlwZTtcbmcuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcImdyb3VwXCI7XG59O1xuZy50eXBlID0gZy5hY3Rpb247XG5nLmdyb3VwSWQgPSBmYWNhZGVfMS5GYWNhZGUuZmllbGQoXCJncm91cElkXCIpO1xuZy5jcmVhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjcmVhdGVkID0gdGhpcy5wcm94eShcInRyYWl0cy5jcmVhdGVkQXRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInRyYWl0cy5jcmVhdGVkXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNyZWF0ZWRBdFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jcmVhdGVkXCIpO1xuICAgIGlmIChjcmVhdGVkKVxuICAgICAgICByZXR1cm4gbmV3X2RhdGVfMS5kZWZhdWx0KGNyZWF0ZWQpO1xufTtcbmcuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcInRyYWl0cy5lbWFpbFwiKTtcbiAgICBpZiAoZW1haWwpXG4gICAgICAgIHJldHVybiBlbWFpbDtcbiAgICB2YXIgZ3JvdXBJZCA9IHRoaXMuZ3JvdXBJZCgpO1xuICAgIGlmIChpc19lbWFpbF8xLmRlZmF1bHQoZ3JvdXBJZCkpXG4gICAgICAgIHJldHVybiBncm91cElkO1xufTtcbmcudHJhaXRzID0gZnVuY3Rpb24gKGFsaWFzZXMpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgdmFyIGlkID0gdGhpcy5ncm91cElkKCk7XG4gICAgYWxpYXNlcyA9IGFsaWFzZXMgfHwge307XG4gICAgaWYgKGlkKVxuICAgICAgICByZXQuaWQgPSBpZDtcbiAgICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWxpYXNlcywgYWxpYXMpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnByb3h5KFwidHJhaXRzLlwiICsgYWxpYXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgcmV0W2FsaWFzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcbmcubmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy5uYW1lXCIpO1xuZy5pbmR1c3RyeSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy5pbmR1c3RyeVwiKTtcbmcuZW1wbG95ZWVzID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLmVtcGxveWVlc1wiKTtcbmcucHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZChcInRyYWl0c1wiKSB8fCB0aGlzLmZpZWxkKFwicHJvcGVydGllc1wiKSB8fCB7fTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/group.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/identify.js":
/*!*******************************************************!*\
  !*** ./node_modules/@segment/facade/dist/identify.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Identify = void 0;\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(rsc)/./node_modules/obj-case/index.js\"));\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(rsc)/./node_modules/@segment/facade/dist/is-email.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(rsc)/./node_modules/new-date/lib/index.js\"));\nvar trim = function (str) { return str.trim(); };\nfunction Identify(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Identify = Identify;\ninherits_1.default(Identify, facade_1.Facade);\nvar i = Identify.prototype;\ni.action = function () {\n    return \"identify\";\n};\ni.type = i.action;\ni.traits = function (aliases) {\n    var ret = this.field(\"traits\") || {};\n    var id = this.userId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        var value = this[alias] == null ? this.proxy(\"traits.\" + alias) : this[alias]();\n        if (value == null)\n            continue;\n        ret[aliases[alias]] = value;\n        if (alias !== aliases[alias])\n            delete ret[alias];\n    }\n    return ret;\n};\ni.email = function () {\n    var email = this.proxy(\"traits.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\ni.created = function () {\n    var created = this.proxy(\"traits.created\") || this.proxy(\"traits.createdAt\");\n    if (created)\n        return new_date_1.default(created);\n};\ni.companyCreated = function () {\n    var created = this.proxy(\"traits.company.created\") ||\n        this.proxy(\"traits.company.createdAt\");\n    if (created) {\n        return new_date_1.default(created);\n    }\n};\ni.companyName = function () {\n    return this.proxy(\"traits.company.name\");\n};\ni.name = function () {\n    var name = this.proxy(\"traits.name\");\n    if (typeof name === \"string\") {\n        return trim(name);\n    }\n    var firstName = this.firstName();\n    var lastName = this.lastName();\n    if (firstName && lastName) {\n        return trim(firstName + \" \" + lastName);\n    }\n};\ni.firstName = function () {\n    var firstName = this.proxy(\"traits.firstName\");\n    if (typeof firstName === \"string\") {\n        return trim(firstName);\n    }\n    var name = this.proxy(\"traits.name\");\n    if (typeof name === \"string\") {\n        return trim(name).split(\" \")[0];\n    }\n};\ni.lastName = function () {\n    var lastName = this.proxy(\"traits.lastName\");\n    if (typeof lastName === \"string\") {\n        return trim(lastName);\n    }\n    var name = this.proxy(\"traits.name\");\n    if (typeof name !== \"string\") {\n        return;\n    }\n    var space = trim(name).indexOf(\" \");\n    if (space === -1) {\n        return;\n    }\n    return trim(name.substr(space + 1));\n};\ni.uid = function () {\n    return this.userId() || this.username() || this.email();\n};\ni.description = function () {\n    return this.proxy(\"traits.description\") || this.proxy(\"traits.background\");\n};\ni.age = function () {\n    var date = this.birthday();\n    var age = obj_case_1.default(this.traits(), \"age\");\n    if (age != null)\n        return age;\n    if (!(date instanceof Date))\n        return;\n    var now = new Date();\n    return now.getFullYear() - date.getFullYear();\n};\ni.avatar = function () {\n    var traits = this.traits();\n    return (obj_case_1.default(traits, \"avatar\") || obj_case_1.default(traits, \"photoUrl\") || obj_case_1.default(traits, \"avatarUrl\"));\n};\ni.position = function () {\n    var traits = this.traits();\n    return obj_case_1.default(traits, \"position\") || obj_case_1.default(traits, \"jobTitle\");\n};\ni.username = facade_1.Facade.proxy(\"traits.username\");\ni.website = facade_1.Facade.one(\"traits.website\");\ni.websites = facade_1.Facade.multi(\"traits.website\");\ni.phone = facade_1.Facade.one(\"traits.phone\");\ni.phones = facade_1.Facade.multi(\"traits.phone\");\ni.address = facade_1.Facade.proxy(\"traits.address\");\ni.gender = facade_1.Facade.proxy(\"traits.gender\");\ni.birthday = facade_1.Facade.proxy(\"traits.birthday\");\n//# sourceMappingURL=identify.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaWRlbnRpZnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxnQkFBZ0I7QUFDaEIsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDLGlDQUFpQyxtQkFBTyxDQUFDLHdEQUFVO0FBQ25ELGlDQUFpQyxtQkFBTyxDQUFDLDJEQUFVO0FBQ25ELGlDQUFpQyxtQkFBTyxDQUFDLHlFQUFZO0FBQ3JELGlDQUFpQyxtQkFBTyxDQUFDLDREQUFVO0FBQ25ELDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaWRlbnRpZnkuanM/ZGMwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSWRlbnRpZnkgPSB2b2lkIDA7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG52YXIgb2JqX2Nhc2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwib2JqLWNhc2VcIikpO1xudmFyIGluaGVyaXRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImluaGVyaXRzXCIpKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbnZhciBuZXdfZGF0ZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJuZXctZGF0ZVwiKSk7XG52YXIgdHJpbSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci50cmltKCk7IH07XG5mdW5jdGlvbiBJZGVudGlmeShkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLklkZW50aWZ5ID0gSWRlbnRpZnk7XG5pbmhlcml0c18xLmRlZmF1bHQoSWRlbnRpZnksIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgaSA9IElkZW50aWZ5LnByb3RvdHlwZTtcbmkuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcImlkZW50aWZ5XCI7XG59O1xuaS50eXBlID0gaS5hY3Rpb247XG5pLnRyYWl0cyA9IGZ1bmN0aW9uIChhbGlhc2VzKSB7XG4gICAgdmFyIHJldCA9IHRoaXMuZmllbGQoXCJ0cmFpdHNcIikgfHwge307XG4gICAgdmFyIGlkID0gdGhpcy51c2VySWQoKTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBpZiAoaWQpXG4gICAgICAgIHJldC5pZCA9IGlkO1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpc1thbGlhc10gPT0gbnVsbCA/IHRoaXMucHJveHkoXCJ0cmFpdHMuXCIgKyBhbGlhcykgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgIGlmIChhbGlhcyAhPT0gYWxpYXNlc1thbGlhc10pXG4gICAgICAgICAgICBkZWxldGUgcmV0W2FsaWFzXTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5pLmVtYWlsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbWFpbCA9IHRoaXMucHJveHkoXCJ0cmFpdHMuZW1haWxcIik7XG4gICAgaWYgKGVtYWlsKVxuICAgICAgICByZXR1cm4gZW1haWw7XG4gICAgdmFyIHVzZXJJZCA9IHRoaXMudXNlcklkKCk7XG4gICAgaWYgKGlzX2VtYWlsXzEuZGVmYXVsdCh1c2VySWQpKVxuICAgICAgICByZXR1cm4gdXNlcklkO1xufTtcbmkuY3JlYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3JlYXRlZCA9IHRoaXMucHJveHkoXCJ0cmFpdHMuY3JlYXRlZFwiKSB8fCB0aGlzLnByb3h5KFwidHJhaXRzLmNyZWF0ZWRBdFwiKTtcbiAgICBpZiAoY3JlYXRlZClcbiAgICAgICAgcmV0dXJuIG5ld19kYXRlXzEuZGVmYXVsdChjcmVhdGVkKTtcbn07XG5pLmNvbXBhbnlDcmVhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjcmVhdGVkID0gdGhpcy5wcm94eShcInRyYWl0cy5jb21wYW55LmNyZWF0ZWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInRyYWl0cy5jb21wYW55LmNyZWF0ZWRBdFwiKTtcbiAgICBpZiAoY3JlYXRlZCkge1xuICAgICAgICByZXR1cm4gbmV3X2RhdGVfMS5kZWZhdWx0KGNyZWF0ZWQpO1xuICAgIH1cbn07XG5pLmNvbXBhbnlOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb3h5KFwidHJhaXRzLmNvbXBhbnkubmFtZVwiKTtcbn07XG5pLm5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnByb3h5KFwidHJhaXRzLm5hbWVcIik7XG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKG5hbWUpO1xuICAgIH1cbiAgICB2YXIgZmlyc3ROYW1lID0gdGhpcy5maXJzdE5hbWUoKTtcbiAgICB2YXIgbGFzdE5hbWUgPSB0aGlzLmxhc3ROYW1lKCk7XG4gICAgaWYgKGZpcnN0TmFtZSAmJiBsYXN0TmFtZSkge1xuICAgICAgICByZXR1cm4gdHJpbShmaXJzdE5hbWUgKyBcIiBcIiArIGxhc3ROYW1lKTtcbiAgICB9XG59O1xuaS5maXJzdE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZpcnN0TmFtZSA9IHRoaXMucHJveHkoXCJ0cmFpdHMuZmlyc3ROYW1lXCIpO1xuICAgIGlmICh0eXBlb2YgZmlyc3ROYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKGZpcnN0TmFtZSk7XG4gICAgfVxuICAgIHZhciBuYW1lID0gdGhpcy5wcm94eShcInRyYWl0cy5uYW1lXCIpO1xuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdHJpbShuYW1lKS5zcGxpdChcIiBcIilbMF07XG4gICAgfVxufTtcbmkubGFzdE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3ROYW1lID0gdGhpcy5wcm94eShcInRyYWl0cy5sYXN0TmFtZVwiKTtcbiAgICBpZiAodHlwZW9mIGxhc3ROYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKGxhc3ROYW1lKTtcbiAgICB9XG4gICAgdmFyIG5hbWUgPSB0aGlzLnByb3h5KFwidHJhaXRzLm5hbWVcIik7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNwYWNlID0gdHJpbShuYW1lKS5pbmRleE9mKFwiIFwiKTtcbiAgICBpZiAoc3BhY2UgPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRyaW0obmFtZS5zdWJzdHIoc3BhY2UgKyAxKSk7XG59O1xuaS51aWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlcklkKCkgfHwgdGhpcy51c2VybmFtZSgpIHx8IHRoaXMuZW1haWwoKTtcbn07XG5pLmRlc2NyaXB0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb3h5KFwidHJhaXRzLmRlc2NyaXB0aW9uXCIpIHx8IHRoaXMucHJveHkoXCJ0cmFpdHMuYmFja2dyb3VuZFwiKTtcbn07XG5pLmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0ZSA9IHRoaXMuYmlydGhkYXkoKTtcbiAgICB2YXIgYWdlID0gb2JqX2Nhc2VfMS5kZWZhdWx0KHRoaXMudHJhaXRzKCksIFwiYWdlXCIpO1xuICAgIGlmIChhZ2UgIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIGFnZTtcbiAgICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICByZXR1cm4gbm93LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCk7XG59O1xuaS5hdmF0YXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgcmV0dXJuIChvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcImF2YXRhclwiKSB8fCBvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcInBob3RvVXJsXCIpIHx8IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiYXZhdGFyVXJsXCIpKTtcbn07XG5pLnBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0cmFpdHMgPSB0aGlzLnRyYWl0cygpO1xuICAgIHJldHVybiBvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcInBvc2l0aW9uXCIpIHx8IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiam9iVGl0bGVcIik7XG59O1xuaS51c2VybmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy51c2VybmFtZVwiKTtcbmkud2Vic2l0ZSA9IGZhY2FkZV8xLkZhY2FkZS5vbmUoXCJ0cmFpdHMud2Vic2l0ZVwiKTtcbmkud2Vic2l0ZXMgPSBmYWNhZGVfMS5GYWNhZGUubXVsdGkoXCJ0cmFpdHMud2Vic2l0ZVwiKTtcbmkucGhvbmUgPSBmYWNhZGVfMS5GYWNhZGUub25lKFwidHJhaXRzLnBob25lXCIpO1xuaS5waG9uZXMgPSBmYWNhZGVfMS5GYWNhZGUubXVsdGkoXCJ0cmFpdHMucGhvbmVcIik7XG5pLmFkZHJlc3MgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJ0cmFpdHMuYWRkcmVzc1wiKTtcbmkuZ2VuZGVyID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLmdlbmRlclwiKTtcbmkuYmlydGhkYXkgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJ0cmFpdHMuYmlydGhkYXlcIik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZGVudGlmeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/identify.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/index.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = exports.Screen = exports.Page = exports.Track = exports.Identify = exports.Group = exports.Alias = exports.Facade = void 0;\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nObject.defineProperty(exports, \"Facade\", ({ enumerable: true, get: function () { return facade_1.Facade; } }));\nvar alias_1 = __webpack_require__(/*! ./alias */ \"(rsc)/./node_modules/@segment/facade/dist/alias.js\");\nObject.defineProperty(exports, \"Alias\", ({ enumerable: true, get: function () { return alias_1.Alias; } }));\nvar group_1 = __webpack_require__(/*! ./group */ \"(rsc)/./node_modules/@segment/facade/dist/group.js\");\nObject.defineProperty(exports, \"Group\", ({ enumerable: true, get: function () { return group_1.Group; } }));\nvar identify_1 = __webpack_require__(/*! ./identify */ \"(rsc)/./node_modules/@segment/facade/dist/identify.js\");\nObject.defineProperty(exports, \"Identify\", ({ enumerable: true, get: function () { return identify_1.Identify; } }));\nvar track_1 = __webpack_require__(/*! ./track */ \"(rsc)/./node_modules/@segment/facade/dist/track.js\");\nObject.defineProperty(exports, \"Track\", ({ enumerable: true, get: function () { return track_1.Track; } }));\nvar page_1 = __webpack_require__(/*! ./page */ \"(rsc)/./node_modules/@segment/facade/dist/page.js\");\nObject.defineProperty(exports, \"Page\", ({ enumerable: true, get: function () { return page_1.Page; } }));\nvar screen_1 = __webpack_require__(/*! ./screen */ \"(rsc)/./node_modules/@segment/facade/dist/screen.js\");\nObject.defineProperty(exports, \"Screen\", ({ enumerable: true, get: function () { return screen_1.Screen; } }));\nvar delete_1 = __webpack_require__(/*! ./delete */ \"(rsc)/./node_modules/@segment/facade/dist/delete.js\");\nObject.defineProperty(exports, \"Delete\", ({ enumerable: true, get: function () { return delete_1.Delete; } }));\nexports[\"default\"] = __assign(__assign({}, facade_1.Facade), { Alias: alias_1.Alias,\n    Group: group_1.Group,\n    Identify: identify_1.Identify,\n    Track: track_1.Track,\n    Page: page_1.Page,\n    Screen: screen_1.Screen,\n    Delete: delete_1.Delete });\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxjQUFjLEdBQUcsY0FBYyxHQUFHLFlBQVksR0FBRyxhQUFhLEdBQUcsZ0JBQWdCLEdBQUcsYUFBYSxHQUFHLGFBQWEsR0FBRyxjQUFjO0FBQ2xJLGVBQWUsbUJBQU8sQ0FBQyxxRUFBVTtBQUNqQywwQ0FBeUMsRUFBRSxxQ0FBcUMsMkJBQTJCLEVBQUM7QUFDNUcsY0FBYyxtQkFBTyxDQUFDLG1FQUFTO0FBQy9CLHlDQUF3QyxFQUFFLHFDQUFxQyx5QkFBeUIsRUFBQztBQUN6RyxjQUFjLG1CQUFPLENBQUMsbUVBQVM7QUFDL0IseUNBQXdDLEVBQUUscUNBQXFDLHlCQUF5QixFQUFDO0FBQ3pHLGlCQUFpQixtQkFBTyxDQUFDLHlFQUFZO0FBQ3JDLDRDQUEyQyxFQUFFLHFDQUFxQywrQkFBK0IsRUFBQztBQUNsSCxjQUFjLG1CQUFPLENBQUMsbUVBQVM7QUFDL0IseUNBQXdDLEVBQUUscUNBQXFDLHlCQUF5QixFQUFDO0FBQ3pHLGFBQWEsbUJBQU8sQ0FBQyxpRUFBUTtBQUM3Qix3Q0FBdUMsRUFBRSxxQ0FBcUMsdUJBQXVCLEVBQUM7QUFDdEcsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDLDBDQUF5QyxFQUFFLHFDQUFxQywyQkFBMkIsRUFBQztBQUM1RyxlQUFlLG1CQUFPLENBQUMscUVBQVU7QUFDakMsMENBQXlDLEVBQUUscUNBQXFDLDJCQUEyQixFQUFDO0FBQzVHLGtCQUFlLHVCQUF1QixzQkFBc0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2luZGV4LmpzP2QzM2MiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWxldGUgPSBleHBvcnRzLlNjcmVlbiA9IGV4cG9ydHMuUGFnZSA9IGV4cG9ydHMuVHJhY2sgPSBleHBvcnRzLklkZW50aWZ5ID0gZXhwb3J0cy5Hcm91cCA9IGV4cG9ydHMuQWxpYXMgPSBleHBvcnRzLkZhY2FkZSA9IHZvaWQgMDtcbnZhciBmYWNhZGVfMSA9IHJlcXVpcmUoXCIuL2ZhY2FkZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkZhY2FkZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFjYWRlXzEuRmFjYWRlOyB9IH0pO1xudmFyIGFsaWFzXzEgPSByZXF1aXJlKFwiLi9hbGlhc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFsaWFzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhbGlhc18xLkFsaWFzOyB9IH0pO1xudmFyIGdyb3VwXzEgPSByZXF1aXJlKFwiLi9ncm91cFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkdyb3VwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBncm91cF8xLkdyb3VwOyB9IH0pO1xudmFyIGlkZW50aWZ5XzEgPSByZXF1aXJlKFwiLi9pZGVudGlmeVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIklkZW50aWZ5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpZGVudGlmeV8xLklkZW50aWZ5OyB9IH0pO1xudmFyIHRyYWNrXzEgPSByZXF1aXJlKFwiLi90cmFja1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRyYWNrXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cmFja18xLlRyYWNrOyB9IH0pO1xudmFyIHBhZ2VfMSA9IHJlcXVpcmUoXCIuL3BhZ2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQYWdlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwYWdlXzEuUGFnZTsgfSB9KTtcbnZhciBzY3JlZW5fMSA9IHJlcXVpcmUoXCIuL3NjcmVlblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNjcmVlblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2NyZWVuXzEuU2NyZWVuOyB9IH0pO1xudmFyIGRlbGV0ZV8xID0gcmVxdWlyZShcIi4vZGVsZXRlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRGVsZXRlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWxldGVfMS5EZWxldGU7IH0gfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmFjYWRlXzEuRmFjYWRlKSwgeyBBbGlhczogYWxpYXNfMS5BbGlhcyxcbiAgICBHcm91cDogZ3JvdXBfMS5Hcm91cCxcbiAgICBJZGVudGlmeTogaWRlbnRpZnlfMS5JZGVudGlmeSxcbiAgICBUcmFjazogdHJhY2tfMS5UcmFjayxcbiAgICBQYWdlOiBwYWdlXzEuUGFnZSxcbiAgICBTY3JlZW46IHNjcmVlbl8xLlNjcmVlbixcbiAgICBEZWxldGU6IGRlbGV0ZV8xLkRlbGV0ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/is-email.js":
/*!*******************************************************!*\
  !*** ./node_modules/@segment/facade/dist/is-email.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar matcher = /.+\\@.+\\..+/;\nfunction isEmail(string) {\n    return matcher.test(string);\n}\nexports[\"default\"] = isEmail;\n//# sourceMappingURL=is-email.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW1haWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW1haWwuanM/N2VhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBtYXRjaGVyID0gLy4rXFxALitcXC4uKy87XG5mdW5jdGlvbiBpc0VtYWlsKHN0cmluZykge1xuICAgIHJldHVybiBtYXRjaGVyLnRlc3Qoc3RyaW5nKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGlzRW1haWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1lbWFpbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/is-email.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/is-enabled.js":
/*!*********************************************************!*\
  !*** ./node_modules/@segment/facade/dist/is-enabled.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar disabled = {\n    Salesforce: true,\n};\nfunction default_1(integration) {\n    return !disabled[integration];\n}\nexports[\"default\"] = default_1;\n//# sourceMappingURL=is-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW5hYmxlZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaXMtZW5hYmxlZC5qcz84YTI5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGRpc2FibGVkID0ge1xuICAgIFNhbGVzZm9yY2U6IHRydWUsXG59O1xuZnVuY3Rpb24gZGVmYXVsdF8xKGludGVncmF0aW9uKSB7XG4gICAgcmV0dXJuICFkaXNhYmxlZFtpbnRlZ3JhdGlvbl07XG59XG5leHBvcnRzLmRlZmF1bHQgPSBkZWZhdWx0XzE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1lbmFibGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/is-enabled.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/page.js":
/*!***************************************************!*\
  !*** ./node_modules/@segment/facade/dist/page.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Page = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nvar track_1 = __webpack_require__(/*! ./track */ \"(rsc)/./node_modules/@segment/facade/dist/track.js\");\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(rsc)/./node_modules/@segment/facade/dist/is-email.js\"));\nfunction Page(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Page = Page;\ninherits_1.default(Page, facade_1.Facade);\nvar p = Page.prototype;\np.action = function () {\n    return \"page\";\n};\np.type = p.action;\np.category = facade_1.Facade.field(\"category\");\np.name = facade_1.Facade.field(\"name\");\np.title = facade_1.Facade.proxy(\"properties.title\");\np.path = facade_1.Facade.proxy(\"properties.path\");\np.url = facade_1.Facade.proxy(\"properties.url\");\np.referrer = function () {\n    return (this.proxy(\"context.referrer.url\") ||\n        this.proxy(\"context.page.referrer\") ||\n        this.proxy(\"properties.referrer\"));\n};\np.properties = function (aliases) {\n    var props = this.field(\"properties\") || {};\n    var category = this.category();\n    var name = this.name();\n    aliases = aliases || {};\n    if (category)\n        props.category = category;\n    if (name)\n        props.name = name;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"properties.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            props[aliases[alias]] = value;\n            if (alias !== aliases[alias])\n                delete props[alias];\n        }\n    }\n    return props;\n};\np.email = function () {\n    var email = this.proxy(\"context.traits.email\") || this.proxy(\"properties.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\np.fullName = function () {\n    var category = this.category();\n    var name = this.name();\n    return name && category ? category + \" \" + name : name;\n};\np.event = function (name) {\n    return name ? \"Viewed \" + name + \" Page\" : \"Loaded a Page\";\n};\np.track = function (name) {\n    var json = this.json();\n    json.event = this.event(name);\n    json.timestamp = this.timestamp();\n    json.properties = this.properties();\n    return new track_1.Track(json, this.opts);\n};\n//# sourceMappingURL=page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvcGFnZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELFlBQVk7QUFDWixpQ0FBaUMsbUJBQU8sQ0FBQywyREFBVTtBQUNuRCxlQUFlLG1CQUFPLENBQUMscUVBQVU7QUFDakMsY0FBYyxtQkFBTyxDQUFDLG1FQUFTO0FBQy9CLGlDQUFpQyxtQkFBTyxDQUFDLHlFQUFZO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9wYWdlLmpzPzNiZWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBhZ2UgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xudmFyIHRyYWNrXzEgPSByZXF1aXJlKFwiLi90cmFja1wiKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbmZ1bmN0aW9uIFBhZ2UoZGljdGlvbmFyeSwgb3B0cykge1xuICAgIGZhY2FkZV8xLkZhY2FkZS5jYWxsKHRoaXMsIGRpY3Rpb25hcnksIG9wdHMpO1xufVxuZXhwb3J0cy5QYWdlID0gUGFnZTtcbmluaGVyaXRzXzEuZGVmYXVsdChQYWdlLCBmYWNhZGVfMS5GYWNhZGUpO1xudmFyIHAgPSBQYWdlLnByb3RvdHlwZTtcbnAuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcInBhZ2VcIjtcbn07XG5wLnR5cGUgPSBwLmFjdGlvbjtcbnAuY2F0ZWdvcnkgPSBmYWNhZGVfMS5GYWNhZGUuZmllbGQoXCJjYXRlZ29yeVwiKTtcbnAubmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5maWVsZChcIm5hbWVcIik7XG5wLnRpdGxlID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy50aXRsZVwiKTtcbnAucGF0aCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMucGF0aFwiKTtcbnAudXJsID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy51cmxcIik7XG5wLnJlZmVycmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcImNvbnRleHQucmVmZXJyZXIudXJsXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJjb250ZXh0LnBhZ2UucmVmZXJyZXJcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMucmVmZXJyZXJcIikpO1xufTtcbnAucHJvcGVydGllcyA9IGZ1bmN0aW9uIChhbGlhc2VzKSB7XG4gICAgdmFyIHByb3BzID0gdGhpcy5maWVsZChcInByb3BlcnRpZXNcIikgfHwge307XG4gICAgdmFyIGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeSgpO1xuICAgIHZhciBuYW1lID0gdGhpcy5uYW1lKCk7XG4gICAgYWxpYXNlcyA9IGFsaWFzZXMgfHwge307XG4gICAgaWYgKGNhdGVnb3J5KVxuICAgICAgICBwcm9wcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgIGlmIChuYW1lKVxuICAgICAgICBwcm9wcy5uYW1lID0gbmFtZTtcbiAgICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWxpYXNlcywgYWxpYXMpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnByb3h5KFwicHJvcGVydGllcy5cIiArIGFsaWFzKVxuICAgICAgICAgICAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcHJvcHNbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoYWxpYXMgIT09IGFsaWFzZXNbYWxpYXNdKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1thbGlhc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb3BzO1xufTtcbnAuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcImNvbnRleHQudHJhaXRzLmVtYWlsXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmVtYWlsXCIpO1xuICAgIGlmIChlbWFpbClcbiAgICAgICAgcmV0dXJuIGVtYWlsO1xuICAgIHZhciB1c2VySWQgPSB0aGlzLnVzZXJJZCgpO1xuICAgIGlmIChpc19lbWFpbF8xLmRlZmF1bHQodXNlcklkKSlcbiAgICAgICAgcmV0dXJuIHVzZXJJZDtcbn07XG5wLmZ1bGxOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcnkoKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMubmFtZSgpO1xuICAgIHJldHVybiBuYW1lICYmIGNhdGVnb3J5ID8gY2F0ZWdvcnkgKyBcIiBcIiArIG5hbWUgOiBuYW1lO1xufTtcbnAuZXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiBuYW1lID8gXCJWaWV3ZWQgXCIgKyBuYW1lICsgXCIgUGFnZVwiIDogXCJMb2FkZWQgYSBQYWdlXCI7XG59O1xucC50cmFjayA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGpzb24gPSB0aGlzLmpzb24oKTtcbiAgICBqc29uLmV2ZW50ID0gdGhpcy5ldmVudChuYW1lKTtcbiAgICBqc29uLnRpbWVzdGFtcCA9IHRoaXMudGltZXN0YW1wKCk7XG4gICAganNvbi5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgcmV0dXJuIG5ldyB0cmFja18xLlRyYWNrKGpzb24sIHRoaXMub3B0cyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/page.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/screen.js":
/*!*****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/screen.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Screen = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar page_1 = __webpack_require__(/*! ./page */ \"(rsc)/./node_modules/@segment/facade/dist/page.js\");\nvar track_1 = __webpack_require__(/*! ./track */ \"(rsc)/./node_modules/@segment/facade/dist/track.js\");\nfunction Screen(dictionary, opts) {\n    page_1.Page.call(this, dictionary, opts);\n}\nexports.Screen = Screen;\ninherits_1.default(Screen, page_1.Page);\nScreen.prototype.action = function () {\n    return \"screen\";\n};\nScreen.prototype.type = Screen.prototype.action;\nScreen.prototype.event = function (name) {\n    return name ? \"Viewed \" + name + \" Screen\" : \"Loaded a Screen\";\n};\nScreen.prototype.track = function (name) {\n    var json = this.json();\n    json.event = this.event(name);\n    json.timestamp = this.timestamp();\n    json.properties = this.properties();\n    return new track_1.Track(json, this.opts);\n};\n//# sourceMappingURL=screen.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3Qvc2NyZWVuLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYztBQUNkLGlDQUFpQyxtQkFBTyxDQUFDLDJEQUFVO0FBQ25ELGFBQWEsbUJBQU8sQ0FBQyxpRUFBUTtBQUM3QixjQUFjLG1CQUFPLENBQUMsbUVBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3Qvc2NyZWVuLmpzPzQ4MDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNjcmVlbiA9IHZvaWQgMDtcbnZhciBpbmhlcml0c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpbmhlcml0c1wiKSk7XG52YXIgcGFnZV8xID0gcmVxdWlyZShcIi4vcGFnZVwiKTtcbnZhciB0cmFja18xID0gcmVxdWlyZShcIi4vdHJhY2tcIik7XG5mdW5jdGlvbiBTY3JlZW4oZGljdGlvbmFyeSwgb3B0cykge1xuICAgIHBhZ2VfMS5QYWdlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLlNjcmVlbiA9IFNjcmVlbjtcbmluaGVyaXRzXzEuZGVmYXVsdChTY3JlZW4sIHBhZ2VfMS5QYWdlKTtcblNjcmVlbi5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcInNjcmVlblwiO1xufTtcblNjcmVlbi5wcm90b3R5cGUudHlwZSA9IFNjcmVlbi5wcm90b3R5cGUuYWN0aW9uO1xuU2NyZWVuLnByb3RvdHlwZS5ldmVudCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUgPyBcIlZpZXdlZCBcIiArIG5hbWUgKyBcIiBTY3JlZW5cIiA6IFwiTG9hZGVkIGEgU2NyZWVuXCI7XG59O1xuU2NyZWVuLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGpzb24gPSB0aGlzLmpzb24oKTtcbiAgICBqc29uLmV2ZW50ID0gdGhpcy5ldmVudChuYW1lKTtcbiAgICBqc29uLnRpbWVzdGFtcCA9IHRoaXMudGltZXN0YW1wKCk7XG4gICAganNvbi5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgcmV0dXJuIG5ldyB0cmFja18xLlRyYWNrKGpzb24sIHRoaXMub3B0cyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NyZWVuLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/screen.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/facade/dist/track.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/facade/dist/track.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Track = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(rsc)/./node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(rsc)/./node_modules/@segment/facade/dist/facade.js\");\nvar identify_1 = __webpack_require__(/*! ./identify */ \"(rsc)/./node_modules/@segment/facade/dist/identify.js\");\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(rsc)/./node_modules/@segment/facade/dist/is-email.js\"));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(rsc)/./node_modules/obj-case/index.js\"));\nfunction Track(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Track = Track;\ninherits_1.default(Track, facade_1.Facade);\nvar t = Track.prototype;\nt.action = function () {\n    return \"track\";\n};\nt.type = t.action;\nt.event = facade_1.Facade.field(\"event\");\nt.value = facade_1.Facade.proxy(\"properties.value\");\nt.category = facade_1.Facade.proxy(\"properties.category\");\nt.id = facade_1.Facade.proxy(\"properties.id\");\nt.productId = function () {\n    return (this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\"));\n};\nt.promotionId = function () {\n    return (this.proxy(\"properties.promotion_id\") ||\n        this.proxy(\"properties.promotionId\"));\n};\nt.cartId = function () {\n    return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\nt.checkoutId = function () {\n    return (this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\"));\n};\nt.paymentId = function () {\n    return (this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\"));\n};\nt.couponId = function () {\n    return (this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\"));\n};\nt.wishlistId = function () {\n    return (this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\"));\n};\nt.reviewId = function () {\n    return (this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\"));\n};\nt.orderId = function () {\n    return (this.proxy(\"properties.id\") ||\n        this.proxy(\"properties.order_id\") ||\n        this.proxy(\"properties.orderId\"));\n};\nt.sku = facade_1.Facade.proxy(\"properties.sku\");\nt.tax = facade_1.Facade.proxy(\"properties.tax\");\nt.name = facade_1.Facade.proxy(\"properties.name\");\nt.price = facade_1.Facade.proxy(\"properties.price\");\nt.total = facade_1.Facade.proxy(\"properties.total\");\nt.repeat = facade_1.Facade.proxy(\"properties.repeat\");\nt.coupon = facade_1.Facade.proxy(\"properties.coupon\");\nt.shipping = facade_1.Facade.proxy(\"properties.shipping\");\nt.discount = facade_1.Facade.proxy(\"properties.discount\");\nt.shippingMethod = function () {\n    return (this.proxy(\"properties.shipping_method\") ||\n        this.proxy(\"properties.shippingMethod\"));\n};\nt.paymentMethod = function () {\n    return (this.proxy(\"properties.payment_method\") ||\n        this.proxy(\"properties.paymentMethod\"));\n};\nt.description = facade_1.Facade.proxy(\"properties.description\");\nt.plan = facade_1.Facade.proxy(\"properties.plan\");\nt.subtotal = function () {\n    var subtotal = obj_case_1.default(this.properties(), \"subtotal\");\n    var total = this.total() || this.revenue();\n    if (subtotal)\n        return subtotal;\n    if (!total)\n        return 0;\n    if (this.total()) {\n        var n = this.tax();\n        if (n)\n            total -= n;\n        n = this.shipping();\n        if (n)\n            total -= n;\n        n = this.discount();\n        if (n)\n            total += n;\n    }\n    return total;\n};\nt.products = function () {\n    var props = this.properties();\n    var products = obj_case_1.default(props, \"products\");\n    if (Array.isArray(products)) {\n        return products.filter(function (item) { return item !== null; });\n    }\n    return [];\n};\nt.quantity = function () {\n    var props = this.obj.properties || {};\n    return props.quantity || 1;\n};\nt.currency = function () {\n    var props = this.obj.properties || {};\n    return props.currency || \"USD\";\n};\nt.referrer = function () {\n    return (this.proxy(\"context.referrer.url\") ||\n        this.proxy(\"context.page.referrer\") ||\n        this.proxy(\"properties.referrer\"));\n};\nt.query = facade_1.Facade.proxy(\"options.query\");\nt.properties = function (aliases) {\n    var ret = this.field(\"properties\") || {};\n    aliases = aliases || {};\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"properties.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\nt.username = function () {\n    return (this.proxy(\"traits.username\") ||\n        this.proxy(\"properties.username\") ||\n        this.userId() ||\n        this.sessionId());\n};\nt.email = function () {\n    var email = this.proxy(\"traits.email\") ||\n        this.proxy(\"properties.email\") ||\n        this.proxy(\"options.traits.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\nt.revenue = function () {\n    var revenue = this.proxy(\"properties.revenue\");\n    var event = this.event();\n    var orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n    if (!revenue && event && event.match(orderCompletedRegExp)) {\n        revenue = this.proxy(\"properties.total\");\n    }\n    return currency(revenue);\n};\nt.cents = function () {\n    var revenue = this.revenue();\n    return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\nt.identify = function () {\n    var json = this.json();\n    json.traits = this.traits();\n    return new identify_1.Identify(json, this.opts);\n};\nfunction currency(val) {\n    if (!val)\n        return;\n    if (typeof val === \"number\") {\n        return val;\n    }\n    if (typeof val !== \"string\") {\n        return;\n    }\n    val = val.replace(/\\$/g, \"\");\n    val = parseFloat(val);\n    if (!isNaN(val)) {\n        return val;\n    }\n}\n//# sourceMappingURL=track.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvdHJhY2suanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUNBQWlDLG1CQUFPLENBQUMsMkRBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHFFQUFVO0FBQ2pDLGlCQUFpQixtQkFBTyxDQUFDLHlFQUFZO0FBQ3JDLGlDQUFpQyxtQkFBTyxDQUFDLHlFQUFZO0FBQ3JELGlDQUFpQyxtQkFBTyxDQUFDLHdEQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHVCQUF1QjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvdHJhY2suanM/ZTBhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHJhY2sgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xudmFyIGlkZW50aWZ5XzEgPSByZXF1aXJlKFwiLi9pZGVudGlmeVwiKTtcbnZhciBpc19lbWFpbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lzLWVtYWlsXCIpKTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG5mdW5jdGlvbiBUcmFjayhkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLlRyYWNrID0gVHJhY2s7XG5pbmhlcml0c18xLmRlZmF1bHQoVHJhY2ssIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgdCA9IFRyYWNrLnByb3RvdHlwZTtcbnQuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcInRyYWNrXCI7XG59O1xudC50eXBlID0gdC5hY3Rpb247XG50LmV2ZW50ID0gZmFjYWRlXzEuRmFjYWRlLmZpZWxkKFwiZXZlbnRcIik7XG50LnZhbHVlID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy52YWx1ZVwiKTtcbnQuY2F0ZWdvcnkgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLmNhdGVnb3J5XCIpO1xudC5pZCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuaWRcIik7XG50LnByb2R1Y3RJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnByb2R1Y3RfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMucHJvZHVjdElkXCIpKTtcbn07XG50LnByb21vdGlvbklkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMucHJvbW90aW9uX2lkXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnByb21vdGlvbklkXCIpKTtcbn07XG50LmNhcnRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm94eShcInByb3BlcnRpZXMuY2FydF9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jYXJ0SWRcIik7XG59O1xudC5jaGVja291dElkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMuY2hlY2tvdXRfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMuY2hlY2tvdXRJZFwiKSk7XG59O1xudC5wYXltZW50SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy5wYXltZW50X2lkXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnBheW1lbnRJZFwiKSk7XG59O1xudC5jb3Vwb25JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNvdXBvbl9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jb3Vwb25JZFwiKSk7XG59O1xudC53aXNobGlzdElkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMud2lzaGxpc3RfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMud2lzaGxpc3RJZFwiKSk7XG59O1xudC5yZXZpZXdJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnJldmlld19pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5yZXZpZXdJZFwiKSk7XG59O1xudC5vcmRlcklkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMuaWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMub3JkZXJfaWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMub3JkZXJJZFwiKSk7XG59O1xudC5za3UgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnNrdVwiKTtcbnQudGF4ID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy50YXhcIik7XG50Lm5hbWUgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLm5hbWVcIik7XG50LnByaWNlID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5wcmljZVwiKTtcbnQudG90YWwgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnRvdGFsXCIpO1xudC5yZXBlYXQgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnJlcGVhdFwiKTtcbnQuY291cG9uID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5jb3Vwb25cIik7XG50LnNoaXBwaW5nID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5zaGlwcGluZ1wiKTtcbnQuZGlzY291bnQgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLmRpc2NvdW50XCIpO1xudC5zaGlwcGluZ01ldGhvZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnNoaXBwaW5nX21ldGhvZFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5zaGlwcGluZ01ldGhvZFwiKSk7XG59O1xudC5wYXltZW50TWV0aG9kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMucGF5bWVudF9tZXRob2RcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMucGF5bWVudE1ldGhvZFwiKSk7XG59O1xudC5kZXNjcmlwdGlvbiA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuZGVzY3JpcHRpb25cIik7XG50LnBsYW4gPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnBsYW5cIik7XG50LnN1YnRvdGFsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdWJ0b3RhbCA9IG9ial9jYXNlXzEuZGVmYXVsdCh0aGlzLnByb3BlcnRpZXMoKSwgXCJzdWJ0b3RhbFwiKTtcbiAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsKCkgfHwgdGhpcy5yZXZlbnVlKCk7XG4gICAgaWYgKHN1YnRvdGFsKVxuICAgICAgICByZXR1cm4gc3VidG90YWw7XG4gICAgaWYgKCF0b3RhbClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgaWYgKHRoaXMudG90YWwoKSkge1xuICAgICAgICB2YXIgbiA9IHRoaXMudGF4KCk7XG4gICAgICAgIGlmIChuKVxuICAgICAgICAgICAgdG90YWwgLT0gbjtcbiAgICAgICAgbiA9IHRoaXMuc2hpcHBpbmcoKTtcbiAgICAgICAgaWYgKG4pXG4gICAgICAgICAgICB0b3RhbCAtPSBuO1xuICAgICAgICBuID0gdGhpcy5kaXNjb3VudCgpO1xuICAgICAgICBpZiAobilcbiAgICAgICAgICAgIHRvdGFsICs9IG47XG4gICAgfVxuICAgIHJldHVybiB0b3RhbDtcbn07XG50LnByb2R1Y3RzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcGVydGllcygpO1xuICAgIHZhciBwcm9kdWN0cyA9IG9ial9jYXNlXzEuZGVmYXVsdChwcm9wcywgXCJwcm9kdWN0c1wiKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9kdWN0cykpIHtcbiAgICAgICAgcmV0dXJuIHByb2R1Y3RzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbSAhPT0gbnVsbDsgfSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn07XG50LnF1YW50aXR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IHRoaXMub2JqLnByb3BlcnRpZXMgfHwge307XG4gICAgcmV0dXJuIHByb3BzLnF1YW50aXR5IHx8IDE7XG59O1xudC5jdXJyZW5jeSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJvcHMgPSB0aGlzLm9iai5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgIHJldHVybiBwcm9wcy5jdXJyZW5jeSB8fCBcIlVTRFwiO1xufTtcbnQucmVmZXJyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwiY29udGV4dC5yZWZlcnJlci51cmxcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcImNvbnRleHQucGFnZS5yZWZlcnJlclwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5yZWZlcnJlclwiKSk7XG59O1xudC5xdWVyeSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcIm9wdGlvbnMucXVlcnlcIik7XG50LnByb3BlcnRpZXMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICAgIHZhciByZXQgPSB0aGlzLmZpZWxkKFwicHJvcGVydGllc1wiKSB8fCB7fTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBmb3IgKHZhciBhbGlhcyBpbiBhbGlhc2VzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYWxpYXNlcywgYWxpYXMpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnByb3h5KFwicHJvcGVydGllcy5cIiArIGFsaWFzKVxuICAgICAgICAgICAgICAgIDogdGhpc1thbGlhc10oKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0W2FsaWFzZXNbYWxpYXNdXSA9IHZhbHVlO1xuICAgICAgICAgICAgZGVsZXRlIHJldFthbGlhc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG50LnVzZXJuYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInRyYWl0cy51c2VybmFtZVwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy51c2VybmFtZVwiKSB8fFxuICAgICAgICB0aGlzLnVzZXJJZCgpIHx8XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkKCkpO1xufTtcbnQuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcInRyYWl0cy5lbWFpbFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5lbWFpbFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwib3B0aW9ucy50cmFpdHMuZW1haWxcIik7XG4gICAgaWYgKGVtYWlsKVxuICAgICAgICByZXR1cm4gZW1haWw7XG4gICAgdmFyIHVzZXJJZCA9IHRoaXMudXNlcklkKCk7XG4gICAgaWYgKGlzX2VtYWlsXzEuZGVmYXVsdCh1c2VySWQpKVxuICAgICAgICByZXR1cm4gdXNlcklkO1xufTtcbnQucmV2ZW51ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV2ZW51ZSA9IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnJldmVudWVcIik7XG4gICAgdmFyIGV2ZW50ID0gdGhpcy5ldmVudCgpO1xuICAgIHZhciBvcmRlckNvbXBsZXRlZFJlZ0V4cCA9IC9eWyBfXT9jb21wbGV0ZWRbIF9dP29yZGVyWyBfXT98XlsgX10/b3JkZXJbIF9dP2NvbXBsZXRlZFsgX10/JC9pO1xuICAgIGlmICghcmV2ZW51ZSAmJiBldmVudCAmJiBldmVudC5tYXRjaChvcmRlckNvbXBsZXRlZFJlZ0V4cCkpIHtcbiAgICAgICAgcmV2ZW51ZSA9IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnRvdGFsXCIpO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVuY3kocmV2ZW51ZSk7XG59O1xudC5jZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV2ZW51ZSA9IHRoaXMucmV2ZW51ZSgpO1xuICAgIHJldHVybiB0eXBlb2YgcmV2ZW51ZSAhPT0gXCJudW1iZXJcIiA/IHRoaXMudmFsdWUoKSB8fCAwIDogcmV2ZW51ZSAqIDEwMDtcbn07XG50LmlkZW50aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBqc29uID0gdGhpcy5qc29uKCk7XG4gICAganNvbi50cmFpdHMgPSB0aGlzLnRyYWl0cygpO1xuICAgIHJldHVybiBuZXcgaWRlbnRpZnlfMS5JZGVudGlmeShqc29uLCB0aGlzLm9wdHMpO1xufTtcbmZ1bmN0aW9uIGN1cnJlbmN5KHZhbCkge1xuICAgIGlmICghdmFsKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YWwgPSB2YWwucmVwbGFjZSgvXFwkL2csIFwiXCIpO1xuICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICBpZiAoIWlzTmFOKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/facade/dist/track.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/isodate-traverse/lib/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@segment/isodate-traverse/lib/index.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar isodate = __webpack_require__(/*! @segment/isodate */ \"(rsc)/./node_modules/@segment/isodate/lib/index.js\");\n\n/**\n * Expose `traverse`.\n */\nmodule.exports = traverse;\n\n/**\n * Recursively traverse an object or array, and convert\n * all ISO date strings parse into Date objects.\n *\n * @param {Object} input - object, array, or string to convert\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverse(input, strict) {\n  if (strict === undefined) strict = true;\n  if (input && typeof input === 'object') {\n    return traverseObject(input, strict);\n  } else if (Array.isArray(input)) {\n    return traverseArray(input, strict);\n  } else if (isodate.is(input, strict)) {\n    return isodate.parse(input);\n  }\n  return input;\n}\n\n/**\n * Object traverser helper function.\n *\n * @param {Object} obj - object to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverseObject(obj, strict) {\n  Object.keys(obj).forEach(function(key) {\n    obj[key] = traverse(obj[key], strict);\n  });\n  return obj;\n}\n\n/**\n * Array traverser helper function\n *\n * @param {Array} arr - array to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Array}\n */\nfunction traverseArray(arr, strict) {\n  arr.forEach(function(value, index) {\n    arr[index] = traverse(value, strict);\n  });\n  return arr;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvaXNvZGF0ZS10cmF2ZXJzZS9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsY0FBYyxtQkFBTyxDQUFDLDRFQUFrQjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWNvbXBvbmVudHMtcXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2lzb2RhdGUtdHJhdmVyc2UvbGliL2luZGV4LmpzPzE0ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNvZGF0ZSA9IHJlcXVpcmUoJ0BzZWdtZW50L2lzb2RhdGUnKTtcblxuLyoqXG4gKiBFeHBvc2UgYHRyYXZlcnNlYC5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB0cmF2ZXJzZTtcblxuLyoqXG4gKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3Qgb3IgYXJyYXksIGFuZCBjb252ZXJ0XG4gKiBhbGwgSVNPIGRhdGUgc3RyaW5ncyBwYXJzZSBpbnRvIERhdGUgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXQgLSBvYmplY3QsIGFycmF5LCBvciBzdHJpbmcgdG8gY29udmVydFxuICogQHBhcmFtIHtCb29sZWFufSBzdHJpY3QgLSBvbmx5IGNvbnZlcnQgc3RyaW5ncyB3aXRoIHllYXIsIG1vbnRoLCBhbmQgZGF0ZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZShpbnB1dCwgc3RyaWN0KSB7XG4gIGlmIChzdHJpY3QgPT09IHVuZGVmaW5lZCkgc3RyaWN0ID0gdHJ1ZTtcbiAgaWYgKGlucHV0ICYmIHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VPYmplY3QoaW5wdXQsIHN0cmljdCk7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICByZXR1cm4gdHJhdmVyc2VBcnJheShpbnB1dCwgc3RyaWN0KTtcbiAgfSBlbHNlIGlmIChpc29kYXRlLmlzKGlucHV0LCBzdHJpY3QpKSB7XG4gICAgcmV0dXJuIGlzb2RhdGUucGFyc2UoaW5wdXQpO1xuICB9XG4gIHJldHVybiBpbnB1dDtcbn1cblxuLyoqXG4gKiBPYmplY3QgdHJhdmVyc2VyIGhlbHBlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gb2JqZWN0IHRvIHRyYXZlcnNlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHN0cmljdCAtIG9ubHkgY29udmVydCBzdHJpbmdzIHdpdGggeWVhciwgbW9udGgsIGFuZCBkYXRlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlT2JqZWN0KG9iaiwgc3RyaWN0KSB7XG4gIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBvYmpba2V5XSA9IHRyYXZlcnNlKG9ialtrZXldLCBzdHJpY3QpO1xuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBBcnJheSB0cmF2ZXJzZXIgaGVscGVyIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyIC0gYXJyYXkgdG8gdHJhdmVyc2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0IC0gb25seSBjb252ZXJ0IHN0cmluZ3Mgd2l0aCB5ZWFyLCBtb250aCwgYW5kIGRhdGVcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZUFycmF5KGFyciwgc3RyaWN0KSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgIGFycltpbmRleF0gPSB0cmF2ZXJzZSh2YWx1ZSwgc3RyaWN0KTtcbiAgfSk7XG4gIHJldHVybiBhcnI7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/isodate-traverse/lib/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/isodate/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@segment/isodate/lib/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function(iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) {\n    return new Date(iso);\n  }\n\n  /* eslint-disable no-cond-assign */\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n  /* eslint-enable no-cond-assign */\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8] ? (arr[8] + '00').substring(0, 3) : 0;\n\n  // apply timezone if one exists\n  if (arr[4] === ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if (arr[10] === '+') {\n      offset = 0 - offset;\n    }\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function(string, strict) {\n  if (typeof string !== 'string') {\n    return false;\n  }\n  if (strict && (/^\\d{4}-\\d{2}-\\d{2}/).test(string) === false) {\n    return false;\n  }\n  return matcher.test(string);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvaXNvZGF0ZS9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLGtCQUFrQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxHQUFHLHVCQUF1QixFQUFFLFVBQVUsRUFBRTs7QUFFNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7O0FBRUEsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7O0FBRUEsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDcEM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS1jb21wb25lbnRzLXFzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9pc29kYXRlL2xpYi9pbmRleC5qcz9jNGRmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNYXRjaGVyLCBzbGlnaHRseSBtb2RpZmllZCBmcm9tOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jc25vdmVyL2pzLWlzbzg2MDEvYmxvYi9sYXgvaXNvODYwMS5qc1xuICovXG5cbnZhciBtYXRjaGVyID0gL14oXFxkezR9KSg/Oi0/KFxcZHsyfSkoPzotPyhcXGR7Mn0pKT8pPyg/OihbIFRdKShcXGR7Mn0pOj8oXFxkezJ9KSg/Ojo/KFxcZHsyfSkoPzpbLFxcLl0oXFxkezEsfSkpPyk/KD86KFopfChbK1xcLV0pKFxcZHsyfSkoPzo6PyhcXGR7Mn0pKT8pPyk/JC87XG5cbi8qKlxuICogQ29udmVydCBhbiBJU08gZGF0ZSBzdHJpbmcgdG8gYSBkYXRlLiBGYWxsYmFjayB0byBuYXRpdmUgYERhdGUucGFyc2VgLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jc25vdmVyL2pzLWlzbzg2MDEvYmxvYi9sYXgvaXNvODYwMS5qc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpc29cbiAqIEByZXR1cm4ge0RhdGV9XG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKGlzbykge1xuICB2YXIgbnVtZXJpY0tleXMgPSBbMSwgNSwgNiwgNywgMTEsIDEyXTtcbiAgdmFyIGFyciA9IG1hdGNoZXIuZXhlYyhpc28pO1xuICB2YXIgb2Zmc2V0ID0gMDtcblxuICAvLyBmYWxsYmFjayB0byBuYXRpdmUgcGFyc2luZ1xuICBpZiAoIWFycikge1xuICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgLy8gcmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXNcbiAgZm9yICh2YXIgaSA9IDAsIHZhbDsgdmFsID0gbnVtZXJpY0tleXNbaV07IGkrKykge1xuICAgIGFyclt2YWxdID0gcGFyc2VJbnQoYXJyW3ZhbF0sIDEwKSB8fCAwO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblxuICAvLyBhbGxvdyB1bmRlZmluZWQgZGF5cyBhbmQgbW9udGhzXG4gIGFyclsyXSA9IHBhcnNlSW50KGFyclsyXSwgMTApIHx8IDE7XG4gIGFyclszXSA9IHBhcnNlSW50KGFyclszXSwgMTApIHx8IDE7XG5cbiAgLy8gbW9udGggaXMgMC0xMVxuICBhcnJbMl0tLTtcblxuICAvLyBhbGxvdyBhYml0cmFyeSBzdWItc2Vjb25kIHByZWNpc2lvblxuICBhcnJbOF0gPSBhcnJbOF0gPyAoYXJyWzhdICsgJzAwJykuc3Vic3RyaW5nKDAsIDMpIDogMDtcblxuICAvLyBhcHBseSB0aW1lem9uZSBpZiBvbmUgZXhpc3RzXG4gIGlmIChhcnJbNF0gPT09ICcgJykge1xuICAgIG9mZnNldCA9IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfSBlbHNlIGlmIChhcnJbOV0gIT09ICdaJyAmJiBhcnJbMTBdKSB7XG4gICAgb2Zmc2V0ID0gYXJyWzExXSAqIDYwICsgYXJyWzEyXTtcbiAgICBpZiAoYXJyWzEwXSA9PT0gJysnKSB7XG4gICAgICBvZmZzZXQgPSAwIC0gb2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIHZhciBtaWxsaXMgPSBEYXRlLlVUQyhhcnJbMV0sIGFyclsyXSwgYXJyWzNdLCBhcnJbNV0sIGFycls2XSArIG9mZnNldCwgYXJyWzddLCBhcnJbOF0pO1xuICByZXR1cm4gbmV3IERhdGUobWlsbGlzKTtcbn07XG5cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIGBzdHJpbmdgIGlzIGFuIElTTyBkYXRlIHN0cmluZy4gYHN0cmljdGAgbW9kZSByZXF1aXJlcyB0aGF0XG4gKiB0aGUgZGF0ZSBzdHJpbmcgYXQgbGVhc3QgaGF2ZSBhIHllYXIsIG1vbnRoIGFuZCBkYXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmV4cG9ydHMuaXMgPSBmdW5jdGlvbihzdHJpbmcsIHN0cmljdCkge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHN0cmljdCAmJiAoL15cXGR7NH0tXFxkezJ9LVxcZHsyfS8pLnRlc3Qoc3RyaW5nKSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIG1hdGNoZXIudGVzdChzdHJpbmcpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/isodate/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (api);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvbm9kZV9tb2R1bGVzL2pzLWNvb2tpZS9kaXN0L2pzLmNvb2tpZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsRUFBRTtBQUN0QyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQzs7QUFFbEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLHVFQUF1RTtBQUN2RTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBLDZDQUE2QztBQUM3QyxPQUFPO0FBQ1A7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQkFBb0IseUNBQXlDO0FBQzdELG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7O0FBRUEsbUNBQW1DLFdBQVc7QUFDOUM7O0FBRUEsaUVBQWUsR0FBRyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvbm9kZV9tb2R1bGVzL2pzLWNvb2tpZS9kaXN0L2pzLmNvb2tpZS5tanM/MDQ2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEganMtY29va2llIHYzLjAuMSB8IE1JVCAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG5mdW5jdGlvbiBhc3NpZ24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldFxufVxuLyogZXNsaW50LWVuYWJsZSBuby12YXIgKi9cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG52YXIgZGVmYXVsdENvbnZlcnRlciA9IHtcbiAgcmVhZDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlWzBdID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyglW1xcZEEtRl17Mn0pKy9naSwgZGVjb2RlVVJJQ29tcG9uZW50KVxuICB9LFxuICB3cml0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkucmVwbGFjZShcbiAgICAgIC8lKDJbMzQ2QkZdfDNbQUMtRl18NDB8NVtCREVdfDYwfDdbQkNEXSkvZyxcbiAgICAgIGRlY29kZVVSSUNvbXBvbmVudFxuICAgIClcbiAgfVxufTtcbi8qIGVzbGludC1lbmFibGUgbm8tdmFyICovXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXZhciAqL1xuXG5mdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIsIGRlZmF1bHRBdHRyaWJ1dGVzKSB7XG4gIGZ1bmN0aW9uIHNldCAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVzID0gYXNzaWduKHt9LCBkZWZhdWx0QXR0cmlidXRlcywgYXR0cmlidXRlcyk7XG5cbiAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBhdHRyaWJ1dGVzLmV4cGlyZXMgKiA4NjRlNSk7XG4gICAgfVxuICAgIGlmIChhdHRyaWJ1dGVzLmV4cGlyZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgICAucmVwbGFjZSgvJSgyWzM0NkJdfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpXG4gICAgICAucmVwbGFjZSgvWygpXS9nLCBlc2NhcGUpO1xuXG4gICAgdmFyIHN0cmluZ2lmaWVkQXR0cmlidXRlcyA9ICcnO1xuICAgIGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcykge1xuICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnOyAnICsgYXR0cmlidXRlTmFtZTtcblxuICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gQ29uc2lkZXJzIFJGQyA2MjY1IHNlY3Rpb24gNS4yOlxuICAgICAgLy8gLi4uXG4gICAgICAvLyAzLiAgSWYgdGhlIHJlbWFpbmluZyB1bnBhcnNlZC1hdHRyaWJ1dGVzIGNvbnRhaW5zIGEgJXgzQiAoXCI7XCIpXG4gICAgICAvLyAgICAgY2hhcmFjdGVyOlxuICAgICAgLy8gQ29uc3VtZSB0aGUgY2hhcmFjdGVycyBvZiB0aGUgdW5wYXJzZWQtYXR0cmlidXRlcyB1cCB0byxcbiAgICAgIC8vIG5vdCBpbmNsdWRpbmcsIHRoZSBmaXJzdCAleDNCIChcIjtcIikgY2hhcmFjdGVyLlxuICAgICAgLy8gLi4uXG4gICAgICBzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJz0nICsgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS5zcGxpdCgnOycpWzBdO1xuICAgIH1cblxuICAgIHJldHVybiAoZG9jdW1lbnQuY29va2llID1cbiAgICAgIGtleSArICc9JyArIGNvbnZlcnRlci53cml0ZSh2YWx1ZSwga2V5KSArIHN0cmluZ2lmaWVkQXR0cmlidXRlcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldCAoa2V5KSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgKGFyZ3VtZW50cy5sZW5ndGggJiYgIWtleSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcbiAgICAvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC5cbiAgICB2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdO1xuICAgIHZhciBqYXIgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcbiAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGZvdW5kS2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzBdKTtcbiAgICAgICAgamFyW2ZvdW5kS2V5XSA9IGNvbnZlcnRlci5yZWFkKHZhbHVlLCBmb3VuZEtleSk7XG5cbiAgICAgICAgaWYgKGtleSA9PT0gZm91bmRLZXkpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cblxuICAgIHJldHVybiBrZXkgPyBqYXJba2V5XSA6IGphclxuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUoXG4gICAge1xuICAgICAgc2V0OiBzZXQsXG4gICAgICBnZXQ6IGdldCxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykge1xuICAgICAgICBzZXQoXG4gICAgICAgICAga2V5LFxuICAgICAgICAgICcnLFxuICAgICAgICAgIGFzc2lnbih7fSwgYXR0cmlidXRlcywge1xuICAgICAgICAgICAgZXhwaXJlczogLTFcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIHdpdGhBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gaW5pdCh0aGlzLmNvbnZlcnRlciwgYXNzaWduKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMpKVxuICAgICAgfSxcbiAgICAgIHdpdGhDb252ZXJ0ZXI6IGZ1bmN0aW9uIChjb252ZXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGluaXQoYXNzaWduKHt9LCB0aGlzLmNvbnZlcnRlciwgY29udmVydGVyKSwgdGhpcy5hdHRyaWJ1dGVzKVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgYXR0cmlidXRlczogeyB2YWx1ZTogT2JqZWN0LmZyZWV6ZShkZWZhdWx0QXR0cmlidXRlcykgfSxcbiAgICAgIGNvbnZlcnRlcjogeyB2YWx1ZTogT2JqZWN0LmZyZWV6ZShjb252ZXJ0ZXIpIH1cbiAgICB9XG4gIClcbn1cblxudmFyIGFwaSA9IGluaXQoZGVmYXVsdENvbnZlcnRlciwgeyBwYXRoOiAnLycgfSk7XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXZhciAqL1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (api);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvbm9kZV9tb2R1bGVzL2pzLWNvb2tpZS9kaXN0L2pzLmNvb2tpZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsRUFBRTtBQUN0QyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQzs7QUFFbEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLHVFQUF1RTtBQUN2RTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBLDZDQUE2QztBQUM3QyxPQUFPO0FBQ1A7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQkFBb0IseUNBQXlDO0FBQzdELG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7O0FBRUEsbUNBQW1DLFdBQVc7QUFDOUM7O0FBRUEsaUVBQWUsR0FBRyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWktY29tcG9uZW50cy1xcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvbm9kZV9tb2R1bGVzL2pzLWNvb2tpZS9kaXN0L2pzLmNvb2tpZS5tanM/NTJmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEganMtY29va2llIHYzLjAuMSB8IE1JVCAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG5mdW5jdGlvbiBhc3NpZ24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldFxufVxuLyogZXNsaW50LWVuYWJsZSBuby12YXIgKi9cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG52YXIgZGVmYXVsdENvbnZlcnRlciA9IHtcbiAgcmVhZDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlWzBdID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyglW1xcZEEtRl17Mn0pKy9naSwgZGVjb2RlVVJJQ29tcG9uZW50KVxuICB9LFxuICB3cml0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkucmVwbGFjZShcbiAgICAgIC8lKDJbMzQ2QkZdfDNbQUMtRl18NDB8NVtCREVdfDYwfDdbQkNEXSkvZyxcbiAgICAgIGRlY29kZVVSSUNvbXBvbmVudFxuICAgIClcbiAgfVxufTtcbi8qIGVzbGludC1lbmFibGUgbm8tdmFyICovXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXZhciAqL1xuXG5mdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIsIGRlZmF1bHRBdHRyaWJ1dGVzKSB7XG4gIGZ1bmN0aW9uIHNldCAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVzID0gYXNzaWduKHt9LCBkZWZhdWx0QXR0cmlidXRlcywgYXR0cmlidXRlcyk7XG5cbiAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBhdHRyaWJ1dGVzLmV4cGlyZXMgKiA4NjRlNSk7XG4gICAgfVxuICAgIGlmIChhdHRyaWJ1dGVzLmV4cGlyZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgICAucmVwbGFjZSgvJSgyWzM0NkJdfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpXG4gICAgICAucmVwbGFjZSgvWygpXS9nLCBlc2NhcGUpO1xuXG4gICAgdmFyIHN0cmluZ2lmaWVkQXR0cmlidXRlcyA9ICcnO1xuICAgIGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcykge1xuICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnOyAnICsgYXR0cmlidXRlTmFtZTtcblxuICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gQ29uc2lkZXJzIFJGQyA2MjY1IHNlY3Rpb24gNS4yOlxuICAgICAgLy8gLi4uXG4gICAgICAvLyAzLiAgSWYgdGhlIHJlbWFpbmluZyB1bnBhcnNlZC1hdHRyaWJ1dGVzIGNvbnRhaW5zIGEgJXgzQiAoXCI7XCIpXG4gICAgICAvLyAgICAgY2hhcmFjdGVyOlxuICAgICAgLy8gQ29uc3VtZSB0aGUgY2hhcmFjdGVycyBvZiB0aGUgdW5wYXJzZWQtYXR0cmlidXRlcyB1cCB0byxcbiAgICAgIC8vIG5vdCBpbmNsdWRpbmcsIHRoZSBmaXJzdCAleDNCIChcIjtcIikgY2hhcmFjdGVyLlxuICAgICAgLy8gLi4uXG4gICAgICBzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJz0nICsgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS5zcGxpdCgnOycpWzBdO1xuICAgIH1cblxuICAgIHJldHVybiAoZG9jdW1lbnQuY29va2llID1cbiAgICAgIGtleSArICc9JyArIGNvbnZlcnRlci53cml0ZSh2YWx1ZSwga2V5KSArIHN0cmluZ2lmaWVkQXR0cmlidXRlcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldCAoa2V5KSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgKGFyZ3VtZW50cy5sZW5ndGggJiYgIWtleSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcbiAgICAvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC5cbiAgICB2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdO1xuICAgIHZhciBqYXIgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcbiAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGZvdW5kS2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzBdKTtcbiAgICAgICAgamFyW2ZvdW5kS2V5XSA9IGNvbnZlcnRlci5yZWFkKHZhbHVlLCBmb3VuZEtleSk7XG5cbiAgICAgICAgaWYgKGtleSA9PT0gZm91bmRLZXkpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cblxuICAgIHJldHVybiBrZXkgPyBqYXJba2V5XSA6IGphclxuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUoXG4gICAge1xuICAgICAgc2V0OiBzZXQsXG4gICAgICBnZXQ6IGdldCxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykge1xuICAgICAgICBzZXQoXG4gICAgICAgICAga2V5LFxuICAgICAgICAgICcnLFxuICAgICAgICAgIGFzc2lnbih7fSwgYXR0cmlidXRlcywge1xuICAgICAgICAgICAgZXhwaXJlczogLTFcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIHdpdGhBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gaW5pdCh0aGlzLmNvbnZlcnRlciwgYXNzaWduKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMpKVxuICAgICAgfSxcbiAgICAgIHdpdGhDb252ZXJ0ZXI6IGZ1bmN0aW9uIChjb252ZXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGluaXQoYXNzaWduKHt9LCB0aGlzLmNvbnZlcnRlciwgY29udmVydGVyKSwgdGhpcy5hdHRyaWJ1dGVzKVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgYXR0cmlidXRlczogeyB2YWx1ZTogT2JqZWN0LmZyZWV6ZShkZWZhdWx0QXR0cmlidXRlcykgfSxcbiAgICAgIGNvbnZlcnRlcjogeyB2YWx1ZTogT2JqZWN0LmZyZWV6ZShjb252ZXJ0ZXIpIH1cbiAgICB9XG4gIClcbn1cblxudmFyIGFwaSA9IGluaXQoZGVmYXVsdENvbnZlcnRlciwgeyBwYXRoOiAnLycgfSk7XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXZhciAqL1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-next/node_modules/js-cookie/dist/js.cookie.mjs\n");

/***/ })

};
;